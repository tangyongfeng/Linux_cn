<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在 Windows 操作系统中运行 Docker 客户端</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Arun Pyasi 大家好，今天我们来了解一下 Windows 操作系统中的 Docker 以及在其中安装 Docker Windows 客户端的知识。Docker 引擎使用 Linux 特有的内核特 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li class="active"><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2015/06/ru-he-zai-windows-cao-zuo-xi-tong-zhong-yun-xing-docker-ke-hu-duan.html" rel="bookmark"
           title="Permalink to 如何在 Windows 操作系统中运行 Docker 客户端">如何在 Windows 操作系统中运行 Docker 客户端</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-06-08T09:06:00+02:00">
                Published: Mon 08 June 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xi-tong-yun-wei">系统运维</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Arun Pyasi</p>
<p>大家好，今天我们来了解一下 Windows 操作系统中的 Docker 以及在其中安装 Docker Windows 客户端的知识。Docker 引擎使用 Linux 特有的内核特性，因此不能通过 Windows 内核运行，所以，（在 Windows 上）Docker 引擎创建了一个小的虚拟系统运行 Linux 并利用它的资源和内核。这样，Windows Docker 客户端就可以用这个虚拟的 Docker 引擎来构建、运行以及管理 Docker 容器。有个叫 Boot2Docker 的团队开发了一个同名的应用程序，它创建了一个虚拟机来运行基于<a href="http://tinycorelinux.net/">Tiny Core Linux</a>特制的小型 Linux，来在 Windows 上运行 <a href="https://www.docker.io/">Docker</a> 容器。它完全运行在内存中，需要大约 27M 内存并能在 5秒 (因人而异) 内启动。因此，在用于 Windows 的 Docker 引擎被开发出来之前，我们在 Windows 机器里只能运行 Linux 容器。</p>
<p><img alt="" src="/data/attachment/album/201506/07/091122do2vyqo12hhyl7la.jpg"></p>
<p>下面是安装 Docker 客户端并在上面运行容器的简单步骤。</p>
<h3>1. 下载 Boot2Docker</h3>
<p>在我们开始安装之前，我们需要 Boot2Docker 的可执行文件。可以从 <a href="https://github.com/boot2docker/windows-installer/releases/latest">它的 Github</a> 下载最新版本的 Boot2Docker。在这篇指南中，我们从网站中下载版本 v1.6.1。我们从那网页中用我们喜欢的浏览器或者下载管理器下载了名为 <a href="https://github.com/boot2docker/windows-installer/releases/download/v1.6.1/docker-install.exe">docker-install.exe</a> 的文件。</p>
<p><img alt="" src="/data/attachment/album/201506/07/091124gyhf3xifxeprferx.png"></p>
<h3>2. 安装 Boot2Docker</h3>
<p>现在我们运行安装文件，它会安装 Window Docker 客户端、用于 Windows 的 Git(MSYS-git)、VirtualBox、Boot2Docker Linux ISO 以及 Boot2Docker 管理工具，这些对于开箱即用地运行全功能的 Docker 引擎都至关重要。</p>
<p><img alt="" src="/data/attachment/album/201506/07/091125wowt8ywzymmosffc.png"></p>
<h3>3. 运行 Boot2Docker</h3>
<p><img alt="" src="/data/attachment/album/201506/07/091125a8edqcrcpwd2dnwp.png"></p>
<p>安装完成必要的组件之后，我们从桌面上的“Boot2Docker Start”快捷方式启动 Boot2Docker。它会要求你输入以后用于验证的 SSH 密钥。然后会启动一个配置好的用于管理在虚拟机中运行的 Docker 的 unix shell。</p>
<p><img alt="" src="/data/attachment/album/201506/07/091126xjl93t1mlh3mq4tq.png"></p>
<p>为了检查是否正确配置，运行下面的 docker version 命令。</p>
<div class="highlight"><pre><span></span><code>docker version
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201506/07/091126ldaptrty5aat444r.png"></p>
<h3>4. 运行 Docker</h3>
<p>由于 <strong>Boot2Docker Start</strong> 自动启动了一个已经正确设置好环境变量的 shell，我们可以马上开始使用 Docker。<strong>请注意，如果我们要将 Boot2Docker 作为一个远程 Docker 守护进程，那么不要在 docker 命令之前加 sudo。</strong></p>
<p>现在，让我们来试试 <strong>hello-world</strong> 例子镜像，它会下载 hello-world 镜像，运行并输出 "Hello from Docker" 信息。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>hello-world
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201506/07/091127i3765z4rzwwryv6m.png"></p>
<h3>5. 使用命令提示符(CMD) 运行 Docker</h3>
<p>现在，如果你想开始用命令提示符使用 Docker，你可以打开命令提示符(CMD.exe)。由于 Boot2Docker 要求 ssh.exe 在 PATH 中，我们需要在命令提示符中输入以下命令使得 %PATH% 环境变量中包括 Git 安装目录下的 bin 文件夹。</p>
<div class="highlight"><pre><span></span><code>set PATH=%PATH%;&quot;c:\Program Files (x86)\Git\bin&quot;
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201506/07/091127kbp1kn1upooz5zjk.png"></p>
<p>运行上面的命令之后，我们可以在命令提示符中运行 <strong>boot2docker start</strong> 启动 Boot2Docker 虚拟机。</p>
<div class="highlight"><pre><span></span><code>boot2docker start
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201506/07/091128nvky8s5yypaaveyj.png"></p>
<p><strong>注意</strong>: 如果你看到 machine does no exist 的错误信息，就运行 <strong>boot2docker init</strong> 命令。</p>
<p>然后复制上图中控制台标出命令到 cmd.exe 中为控制台窗口设置环境变量，然后我们就可以像平常一样运行 docker 容器了。</p>
<h3>6. 使用 PowerShell 运行 Docker</h3>
<p>为了能在 PowerShell 中运行 Docker，我们需要启动一个 PowerShell 窗口并添加 ssh.exe 到 PATH 变量。</p>
<div class="highlight"><pre><span></span><code><span class="nv">$Env</span>:Path<span class="w"> </span>=<span class="w"> </span>&quot;<span class="cp">${</span><span class="n">Env</span><span class="p">:</span><span class="n">Path</span><span class="cp">}</span>;c:\Program<span class="w"> </span>Files<span class="w"> </span>(x86)\Git\bin&quot;
</code></pre></div>

<p>运行完上面的命令，我们还需要运行</p>
<div class="highlight"><pre><span></span><code>boot2docker start
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201506/07/091128ort884a85j9ggjgc.png"></p>
<p>这会打印用于设置环境变量连接到虚拟机内部运行的 Docker 的 PowerShell 命令。我们只需要在 PowerShell 中运行这些命令就可以和平常一样运行 docker 容器。</p>
<h3>7. 用 PUTTY 登录</h3>
<p>Boot2Docker 会在%USERPROFILE%.ssh 目录生成和使用用于登录的公共和私有密钥，我们也需要使用这个文件夹中的私有密钥。私有密钥需要转换为 PuTTY 的格式。我们可以通过 puttygen.exe 实现。</p>
<p>我们需要打开 puttygen.exe 并从 %USERPROFILE%.ssh\id_boot2docker 中导入("File"-&gt;"Load" 菜单)私钥，然后点击 "Save Private Key"。然后用保存的文件通过 PuTTY 用 <a href="mailto:docker@127.0.0.1">docker@127.0.0.1</a>:2022 登录。</p>
<h3>8. Boot2Docker 选项</h3>
<p>Boot2Docker 管理工具提供了一些命令，如下所示。</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">boot2docker</span>

<span class="n">Usage</span><span class="p">:</span><span class="w"> </span><span class="n">boot2docker</span><span class="o">.</span><span class="n">exe</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="n">options</span><span class="o">&gt;</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="n">help</span><span class="o">|</span><span class="n">init</span><span class="o">|</span><span class="n">up</span><span class="o">|</span><span class="n">ssh</span><span class="o">|</span><span class="n">save</span><span class="o">|</span><span class="n">down</span><span class="o">|</span><span class="n">poweroff</span><span class="o">|</span><span class="n">reset</span><span class="o">|</span><span class="n">restart</span><span class="o">|</span><span class="n">config</span><span class="o">|</span><span class="n">status</span><span class="o">|</span><span class="n">info</span><span class="o">|</span><span class="n">ip</span><span class="o">|</span><span class="n">shellinit</span><span class="o">|</span><span class="n">delete</span><span class="o">|</span><span class="n">download</span><span class="o">|</span><span class="n">upgrade</span><span class="o">|</span><span class="n">version</span><span class="p">}</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span><span class="p">]</span>
</code></pre></div>

<h3>总结</h3>
<p>通过 Docker Windows 客户端使用 Docker 很有趣。Boot2Docker 管理工具是一个能使任何 Docker 容器能像在 Linux 主机上平滑运行的很棒的应用程序。如果你更仔细的话，你会发现 boot2docker 默认用户的用户名是 docker，密码是 tcuser。最新版本的 boot2docker 设置了一个 host-only 的网络适配器提供访问容器的端口。一般来说是 192.168.59.103，但可以通过 VirtualBox 的 DHCP 实现改变。</p>
<p>如果你有任何问题、建议、反馈，请在下面的评论框中写下来然后我们可以改进或者更新我们的内容。非常感谢！Enjoy:-)</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>