<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>27 个 Linux 下软件包管理工具 DNF 命令例子</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Avishek Kumar DNF即Dandified YUM，是基于RPM的Linux发行版的下一代软件包管理工具。它首先在Fedora 18中出现，并且在最近发行的Fedora 22中替代了YUM工具集。..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2015/06/27-ge-linux-xia-ruan-jian-bao-guan-li-gong-ju-dnf-ming-ling-li-zi.html" rel="bookmark"
           title="Permalink to 27 个 Linux 下软件包管理工具 DNF 命令例子">27 个 Linux 下软件包管理工具 DNF 命令例子</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-06-29T14:34:00+02:00">
                Published: Mon 29 June 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Avishek Kumar</p>
<p>DNF即Dandified YUM，是基于RPM的Linux发行版的下一代软件包管理工具。它首先在Fedora 18中出现，并且在最近发行的Fedora 22中替代了<a href="http://www.tecmint.com/20-linux-yum-yellowdog-updater-modified-commands-for-package-mangement/">YUM工具集</a>。</p>
<p><img alt="" src="/data/attachment/album/201506/28/233921grqz2zxxqqe6fqe6.jpg"></p>
<p>DNF致力于改善YUM的瓶颈，即性能、内存占用、依赖解决、速度和许多其他方面。DNF使用RPM、libsolv和hawkey库进行包管理。尽管它并未预装在CentOS和RHEL 7中，但您可以通过yum安装，并同时使用二者。</p>
<p>您也许想阅读更多关于DNF的信息：</p>
<ul>
<li><a href="http://www.tecmint.com/dnf-next-generation-package-management-utility-for-linux/">使用DNF取代Yum背后的原因</a></li>
</ul>
<p>最新的DNF稳定版本是2015年5月11日发布的1.0（在写这篇文章之前）。它（以及所有DNF之前版本）主要由Python编写，并以GPL v2许可证发布。</p>
<h3>安装DNF</h3>
<p>尽管Fedora 22官方已经过渡到了DNF，但DNF并不在RHEL/CentOS 7的默认仓库中。</p>
<p>为了在RHEL/CentOS系统中安装DNF，您需要首先安装和开启epel-release仓库。</p>
<div class="highlight"><pre><span></span><code># yum install epel-release
或
# yum install epel-release -y
</code></pre></div>

<p>尽管并不建议在使用yum时添上'-y'选项，因为最好还是看看什么将安装在您的系统中。但如果您对此并不在意，则您可以使用'-y'选项以自动化的安装而无需用户干预。</p>
<p>接下来，使用yum命令从epel-realease仓库安装DNF包。</p>
<div class="highlight"><pre><span></span><code># yum install dnf
</code></pre></div>

<p>在您装完dnf后，我会向您展示27个实用的dnf命令和例子，以便帮您更容易和高效的管理基于RPM包的发行版。</p>
<h3>1. 检查DNF版本</h3>
<p>检查您的系统上安装的DNF版本。</p>
<div class="highlight"><pre><span></span><code># dnf --version
</code></pre></div>

<p><img alt="检查DNF版本" src="/data/attachment/album/201506/28/233922bkxgilk7iiygl3t1.gif"></p>
<h3>2. 列出启用的DNF仓库</h3>
<p>dnf命令中的'repolist'选项将显示您系统中所有启用的仓库。</p>
<div class="highlight"><pre><span></span><code># dnf repolist
</code></pre></div>

<p><img alt="检查所有开启的仓库" src="/data/attachment/album/201506/28/233922sx5uyeu1u5xfjc58.gif"></p>
<h3>3. 列出所有启用和禁用的DNF仓库</h3>
<p>'repolist all'选项将显示您系统中所有启用/禁用的仓库。</p>
<div class="highlight"><pre><span></span><code># dnf repolist all
</code></pre></div>

<p><img alt="列出所有启用/禁用的仓库" src="/data/attachment/album/201506/28/233923q847agnzwekn47z9.gif"></p>
<h3>4. 用DNF列出所有可用的且已安装的软件包</h3>
<p>'dnf list'命令将列出所有仓库中所有可用的软件包和您Linux系统中已安装的软件包。</p>
<div class="highlight"><pre><span></span><code># dnf list
</code></pre></div>

<p><img alt="用DNF列出所有的软件包" src="/data/attachment/album/201506/28/233923vnc4hclwwe4c014z.png"></p>
<h3>5. 用DNF列出所有已安装的软件包</h3>
<p>尽管'dnf list'命令将列出所有仓库中所有可用的软件包和已安装的软件包。然而像下面一样使用'list installed'选项将只列出已安装的软件包。</p>
<div class="highlight"><pre><span></span><code># dnf list installed
</code></pre></div>

<p><img alt="列出已安装的软件包" src="/data/attachment/album/201506/28/233924gd6zcwldhlehkldm.png"></p>
<h3>6. 用DNF列出所有可用的软件包</h3>
<p>类似的，可以用'list available'选项列出所有开启的仓库中所有可用的软件包。</p>
<div class="highlight"><pre><span></span><code># dnf list available
</code></pre></div>

<p><img alt="用DNF列出可用的软件包" src="/data/attachment/album/201506/28/233926v9a99xgb15w7gxzx.png"></p>
<h3>7. 使用DNF查找软件包</h3>
<p>如果您不太清楚您想安装的软件包的名字，这种情况下，您可以使用'search'选项来搜索匹配该字符（例如，nano）和字符串的软件包。</p>
<div class="highlight"><pre><span></span><code># dnf search nano
</code></pre></div>

<p><img alt="通过关键字搜索软件包" src="/data/attachment/album/201506/28/233927zho6agohaovf56ss.gif"></p>
<h3>8. 查看哪个软件包提供了某个文件/子软件包？</h3>
<p>dnf的选项'provides'能查找提供了某个文件/子软件包的软件包名。例如，如果您想找找哪个软件包提供了您系统中的'/bin/bash'文件，可以使用下面的命令</p>
<div class="highlight"><pre><span></span><code># dnf provides /bin/bash
</code></pre></div>

<p><img alt="查找提供文件的软件包" src="/data/attachment/album/201506/28/233927n7a952s99lj8v7s7.gif"></p>
<h3>9. 使用DNF获得一个软件包的详细信息</h3>
<p>如果您想在安装一个软件包前知道它的详细信息，您可以使用'info'来获得一个软件包的详细信息，例如：</p>
<div class="highlight"><pre><span></span><code># dnf info nano
</code></pre></div>

<p><img alt="用DNF查看软件信息" src="/data/attachment/album/201506/28/233928rjdo34w2adj7b22j.gif"></p>
<h3>10. 使用DNF安装软件包</h3>
<p>想安装一个叫nano的软件包，只需运行下面的命令，它会为nano自动的解决和安装所有的依赖。</p>
<div class="highlight"><pre><span></span><code># dnf install nano
</code></pre></div>

<p><img alt="用DNF安装软件" src="/data/attachment/album/201506/28/233930t12ja8txf6s6m8a1.gif"></p>
<h3>11. 使用DNF更新一个软件包</h3>
<p>您可能只想更新一个特定的包（例如，systemd）并且保留系统内剩余软件包不变。</p>
<div class="highlight"><pre><span></span><code># dnf update systemd
</code></pre></div>

<p><img alt="更新一个软件包" src="/data/attachment/album/201506/28/233932mmeppqzc8ch3ccly.gif"></p>
<h3>12. 使用DNF检查系统更新</h3>
<p>检查系统中安装的所有软件包的更新可以简单的使用如下命令：</p>
<div class="highlight"><pre><span></span><code># dnf check-update
</code></pre></div>

<p><img alt="检查系统更新" src="/data/attachment/album/201506/28/233938juu6sq78xahr56vz.gif"></p>
<h3>13. 使用DNF更新系统中所有的软件包</h3>
<p>您可以使用下面的命令来更新整个系统中所有已安装的软件包。</p>
<div class="highlight"><pre><span></span><code># dnf update
或
# dnf upgrade
</code></pre></div>

<p><img alt="更新系统" src="/data/attachment/album/201506/28/233940gdtstvpzl0lypnnt.gif"></p>
<h3>14. 使用DNF来移除/删除一个软件包</h3>
<p>您可以在dnf命令中使用'remove'或'erase'选项来移除任何不想要的软件包。</p>
<div class="highlight"><pre><span></span><code># dnf remove nano
或
# dnf erase nano
</code></pre></div>

<p><img alt="移除系统中的软件" src="/data/attachment/album/201506/28/233941quqdv5syuslivvks.gif"></p>
<h3>15. 使用DNF移除于依赖无用的软件包（Orphan Packages）</h3>
<p>这些为了满足依赖安装的软件包在相应的程序删除后便不再需要了。可以用过下面的命令来将它们删除。</p>
<div class="highlight"><pre><span></span><code># dnf autoremove
</code></pre></div>

<p><img alt="移除无用的依赖包" src="/data/attachment/album/201506/28/233942mwbgfrwf7sf7d0fi.gif"></p>
<h3>16. 使用DNF移除缓存的软件包</h3>
<p>我们在使用dnf时经常会碰到过期的头部信息和不完整的事务，它们会导致错误。我们可以使用下面的语句清理缓存的软件包和包含远程包信息的头部信息。</p>
<div class="highlight"><pre><span></span><code># dnf clean all
</code></pre></div>

<p><img alt="移除DNF缓存" src="/data/attachment/album/201506/28/233942bz8u7q8qnuh9t57q.gif"></p>
<h3>17. 获得特定DNF命令的帮助</h3>
<p>您可能需要特定的DNF命令的帮助（例如，clean），可以通过下面的命令来得到：</p>
<div class="highlight"><pre><span></span><code># dnf help clean
</code></pre></div>

<p><img alt="获得某一命令帮助" src="/data/attachment/album/201506/28/233943tmt23zltmfome8h2.gif"></p>
<h3>18. 列出所有DNF的命令和选项</h3>
<p>要显示所有dnf的命令和选项，只需要：</p>
<div class="highlight"><pre><span></span><code># dnf help
</code></pre></div>

<p><img alt="获得命令选项帮助" src="/data/attachment/album/201506/28/233945oafaz2arraav2823.gif"></p>
<h3>19. 查看DNF的历史记录</h3>
<p>您可以调用'dnf history'来查看已经执行过的dnf命令的列表。这样您便可以知道什么被安装/移除及其时间戳。</p>
<div class="highlight"><pre><span></span><code># dnf history
</code></pre></div>

<p><img alt="查看历史记录" src="/data/attachment/album/201506/28/233947hku2yykmxsoyvy8y.gif"></p>
<h3>20. 显示所有软件包组</h3>
<p>'dnf grouplist'命令可以显示所有可用的或已安装的软件包，如果没有什么输出，则它会列出所有已知的软件包组。</p>
<div class="highlight"><pre><span></span><code># dnf grouplist
</code></pre></div>

<p><img alt="列出所有软件包组" src="/data/attachment/album/201506/28/233948xx75wl6skt9be00l.gif"></p>
<h3>21. 使用DNF安装一个软件包组</h3>
<p>要安装一组由许多软件打包在一起的软件包组（例如，Educational Softaware），只需要执行：</p>
<div class="highlight"><pre><span></span><code># dnf groupinstall &#39;Educational Software&#39;
</code></pre></div>

<p><img alt="安装一个软件包组" src="/data/attachment/album/201506/28/233949dglgg7xw1ziwgi6k.gif"></p>
<h3>22. 更新一个软件包组</h3>
<p>可以通过下面的命令来更新一个软件包组（例如，Educational Software）：</p>
<div class="highlight"><pre><span></span><code># dnf groupupdate &#39;Educational Software&#39;
</code></pre></div>

<p><img alt="更新软件包组" src="/data/attachment/album/201506/28/233950fig4bjr4ipewpmtu.gif"></p>
<h3>23. 移除一个软件包组</h3>
<p>可以使用下面的命令来移除一个软件包组（例如，Educational Software）：</p>
<div class="highlight"><pre><span></span><code># dnf groupremove &#39;Educational Software&#39;
</code></pre></div>

<p><img alt="移除软件包组" src="/data/attachment/album/201506/28/233951vuuwqtdz3d9drod9.gif"></p>
<h3>24. 从某个特定的仓库安装一个软件包</h3>
<p>DNF可以从任何特定的仓库（比如 epel）安装一个软件包（例如，phpmyadmin）：</p>
<div class="highlight"><pre><span></span><code># dnf --enablerepo=epel install phpmyadmin
</code></pre></div>

<p><img alt="从特定的仓库安装软件" src="/data/attachment/album/201506/28/234002gu4a1mvblhhcvuvm.gif"></p>
<h3>25. 将已安装的软件包同步到稳定发行版</h3>
<p>'dnf distro-sync'将同步所有已安装的软件包到所有开启的仓库中最近的稳定版本。如果没有选择软件包，则会同步所有已安装的软件包。</p>
<div class="highlight"><pre><span></span><code># dnf distro-sync
</code></pre></div>

<p><img alt="将包同步至稳定版" src="/data/attachment/album/201506/28/234004gr3agv0av35jgr3v.gif"></p>
<h3>26. 重新安装一个软件包</h3>
<p>'dnf reinstall nano'命令将重新安装一个已经安装的软件包（例如，nano）：</p>
<div class="highlight"><pre><span></span><code># dnf reinstall nano
</code></pre></div>

<p><img alt="重新安装软件包" src="/data/attachment/album/201506/28/234005siykgrrryy9rydkr.gif"></p>
<h3>27. 降级一个软件包</h3>
<p>选项'downgrade'将会使一个软件包（例如，acpid）回退到低版本。</p>
<div class="highlight"><pre><span></span><code># dnf downgrade acpid
</code></pre></div>

<p>示例输出</p>
<div class="highlight"><pre><span></span><code><span class="nx">Using</span><span class="w"> </span><span class="nx">metadata</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">Wed</span><span class="w"> </span><span class="nx">May</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">59</span><span class="w"> </span><span class="mi">2015</span>
<span class="nx">No</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">available</span><span class="w"> </span><span class="kn">package</span><span class="p">:</span><span class="w"> </span><span class="nx">acpid</span><span class="o">-</span><span class="m m-Double">2.0.19</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="nx">el7</span><span class="p">.</span><span class="nx">x86_64</span>
<span class="nx">Error</span><span class="p">:</span><span class="w"> </span><span class="nx">Nothing</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">do</span><span class="p">.</span>
</code></pre></div>

<p><strong>我观察到</strong>：dnf不会按预想的那样降级一个软件包。这已做为一个bug被提交。</p>
<h3>结论</h3>
<p>DNF是YUM管理器的优秀替代品。它试着自动做许多甚至不推荐有经验的Linux系统管理员做的工作。例如：</p>
<ul>
<li><code>--skip-broken</code>不被DNF识别，并且DNF中没有其替代命令。</li>
<li>尽管您可能会运行dnf provides，但再也没有'resolvedep'命令了。</li>
<li>没有'deplist'命令用来发现软件包依赖。</li>
<li>您排除一个仓库意味着在所有操作上排除该仓库，而在yum中，排除一个仓库只在安装和升级等时刻排除他们。</li>
</ul>
<p>许多Linux用户对于Linux生态系统的走向不甚满意。首先<a href="http://www.tecmint.com/systemd-replaces-init-in-linux/">Systemd替换了init系统</a>v，现在DNF将于不久后替换YUM，首先是Fedora 22，接下来是RHEL和CentOS。</p>
<p>您怎么看呢？是不是发行版和整个Linux生态系统并不注重用户并且在朝着与用户愿望相悖的方向前进呢？IT行业里有这样一句话 - “如果没有坏，为什么要修呢？”，System V和YUM都没有坏。</p>
<p>上面便是这篇文章的全部了。请在下方留言以让我了解您的宝贵想法。点赞和分享以帮助我们传播。谢谢！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>