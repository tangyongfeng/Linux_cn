<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在Ubuntu 15.04中安装Ruby on Rails</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Obet 本篇我们会学习如何用rbenv在Ubuntu 15.04中安装Ruby on Rails。我们选择Ubuntu作为操作系统是因为Ubuntu是Linux发行版中自带很多包和完整文档的操作系统，因此我认为这是正确的选择。如果你还没有安装最新的Ubuntu，你可以从 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2015/07/zai-ubuntu-1504zhong-an-zhuang-ruby-on-rails.html" rel="bookmark"
           title="Permalink to 在Ubuntu 15.04中安装Ruby on Rails">在Ubuntu 15.04中安装Ruby on Rails</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-07-14T17:50:00+02:00">
                Published: Tue 14 July 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Obet</p>
<p>本篇我们会学习如何用rbenv在Ubuntu 15.04中安装Ruby on Rails。我们选择Ubuntu作为操作系统是因为Ubuntu是Linux发行版中自带很多包和完整文档的操作系统，因此我认为这是正确的选择。如果你还没有安装最新的Ubuntu，你可以从<a href="http://release.ubuntu.com/15.04">下载iso文件</a>开始。</p>
<h3>安装 Ruby</h3>
<p>我们要做的第一件事是更新Ubuntu包并且为Ruby安装一些依赖。</p>
<div class="highlight"><pre><span></span><code>sudo apt-get update
sudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties libffi-dev
</code></pre></div>

<p>有三种方法来安装Ruby：rbenv、rvm和从源码安装。每种都有各自的好处，但是近来开发者们更倾向使用rbenv而不是rvm和源码来安装。我们将安装最新的Ruby版本，2.2.2。</p>
<p>用rbenv来安装只有简单的两步。第一步安装rbenv，接着是ruby-build：</p>
<div class="highlight"><pre><span></span><code><span class="n">cd</span>
<span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sstephenson</span><span class="o">/</span><span class="n">rbenv</span><span class="o">.</span><span class="n">git</span><span class="w"> </span><span class="o">.</span><span class="n">rbenv</span>
<span class="n">echo</span><span class="w"> </span><span class="s1">&#39;eval &quot;$(rbenv init -)&quot;&#39;</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">~/.</span><span class="n">bashrc</span>
<span class="n">exec</span><span class="w"> </span><span class="o">$</span><span class="n">SHELL</span>

<span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sstephenson</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="n">build</span><span class="o">.</span><span class="n">git</span><span class="w"> </span><span class="o">~/.</span><span class="n">rbenv</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="n">build</span>
<span class="n">echo</span><span class="w"> </span><span class="s1">&#39;export PATH=&quot;$HOME/.rbenv/plugins/ruby-build/bin:$PATH&quot;&#39;</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">~/.</span><span class="n">bashrc</span>
<span class="n">exec</span><span class="w"> </span><span class="o">$</span><span class="n">SHELL</span>

<span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sstephenson</span><span class="o">/</span><span class="n">rbenv</span><span class="o">-</span><span class="n">gem</span><span class="o">-</span><span class="n">rehash</span><span class="o">.</span><span class="n">git</span><span class="w"> </span><span class="o">~/.</span><span class="n">rbenv</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">rbenv</span><span class="o">-</span><span class="n">gem</span><span class="o">-</span><span class="n">rehash</span>

<span class="n">rbenv</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="mf">2.2</span><span class="o">.</span><span class="mi">2</span>
<span class="n">rbenv</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="mf">2.2</span><span class="o">.</span><span class="mi">2</span>
<span class="n">ruby</span><span class="w"> </span><span class="o">-</span><span class="n">v</span>
</code></pre></div>

<p>我们需要安装Bundler，但是我们要在安装之前告诉rubygems不要为每个包安装本地文档。</p>
<div class="highlight"><pre><span></span><code>echo &quot;gem: --no-ri --no-rdoc&quot; &gt; ~/.gemrc
gem install bundler
</code></pre></div>

<h3>配置 GIT</h3>
<p>配置git之前，你要创建一个github账号，你可以注册一个<a href="http://github.com">github 账号</a>。我们需要git作为版本控制系统，因此我们要设置它来匹配github账号。</p>
<p>用户的github账号来替换下面的<strong>Name</strong> 和 <strong>Email address</strong> 。</p>
<div class="highlight"><pre><span></span><code><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="k">global</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="n">ui</span><span class="w"> </span><span class="k">true</span>
<span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="k">global</span><span class="w"> </span><span class="k">user</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="ss">&quot;YOUR NAME&quot;</span>
<span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="k">global</span><span class="w"> </span><span class="k">user</span><span class="p">.</span><span class="n">email</span><span class="w"> </span><span class="ss">&quot;YOUR@EMAIL.com&quot;</span>
<span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">rsa</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="ss">&quot;YOUR@EMAIL.com&quot;</span>
</code></pre></div>

<p>接下来用新生成的ssh key添加到github账号中。这样你需要复制下面命令的输出并<a href="https://github.com/settings/ssh">粘贴在Github的设置页面里面</a>。</p>
<div class="highlight"><pre><span></span><code>cat ~/.ssh/id_rsa.pub
</code></pre></div>

<p>如果你做完了，检查是否已经成功。</p>
<div class="highlight"><pre><span></span><code><span class="n">ssh</span><span class="w"> </span><span class="o">-</span><span class="n">T</span><span class="w"> </span><span class="n">git</span><span class="nv">@github</span><span class="p">.</span><span class="n">com</span>
</code></pre></div>

<p>你应该得到下面这样的信息。</p>
<div class="highlight"><pre><span></span><code>Hi excid3! You&#39;ve successfully authenticated, but GitHub does not provide shell access.
</code></pre></div>

<h3>安装 Rails</h3>
<p>我们需要安装像NodeJS这样的javascript运行时环境，因为近来Rails的依赖越来越多了。这样我们可以合并和压缩你的javascript，从而提供一个更快的生产环境。</p>
<p>我们需要添加PPA来安装nodeJS。</p>
<div class="highlight"><pre><span></span><code>sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs
</code></pre></div>

<p>如果在更新时遇到了问题，你可以试试这个命令：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> Note the new setup script name for Node.js v0.12
curl -sL https://deb.nodesource.com/setup_0.12 | sudo bash -

<span class="gh">#</span> Then install with:
sudo apt-get install -y nodejs
</code></pre></div>

<p>下一步，用这个命令安装 rails：</p>
<div class="highlight"><pre><span></span><code>gem install rails -v 4.2.1
</code></pre></div>

<p>因为我们正在使用rbenv，用下面的命令来让rails的执行程序可以使用。</p>
<div class="highlight"><pre><span></span><code>rbenv rehash
</code></pre></div>

<p>要确保rails已经正确安装，你可以运行rails -v，显示如下：</p>
<div class="highlight"><pre><span></span><code>rails -v
# Rails 4.2.1
</code></pre></div>

<p>如果你得到的是不同的结果可能是环境没有设置正确。</p>
<h3>设置 MySQL</h3>
<p>或许你已经熟悉MySQL了，你可以从Ubuntu的仓库中安装MySQL的客户端与服务端。你可以在安装时设置root用户密码。这个信息将来会进入你rails程序的database.yml文件中。用下面的命令来安装mysql。</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install mysql-server mysql-client libmysqlclient-dev
</code></pre></div>

<p>安装libmysqlclient-dev用于mysql2 gem的编译；在设置rails程序时，rails通过它来连接mysql。</p>
<h3>最后一步</h3>
<p>让我们尝试创建你的第一个rails程序：</p>
<div class="highlight"><pre><span></span><code># 使用 MySQL 数据库
rails new myapp -d mysql

# 进入到应用目录
cd myapp
# 创建数据库
rake db:create
rails server
</code></pre></div>

<p>访问http://localhost:3000来访问你的新网站。现在你的电脑上已经可以构建rails程序了。</p>
<p><img alt="" src="/data/attachment/album/201507/14/175043nu5bwu5pdz9pwcbw.png"></p>
<p>如果你在创建数据库时遇到了“Access denied for user 'root'@'localhost' (Using password: NO)”这个错误信息，你需要更新你的config/database.yml文件来匹配数据库的<strong>用户名</strong>和<strong>密码</strong>。</p>
<div class="highlight"><pre><span></span><code># 编辑配置文件夹中的 database.yml
nano config/database.yml
</code></pre></div>

<p>接着填入MySql root用户的密码。</p>
<p><img alt="" src="/data/attachment/album/201507/14/175019xnnzn3h22toez1a2.png"></p>
<p>退出 (Ctrl+X)并保存。</p>
<h3>总结</h3>
<p>Rails是用Ruby写的， 也是随着rails一起使用的编程语言。在Ubuntu 15.04中Ruby on Rails可以用rbenv、 rvm和源码的方式来安装。本篇我们使用的是rbenv方式并用了MySQL作为数据库。有任何的问题或建议，请在评论栏指出。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>