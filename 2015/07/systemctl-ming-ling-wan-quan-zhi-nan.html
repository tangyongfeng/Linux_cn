<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>systemctl 命令完全指南</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Avishek Kumar Systemctl是一个systemd工具，主要负责控制systemd系统和服务管理器。 Systemd是一个系统管理守护进程、工具和库的集合，用于取代System V初始进程。Systemd的功能是用于集中管理和配置类UNIX系统。..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2015/07/systemctl-ming-ling-wan-quan-zhi-nan.html" rel="bookmark"
           title="Permalink to systemctl 命令完全指南">systemctl 命令完全指南</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-07-31T08:00:00+02:00">
                Published: Fri 31 July 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Avishek Kumar</p>
<p>Systemctl是一个systemd工具，主要负责控制systemd系统和服务管理器。</p>
<p>Systemd是一个系统管理守护进程、工具和库的集合，用于取代System V初始进程。Systemd的功能是用于集中管理和配置类UNIX系统。</p>
<p>在Linux生态系统中，Systemd被部署到了大多数的标准Linux发行版中，只有为数不多的几个发行版尚未部署。Systemd通常是所有其它守护进程的父进程，但并非总是如此。</p>
<p><img alt="Manage Linux Services Using Systemctl" src="/data/attachment/album/201507/30/210221zg6czg8yogegegay.jpg"></p>
<p><em>使用Systemctl管理Linux服务</em></p>
<p>本文旨在阐明在运行systemd的系统上“如何控制系统和服务”。</p>
<h3>Systemd初体验和Systemctl基础</h3>
<h4>1. 首先检查你的系统中是否安装有systemd并确定当前安装的版本</h4>
<div class="highlight"><pre><span></span><code># systemctl --version

systemd 215
+PAM +AUDIT +SELINUX +IMA +SYSVINIT +LIBCRYPTSETUP +GCRYPT +ACL +XZ -SECCOMP -APPARMOR
</code></pre></div>

<p>上例中很清楚地表明，我们安装了215版本的systemd。</p>
<h4>2. 检查systemd和systemctl的二进制文件和库文件的安装位置</h4>
<div class="highlight"><pre><span></span><code># whereis systemd 
systemd: /usr/lib/systemd /etc/systemd /usr/share/systemd /usr/share/man/man1/systemd.1.gz


# whereis systemctl
systemctl: /usr/bin/systemctl /usr/share/man/man1/systemctl.1.gz
</code></pre></div>

<h4>3. 检查systemd是否运行</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">eaf</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">[</span><span class="n">s</span><span class="o">]</span><span class="n">ystemd</span>

<span class="n">root</span><span class="w">         </span><span class="mi">1</span><span class="w">     </span><span class="mi">0</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="mi">16</span><span class="err">:</span><span class="mi">27</span><span class="w"> </span><span class="vm">?</span><span class="w">        </span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span><span class="w"> </span><span class="o">--</span><span class="n">switched</span><span class="o">-</span><span class="n">root</span><span class="w"> </span><span class="o">--</span><span class="k">system</span><span class="w"> </span><span class="o">--</span><span class="n">deserialize</span><span class="w"> </span><span class="mi">23</span>
<span class="n">root</span><span class="w">       </span><span class="mi">444</span><span class="w">     </span><span class="mi">1</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="mi">16</span><span class="err">:</span><span class="mi">27</span><span class="w"> </span><span class="vm">?</span><span class="w">        </span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">journald</span>
<span class="n">root</span><span class="w">       </span><span class="mi">469</span><span class="w">     </span><span class="mi">1</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="mi">16</span><span class="err">:</span><span class="mi">27</span><span class="w"> </span><span class="vm">?</span><span class="w">        </span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">udevd</span>
<span class="n">root</span><span class="w">       </span><span class="mi">555</span><span class="w">     </span><span class="mi">1</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="mi">16</span><span class="err">:</span><span class="mi">27</span><span class="w"> </span><span class="vm">?</span><span class="w">        </span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">logind</span>
<span class="n">dbus</span><span class="w">       </span><span class="mi">556</span><span class="w">     </span><span class="mi">1</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="mi">16</span><span class="err">:</span><span class="mi">27</span><span class="w"> </span><span class="vm">?</span><span class="w">        </span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">dbus</span><span class="o">-</span><span class="n">daemon</span><span class="w"> </span><span class="c1">--system --address=systemd: --nofork --nopidfile --systemd-activation</span>
</code></pre></div>

<p><strong>注意</strong>：systemd是作为父进程（PID=1）运行的。在上面带（-e）参数的ps命令输出中，选择所有进程，（-a）选择除会话前导外的所有进程，并使用（-f）参数输出完整格式列表（即 -eaf）。</p>
<p>也请注意上例中后随的方括号和例子中剩余部分。方括号表达式是grep的字符类表达式的一部分。</p>
<h4>4. 分析systemd启动进程</h4>
<div class="highlight"><pre><span></span><code># systemd-analyze
Startup finished in 487ms (kernel) + 2.776s (initrd) + 20.229s (userspace) = 23.493s
</code></pre></div>

<h4>5. 分析启动时各个进程花费的时间</h4>
<div class="highlight"><pre><span></span><code># systemd-analyze blame

8.565s mariadb.service
7.991s webmin.service
6.095s postfix.service
4.311s httpd.service
3.926s firewalld.service
3.780s kdump.service
3.238s tuned.service
1.712s network.service
1.394s lvm2-monitor.service
1.126s systemd-logind.service
....
</code></pre></div>

<h4>6. 分析启动时的关键链</h4>
<div class="highlight"><pre><span></span><code><span class="cp"># systemd-analyze critical-chain</span>

<span class="n">The</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">printed</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;@&quot;</span><span class="w"> </span><span class="n">character</span><span class="p">.</span>
<span class="n">The</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">printed</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;+&quot;</span><span class="w"> </span><span class="n">character</span><span class="p">.</span>

<span class="n">multi</span><span class="o">-</span><span class="n">user</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@20.222</span><span class="n">s</span>
<span class="err">└─</span><span class="n">mariadb</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@11.657</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mf">8.565</span><span class="n">s</span>
<span class="w">  </span><span class="err">└─</span><span class="n">network</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@11.168</span><span class="n">s</span>
<span class="w">    </span><span class="err">└─</span><span class="n">network</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@9.456</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mf">1.712</span><span class="n">s</span>
<span class="w">      </span><span class="err">└─</span><span class="n">NetworkManager</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@8.858</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">596</span><span class="n">ms</span>
<span class="w">        </span><span class="err">└─</span><span class="n">firewalld</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.931</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mf">3.926</span><span class="n">s</span>
<span class="w">          </span><span class="err">└─</span><span class="n">basic</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.916</span><span class="n">s</span>
<span class="w">            </span><span class="err">└─</span><span class="n">sockets</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.916</span><span class="n">s</span>
<span class="w">              </span><span class="err">└─</span><span class="n">dbus</span><span class="p">.</span><span class="n">socket</span><span class="w"> </span><span class="mf">@4.916</span><span class="n">s</span>
<span class="w">                </span><span class="err">└─</span><span class="n">sysinit</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.905</span><span class="n">s</span>
<span class="w">                  </span><span class="err">└─</span><span class="n">systemd</span><span class="o">-</span><span class="n">update</span><span class="o">-</span><span class="n">utmp</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.864</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">39</span><span class="n">ms</span>
<span class="w">                    </span><span class="err">└─</span><span class="n">auditd</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.563</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">301</span><span class="n">ms</span>
<span class="w">                      </span><span class="err">└─</span><span class="n">systemd</span><span class="o">-</span><span class="n">tmpfiles</span><span class="o">-</span><span class="n">setup</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.485</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">69</span><span class="n">ms</span>
<span class="w">                        </span><span class="err">└─</span><span class="n">rhel</span><span class="o">-</span><span class="n">import</span><span class="o">-</span><span class="n">state</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.342</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">142</span><span class="n">ms</span>
<span class="w">                          </span><span class="err">└─</span><span class="n">local</span><span class="o">-</span><span class="n">fs</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.324</span><span class="n">s</span>
<span class="w">                            </span><span class="err">└─</span><span class="n">boot</span><span class="p">.</span><span class="n">mount</span><span class="w"> </span><span class="mf">@4.286</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">31</span><span class="n">ms</span>
<span class="w">                              </span><span class="err">└─</span><span class="n">systemd</span><span class="o">-</span><span class="n">fsck</span><span class="p">@</span><span class="n">dev</span><span class="o">-</span><span class="n">disk</span><span class="o">-</span><span class="n">by</span><span class="err">\</span><span class="n">x2duuid</span><span class="mi">-79</span><span class="n">f594ad</span><span class="err">\</span><span class="n">x2da332</span><span class="err">\</span><span class="n">x2d4730</span><span class="err">\</span><span class="n">x2dbb5f</span><span class="err">\</span><span class="n">x2d85d19608096</span>
<span class="w">                                </span><span class="err">└─</span><span class="n">dev</span><span class="o">-</span><span class="n">disk</span><span class="o">-</span><span class="n">by</span><span class="err">\</span><span class="n">x2duuid</span><span class="mi">-79</span><span class="n">f594ad</span><span class="err">\</span><span class="n">x2da332</span><span class="err">\</span><span class="n">x2d4730</span><span class="err">\</span><span class="n">x2dbb5f</span><span class="err">\</span><span class="n">x2d85d196080964</span><span class="p">.</span><span class="n">device</span><span class="w"> </span><span class="mi">@4</span>
</code></pre></div>

<p><strong>重要</strong>：Systemctl接受服务（.service），挂载点（.mount），套接口（.socket）和设备（.device）作为单元。</p>
<h4>7. 列出所有可用单元</h4>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> systemctl list-unit-files

UNIT FILE                                   STATE   
proc-sys-fs-binfmt_misc.automount           static  
dev-hugepages.mount                         static  
dev-mqueue.mount                            static  
proc-sys-fs-binfmt_misc.mount               static  
sys-fs-fuse-connections.mount               static  
sys-kernel-config.mount                     static  
sys-kernel-debug.mount                      static  
tmp.mount                                   disabled
brandbot.path                               disabled
.....
</code></pre></div>

<h4>8. 列出所有运行中单元</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl list-units</span>

<span class="n">UNIT</span><span class="w">                                        </span><span class="n">LOAD</span><span class="w">   </span><span class="n">ACTIVE</span><span class="w"> </span><span class="n">SUB</span><span class="w">       </span><span class="n">DESCRIPTION</span>
<span class="n">proc</span><span class="o">-</span><span class="n">sys</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">binfmt_misc</span><span class="o">.</span><span class="n">automount</span><span class="w">           </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">waiting</span><span class="w">   </span><span class="n">Arbitrary</span><span class="w"> </span><span class="n">Executable</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="n">Formats</span><span class="w"> </span><span class="n">File</span><span class="w"> </span><span class="n">Syste</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pc</span><span class="o">...</span><span class="mi">0</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="o">-</span><span class="n">block</span><span class="o">-</span><span class="n">sr0</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="n">VBOX_CD</span><span class="o">-</span><span class="n">ROM</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pc</span><span class="o">...</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">03.0</span><span class="o">-</span><span class="n">net</span><span class="o">-</span><span class="n">enp0s3</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="n">PRO</span><span class="o">/</span><span class="mi">1000</span><span class="w"> </span><span class="n">MT</span><span class="w"> </span><span class="n">Desktop</span><span class="w"> </span><span class="n">Adapter</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pc</span><span class="o">...</span><span class="mi">00</span><span class="p">:</span><span class="mf">05.0</span><span class="o">-</span><span class="n">sound</span><span class="o">-</span><span class="n">card0</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="mi">82801</span><span class="n">AA</span><span class="w"> </span><span class="n">AC</span><span class="s1">&#39;97 Audio Controller</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pc</span><span class="o">...</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="o">-</span><span class="n">block</span><span class="o">-</span><span class="n">sda</span><span class="o">-</span><span class="n">sda1</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="n">VBOX_HARDDISK</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pc</span><span class="o">...</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="o">-</span><span class="n">block</span><span class="o">-</span><span class="n">sda</span><span class="o">-</span><span class="n">sda2</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="n">LVM</span><span class="w"> </span><span class="n">PV</span><span class="w"> </span><span class="n">Qzyo3l</span><span class="o">-</span><span class="n">qYaL</span><span class="o">-</span><span class="n">uRUa</span><span class="o">-</span><span class="n">Cjuk</span><span class="o">-</span><span class="n">pljo</span><span class="o">-</span><span class="n">qKtX</span><span class="o">-</span><span class="n">VgBQ8</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pc</span><span class="o">...</span><span class="mi">0</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="o">-</span><span class="n">block</span><span class="o">-</span><span class="n">sda</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="n">VBOX_HARDDISK</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pl</span><span class="o">...</span><span class="n">erial8250</span><span class="o">-</span><span class="n">tty</span><span class="o">-</span><span class="n">ttyS0</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">platform</span><span class="o">/</span><span class="n">serial8250</span><span class="o">/</span><span class="n">tty</span><span class="o">/</span><span class="n">ttyS0</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pl</span><span class="o">...</span><span class="n">erial8250</span><span class="o">-</span><span class="n">tty</span><span class="o">-</span><span class="n">ttyS1</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">platform</span><span class="o">/</span><span class="n">serial8250</span><span class="o">/</span><span class="n">tty</span><span class="o">/</span><span class="n">ttyS1</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pl</span><span class="o">...</span><span class="n">erial8250</span><span class="o">-</span><span class="n">tty</span><span class="o">-</span><span class="n">ttyS2</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">platform</span><span class="o">/</span><span class="n">serial8250</span><span class="o">/</span><span class="n">tty</span><span class="o">/</span><span class="n">ttyS2</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">pl</span><span class="o">...</span><span class="n">erial8250</span><span class="o">-</span><span class="n">tty</span><span class="o">-</span><span class="n">ttyS3</span><span class="o">.</span><span class="n">device</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">platform</span><span class="o">/</span><span class="n">serial8250</span><span class="o">/</span><span class="n">tty</span><span class="o">/</span><span class="n">ttyS3</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">virtual</span><span class="o">-</span><span class="n">block</span><span class="o">-</span><span class="n">dm</span>\<span class="n">x2d0</span><span class="o">.</span><span class="n">device</span><span class="w">    </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">virtual</span><span class="o">/</span><span class="n">block</span><span class="o">/</span><span class="n">dm</span><span class="o">-</span><span class="mi">0</span>
<span class="n">sys</span><span class="o">-</span><span class="n">devices</span><span class="o">-</span><span class="n">virtual</span><span class="o">-</span><span class="n">block</span><span class="o">-</span><span class="n">dm</span>\<span class="n">x2d1</span><span class="o">.</span><span class="n">device</span><span class="w">    </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">virtual</span><span class="o">/</span><span class="n">block</span><span class="o">/</span><span class="n">dm</span><span class="o">-</span><span class="mi">1</span>
<span class="n">sys</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="n">configfs</span><span class="o">.</span><span class="n">device</span><span class="w">                  </span><span class="n">loaded</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">plugged</span><span class="w">   </span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">module</span><span class="o">/</span><span class="n">configfs</span>
<span class="o">...</span>
</code></pre></div>

<h4>9. 列出所有失败单元</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl --failed</span>

<span class="n">UNIT</span><span class="w">          </span><span class="n">LOAD</span><span class="w">   </span><span class="n">ACTIVE</span><span class="w"> </span><span class="n">SUB</span><span class="w">    </span><span class="n">DESCRIPTION</span>
<span class="n">kdump</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">Crash</span><span class="w"> </span><span class="n">recovery</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">arming</span>

<span class="n">LOAD</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">Reflects</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">properly</span><span class="w"> </span><span class="n">loaded</span><span class="o">.</span>
<span class="n">ACTIVE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">high</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">activation</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="n">generalization</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">SUB</span><span class="o">.</span>
<span class="n">SUB</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">low</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">activation</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">depend</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">type</span><span class="o">.</span>

<span class="mi">1</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="n">listed</span><span class="o">.</span><span class="w"> </span><span class="n">Pass</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">inactive</span><span class="w"> </span><span class="n">units</span><span class="p">,</span><span class="w"> </span><span class="n">too</span><span class="o">.</span>
<span class="n">To</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="s1">&#39;systemctl list-unit-files&#39;</span><span class="o">.</span>
</code></pre></div>

<h4>10. 检查某个单元（如 cron.service）是否启用</h4>
<div class="highlight"><pre><span></span><code># systemctl is-enabled crond.service

enabled
</code></pre></div>

<h4>11. 检查某个单元或服务是否运行</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl status firewalld.service</span>

<span class="n">firewalld</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">firewall</span><span class="w"> </span><span class="n">daemon</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">55</span><span class="w"> </span><span class="n">IST</span><span class="p">;</span><span class="w"> </span><span class="mi">34</span><span class="nb">min</span><span class="w"> </span><span class="n">ago</span>
<span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">549</span><span class="w"> </span><span class="p">(</span><span class="n">firewalld</span><span class="p">)</span>
<span class="w">   </span><span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span>
<span class="w">           </span><span class="err">└─</span><span class="mi">549</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">python</span><span class="w"> </span><span class="o">-</span><span class="n">Es</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">firewalld</span><span class="w"> </span><span class="o">--</span><span class="n">nofork</span><span class="w"> </span><span class="o">--</span><span class="n">nopid</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">51</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">firewall</span><span class="w"> </span><span class="n">daemon</span><span class="o">...</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">55</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Started</span><span class="w"> </span><span class="n">firewalld</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">firewall</span><span class="w"> </span><span class="n">daemon</span><span class="o">.</span>
</code></pre></div>

<h3>使用Systemctl控制并管理服务</h3>
<h4>12. 列出所有服务（包括启用的和禁用的）</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">systemctl</span><span class="w"> </span><span class="nx">list</span><span class="o">-</span><span class="nx">unit</span><span class="o">-</span><span class="nx">files</span><span class="w"> </span><span class="o">--</span><span class="k">type</span><span class="p">=</span><span class="nx">service</span>

<span class="nx">UNIT</span><span class="w"> </span><span class="nx">FILE</span><span class="w">                                   </span><span class="nx">STATE</span><span class="w">   </span>
<span class="nx">arp</span><span class="o">-</span><span class="nx">ethers</span><span class="p">.</span><span class="nx">service</span><span class="w">                          </span><span class="nx">disabled</span>
<span class="nx">auditd</span><span class="p">.</span><span class="nx">service</span><span class="w">                              </span><span class="nx">enabled</span><span class="w"> </span>
<span class="nx">autovt</span><span class="err">@</span><span class="p">.</span><span class="nx">service</span><span class="w">                             </span><span class="nx">disabled</span>
<span class="nx">blk</span><span class="o">-</span><span class="nx">availability</span><span class="p">.</span><span class="nx">service</span><span class="w">                    </span><span class="nx">disabled</span>
<span class="nx">brandbot</span><span class="p">.</span><span class="nx">service</span><span class="w">                            </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">collectd</span><span class="p">.</span><span class="nx">service</span><span class="w">                            </span><span class="nx">disabled</span>
<span class="nx">console</span><span class="o">-</span><span class="nx">getty</span><span class="p">.</span><span class="nx">service</span><span class="w">                       </span><span class="nx">disabled</span>
<span class="nx">console</span><span class="o">-</span><span class="nx">shell</span><span class="p">.</span><span class="nx">service</span><span class="w">                       </span><span class="nx">disabled</span>
<span class="nx">cpupower</span><span class="p">.</span><span class="nx">service</span><span class="w">                            </span><span class="nx">disabled</span>
<span class="nx">crond</span><span class="p">.</span><span class="nx">service</span><span class="w">                               </span><span class="nx">enabled</span><span class="w"> </span>
<span class="nx">dbus</span><span class="o">-</span><span class="nx">org</span><span class="p">.</span><span class="nx">fedoraproject</span><span class="p">.</span><span class="nx">FirewallD1</span><span class="p">.</span><span class="nx">service</span><span class="w">   </span><span class="nx">enabled</span><span class="w"> </span>
<span class="o">...</span><span class="p">.</span>
</code></pre></div>

<h4>13. Linux中如何启动、重启、停止、重载服务以及检查服务（如 httpd.service）状态</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl start httpd.service</span>
<span class="c1"># systemctl restart httpd.service</span>
<span class="c1"># systemctl stop httpd.service</span>
<span class="c1"># systemctl reload httpd.service</span>
<span class="c1"># systemctl status httpd.service</span>

<span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="n">IST</span><span class="p">;</span><span class="w"> </span><span class="mi">6</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w">  </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="mi">2876</span><span class="w"> </span><span class="n">ExecStop</span><span class="o">=/</span><span class="n">bin</span><span class="o">/</span><span class="n">kill</span><span class="w"> </span><span class="o">-</span><span class="n">WINCH</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">MAINPID</span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>
<span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">2881</span><span class="w"> </span><span class="p">(</span><span class="n">httpd</span><span class="p">)</span>
<span class="w">   </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Processing requests...&quot;</span>
<span class="w">   </span><span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">2881</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">2884</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">2885</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">2886</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">2887</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">└─</span><span class="mi">2888</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">...</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">httpd</span><span class="p">[</span><span class="mi">2881</span><span class="p">]:</span><span class="w"> </span><span class="n">AH00558</span><span class="p">:</span><span class="w"> </span><span class="n">httpd</span><span class="p">:</span><span class="w"> </span><span class="n">Could</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">reliably</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="s1">&#39;s fully q...ssage</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Started</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">.</span>
<span class="n">Hint</span><span class="p">:</span><span class="w"> </span><span class="n">Some</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">ellipsized</span><span class="p">,</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">full</span><span class="o">.</span>
</code></pre></div>

<p><strong>注意</strong>：当我们使用systemctl的start，restart，stop和reload命令时，我们不会从终端获取到任何输出内容，只有status命令可以打印输出。</p>
<h4>14. 如何激活服务并在启动时启用或禁用服务（即系统启动时自动启动服务）</h4>
<div class="highlight"><pre><span></span><code># systemctl is-active httpd.service
# systemctl enable httpd.service
# systemctl disable httpd.service
</code></pre></div>

<h4>15. 如何屏蔽（让它不能启动）或显示服务（如 httpd.service）</h4>
<div class="highlight"><pre><span></span><code># systemctl mask httpd.service
ln -s &#39;/dev/null&#39; &#39;/etc/systemd/system/httpd.service&#39;

# systemctl unmask httpd.service
rm &#39;/etc/systemd/system/httpd.service&#39;
</code></pre></div>

<h4>16. 使用systemctl命令杀死服务</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl kill httpd</span>
<span class="c1"># systemctl status httpd</span>

<span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="p">(</span><span class="n">Result</span><span class="p">:</span><span class="w"> </span><span class="n">exit</span><span class="o">-</span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">42</span><span class="w"> </span><span class="n">IST</span><span class="p">;</span><span class="w"> </span><span class="mi">28</span><span class="nb">min</span><span class="w"> </span><span class="n">ago</span>
<span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">2881</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>
<span class="w">   </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Total requests: 0; Current requests/sec: 0; Current traffic:   0 B/sec&quot;</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">29</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">29</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">39</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">39</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">59</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">59</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">2881</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">recepti</span><span class="o">...</span><span class="n">bled</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">42</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">226</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">42</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Unit</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="n">entered</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">state</span><span class="o">.</span>
<span class="n">Hint</span><span class="p">:</span><span class="w"> </span><span class="n">Some</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">ellipsized</span><span class="p">,</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">full</span><span class="o">.</span>
</code></pre></div>

<h3>使用Systemctl控制并管理挂载点</h3>
<h4>17. 列出所有系统挂载点</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">systemctl</span><span class="w"> </span><span class="nx">list</span><span class="o">-</span><span class="nx">unit</span><span class="o">-</span><span class="nx">files</span><span class="w"> </span><span class="o">--</span><span class="k">type</span><span class="p">=</span><span class="nx">mount</span>

<span class="nx">UNIT</span><span class="w"> </span><span class="nx">FILE</span><span class="w">                     </span><span class="nx">STATE</span><span class="w">   </span>
<span class="nx">dev</span><span class="o">-</span><span class="nx">hugepages</span><span class="p">.</span><span class="nx">mount</span><span class="w">           </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">dev</span><span class="o">-</span><span class="nx">mqueue</span><span class="p">.</span><span class="nx">mount</span><span class="w">              </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">proc</span><span class="o">-</span><span class="nx">sys</span><span class="o">-</span><span class="nx">fs</span><span class="o">-</span><span class="nx">binfmt_misc</span><span class="p">.</span><span class="nx">mount</span><span class="w"> </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">sys</span><span class="o">-</span><span class="nx">fs</span><span class="o">-</span><span class="nx">fuse</span><span class="o">-</span><span class="nx">connections</span><span class="p">.</span><span class="nx">mount</span><span class="w"> </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">sys</span><span class="o">-</span><span class="nx">kernel</span><span class="o">-</span><span class="nx">config</span><span class="p">.</span><span class="nx">mount</span><span class="w">       </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">sys</span><span class="o">-</span><span class="nx">kernel</span><span class="o">-</span><span class="nx">debug</span><span class="p">.</span><span class="nx">mount</span><span class="w">        </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">tmp</span><span class="p">.</span><span class="nx">mount</span><span class="w">                     </span><span class="nx">disabled</span>
</code></pre></div>

<h4>18. 挂载、卸载、重新挂载、重载系统挂载点并检查系统中挂载点状态</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl start tmp.mount</span>
<span class="c1"># systemctl stop tmp.mount</span>
<span class="c1"># systemctl restart tmp.mount</span>
<span class="c1"># systemctl reload tmp.mount</span>
<span class="c1"># systemctl status tmp.mount</span>

<span class="n">tmp</span><span class="o">.</span><span class="n">mount</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Temporary</span><span class="w"> </span><span class="n">Directory</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">tmp</span><span class="o">.</span><span class="n">mount</span><span class="p">;</span><span class="w"> </span><span class="n">disabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">mounted</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">06</span><span class="w"> </span><span class="n">IST</span><span class="p">;</span><span class="w"> </span><span class="mi">2</span><span class="nb">min</span><span class="w"> </span><span class="mi">48</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w">    </span><span class="n">Where</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span>
<span class="w">     </span><span class="n">What</span><span class="p">:</span><span class="w"> </span><span class="n">tmpfs</span>
<span class="w">     </span><span class="n">Docs</span><span class="p">:</span><span class="w"> </span><span class="n">man</span><span class="p">:</span><span class="n">hier</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>

<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">freedesktop</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">wiki</span><span class="o">/</span><span class="n">Software</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">APIFileSystems</span>

<span class="w">  </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="mi">3908</span><span class="w"> </span><span class="n">ExecMount</span><span class="o">=/</span><span class="n">bin</span><span class="o">/</span><span class="n">mount</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">tmpfs</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">mode</span><span class="o">=</span><span class="mi">1777</span><span class="p">,</span><span class="n">strictatime</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">06</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Mounting</span><span class="w"> </span><span class="n">Temporary</span><span class="w"> </span><span class="n">Directory</span><span class="o">...</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">06</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">tmp</span><span class="o">.</span><span class="n">mount</span><span class="p">:</span><span class="w"> </span><span class="n">Directory</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">empty</span><span class="p">,</span><span class="w"> </span><span class="n">mounting</span><span class="w"> </span><span class="n">anyway</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">17</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">06</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Mounted</span><span class="w"> </span><span class="n">Temporary</span><span class="w"> </span><span class="n">Directory</span><span class="o">.</span>
</code></pre></div>

<h4>19. 在启动时激活、启用或禁用挂载点（系统启动时自动挂载）</h4>
<div class="highlight"><pre><span></span><code># systemctl is-active tmp.mount
# systemctl enable tmp.mount
# systemctl disable  tmp.mount
</code></pre></div>

<h4>20. 在Linux中屏蔽（让它不能启用）或可见挂载点</h4>
<div class="highlight"><pre><span></span><code># systemctl mask tmp.mount

ln -s &#39;/dev/null&#39; &#39;/etc/systemd/system/tmp.mount&#39;

# systemctl unmask tmp.mount

rm &#39;/etc/systemd/system/tmp.mount&#39;
</code></pre></div>

<h3>使用Systemctl控制并管理套接口</h3>
<h4>21. 列出所有可用系统套接口</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">systemctl</span><span class="w"> </span><span class="nx">list</span><span class="o">-</span><span class="nx">unit</span><span class="o">-</span><span class="nx">files</span><span class="w"> </span><span class="o">--</span><span class="k">type</span><span class="p">=</span><span class="nx">socket</span>

<span class="nx">UNIT</span><span class="w"> </span><span class="nx">FILE</span><span class="w">                    </span><span class="nx">STATE</span><span class="w">   </span>
<span class="nx">dbus</span><span class="p">.</span><span class="nx">socket</span><span class="w">                  </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">dm</span><span class="o">-</span><span class="nx">event</span><span class="p">.</span><span class="nx">socket</span><span class="w">              </span><span class="nx">enabled</span><span class="w"> </span>
<span class="nx">lvm2</span><span class="o">-</span><span class="nx">lvmetad</span><span class="p">.</span><span class="nx">socket</span><span class="w">          </span><span class="nx">enabled</span><span class="w"> </span>
<span class="nx">rsyncd</span><span class="p">.</span><span class="nx">socket</span><span class="w">                </span><span class="nx">disabled</span>
<span class="nx">sshd</span><span class="p">.</span><span class="nx">socket</span><span class="w">                  </span><span class="nx">disabled</span>
<span class="nx">syslog</span><span class="p">.</span><span class="nx">socket</span><span class="w">                </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">systemd</span><span class="o">-</span><span class="nx">initctl</span><span class="p">.</span><span class="nx">socket</span><span class="w">       </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">systemd</span><span class="o">-</span><span class="nx">journald</span><span class="p">.</span><span class="nx">socket</span><span class="w">      </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">systemd</span><span class="o">-</span><span class="nx">shutdownd</span><span class="p">.</span><span class="nx">socket</span><span class="w">     </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">systemd</span><span class="o">-</span><span class="nx">udevd</span><span class="o">-</span><span class="nx">control</span><span class="p">.</span><span class="nx">socket</span><span class="w"> </span><span class="nx">static</span><span class="w">  </span>
<span class="nx">systemd</span><span class="o">-</span><span class="nx">udevd</span><span class="o">-</span><span class="nx">kernel</span><span class="p">.</span><span class="nx">socket</span><span class="w">  </span><span class="nx">static</span><span class="w">  </span>

<span class="mi">11</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">files</span><span class="w"> </span><span class="nx">listed</span><span class="p">.</span>
</code></pre></div>

<h4>22. 在Linux中启动、重启、停止、重载套接口并检查其状态</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl start cups.socket</span>
<span class="c1"># systemctl restart cups.socket</span>
<span class="c1"># systemctl stop cups.socket</span>
<span class="c1"># systemctl reload cups.socket</span>
<span class="c1"># systemctl status cups.socket</span>

<span class="n">cups</span><span class="o">.</span><span class="n">socket</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">CUPS</span><span class="w"> </span><span class="n">Printing</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">Sockets</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">cups</span><span class="o">.</span><span class="n">socket</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">listening</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">59</span><span class="w"> </span><span class="n">IST</span><span class="p">;</span><span class="w"> </span><span class="mi">8</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w">   </span><span class="n">Listen</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">cups</span><span class="o">/</span><span class="n">cups</span><span class="o">.</span><span class="n">sock</span><span class="w"> </span><span class="p">(</span><span class="n">Stream</span><span class="p">)</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">59</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">CUPS</span><span class="w"> </span><span class="n">Printing</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">Sockets</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">59</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Listening</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">CUPS</span><span class="w"> </span><span class="n">Printing</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">Sockets</span><span class="o">.</span>
</code></pre></div>

<h4>23. 在启动时激活套接口，并启用或禁用它（系统启动时自启动）</h4>
<div class="highlight"><pre><span></span><code># systemctl is-active cups.socket
# systemctl enable cups.socket
# systemctl disable cups.socket
</code></pre></div>

<h4>24. 屏蔽（使它不能启动）或显示套接口</h4>
<div class="highlight"><pre><span></span><code># systemctl mask cups.socket
ln -s &#39;/dev/null&#39; &#39;/etc/systemd/system/cups.socket&#39;

# systemctl unmask cups.socket
rm &#39;/etc/systemd/system/cups.socket&#39;
</code></pre></div>

<h3>服务的CPU利用率（分配额）</h3>
<h4>25. 获取当前某个服务的CPU分配额（如httpd）</h4>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">systemctl</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="o">-</span><span class="nv">p</span><span class="w"> </span><span class="nv">CPUShares</span><span class="w"> </span><span class="nv">httpd</span>.<span class="nv">service</span>

<span class="nv">CPUShares</span><span class="o">=</span><span class="mi">1024</span>
</code></pre></div>

<p><strong>注意</strong>：各个服务的默认CPU分配份额=1024，你可以增加/减少某个进程的CPU分配份额。</p>
<h4>26. 将某个服务（httpd.service）的CPU分配份额限制为2000 CPUShares/</h4>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">systemctl</span><span class="w"> </span><span class="nv">set</span><span class="o">-</span><span class="nv">property</span><span class="w"> </span><span class="nv">httpd</span>.<span class="nv">service</span><span class="w"> </span><span class="nv">CPUShares</span><span class="o">=</span><span class="mi">2000</span>
#<span class="w"> </span><span class="nv">systemctl</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="o">-</span><span class="nv">p</span><span class="w"> </span><span class="nv">CPUShares</span><span class="w"> </span><span class="nv">httpd</span>.<span class="nv">service</span>

<span class="nv">CPUShares</span><span class="o">=</span><span class="mi">2000</span>
</code></pre></div>

<p><strong>注意</strong>：当你为某个服务设置CPUShares，会自动创建一个以服务名命名的目录（如 httpd.service），里面包含了一个名为90-CPUShares.conf的文件，该文件含有CPUShare限制信息，你可以通过以下方式查看该文件：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">vi</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="k">system</span><span class="o">/</span><span class="n">httpd</span><span class="p">.</span><span class="n">service</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="mi">90</span><span class="o">-</span><span class="n">CPUShares</span><span class="p">.</span><span class="n">conf</span><span class="w"> </span>

<span class="o">[</span><span class="n">Service</span><span class="o">]</span>
<span class="n">CPUShares</span><span class="o">=</span><span class="mi">2000</span><span class="w">        </span>
</code></pre></div>

<h4>27. 检查某个服务的所有配置细节</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl show httpd</span>

<span class="n">Id</span><span class="o">=</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
<span class="n">Names</span><span class="o">=</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
<span class="n">Requires</span><span class="o">=</span><span class="n">basic</span><span class="o">.</span><span class="n">target</span>
<span class="n">Wants</span><span class="o">=</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span>
<span class="n">WantedBy</span><span class="o">=</span><span class="n">multi</span><span class="o">-</span><span class="n">user</span><span class="o">.</span><span class="n">target</span>
<span class="n">Conflicts</span><span class="o">=</span><span class="n">shutdown</span><span class="o">.</span><span class="n">target</span>
<span class="n">Before</span><span class="o">=</span><span class="n">shutdown</span><span class="o">.</span><span class="n">target</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">user</span><span class="o">.</span><span class="n">target</span>
<span class="n">After</span><span class="o">=</span><span class="n">network</span><span class="o">.</span><span class="n">target</span><span class="w"> </span><span class="k">remote</span><span class="o">-</span><span class="n">fs</span><span class="o">.</span><span class="n">target</span><span class="w"> </span><span class="n">nss</span><span class="o">-</span><span class="n">lookup</span><span class="o">.</span><span class="n">target</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">journald</span><span class="o">.</span><span class="n">socket</span><span class="w"> </span><span class="n">basic</span><span class="o">.</span><span class="n">target</span><span class="w"> </span><span class="n">system</span><span class="o">.</span><span class="n">slice</span>
<span class="n">Description</span><span class="o">=</span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="n">LoadState</span><span class="o">=</span><span class="n">loaded</span>
<span class="n">ActiveState</span><span class="o">=</span><span class="n">active</span>
<span class="n">SubState</span><span class="o">=</span><span class="n">running</span>
<span class="n">FragmentPath</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
<span class="o">....</span>
</code></pre></div>

<h4>28. 分析某个服务（httpd）的关键链</h4>
<div class="highlight"><pre><span></span><code><span class="cp"># systemd-analyze critical-chain httpd.service</span>

<span class="n">The</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">printed</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;@&quot;</span><span class="w"> </span><span class="n">character</span><span class="p">.</span>
<span class="n">The</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">printed</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;+&quot;</span><span class="w"> </span><span class="n">character</span><span class="p">.</span>

<span class="n">httpd</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="o">+</span><span class="mi">142</span><span class="n">ms</span>
<span class="err">└─</span><span class="n">network</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@11.168</span><span class="n">s</span>
<span class="w">  </span><span class="err">└─</span><span class="n">network</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@9.456</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mf">1.712</span><span class="n">s</span>
<span class="w">    </span><span class="err">└─</span><span class="n">NetworkManager</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@8.858</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">596</span><span class="n">ms</span>
<span class="w">      </span><span class="err">└─</span><span class="n">firewalld</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.931</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mf">3.926</span><span class="n">s</span>
<span class="w">        </span><span class="err">└─</span><span class="n">basic</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.916</span><span class="n">s</span>
<span class="w">          </span><span class="err">└─</span><span class="n">sockets</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.916</span><span class="n">s</span>
<span class="w">            </span><span class="err">└─</span><span class="n">dbus</span><span class="p">.</span><span class="n">socket</span><span class="w"> </span><span class="mf">@4.916</span><span class="n">s</span>
<span class="w">              </span><span class="err">└─</span><span class="n">sysinit</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.905</span><span class="n">s</span>
<span class="w">                </span><span class="err">└─</span><span class="n">systemd</span><span class="o">-</span><span class="n">update</span><span class="o">-</span><span class="n">utmp</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.864</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">39</span><span class="n">ms</span>
<span class="w">                  </span><span class="err">└─</span><span class="n">auditd</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.563</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">301</span><span class="n">ms</span>
<span class="w">                    </span><span class="err">└─</span><span class="n">systemd</span><span class="o">-</span><span class="n">tmpfiles</span><span class="o">-</span><span class="n">setup</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.485</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">69</span><span class="n">ms</span>
<span class="w">                      </span><span class="err">└─</span><span class="n">rhel</span><span class="o">-</span><span class="n">import</span><span class="o">-</span><span class="n">state</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.342</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">142</span><span class="n">ms</span>
<span class="w">                        </span><span class="err">└─</span><span class="n">local</span><span class="o">-</span><span class="n">fs</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="mf">@4.324</span><span class="n">s</span>
<span class="w">                          </span><span class="err">└─</span><span class="n">boot</span><span class="p">.</span><span class="n">mount</span><span class="w"> </span><span class="mf">@4.286</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">31</span><span class="n">ms</span>
<span class="w">                            </span><span class="err">└─</span><span class="n">systemd</span><span class="o">-</span><span class="n">fsck</span><span class="p">@</span><span class="n">dev</span><span class="o">-</span><span class="n">disk</span><span class="o">-</span><span class="n">by</span><span class="err">\</span><span class="n">x2duuid</span><span class="mi">-79</span><span class="n">f594ad</span><span class="err">\</span><span class="n">x2da332</span><span class="err">\</span><span class="n">x2d4730</span><span class="err">\</span><span class="n">x2dbb5f</span><span class="err">\</span><span class="n">x2d85d196080964</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="mf">@4.092</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="mi">149</span><span class="n">ms</span>
<span class="w">                              </span><span class="err">└─</span><span class="n">dev</span><span class="o">-</span><span class="n">disk</span><span class="o">-</span><span class="n">by</span><span class="err">\</span><span class="n">x2duuid</span><span class="mi">-79</span><span class="n">f594ad</span><span class="err">\</span><span class="n">x2da332</span><span class="err">\</span><span class="n">x2d4730</span><span class="err">\</span><span class="n">x2dbb5f</span><span class="err">\</span><span class="n">x2d85d196080964</span><span class="p">.</span><span class="n">device</span><span class="w"> </span><span class="mf">@4.092</span><span class="n">s</span>
</code></pre></div>

<h4>29. 获取某个服务（httpd）的依赖性列表</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl list-dependencies httpd.service</span>

<span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
<span class="err">├─</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span>
<span class="err">└─</span><span class="n">basic</span><span class="o">.</span><span class="n">target</span>
<span class="w">  </span><span class="err">├─</span><span class="n">firewalld</span><span class="o">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">├─</span><span class="n">microcode</span><span class="o">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">├─</span><span class="n">rhel</span><span class="o">-</span><span class="n">autorelabel</span><span class="o">-</span><span class="n">mark</span><span class="o">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">├─</span><span class="n">rhel</span><span class="o">-</span><span class="n">autorelabel</span><span class="o">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">├─</span><span class="n">rhel</span><span class="o">-</span><span class="n">configure</span><span class="o">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">├─</span><span class="n">rhel</span><span class="o">-</span><span class="n">dmesg</span><span class="o">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">├─</span><span class="n">rhel</span><span class="o">-</span><span class="n">loadmodules</span><span class="o">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">├─</span><span class="n">paths</span><span class="o">.</span><span class="n">target</span>
<span class="w">  </span><span class="err">├─</span><span class="n">slices</span><span class="o">.</span><span class="n">target</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">├─</span><span class="o">-.</span><span class="n">slice</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">└─</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span>
<span class="w">  </span><span class="err">├─</span><span class="n">sockets</span><span class="o">.</span><span class="n">target</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">├─</span><span class="n">dbus</span><span class="o">.</span><span class="n">socket</span>
<span class="o">....</span>
</code></pre></div>

<h4>30. 按等级列出控制组</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">cgls</span>

<span class="err">├─</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span><span class="w"> </span><span class="o">--</span><span class="n">switched</span><span class="o">-</span><span class="n">root</span><span class="w"> </span><span class="o">--</span><span class="k">system</span><span class="w"> </span><span class="o">--</span><span class="n">deserialize</span><span class="w"> </span><span class="mi">23</span>
<span class="err">├─</span><span class="k">user</span><span class="p">.</span><span class="n">slice</span>
<span class="err">│</span><span class="w"> </span><span class="err">└─</span><span class="k">user</span><span class="o">-</span><span class="mf">0.</span><span class="n">slice</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─</span><span class="k">session</span><span class="o">-</span><span class="mf">1.</span><span class="k">scope</span>
<span class="err">│</span><span class="w">     </span><span class="err">├─</span><span class="mi">2498</span><span class="w"> </span><span class="nl">sshd</span><span class="p">:</span><span class="w"> </span><span class="n">root</span><span class="nv">@pts</span><span class="o">/</span><span class="mi">0</span><span class="w">    </span>
<span class="err">│</span><span class="w">     </span><span class="err">├─</span><span class="mi">2500</span><span class="w"> </span><span class="o">-</span><span class="n">bash</span>
<span class="err">│</span><span class="w">     </span><span class="err">├─</span><span class="mi">4521</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">cgls</span>
<span class="err">│</span><span class="w">     </span><span class="err">└─</span><span class="mi">4522</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">cgls</span>
<span class="err">└─</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span>
<span class="w">  </span><span class="err">├─</span><span class="n">httpd</span><span class="p">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">├─</span><span class="mi">4440</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">├─</span><span class="mi">4442</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">├─</span><span class="mi">4443</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">├─</span><span class="mi">4444</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">├─</span><span class="mi">4445</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">└─</span><span class="mi">4446</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">  </span><span class="err">├─</span><span class="n">polkit</span><span class="p">.</span><span class="n">service</span>
<span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">└─</span><span class="mi">721</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">polkit</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">polkitd</span><span class="w"> </span><span class="o">--</span><span class="k">no</span><span class="o">-</span><span class="n">debug</span>
<span class="p">....</span>
</code></pre></div>

<h4>31. 按CPU、内存、输入和输出列出控制组</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">systemd</span><span class="o">-</span><span class="n">cgtop</span>

<span class="k">Path</span><span class="w">                                                              </span><span class="n">Tasks</span><span class="w">   </span><span class="o">%</span><span class="n">CPU</span><span class="w">   </span><span class="n">Memory</span><span class="w">  </span><span class="k">Input</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="k">Output</span><span class="o">/</span><span class="n">s</span>

<span class="o">/</span><span class="w">                                                                    </span><span class="mi">83</span><span class="w">    </span><span class="mf">1.0</span><span class="w">   </span><span class="mf">437.8</span><span class="n">M</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="w">                                                         </span><span class="o">-</span><span class="w">    </span><span class="mf">0.1</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">mariadb</span><span class="p">.</span><span class="n">service</span><span class="w">                                         </span><span class="mi">2</span><span class="w">    </span><span class="mf">0.1</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">tuned</span><span class="p">.</span><span class="n">service</span><span class="w">                                           </span><span class="mi">1</span><span class="w">    </span><span class="mf">0.0</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">httpd</span><span class="p">.</span><span class="n">service</span><span class="w">                                           </span><span class="mi">6</span><span class="w">    </span><span class="mf">0.0</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">NetworkManager</span><span class="p">.</span><span class="n">service</span><span class="w">                                  </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">atop</span><span class="p">.</span><span class="n">service</span><span class="w">                                            </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">atopacct</span><span class="p">.</span><span class="n">service</span><span class="w">                                        </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">auditd</span><span class="p">.</span><span class="n">service</span><span class="w">                                          </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">crond</span><span class="p">.</span><span class="n">service</span><span class="w">                                           </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">dbus</span><span class="p">.</span><span class="n">service</span><span class="w">                                            </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">firewalld</span><span class="p">.</span><span class="n">service</span><span class="w">                                       </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">lvm2</span><span class="o">-</span><span class="n">lvmetad</span><span class="p">.</span><span class="n">service</span><span class="w">                                    </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">polkit</span><span class="p">.</span><span class="n">service</span><span class="w">                                          </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="k">postfix</span><span class="p">.</span><span class="n">service</span><span class="w">                                         </span><span class="mi">3</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">rsyslog</span><span class="p">.</span><span class="n">service</span><span class="w">                                         </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="k">system</span><span class="o">-</span><span class="n">getty</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">getty</span><span class="nv">@tty1</span><span class="p">.</span><span class="n">service</span><span class="w">                   </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">journald</span><span class="p">.</span><span class="n">service</span><span class="w">                                </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">logind</span><span class="p">.</span><span class="n">service</span><span class="w">                                  </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">systemd</span><span class="o">-</span><span class="n">udevd</span><span class="p">.</span><span class="n">service</span><span class="w">                                   </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">system</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="n">webmin</span><span class="p">.</span><span class="n">service</span><span class="w">                                          </span><span class="mi">1</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
<span class="o">/</span><span class="k">user</span><span class="p">.</span><span class="n">slice</span><span class="o">/</span><span class="k">user</span><span class="o">-</span><span class="mf">0.</span><span class="n">slice</span><span class="o">/</span><span class="k">session</span><span class="o">-</span><span class="mf">1.</span><span class="k">scope</span><span class="w">                              </span><span class="mi">3</span><span class="w">      </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span><span class="w">        </span><span class="o">-</span>
</code></pre></div>

<h3>控制系统运行等级</h3>
<h4>32. 启动系统救援模式</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">rescue</span>

<span class="n">Broadcast</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">root</span><span class="nv">@tecmint</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">pts</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">Wed</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">29</span><span class="w"> </span><span class="mi">11</span><span class="err">:</span><span class="mi">31</span><span class="err">:</span><span class="mi">18</span><span class="w"> </span><span class="n">IST</span><span class="p">)</span><span class="err">:</span>

<span class="n">The</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">going</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">rescue</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">NOW</span><span class="err">!</span>
</code></pre></div>

<h4>33. 进入紧急模式</h4>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">systemctl</span><span class="w"> </span><span class="nx">emergency</span>

<span class="nx">Welcome</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">emergency</span><span class="w"> </span><span class="nx">mode</span><span class="p">!</span><span class="w"> </span><span class="nx">After</span><span class="w"> </span><span class="nx">logging</span><span class="w"> </span><span class="k">in</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="s">&quot;journalctl -xb&quot;</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">view</span>
<span class="nx">system</span><span class="w"> </span><span class="nx">logs</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;systemctl reboot&quot;</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">reboot</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;systemctl default&quot;</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">try</span><span class="w"> </span><span class="nx">again</span>
<span class="nx">to</span><span class="w"> </span><span class="nx">boot</span><span class="w"> </span><span class="nx">into</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">mode</span><span class="p">.</span>
</code></pre></div>

<h4>34. 列出当前使用的运行等级</h4>
<div class="highlight"><pre><span></span><code># systemctl get-default

multi-user.target
</code></pre></div>

<h4>35. 启动运行等级5，即图形模式</h4>
<div class="highlight"><pre><span></span><code># systemctl isolate runlevel5.target
或
# systemctl isolate graphical.target
</code></pre></div>

<h4>36. 启动运行等级3，即多用户模式（命令行）</h4>
<div class="highlight"><pre><span></span><code># systemctl isolate runlevel3.target
或
# systemctl isolate multiuser.target
</code></pre></div>

<h4>36. 设置多用户模式或图形模式为默认运行等级</h4>
<div class="highlight"><pre><span></span><code># systemctl set-default runlevel3.target

# systemctl set-default runlevel5.target
</code></pre></div>

<h4>37. 重启、停止、挂起、休眠系统或使系统进入混合睡眠</h4>
<div class="highlight"><pre><span></span><code># systemctl reboot

# systemctl halt

# systemctl suspend

# systemctl hibernate

# systemctl hybrid-sleep
</code></pre></div>

<p>对于不知运行等级为何物的人，说明如下。</p>
<ul>
<li>Runlevel 0 : 关闭系统</li>
<li>Runlevel 1 : 救援？维护模式</li>
<li>Runlevel 3 : 多用户，无图形系统</li>
<li>Runlevel 4 : 多用户，无图形系统</li>
<li>Runlevel 5 : 多用户，图形化系统</li>
<li>Runlevel 6 : 关闭并重启机器</li>
</ul>
<p>到此为止吧。保持连线，进行评论。别忘了在下面的评论中为我们提供一些有价值的反馈哦。喜欢我们、与我们分享，求扩散。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>