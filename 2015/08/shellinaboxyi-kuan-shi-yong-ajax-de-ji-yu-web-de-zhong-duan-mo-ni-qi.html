<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>shellinabox：一款使用 AJAX 的基于 Web 的终端模拟器</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: SK shellinabox简介 通常情况下，我们在访问任何远程服务器时，会使用常见的通信工具如OpenSSH和Putty等。但是，有可能我们在防火墙后面不能使用 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li class="active"><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2015/08/shellinaboxyi-kuan-shi-yong-ajax-de-ji-yu-web-de-zhong-duan-mo-ni-qi.html" rel="bookmark"
           title="Permalink to shellinabox：一款使用 AJAX 的基于 Web 的终端模拟器">shellinabox：一款使用 AJAX 的基于 Web 的终端模拟器</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-08-18T08:39:00+02:00">
                Published: Tue 18 August 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/fen-xiang">分享</a>.</p>

</footer><!-- /.post-info -->      <p>Author: SK</p>
<h3>shellinabox简介</h3>
<p>通常情况下，我们在访问任何远程服务器时，会使用常见的通信工具如OpenSSH和Putty等。但是，有可能我们在防火墙后面不能使用这些工具访问远程系统，或者防火墙只允许HTTPS流量才能通过。不用担心！即使你在这样的防火墙后面，我们依然有办法来访问你的远程系统。而且，你不需要安装任何类似于OpenSSH或Putty的通讯工具。你只需要有一个支持JavaScript和CSS的现代浏览器，并且你不用安装任何插件或第三方应用软件。</p>
<p>这个 <strong>Shell In A Box</strong>，发音是<strong>shellinabox</strong>，是由<strong>Markus Gutschke</strong>开发的一款自由开源的基于Web的Ajax的终端模拟器。它使用AJAX技术，通过Web浏览器提供了类似原生的 Shell 的外观和感受。</p>
<p><img alt="" src="/data/attachment/album/201508/17/224410zqq45qqtu1r9z3qn.jpg"></p>
<p>这个<strong>shellinaboxd</strong>守护进程实现了一个Web服务器，能够侦听指定的端口。其Web服务器可以发布一个或多个服务，这些服务显示在用 AJAX Web 应用实现的VT100模拟器中。默认情况下，端口为4200。你可以更改默认端口到任意选择的任意端口号。在你的远程服务器安装shellinabox以后，如果你想从本地系统接入，打开Web浏览器并导航到：<strong>http://IP-Address:4200/</strong>。输入你的用户名和密码，然后就可以开始使用你远程系统的Shell。看起来很有趣，不是吗？确实 有趣！</p>
<p><strong>免责声明</strong>:</p>
<p>shellinabox不是SSH客户端或任何安全软件。它仅仅是一个应用程序，能够通过Web浏览器模拟一个远程系统的Shell。同时，它和SSH没有任何关系。这不是可靠的安全地远程控制您的系统的方式。这只是迄今为止最简单的方法之一。无论如何，你都不应该在任何公共网络上运行它。</p>
<h3>安装shellinabox</h3>
<h4>在Debian / Ubuntu系统上：</h4>
<p>shellinabox在默认库是可用的。所以，你可以使用命令来安装它：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>shellinabox
</code></pre></div>

<h4>在RHEL / CentOS系统上：</h4>
<p>首先，使用命令安装EPEL仓库：</p>
<div class="highlight"><pre><span></span><code># yum install epel-release
</code></pre></div>

<p>然后，使用命令安装shellinabox：</p>
<div class="highlight"><pre><span></span><code># yum install shellinabox
</code></pre></div>

<p>完成！</p>
<h3>配置shellinabox</h3>
<p>正如我之前提到的，shellinabox侦听端口默认为<strong>4200</strong>。你可以将此端口更改为任意数字，以防别人猜到。</p>
<p>在Debian/Ubuntu系统上shellinabox配置文件的默认位置是<strong>/etc/default/shellinabox</strong>。在RHEL/CentOS/Fedora上，默认位置在<strong>/etc/sysconfig/shellinaboxd</strong>。</p>
<p>如果要更改默认端口，</p>
<p>在Debian / Ubuntu：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/default/shellinabox
</code></pre></div>

<p>在RHEL / CentOS / Fedora：</p>
<div class="highlight"><pre><span></span><code># vi /etc/sysconfig/shellinaboxd
</code></pre></div>

<p>更改你的端口到任意数字。因为我在本地网络上测试它，所以我使用默认值。</p>
<div class="highlight"><pre><span></span><code><span class="s s-Atom">#</span> <span class="nv">Shell</span> <span class="s s-Atom">in</span> <span class="s s-Atom">a</span> <span class="s s-Atom">box</span> <span class="s s-Atom">daemon</span> <span class="s s-Atom">configuration</span>
<span class="s s-Atom">#</span> <span class="nv">For</span> <span class="s s-Atom">details</span> <span class="s s-Atom">see</span> <span class="s s-Atom">shellinaboxd</span> <span class="s s-Atom">man</span> <span class="s s-Atom">page</span>

<span class="s s-Atom">#</span> <span class="nv">Basic</span> <span class="s s-Atom">options</span>
<span class="nv">USER</span><span class="o">=</span><span class="s s-Atom">shellinabox</span>
<span class="nv">GROUP</span><span class="o">=</span><span class="s s-Atom">shellinabox</span>
<span class="nv">CERTDIR</span><span class="s s-Atom">=/var</span><span class="o">/</span><span class="s s-Atom">lib</span><span class="o">/</span><span class="s s-Atom">shellinabox</span>
<span class="nv">PORT</span><span class="o">=</span><span class="mi">4200</span>
<span class="nv">OPTS</span><span class="s s-Atom">=</span><span class="s2">&quot;--disable-ssl-menu -s /:LOGIN&quot;</span>

<span class="s s-Atom">#</span> <span class="nv">Additional</span> <span class="s s-Atom">examples</span> <span class="s s-Atom">with</span> <span class="s s-Atom">custom</span> <span class="s s-Atom">options</span><span class="p">:</span>

<span class="s s-Atom">#</span> <span class="nv">Fancy</span> <span class="s s-Atom">configuration</span> <span class="s s-Atom">with</span> <span class="s s-Atom">right</span><span class="o">-</span><span class="s s-Atom">click</span> <span class="s s-Atom">menu</span> <span class="s s-Atom">choice</span> <span class="s s-Atom">for</span> <span class="s s-Atom">black</span><span class="o">-</span><span class="s s-Atom">on</span><span class="o">-</span><span class="s s-Atom">white</span><span class="p">:</span>
<span class="s s-Atom">#</span> <span class="nv">OPTS</span><span class="s s-Atom">=</span><span class="s2">&quot;--user-css Normal:+black-on-white.css,Reverse:-white-on-black.css --disable-ssl-menu -s /:LOGIN&quot;</span>

<span class="s s-Atom">#</span> <span class="nv">Simple</span> <span class="s s-Atom">configuration</span> <span class="s s-Atom">for</span> <span class="s s-Atom">running</span> <span class="s s-Atom">it</span> <span class="s s-Atom">as</span> <span class="s s-Atom">an</span> <span class="nv">SSH</span> <span class="s s-Atom">console</span> <span class="s s-Atom">with</span> <span class="nv">SSL</span> <span class="s s-Atom">disabled</span><span class="p">:</span>
<span class="s s-Atom">#</span> <span class="nv">OPTS</span><span class="s s-Atom">=</span><span class="s2">&quot;-t -s /:SSH:host.example.com&quot;</span>
</code></pre></div>

<p>重启shelinabox服务。</p>
<p><strong>在Debian/Ubuntu:</strong></p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>shellinabox
</code></pre></div>

<p>或者</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>service<span class="w"> </span>shellinabox<span class="w"> </span>restart
</code></pre></div>

<p>在RHEL/CentOS系统，运行下面的命令能在每次重启时自动启动shellinaboxd服务</p>
<div class="highlight"><pre><span></span><code># systemctl enable shellinaboxd
</code></pre></div>

<p>或者</p>
<div class="highlight"><pre><span></span><code># chkconfig shellinaboxd on
</code></pre></div>

<p>如果你正在运行一个防火墙，记得要打开端口<strong>4200</strong>或任何你指定的端口。</p>
<p>例如，在RHEL/CentOS系统，你可以如下图所示允许端口。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># firewall-cmd --permanent --add-port=4200/tcp  </span>
<span class="c1"># firewall-cmd --reload</span>
</code></pre></div>

<h3>使用</h3>
<p>现在，在你的客户端系统，打开Web浏览器并导航到：<strong>https://ip-address-of-remote-servers:4200</strong>。</p>
<p><strong>注意</strong>：如果你改变了端口，请填写修改后的端口。</p>
<p>你会得到一个证书问题的警告信息。接受该证书并继续。</p>
<p><img alt="Privacy error - Google Chrome_001" src="/data/attachment/album/201508/17/224413tpqg8mue8sv74sv7.jpg"></p>
<p>输入远程系统的用户名和密码。现在，您就能够从浏览器本身访问远程系统的外壳。</p>
<p><img alt="Shell In A Box - Google Chrome_003" src="/data/attachment/album/201508/17/224413xh3q3minm7o3qr00.jpg"></p>
<p>右键点击你浏览器的空白位置。你可以得到一些有很有用的额外菜单选项。</p>
<p><img alt="Shell In A Box - Google Chrome_004" src="/data/attachment/album/201508/17/224414ewcpwb9q93jsks55.jpg"></p>
<p>从现在开始，你可以通过本地系统的Web浏览器在你的远程服务器随意操作。</p>
<p>当你完成工作时，记得输入<code>exit</code>退出。</p>
<p>当再次连接到远程系统时，单击<strong>连接</strong>按钮，然后输入远程服务器的用户名和密码。</p>
<p><img alt="Shell In A Box - Google Chrome_005" src="/data/attachment/album/201508/17/224415rg9vuzdfgdedvyy9.jpg"></p>
<p>如果想了解shellinabox更多细节，在你的终端键入下面的命令：</p>
<div class="highlight"><pre><span></span><code># man shellinabox
</code></pre></div>

<p>或者</p>
<div class="highlight"><pre><span></span><code># shellinaboxd -help
</code></pre></div>

<p>同时，参考<a href="https://code.google.com/p/shellinabox/wiki/shellinaboxd_man">shellinabox 在wiki页面的介绍</a>，来了解shellinabox的综合使用细节。</p>
<h3>结论</h3>
<p>正如我之前提到的，如果你在服务器运行在防火墙后面，那么基于web的SSH工具是非常有用的。有许多基于web的SSH工具，但shellinabox是非常简单而有用的工具，可以从的网络上的任何地方，模拟一个远程系统的Shell。因为它是基于浏览器的，所以你可以从任何设备访问您的远程服务器，只要你有一个支持JavaScript和CSS的浏览器。</p>
<p>就这些啦。祝你今天有个好心情！</p>
<h4>参考链接：</h4>
<ul>
<li><a href="https://code.google.com/p/shellinabox/">shellinabox website</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>