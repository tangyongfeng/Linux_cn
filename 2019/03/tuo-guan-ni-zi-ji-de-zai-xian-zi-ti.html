<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>托管你自己的在线字体</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Seth Kenlon 使用自托管的开源字体来定制你的网页。 字体对许多计算机用户来说可能都是很神秘的东西。举个例子，你在制作 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/03/tuo-guan-ni-zi-ji-de-zai-xian-zi-ti.html" rel="bookmark"
           title="Permalink to 托管你自己的在线字体">托管你自己的在线字体</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-03-27T09:35:56+01:00">
                Published: Wed 27 March 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Seth Kenlon</p>
<blockquote>
<p>使用自托管的开源字体来定制你的网页。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201903/27/093535ixx22d5xs7dbpmrs.jpg"></p>
<p>字体对许多计算机用户来说可能都是很神秘的东西。举个例子，你在制作好一张很酷的传单之后，你需要将它送到某个地方去打印，结果发现，你设计的所有字体都变成了 Arial，这多半是因为打印店没用安装你设计用到的那些字体。不过，我们仍有很多方法来避免这种情况：你可以将这些使用特定字体的单词转换为路径，你也可以将它封装为 PDF，或是把开源字体封装到你的设计文件中，或者至少列出所需字体。不过，我们总会忘记一些事情，所以这仍是一个问题。</p>
<p>Web 上也有类似的问题。如果你对 CSS 有所了解，你可能会见过这种声明：</p>
<div class="highlight"><pre><span></span><code><span class="nt">h1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Times New Roman&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Times</span><span class="p">,</span><span class="w"> </span><span class="kc">serif</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<p>这是设计师正在尝试定义网站使用要用到的特定字体，如果用户没有安装 Times New Roman 这个字体，便会回落到另一个字体；如果用户也没有安装 Times 这个字体，便再次回落。它比使用图片而不是文本更好一些，但是在没有字体托管的情况下，这仍是一种棘手且不雅观的方法。不过，在早期的互联网时代，我们不得不这样做。</p>
<h3>在线字体</h3>
<p>在线字体的登场，把字体管理从客户端搬上了服务端。如今网页上的字体通常由服务器为客户端渲染，而不是要求浏览器从用户的系统中查找字体。谷歌和其它供应商托管了许多开源字体，网站设计师们可以很轻松的用 CSS 来引用它们。</p>
<p>不过，问题是，引用这些字体并不是不花费任何代价的。虽然引用它们免费，但是像谷歌这样的巨头喜欢跟踪那些引用它们资源的网站，其中就包括了字体资源。如果你不想你的网站帮谷歌记录每个人的活动，你可以自己托管在线字体。别觉得这很难，它其实是很简单的，大概流程就是上传字体到你的主机，再使用一个简单的 CSS 便可完成。这样做还有个好处，你的网站能更快地加载，因为它会在加载每个页面的时候进行更少的外部调用。</p>
<h3>自托管在线字体</h3>
<p>首先，你需要一个开源字体。如果你没有了解过那些令人费解的软件协议，你可能会感到很疑惑，特别是很多字体看起来都是免费的。我们中应该很少有人有字体付费意识，但是他们却在电脑上安装了一些高价的字体。不过，由于授权协议，它使得你的电脑也许带着一些 <a href="https://docs.microsoft.com/en-us/typography/fonts/font-faq">法律上不允许复制和再分发</a> 的字体。像 Arial、Verdana、Calibri、Georgia、Impact、Lucida 和 Lucida Grande、Times 和 Times New Roman、Trebuchet、Geneva 以及其它的很多字体都是被微软、苹果和 Adobe 这种大公司所拥有的。如果你购买了一台预装了 Windows 或 macOS 的电脑，你就获得了使用这些字体的权利，但是你并没有拥有那些字体，也没有被许可上传它们至服务器（除非额外说明）。</p>
<p>幸运的事，开源热潮在很久以前就席卷了字体界。然后就有了许多优秀的开源字体的合集和项目，比如 <a href="https://www.theleagueofmoveabletype.com/">The League of Moveable Type</a>、<a href="https://fontlibrary.org/">Font Library</a> 以及 <a href="https://www.omnibus-type.com">Omnibus Type</a>，甚至还有一些来自 <a href="https://github.com/googlefonts">Google</a> 和 <a href="https://github.com/adobe-fonts">Adobe</a> 的字体。</p>
<p>常见的字体格式有 TTF、OTF、WOFF、EOT 等。因为 Sorts Mill Goudy 发行过 <ruby> WOFF <rt>  Web Open Font Format </rt></ruby>（互联网开放字体格式，Mozilla 参与了部分开发）版本，所以下文中我会用它来做例子。当然，其它字体的方法也是一样的。</p>
<p>假设你想在你的网站上使用 <a href="https://www.theleagueofmoveabletype.com/sorts-mill-goudy">Sorts Mill Goudy</a> 这个字体：</p>
<p>1、将字体文件 <code>GoudyStM-webfont.woff</code> 上传至你的服务器：</p>
<div class="highlight"><pre><span></span><code><span class="n">scp</span><span class="w"> </span><span class="n">GoudyStM</span><span class="o">-</span><span class="n">webfont</span><span class="p">.</span><span class="n">woff</span><span class="w"> </span><span class="n">seth</span><span class="nv">@example</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="o">~/</span><span class="n">www</span><span class="o">/</span><span class="n">fonts</span><span class="o">/</span>
</code></pre></div>

<p>你的主机可能带有像 cPanel 这样的图形化工具，通过它们上传也是一样的。</p>
<p>2、在你网站的 CSS 文件中，添加 <code>@font-face</code> 语句，添加后应该和这个差不多：</p>
<div class="highlight"><pre><span></span><code><span class="nv">@font</span><span class="o">-</span><span class="n">face</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">  </span><span class="n">font</span><span class="o">-</span><span class="nl">family</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;titlefont&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="nl">src</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p">(</span><span class="ss">&quot;../fonts/GoudyStM-webfont.woff&quot;</span><span class="p">);</span><span class="w"> </span>
<span class="err">}</span>
</code></pre></div>

<p><code>font-family</code> 的值是你来决定的。这是一个易于理解的名字，它用于放在使用字体名的地方。我在这里使用 “titlefont” 作为例子，是因为我希望它被用来显示标题字体。你也可以使用 “officialfont” 和 “myfont” 这样的名字。</p>
<p><code>src</code> 值是你字体文件的路径。这是你服务器上字体的路径。在这里，我用 <code>fonts</code> 目录来作为示例，它和 <code>css</code> 在一个文件夹里。你服务器的文件结构可能和我的不一样，所以你需要调整一下这个路径。记住一点，一个点意味着<em>工作目录</em>，两个点则代表<em>父目录</em>。</p>
<p>3、现在，你已经定义了字体的名字和目录，你可以在任何指定的 CSS 类或 ID 来调用它了。举个例子，如果你希望以 Sorts Mill Goudy 字体来渲染 <code>&lt;h1&gt;</code>，只需要在 CSS 规则中加入你自己的字体名称：</p>
<div class="highlight"><pre><span></span><code><span class="nt">h1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;titlefont&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">serif</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<p>现在，你已经成功地托管并使用你自己的字体了。</p>
<p><img alt="在线字体的实际效果" src="/data/attachment/album/201903/27/093600qvewerziqeipyzvj.jpg" title="Web fonts on a website"></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>