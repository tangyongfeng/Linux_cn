<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在 Linux 命令行下使用“原力”</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Alan Formy-duval 和绝地武士的原力一样，-f 参数是很强大的，并伴随着潜在的毁灭性，在你能用好的时候又很便利。 近些年来，科幻发 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/05/zai-linux-ming-ling-xing-xia-shi-yong-yuan-li.html" rel="bookmark"
           title="Permalink to 在 Linux 命令行下使用“原力”">在 Linux 命令行下使用“原力”</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-05-21T08:39:00+02:00">
                Published: Tue 21 May 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Alan Formy-duval</p>
<blockquote>
<p>和绝地武士的原力一样，<code>-f</code> 参数是很强大的，并伴随着潜在的毁灭性，在你能用好的时候又很便利。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201905/21/083913jqbwn4ywq1jqnb9y.jpg"></p>
<p>近些年来，科幻发烧友开始在每年的 5 月 4 日庆祝<a href="https://www.starwars.com/star-wars-day">星战节</a>，其口号是绝地武士的祝福语”愿<ruby> 原力 <rt>  Force </rt></ruby>和你同在“。虽然大多数 Linux 用户可能不是绝地武士，但我们依然可以使用<ruby> 原力 <rt>  Force </rt></ruby>。自然，如果尤达大师只是叫天行者卢克输入什么 “man X-Wing 战机“、“man 原力”，或者 RTFM（去读原力手册，肯定是这个意思对不对），那这电影肯定没啥意思。（LCTT 译注：RTFM 是 “Read The Fucking Manual” 的缩写 —— 读读该死的手册吧）。</p>
<p>很多 Linux 命令都有 <code>-f</code> 选项，意思你现在肯定也知道了，原力（LCTT 译注：force 选项原意是“强制”）！很多时候你先尝试执行命令然后失败了，或者提示你需要补充输入更多选项。通常这都是为了保护你试着改变的文件，或者告诉用户该设备正忙或文件已经存在之类的。</p>
<p>如果你不想被这些提醒打扰或者压根就不在乎，就使用原力吧！</p>
<p>不过要小心，通常使用原力选项是摧毁性的。所以用户一定要格外注意！并且确保你知道自己在做什么！用原力就要承担后果！</p>
<p>以下是一些常见 Linux 命令的原力选项和它们的效果，以及常见使用场景。</p>
<h3>cp</h3>
<p><code>cp</code> 是 “copy” 的缩写，这是个被用来复制文件或者目录的命令。其 <a href="http://man7.org/linux/man-pages/man1/cp.1.html">man 页面</a> 说：</p>
<blockquote>
<p>-f, –force</p>
<p>如果已经存在的目标文件无法被打开，删除它并重试</p>
</blockquote>
<p>你可能会用它来处理只读状态的文件：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span>
<span class="n">total</span><span class="w"> </span><span class="mi">8</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">rw</span><span class="o">----</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">12</span><span class="err">:</span><span class="mi">24</span><span class="w"> </span><span class="n">Hoth</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">-----</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">12</span><span class="err">:</span><span class="mi">23</span><span class="w"> </span><span class="n">Naboo</span>
<span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">Hoth</span><span class="w"> </span><span class="n">Naboo</span>
<span class="n">Icy</span><span class="w"> </span><span class="n">Planet</span>

<span class="n">Green</span><span class="w"> </span><span class="n">Planet</span>
</code></pre></div>

<p>如果你想要复制一个叫做 <code>Hoth</code> 的文件到 <code>Naboo</code>，但因为 <code>Naboo</code> 目前是只读状态，<code>cp</code> 命令不会执行：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="n">Hoth</span><span class="w"> </span><span class="n">Naboo</span>
<span class="nl">cp</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="s1">&#39;Naboo&#39;</span><span class="err">:</span><span class="w"> </span><span class="n">Permission</span><span class="w"> </span><span class="n">denied</span>
</code></pre></div>

<p>但通过使用原力，<code>cp</code> 会强制执行。<code>Hoth</code> 的内容和文件权限会直接被复制到 <code>Naboo</code>：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">Hoth</span><span class="w"> </span><span class="n">Naboo</span>
<span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">Hoth</span><span class="w"> </span><span class="n">Naboo</span>
<span class="n">Icy</span><span class="w"> </span><span class="n">Planet</span>

<span class="n">Icy</span><span class="w"> </span><span class="n">Planet</span>

<span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span>
<span class="n">total</span><span class="w"> </span><span class="mi">8</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">rw</span><span class="o">----</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">12</span><span class="err">:</span><span class="mi">32</span><span class="w"> </span><span class="n">Hoth</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">rw</span><span class="c1">---- 1 alan alan 12 May 1 12:38 Naboo</span>
</code></pre></div>

<h3>ln</h3>
<p><code>ln</code> 命令是用来在文件之间建立链接的，其 <a href="http://man7.org/linux/man-pages/man1/ln.1.html">man 页面</a> 描述的原力选项如下：</p>
<blockquote>
<p>-f, –force</p>
<p>移除当前存在的文件</p>
</blockquote>
<p>假设莱娅公主在维护一个 Java 应用服务器，并且她又一个存放这所有 Java 版本的目录，比如：</p>
<div class="highlight"><pre><span></span><code><span class="n">leia</span><span class="nv">@workstation</span><span class="err">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">java</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">lt</span>
<span class="n">total</span><span class="w"> </span><span class="mi">28</span>
<span class="n">lrwxrwxrwx</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w">   </span><span class="mi">12</span><span class="w"> </span><span class="n">Mar</span><span class="w">  </span><span class="mi">5</span><span class="w">  </span><span class="mi">2018</span><span class="w"> </span><span class="n">jdk</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_162</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">Mar</span><span class="w">  </span><span class="mi">5</span><span class="w">  </span><span class="mi">2018</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_162</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">28</span><span class="w">  </span><span class="mi">2017</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_144</span>
</code></pre></div>

<p>正如你所看到的，这里有很多个版本的 JDK，并有一个符号链接指向最新版的 JDK。她接着用一个脚本来安装最新版本的 JDK。但是如果没有原力选项的话以下命令是不会成功的：</p>
<div class="highlight"><pre><span></span><code>tar xvzmf jdk1.8.0_181.tar.gz -C jdk1.8.0_181/
ln -vs jdk1.8.0_181 jdk
</code></pre></div>

<p><code>tar</code> 命令会解压 .gz 文件到一个特定的目标目录，但 <code>ln</code> 命令会失败，因为这个链接已经存在了。这样的结果是该符号链接不会指向最新版本的 JDK：</p>
<div class="highlight"><pre><span></span><code><span class="n">leia</span><span class="nv">@workstation</span><span class="err">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">java</span><span class="err">$</span><span class="w"> </span><span class="k">ln</span><span class="w"> </span><span class="o">-</span><span class="n">vs</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_181</span><span class="w"> </span><span class="n">jdk</span>
<span class="k">ln</span><span class="err">:</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">symbolic</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="s1">&#39;jdk/jdk1.8.0_181&#39;</span><span class="err">:</span><span class="w"> </span><span class="k">File</span><span class="w"> </span><span class="ow">exists</span>
<span class="n">leia</span><span class="nv">@workstation</span><span class="err">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">java</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">lt</span>
<span class="n">total</span><span class="w"> </span><span class="mi">28</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">x</span><span class="o">---</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">May</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="mi">15</span><span class="err">:</span><span class="mi">44</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_181</span>
<span class="n">lrwxrwxrwx</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w">   </span><span class="mi">12</span><span class="w"> </span><span class="n">Mar</span><span class="w">  </span><span class="mi">5</span><span class="w">  </span><span class="mi">2018</span><span class="w"> </span><span class="n">jdk</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_162</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">Mar</span><span class="w">  </span><span class="mi">5</span><span class="w">  </span><span class="mi">2018</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_162</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">28</span><span class="w">  </span><span class="mi">2017</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_144</span>
</code></pre></div>

<p>她可以通过使用原力选项强制 <code>ln</code> 更新链接，但这里她还需要使用 <code>-n</code>，<code>-n</code> 是因为这个情况下链接其实指向一个目录而非文件。这样的话，链接就会正确指向最新版本的JDK了。</p>
<div class="highlight"><pre><span></span><code><span class="n">leia</span><span class="nv">@workstation</span><span class="err">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">java</span><span class="err">$</span><span class="w"> </span><span class="k">ln</span><span class="w"> </span><span class="o">-</span><span class="n">vsnf</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_181</span><span class="w"> </span><span class="n">jdk</span>
<span class="s1">&#39;jdk&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;jdk1.8.0_181&#39;</span>
<span class="n">leia</span><span class="nv">@workstation</span><span class="err">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">java</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">lt</span>
<span class="n">total</span><span class="w"> </span><span class="mi">28</span>
<span class="n">lrwxrwxrwx</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">16</span><span class="err">:</span><span class="mi">13</span><span class="w"> </span><span class="n">jdk</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_181</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">x</span><span class="o">---</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">15</span><span class="err">:</span><span class="mi">44</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_181</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">2018</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_162</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="n">leia</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="mi">2017</span><span class="w"> </span><span class="n">jdk1</span><span class="mf">.8.0</span><span class="n">_144</span>
</code></pre></div>

<p>你可以配置 Java 应用使其一直使用在 <code>/usr/lib/java/jdk</code> 处的 JDK，而不用每次升级都更新。</p>
<h3>rm</h3>
<p><code>rm</code> 命令是 “remove” 的缩写（也叫做删除，因为某些系统 <code>del</code> 命令也干这事）。其 <a href="http://man7.org/linux/man-pages/man1/rm.1.html">man 页面</a> 对原力选项的描述如下：</p>
<blockquote>
<p>-f, –force</p>
<p>无视不存在的文件或者参数，不向用户确认</p>
</blockquote>
<p>如果你尝试删除一个只读的文件，<code>rm</code> 会寻求用户的确认：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span>
<span class="n">total</span><span class="w"> </span><span class="mi">4</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">-----</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="n">alan</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="n">May</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="mi">11</span><span class="err">:</span><span class="mi">38</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="n">wing</span>
<span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="n">wing</span><span class="w"> </span>
<span class="nl">rm</span><span class="p">:</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="k">write</span><span class="o">-</span><span class="n">protected</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="s1">&#39;B-wing&#39;</span><span class="vm">?</span>
</code></pre></div>

<p>你一定要输入 <code>y</code> 或者 <code>n</code> 来回答确认才能让 <code>rm</code> 命令继续。如果你使用原力选项，<code>rm</code> 就不会寻求你的确认而直接删除文件：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">B</span><span class="o">-</span><span class="n">wing</span>
<span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span>
<span class="n">total</span><span class="w"> </span><span class="mi">0</span>
<span class="o">[</span><span class="n">alan@workstation ~</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<p>最常见的 <code>rm</code> 原力选项用法是用来删除目录。 <code>-r</code>（递归）选项会让 <code>rm</code> 删除目录，当和原力选项结合起来，它会删除这个文件夹及其内容而无需用户确认。</p>
<p><code>rm</code> 命令和一些选项结合起来是致命的，一直以来互联网上都有关于误用 <code>rm</code> 删除整个系统之类的玩笑和鬼故事。比如最出名的一不当心执行 <code>rm -rf .</code> 会直接删除目录和文件（没有用户确认）。（LCTT 译注：真的这么干过的校对飘过~~请按下回车前再三确认：我是谁，我在哪里，我在干什么）</p>
<h3>userdel</h3>
<p><code>userdel</code> 命令使用来删除用户的。其 <a href="http://man7.org/linux/man-pages/man8/userdel.8.html">man 页面</a> 是这样描述它的原力选项的：</p>
<blockquote>
<p>-f, –force</p>
<p>这个选项会强制移除用户，即便用户当前处于登入状态。它同时还会强制 删除用户的目录和邮件存储，即便这个用户目录被别人共享或者邮件存储并不 属于这个用户。如果 <code>USERGROUPS_ENAB</code> 在 <code>/etc/login.defs</code> 里是 <code>yes</code> 并且有一个组和此用户同名的话，这个组也会被移除，即便这个组还是别 的用户的主要用户组也一样。</p>
<p>注意：这个选项有风险并可能让系统处于不稳定状态。</p>
</blockquote>
<p>当欧比旺抵达穆斯塔法星的时候，他知道自己的使命。他需要删掉达斯·维达的用户账户——而达斯还在里面呢。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@workstation ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">fu</span><span class="w"> </span><span class="n">darth</span>
<span class="n">UID</span><span class="w">        </span><span class="n">PID</span><span class="w">  </span><span class="n">PPID</span><span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">STIME</span><span class="w"> </span><span class="n">TTY</span><span class="w">          </span><span class="nc">TIME</span><span class="w"> </span><span class="n">CMD</span>
<span class="n">darth</span><span class="w">     </span><span class="mi">7663</span><span class="w">  </span><span class="mi">7655</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="mi">13</span><span class="err">:</span><span class="mi">28</span><span class="w"> </span><span class="n">pts</span><span class="o">/</span><span class="mi">3</span><span class="w">    </span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">00</span><span class="w"> </span><span class="o">-</span><span class="n">bash</span>
<span class="o">[</span><span class="n">root@workstation ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">userdel</span><span class="w"> </span><span class="n">darth</span>
<span class="nl">userdel</span><span class="p">:</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">darth</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="mi">7663</span>
</code></pre></div>

<p>因为达斯还登在系统里，欧比旺需要使用原力选项操作 <code>userdel</code>。这能强制删除当前登入的用户。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@workstation ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">userdel</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">darth</span>
<span class="nl">userdel</span><span class="p">:</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">darth</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="mi">7663</span>
<span class="o">[</span><span class="n">root@workstation ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">finger</span><span class="w"> </span><span class="n">darth</span>
<span class="nl">finger</span><span class="p">:</span><span class="w"> </span><span class="nl">darth</span><span class="p">:</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="k">user</span><span class="p">.</span>
<span class="o">[</span><span class="n">root@workstation ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">fu</span><span class="w"> </span><span class="n">darth</span>
<span class="nl">error</span><span class="p">:</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">exist</span>
</code></pre></div>

<p>正如我们所见到的一样，<code>finger</code> 和 <code>ps</code> 命令让我们确认了达斯已经被删除了。</p>
<h3>在 Shell 脚本里使用原力</h3>
<p>很多命令都有原力选项，而在 shell 脚本里他们特别有用。因为我们经常使用脚本完成定期或者自动化的任务，避免用户输入至关重要，不然的话自动任务就无法完成了</p>
<p>我希望上面的几个例子能帮你理解一些需要使用原力的情况。你在命令行使用原力或把它们写入脚本之前应当完全理解它们的作用。误用原力会有毁灭性的后果——时常是对整个系统，甚至不仅限于一台设备。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>