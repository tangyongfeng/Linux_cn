<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>使用 Java 框架 Scipio ERP 创建一个在线商店</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Paul Piper Scipio ERP 具有包罗万象的应用程序和功能。 如果，你想在网上销售产品或服务，但要么找不到合适的软件，要么觉得定制 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/09/shi-yong-java-kuang-jia-scipio-erp-chuang-jian-yi-ge-zai-xian-shang-dian.html" rel="bookmark"
           title="Permalink to 使用 Java 框架 Scipio ERP 创建一个在线商店">使用 Java 框架 Scipio ERP 创建一个在线商店</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-09-22T13:33:08+02:00">
                Published: Sun 22 September 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Paul Piper</p>
<blockquote>
<p>Scipio ERP 具有包罗万象的应用程序和功能。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201909/22/133258hqvwax5w1zvq5ffa.jpg"></p>
<p>如果，你想在网上销售产品或服务，但要么找不到合适的软件，要么觉得定制成本太高？那么，<a href="https://www.scipioerp.com">Scipio ERP</a> 也许正是你想要的。</p>
<p>Scipio ERP 是一个基于 Java 的开源的电子商务框架，具有包罗万象的应用程序和功能。这个项目于 2014 年从 <a href="https://ofbiz.apache.org/">Apache OFBiz</a> 分叉而来，侧重于更好的定制和更现代的吸引力。这个电子商务组件非常丰富，可以在多商店环境中工作，同时支持国际化，具有琳琅满目的产品配置，而且它还兼容现代 HTML 框架。该软件还为许多其他业务场景提供标准应用程序，例如会计、仓库管理或销售团队自动化。它都是高度标准化的，因此易于定制，如果你想要的不仅仅是一个虚拟购物车，这是非常棒的。</p>
<p>该系统也使得跟上现代 Web 标准变得非常容易。所有界面都是使用系统的“<a href="https://www.scipioerp.com/community/developer/freemarker-macros/">模板工具包</a>”构建的，这是一个易于学习的宏集，可以将 HTML 与所有应用程序分开。正因为如此，每个应用程序都已经标准化到核心。听起来令人困惑？它真的不是 HTML——它看起来很像 HTML，但你写的内容少了很多。</p>
<h3>初始安装</h3>
<p>在你开始之前，请确保你已经安装了 Java 1.8（或更高版本）的 SDK 以及一个 Git 客户端。完成了？太棒了！接下来，切换到 Github 上的主分支：</p>
<div class="highlight"><pre><span></span><code>git clone https://github.com/ilscipio/scipio-erp.git
cd scipio-erp
git checkout master
</code></pre></div>

<p>要安装该系统，只需要运行 <code>./install.sh</code> 并从命令行中选择任一选项。在开发过程中，最好一直使用 “installation for development”（选项 1），它还将安装一系列演示数据。对于专业安装，你可以修改初始配置数据（“种子数据”），以便自动为你设置公司和目录数据。默认情况下，系统将使用内部数据库运行，但是它<a href="https://www.scipioerp.com/community/developer/installation-configuration/configuration/#database-configuration">也可以配置</a>使用各种关系数据库，比如 PostgreSQL 和 MariaDB 等。</p>
<p><img alt="安装向导" src="/data/attachment/album/201909/22/133311l37pcpchf3s77f3v.jpg" title="Setup wizard"></p>
<p><em>按照安装向导完成初始配置</em></p>
<p>通过命令 <code>./start.sh</code> 启动系统然后打开链接 <a href="https://localhost:8443/setup/">https://localhost:8443/setup/</a> 完成配置。如果你安装了演示数据, 你可以使用用户名 <code>admin</code> 和密码 <code>scipio</code> 进行登录。在安装向导中，你可以设置公司简介、会计、仓库、产品目录、在线商店和额外的用户配置信息。暂时在产品商店配置界面上跳过网站实体的配置。系统允许你使用不同的底层代码运行多个在线商店；除非你想这样做，一直选择默认值是最简单的。</p>
<p>祝贺你，你刚刚安装了 Scipio ERP！在界面上操作一两分钟，感受一下它的功能。</p>
<h3>捷径</h3>
<p>在你进入自定义之前，这里有一些方便的命令可以帮助你：</p>
<ul>
<li>创建一个 shop-override：<code>./ant create-component-shop-override</code></li>
<li>创建一个新组件：<code>./ant create-component</code></li>
<li>创建一个新主题组件：<code>./ant create-theme</code></li>
<li>创建管理员用户：<code>./ant create-admin-user-login</code></li>
<li>各种其他实用功能：<code>./ant -p</code></li>
<li>用于安装和更新插件的实用程序：<code>./git-addons help</code></li>
</ul>
<p>另外，请记下以下位置：</p>
<ul>
<li>将 Scipio 作为服务运行的脚本：<code>/tools/scripts/</code></li>
<li>日志输出目录：<code>/runtime/logs</code></li>
<li>管理应用程序：<code>&lt;https://localhost:8443/admin/&gt;</code></li>
<li>电子商务应用程序：<code>&lt;https://localhost:8443/shop/&gt;</code></li>
</ul>
<p>最后，Scipio ERP 在以下五个主要目录中构建了所有代码：</p>
<ul>
<li><code>framework</code>: 框架相关的源，应用程序服务器，通用界面和配置</li>
<li><code>applications</code>: 核心应用程序</li>
<li><code>addons</code>: 第三方扩展</li>
<li><code>themes</code>: 修改界面外观</li>
<li><code>hot-deploy</code>: 你自己的组件</li>
</ul>
<p>除了一些配置，你将在 <code>hot-deploy</code> 和 <code>themes</code> 目录中进行开发。</p>
<h3>在线商店定制</h3>
<p>要真正使系统成为你自己的系统，请开始考虑使用<a href="https://www.scipioerp.com/community/developer/architecture/components/">组件</a>。组件是一种模块化方法，可以覆盖、扩展和添加到系统中。你可以将组件视为独立 Web 模块，可以捕获有关数据库（<a href="https://www.scipioerp.com/community/developer/entities/">实体</a>）、功能（<a href="https://www.scipioerp.com/community/developer/services/">服务</a>）、界面（<a href="https://www.scipioerp.com/community/developer/views-requests/">视图</a>）、<a href="https://www.scipioerp.com/community/developer/events-actions/">事件和操作</a>和 Web 应用程序等的信息。由于组件功能，你可以添加自己的代码，同时保持与原始源兼容。</p>
<p>运行命令 <code>./ant create-component-shop-override</code> 并按照步骤创建你的在线商店组件。该操作将会在 <code>hot-deploy</code> 目录内创建一个新目录，该目录将扩展并覆盖原始的电子商务应用程序。</p>
<p><img alt="组件目录结构" src="/data/attachment/album/201909/22/133317n930l8lnl49a4old.jpg" title="component directory structure"></p>
<p><em>一个典型的组件目录结构。</em></p>
<p>你的组件将具有以下目录结构：</p>
<ul>
<li><code>config</code>: 配置</li>
<li><code>data</code>: 种子数据</li>
<li><code>entitydef</code>: 数据库表定义</li>
<li><code>script</code>: Groovy 脚本的位置</li>
<li><code>servicedef</code>: 服务定义</li>
<li><code>src</code>: Java 类</li>
<li><code>webapp</code>: 你的 web 应用程序</li>
<li><code>widget</code>: 界面定义</li>
</ul>
<p>此外，<code>ivy.xml</code> 文件允许你将 Maven 库添加到构建过程中，<code>ofbiz-component.xml</code> 文件定义整个组件和 Web 应用程序结构。除了一些在当前目录所能够看到的，你还可以在 Web 应用程序的 <code>WEB-INF</code> 目录中找到 <code>controller.xml</code> 文件。这允许你定义请求实体并将它们连接到事件和界面。仅对于界面来说，你还可以使用内置的 CMS 功能，但优先要坚持使用核心机制。在引入更改之前，请熟悉 <code>/applications/shop/</code>。</p>
<h4>添加自定义界面</h4>
<p>还记得<a href="https://www.scipioerp.com/community/developer/freemarker-macros/">模板工具包</a>吗？你会发现它在每个界面都有使用到。你可以将其视为一组易于学习的宏，它用来构建所有内容。下面是一个例子：</p>
<div class="highlight"><pre><span></span><code><span class="err">&lt;</span>@section<span class="w"> </span>title=&quot;Title&quot;&gt;
<span class="w">    </span><span class="err">&lt;</span>@heading<span class="w"> </span>id=&quot;slider&quot;&gt;Slider<span class="err">&lt;</span>/@heading&gt;
<span class="w">    </span><span class="err">&lt;</span>@row&gt;
<span class="w">        </span><span class="err">&lt;</span>@cell<span class="w"> </span>columns=6&gt;
<span class="w">            </span><span class="err">&lt;</span>@slider<span class="w"> </span>id=&quot;&quot;<span class="w"> </span>class=&quot;&quot;<span class="w"> </span>controls=true<span class="w"> </span>indicator=true&gt;
<span class="w">                </span><span class="err">&lt;</span>@slide<span class="w"> </span>link=&quot;#&quot;<span class="w"> </span>image=&quot;https://placehold.it/800x300&quot;&gt;Just<span class="w"> </span>some<span class="w"> </span>content…<span class="err">&lt;</span>/@slide&gt;
<span class="w">                </span><span class="err">&lt;</span>@slide<span class="w"> </span>title=&quot;This<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>title&quot;<span class="w"> </span>link=&quot;#&quot;<span class="w"> </span>image=&quot;https://placehold.it/800x300&quot;&gt;<span class="err">&lt;</span>/@slide&gt;
<span class="w">            </span><span class="err">&lt;</span>/@slider&gt;
<span class="w">        </span><span class="err">&lt;</span>/@cell&gt;
<span class="w">        </span><span class="err">&lt;</span>@cell<span class="w"> </span>columns=6&gt;Second<span class="w"> </span>column<span class="err">&lt;</span>/@cell&gt;
<span class="w">    </span><span class="err">&lt;</span>/@row&gt;
<span class="err">&lt;</span>/@section&gt;
</code></pre></div>

<p>不是很难，对吧？同时，主题包含 HTML 定义和样式。这将权力交给你的前端开发人员，他们可以定义每个宏的输出，并坚持使用自己的构建工具进行开发。</p>
<p>我们快点试试吧。首先，在你自己的在线商店上定义一个请求。你将修改此代码。一个内置的 CMS 系统也可以通过 <a href="https://localhost:8443/cms/">https://localhost:8443/cms/</a> 进行访问，它允许你以更有效的方式创建新模板和界面。它与模板工具包完全兼容，并附带可根据你的喜好采用的示例模板。但是既然我们试图在这里理解系统，那么首先让我们采用更复杂的方法。</p>
<p>打开你商店 <code>webapp</code> 目录中的 <a href="https://www.scipioerp.com/community/developer/views-requests/request-controller/">controller.xml</a> 文件。控制器会跟踪请求事件并相应地执行操作。下面的操作将会在 <code>/shop/test</code> 下创建一个新的请求:</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Request Mappings --&gt;</span>
<span class="nt">&lt;request-map</span><span class="w"> </span><span class="na">uri=</span><span class="s">&quot;test&quot;</span><span class="nt">&gt;</span>
<span class="w">     </span><span class="nt">&lt;security</span><span class="w"> </span><span class="na">https=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">auth=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;response</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;success&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;view&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;test&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/request-map&gt;</span>
</code></pre></div>

<p>你可以定义多个响应，如果需要，可以在请求中使用事件或服务调用来确定你可能要使用的响应。我选择了“视图”类型的响应。视图是渲染的响应；其他类型是请求重定向、转发等。系统附带各种渲染器，可让你稍后确定输出；为此，请添加以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;!</span><span class="o">--</span><span class="w"> </span><span class="nx">View</span><span class="w"> </span><span class="nx">Mappings</span><span class="w"> </span><span class="o">--</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nx">view</span><span class="o">-</span><span class="nx">map</span><span class="w"> </span><span class="nx">name</span><span class="p">=</span><span class="s">&quot;test&quot;</span><span class="w"> </span><span class="k">type</span><span class="p">=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nx">page</span><span class="p">=</span><span class="s">&quot;component://mycomponent/widget/CommonScreens.xml#test&quot;</span><span class="o">/</span><span class="p">&gt;</span>
</code></pre></div>

<p>用你自己的组件名称替换 <code>my-component</code>。然后，你可以通过在 <code>widget/CommonScreens.xml</code> 文件的标签内添加以下内容来定义你的第一个界面：</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;screen</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;test&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;section&gt;</span>
<span class="w">            </span><span class="nt">&lt;actions&gt;</span>
<span class="w">            </span><span class="nt">&lt;/actions&gt;</span>
<span class="w">            </span><span class="nt">&lt;widgets&gt;</span>
<span class="w">                </span><span class="nt">&lt;decorator-screen</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;CommonShopAppDecorator&quot;</span><span class="w"> </span><span class="na">location=</span><span class="s">&quot;component://shop/widget/CommonScreens.xml&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;decorator-section</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;body&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;platform-specific&gt;&lt;html&gt;&lt;html-template</span><span class="w"> </span><span class="na">location=</span><span class="s">&quot;component://mycomponent/webapp/mycomponent/test/test.ftl&quot;</span><span class="nt">/&gt;&lt;/html&gt;&lt;/platform-specific&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/decorator-section&gt;</span>
<span class="w">                </span><span class="nt">&lt;/decorator-screen&gt;</span>
<span class="w">            </span><span class="nt">&lt;/widgets&gt;</span>
<span class="w">        </span><span class="nt">&lt;/section&gt;</span>
<span class="w">    </span><span class="nt">&lt;/screen&gt;</span>
</code></pre></div>

<p>商店界面实际上非常模块化，由多个元素组成（<a href="https://www.scipioerp.com/community/developer/views-requests/screen-widgets-decorators/">小部件、动作和装饰器</a>）。为简单起见，请暂时保留原样，并通过添加第一个模板工具包文件来完成新网页。为此，创建一个新的 <code>webapp/mycomponent/test/test.ftl</code> 文件并添加以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="err">&lt;</span>@alert<span class="w"> </span>type=&quot;info&quot;&gt;Success!<span class="err">&lt;</span>/@alert&gt;
</code></pre></div>

<p><img alt="自定义的界面" src="/data/attachment/album/201909/22/133319lt99ylywl99at8l9.jpg" title="Custom screen"></p>
<p><em>一个自定义的界面。</em></p>
<p>打开 <a href="https://localhost:8443/shop/control/test/">https://localhost:8443/shop/control/test/</a> 并惊叹于你自己的成就。</p>
<h4>自定义主题</h4>
<p>通过创建自己的主题来修改商店的界面外观。所有主题都可以作为组件在 <code>themes</code> 文件夹中找到。运行命令 <code>./ant create-theme</code> 来创建你自己的主题。</p>
<p><img alt="主题组件布局" src="/data/attachment/album/201909/22/133322imewmwj1kste3psp.jpg" title="theme component layout"></p>
<p><em>一个典型的主题组件布局。</em></p>
<p>以下是最重要的目录和文件列表：</p>
<ul>
<li>主题配置：<code>data/*ThemeData.xml</code></li>
<li>特定主题封装的 HTML：<code>includes/*.ftl</code></li>
<li>模板工具包 HTML 定义：<code>includes/themeTemplate.ftl</code></li>
<li>CSS 类定义：<code>includes/themeStyles.ftl</code></li>
<li>CSS 框架: <code>webapp/theme-title/</code></li>
</ul>
<p>快速浏览工具包中的 Metro 主题；它使用 Foundation CSS 框架并且充分利用了这个框架。然后，然后，在新构建的 <code>webapp/theme-title</code> 目录中设置自己的主题并开始开发。Foundation-shop 主题是一个非常简单的特定于商店的主题实现，你可以将其用作你自己工作的基础。</p>
<p>瞧！你已经建立了自己的在线商店，准备个性化定制吧！</p>
<p><img alt="搭建完成的 Scipio ERP 在线商店" src="/data/attachment/album/201909/22/133339ckf90t90wfco9ffk.jpg" title="Finished Scipio ERP shop"></p>
<p><em>一个搭建完成的基于 Scipio ERP的在线商店。</em></p>
<h3>接下来是什么？</h3>
<p>Scipio ERP 是一个功能强大的框架，可简化复杂的电子商务应用程序的开发。为了更完整的理解，请查看项目<a href="https://www.scipioerp.com/community/developer/architecture/components/">文档</a>，尝试<a href="https://www.scipioerp.com/demo/">在线演示</a>，或者<a href="https://forum.scipioerp.com/">加入社区</a>.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>