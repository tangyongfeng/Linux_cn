<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>给 Zsh 添加主题和插件</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Seth Kenlon 通过 Oh My Zsh 安装的主题和插件来扩展 Zsh 的功能。 在我的前文中，我向大家展示了如何安装并使用 Z-Shell (Zsh)。对于某些用 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/10/gei-zsh-tian-jia-zhu-ti-he-cha-jian.html" rel="bookmark"
           title="Permalink to 给 Zsh 添加主题和插件">给 Zsh 添加主题和插件</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-10-05T12:05:32+02:00">
                Published: Sat 05 October 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Seth Kenlon</p>
<blockquote>
<p>通过 Oh My Zsh 安装的主题和插件来扩展 Zsh 的功能。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201910/05/120457r49mk2l9oelv94bi.jpg"></p>
<p>在我的<a href="/article-11378-1.html">前文</a>中，我向大家展示了如何安装并使用 <a href="/article-11378-1.html">Z-Shell</a> (Zsh)。对于某些用户来说，Zsh 最令人激动的是它可以安装主题。Zsh 安装主题非常容易，一方面是因为有非常活跃的社区为 Z-Shell 设计主题，另一方面是因为有 <a href="https://ohmyz.sh/">Oh My Zsh</a> 这个项目。这使得安装主题变得轻而易举。</p>
<p>主题的变化可能会立刻吸引你的注意力，因此如果你安装了 Zsh 并且将默认的 Shell 替换为 Zsh 时，你可能不喜欢 Shell 默认主题的样子，那么你可以立即更换 Oh My Zsh 自带的 100 多个主题。Oh My Zsh 不仅拥有大量精美的主题，同时还有数以百计的扩展 Zsh 功能的插件。</p>
<h3>安装 Oh My Zsh</h3>
<p>Oh My Zsh 的<a href="https://ohmyz.sh/">官网</a>建议你使用一个脚本在有网络的情况下来安装这个包。尽管 Oh My Zsh 项目几乎是可以令人信服的，但是盲目地在你的电脑上运行一个脚本这是一个糟糕的建议。如果你想运行这个脚本，你可以把它下载下来，看一下它实现了什么功能，在你确信你已经了解了它的所作所为之后，你就可以运行它了。</p>
<p>如果你下载了脚本并且阅读了它，你就会发现安装过程仅仅只有三步：</p>
<h4>1、克隆 oh-my-zsh</h4>
<p>第一步，克隆 oh-my-zsh 库到 <code>~/.oh-my-zsh</code> 目录：</p>
<div class="highlight"><pre><span></span><code><span class="c">% git clone http://github.com/robbyrussell/oh-my-zsh ~/.oh-my-zsh</span>
</code></pre></div>

<h4>2、切换配置文件</h4>
<p>下一步，备份你已有的 <code>.zshrc</code> 文件，然后将 oh-my-zsh 自带的配置文件移动到这个地方。这两步操作可以一步完成，只需要你的 <code>mv</code> 命令支持 <code>-b</code> 这个选项。</p>
<div class="highlight"><pre><span></span><code><span class="c">% mv -b \</span>
<span class="o">~/</span><span class="p">.</span><span class="n">oh</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">zsh</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">zshrc</span><span class="p">.</span><span class="n">zsh</span><span class="o">-</span><span class="n">template</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">zshrc</span>
</code></pre></div>

<h4>3、编辑配置文件</h4>
<p>默认情况下，Oh My Zsh 自带的配置文件是非常简陋的。如果你想将你自己的 <code>~/.zshrc</code> 文件合并到 <code>.oh-my-zsh</code> 的配置文件中。你可以使用 <a href="https://opensource.com/article/19/2/getting-started-cat-command">cat</a> 命令将你的旧的配置文件添加到新文件的末尾。</p>
<div class="highlight"><pre><span></span><code><span class="c">% cat ~/.zshrc~ &gt;&gt; ~/.zshrc</span>
</code></pre></div>

<p>看一下默认的配置文件以及它提供的一些选项。用你最喜欢的编辑器打开 <code>~/.zshrc</code> 文件。这个文件有非常良好的注释。这是了解它的一个非常好的方法。</p>
<p>例如，你可以更改 <code>.oh-my-zsh</code> 目录的位置。在安装的时候，它默认是位于你的家目录。但是，根据 <a href="http://freedesktop.org">Free Desktop</a> 所定义的现代 Linux 规范。这个目录应当放置于 <code>~/.local/share</code> 。你可以在配置文件中进行修改。如下所示：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Path to your oh-my-zsh installation.</span>
<span class="k">export</span><span class="w"> </span><span class="n">ZSH</span><span class="o">=$</span><span class="n">HOME</span><span class="o">/.</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">oh</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">zsh</span>
</code></pre></div>

<p>然后将 .oh-my-zsh 目录移动到你新配置的目录下：</p>
<div class="highlight"><pre><span></span><code><span class="c">% mv ~/.oh-my-zsh $HOME/.local/share/oh-my-zsh</span>
</code></pre></div>

<p>如果你使用的是 MacOS，这个目录可能会有点含糊不清，但是最合适的位置可能是在 <code>$HOME/Library/Application\ Support</code>。</p>
<h3>重新启动 Zsh</h3>
<p>编辑配置文件之后，你必须重新启动你的 Shell。在这之前，你必须确定你的任何操作都已正确完成。例如，在你修改了 <code>.oh-my-zsh</code> 目录的路径之后。不要忘记将目录移动到新的位置。如果你不想重新启动你的 Shell。你可以使用 <code>source</code> 命令来使你的配置文件生效。</p>
<div class="highlight"><pre><span></span><code><span class="c">% source ~/.zshrc</span>
➜<span class="w">  </span><span class="p">.</span><span class="n">oh</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">zsh</span><span class="w"> </span><span class="n">git</span><span class="p">:(</span><span class="n">master</span><span class="p">)</span><span class="w"> </span>✗
</code></pre></div>

<p>你可以忽略任何丢失更新文件的警告；他们将会在重启的时候再次进行解析。</p>
<h3>更换你的主题</h3>
<p>安装好 oh-my-zsh 之后。你可以将你的 Zsh 的主题设置为 <code>robbyrussell</code>，这是一个该项目维护者的主题。这个主题的更改是非常小的，仅仅是改变了提示符的颜色。</p>
<p>你可以通过列出 <code>.oh-my-zsh</code> 目录下的所有文件来查看所有安装的主题：</p>
<div class="highlight"><pre><span></span><code>➜  .oh-my-zsh git:(master) ✗ ls ~/.local/share/oh-my-zsh/themes
3den.zsh-theme
adben.zsh-theme
af-magic.zsh-theme
afowler.zsh-theme
agnoster.zsh-theme
[...]
</code></pre></div>

<p>想在切换主题之前查看一下它的样子，你可以查看 Oh My Zsh 的 <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Themes">wiki</a> 页面。要查看更多主题，可以查看 <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/External-themes">外部主题</a> wiki 页面。</p>
<p>大部分的主题是非常易于安装和使用的，仅仅需要改变 <code>.zshrc</code> 文件中的配置选项然后重新载入配置文件。</p>
<div class="highlight"><pre><span></span><code><span class="err">➜</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">sed</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="s1">&#39;s/_THEME=\&quot;robbyrussel\&quot;/_THEME=\&quot;linuxonly\&quot;/g&#39;</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">zshrc</span>
<span class="err">➜</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">zshrc</span>
<span class="n">seth</span><span class="nv">@darkstar</span><span class="err">:</span><span class="n">pts</span><span class="o">/</span><span class="mi">0</span><span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">skenlon</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">➜</span>
</code></pre></div>

<p>其他的主题可能需要一些额外的配置。例如，为了使用 <code>agnoster</code> 主题，你必须先安装 Powerline 字体。这是一个开源字体，如果你使用 Linux 操作系统的话，这个字体很可能在你的软件库中存在。使用下面的命令安装这个字体：</p>
<div class="highlight"><pre><span></span><code>➜ ~ sudo dnf install powerline-fonts
</code></pre></div>

<p>在配置文件中更改你的主题：</p>
<div class="highlight"><pre><span></span><code>➜ ~ sed -i &#39;s/_THEME=\&quot;linuxonly\&quot;/_THEME=\&quot;agnoster\&quot;/g&#39; ~/.zshrc
</code></pre></div>

<p>重新启动你的 Sehll（一个简单的 <code>source</code> 命令并不会起作用）。一旦重启，你就可以看到新的主题：</p>
<p><img alt="agnoster theme" src="/data/attachment/album/201910/05/120539pnofailixuohniou.jpg" title="agnoster theme"></p>
<h3>安装插件</h3>
<p>Oh My Zsh 有超过 200 的插件，你可以在 <code>.oh-my-zsh/plugins</code> 中看到它们。每一个扩展目录下都有一个 <code>README</code> 文件解释了这个插件的作用。</p>
<p>一些插件相当简单。例如，<code>dnf</code>、<code>ubuntu</code>、<code>brew</code> 和 <code>macports</code> 插件仅仅是为了简化与 DNF、Apt、Homebres 和 MacPorts 的交互操作而定义的一些别名。</p>
<p>而其他的一些插件则较为复杂，<code>git</code> 插件默认是被激活使用的。当你的目录是一个 git 仓库的时候，这个扩展就会更新你的 Shell 提示符，以显示当前的分支和是否有未合并的更改。</p>
<p>为了激活这个扩展，你可以将这个扩展添加到你的配置文件 <code>~/.zshrc</code> 中。例如，你可以添加 <code>dnf</code> 和 <code>pass</code> 插件，按照如下的方式更改：</p>
<div class="highlight"><pre><span></span><code>plugins=(git dnf pass)
</code></pre></div>

<p>保存修改，重新启动你的 Shell。</p>
<div class="highlight"><pre><span></span><code><span class="c">% source ~/.zshrc</span>
</code></pre></div>

<p>这个扩展现在就可以使用了。你可以通过使用 <code>dnf</code> 提供的别名来测试一下：</p>
<div class="highlight"><pre><span></span><code><span class="c">% dnfs fop</span>
<span class="o">======</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="n">Exactly</span><span class="w"> </span><span class="n">Matched</span><span class="p">:</span><span class="w"> </span><span class="n">fop</span><span class="w"> </span><span class="o">======</span>
<span class="n">fop</span><span class="p">.</span><span class="n">noarch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">XSL</span><span class="o">-</span><span class="n">driven</span><span class="w"> </span><span class="nb">print</span><span class="w"> </span><span class="n">formatter</span>
</code></pre></div>

<p>不同的插件做不同的事，因此你可以一次安装一两个插件来帮你学习新的特性和功能。</p>
<h3>兼容性</h3>
<p>一些 Oh My Zsh 插件具有通用性。如果你看到一个插件声称它可以与 Bash 兼容，那么它就可以在你自己的 Bash 中使用。另一些插件需要 Zsh 提供的特定功能。因此，它们并不是所有都能工作。但是你可以添加一些其他的插件，例如 <code>dnf</code>、<code>ubuntu</code>、<code>firewalld</code>，以及其他的一些插件。你可以使用 <code>source</code> 使你的选择生效。例如：</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span>$<span class="nv">HOME</span><span class="o">/</span>.<span class="nv">local</span><span class="o">/</span><span class="nv">share</span><span class="o">/</span><span class="nv">oh</span><span class="o">-</span><span class="nv">my</span><span class="o">-</span><span class="nv">zsh</span><span class="o">/</span><span class="nv">plugins</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">        </span><span class="nv">source</span><span class="w"> </span>$<span class="nv">HOME</span><span class="o">/</span>.<span class="nv">local</span><span class="o">/</span><span class="nv">share</span><span class="o">/</span><span class="nv">oh</span><span class="o">-</span><span class="nv">my</span><span class="o">-</span><span class="nv">zsh</span><span class="o">/</span><span class="nv">plugins</span><span class="o">/</span><span class="nv">dnf</span><span class="o">/</span><span class="nv">dnf</span>.<span class="nv">plugin</span>.<span class="nv">zsh</span>
<span class="nv">fi</span>
</code></pre></div>

<h3>选择或者不选择 Zsh</h3>
<p>Z-shell 的内置功能和它由社区贡献的扩展功能都非常强大。你可以把它当成你的主 Shell 使用，你也可以在你休闲娱乐的时候尝试一下。这取决于你的爱好。</p>
<p>什么是你最喜爱的主题和扩展可以在下方的评论告诉我们！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>