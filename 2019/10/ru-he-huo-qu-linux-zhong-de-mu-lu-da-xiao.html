<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何获取 Linux 中的目录大小</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Magesh Maruthamuthu 你应该已经注意到，在 Linux 中使用 ls 命令 列出的目录内容中，目录的大小仅显示 4KB。这个大小正确吗？如果不正确，那它 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/10/ru-he-huo-qu-linux-zhong-de-mu-lu-da-xiao.html" rel="bookmark"
           title="Permalink to 如何获取 Linux 中的目录大小">如何获取 Linux 中的目录大小</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-10-25T17:14:40+02:00">
                Published: Fri 25 October 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Magesh Maruthamuthu</p>
<p><img alt="" src="/data/attachment/album/201910/25/171357abibvrznqqvqrrq7.jpg"></p>
<p>你应该已经注意到，在 Linux 中使用 <a href="https://www.2daygeek.com/linux-unix-ls-command-display-directory-contents/">ls 命令</a> 列出的目录内容中，目录的大小仅显示 4KB。这个大小正确吗？如果不正确，那它代表什么，又该如何获取 Linux 中的目录或文件夹大小？这是一个默认的大小，是用来存储磁盘上存储目录的元数据的大小。</p>
<p>Linux 上有一些应用程序可以 <a href="https://www.2daygeek.com/how-to-get-find-size-of-directory-folder-linux/">获取目录的实际大小</a>。其中，磁盘使用率（<code>du</code>）命令已被 Linux 管理员广泛使用。</p>
<p>我将向您展示如何使用各种选项获取文件夹大小。</p>
<h3>什么是 du 命令?</h3>
<p><a href="https://www.2daygeek.com/linux-check-disk-usage-files-directories-size-du-command/">du 命令</a> 表示 <ruby> 磁盘使用率 <rt>  Disk Usage </rt></ruby>。这是一个标准的 Unix 程序，用于估计当前工作目录中的文件空间使用情况。</p>
<p>它使用递归方式总结磁盘使用情况，以获取目录及其子目录的大小。</p>
<p>如同我说的那样, 使用 <code>ls</code> 命令时，目录大小仅显示 4KB。参见下面的输出。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>-lh<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>^d

drwxr-xr-x<span class="w">  </span><span class="m">3</span><span class="w"> </span>daygeek<span class="w"> </span>daygeek<span class="w"> </span><span class="m">4</span>.0K<span class="w"> </span>Aug<span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">13</span>:57<span class="w"> </span>Bank_Details
drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>daygeek<span class="w"> </span>daygeek<span class="w"> </span><span class="m">4</span>.0K<span class="w"> </span>Mar<span class="w"> </span><span class="m">15</span><span class="w">  </span><span class="m">2019</span><span class="w"> </span>daygeek
drwxr-xr-x<span class="w">  </span><span class="m">6</span><span class="w"> </span>daygeek<span class="w"> </span>daygeek<span class="w"> </span><span class="m">4</span>.0K<span class="w"> </span>Feb<span class="w"> </span><span class="m">16</span><span class="w">  </span><span class="m">2019</span><span class="w"> </span>drive-2daygeek
drwxr-xr-x<span class="w"> </span><span class="m">13</span><span class="w"> </span>daygeek<span class="w"> </span>daygeek<span class="w"> </span><span class="m">4</span>.0K<span class="w"> </span>Jan<span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">2019</span><span class="w"> </span>drive-mageshm
drwxr-xr-x<span class="w"> </span><span class="m">15</span><span class="w"> </span>daygeek<span class="w"> </span>daygeek<span class="w"> </span><span class="m">4</span>.0K<span class="w"> </span>Sep<span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">21</span>:32<span class="w"> </span>Thanu_Photos
</code></pre></div>

<h3>1) 在 Linux 上如何只获取父目录的大小</h3>
<p>使用以下 <code>du</code> 命令格式获取给定目录的总大小。在该示例中，我们将得到 <code>/home/daygeek/Documents</code> 目录的总大小。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>du<span class="w"> </span>-hs<span class="w"> </span>/home/daygeek/Documents
或
$<span class="w"> </span>du<span class="w"> </span>-h<span class="w"> </span>--max-depth<span class="o">=</span><span class="m">0</span><span class="w"> </span>/home/daygeek/Documents/
20G<span class="w">    </span>/home/daygeek/Documents
</code></pre></div>

<p>详细说明：</p>
<ul>
<li><code>du</code> – 这是一个命令</li>
<li><code>-h</code> – 以易读的格式显示大小 (例如 1K 234M 2G)</li>
<li><code>-s</code> – 仅显示每个参数的总数</li>
<li><code>--max-depth=N</code> – 目录的打印深度</li>
</ul>
<h3>2) 在 Linux 上如何获取每个目录的大小</h3>
<p>使用以下 <code>du</code> 命令格式获取每个目录（包括子目录）的总大小。</p>
<p>在该示例中，我们将获得每个 <code>/home/daygeek/Documents</code> 目录及其子目录的总大小。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>du<span class="w"> </span>-h<span class="w"> </span>/home/daygeek/Documents/<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-20

20G<span class="w">    </span>/home/daygeek/Documents/
<span class="m">9</span>.6G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek
<span class="m">6</span>.3G<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos
<span class="m">5</span>.3G<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/Camera
<span class="m">5</span>.3G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-videos
<span class="m">3</span>.2G<span class="w">    </span>/home/daygeek/Documents/drive-mageshm
<span class="m">2</span>.3G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-Photos
<span class="m">2</span>.2G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month
916M<span class="w">    </span>/home/daygeek/Documents/drive-mageshm/Tanisha
454M<span class="w">    </span>/home/daygeek/Documents/drive-mageshm/2g-backup
415M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Video
300M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Jan-2017
288M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Oct-2017
226M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Sep-2017
219M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Documents
213M<span class="w">    </span>/home/daygeek/Documents/drive-mageshm/photos
163M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Video/Sent
161M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Images
154M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/June-2017
150M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Nov-2016
</code></pre></div>

<h3>3) 在 Linux 上如何获取每个目录的摘要</h3>
<p>使用如下 <code>du</code> 命令格式仅获取每个目录的摘要。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>du<span class="w"> </span>-hs<span class="w"> </span>/home/daygeek/Documents/*<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-10

<span class="m">9</span>.6G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek
<span class="m">6</span>.3G<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos
<span class="m">3</span>.2G<span class="w">    </span>/home/daygeek/Documents/drive-mageshm
756K<span class="w">    </span>/home/daygeek/Documents/Bank_Details
272K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-TouchInterface1.png
172K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-NightLight.png
164K<span class="w">    </span>/home/daygeek/Documents/ConfigServer<span class="w"> </span>Security<span class="w"> </span>and<span class="w"> </span>Firewall<span class="w"> </span><span class="o">(</span>csf<span class="o">)</span><span class="w"> </span>Cheat<span class="w"> </span>Sheet.pdf
132K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-Todo.png
112K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-ZorinAutoTheme.png
96K<span class="w">    </span>/home/daygeek/Documents/distro-info.xlsx
</code></pre></div>

<h3>4) 在 Linux 上如何获取每个目录的不含子目录的大小</h3>
<p>使用如下 <code>du</code> 命令格式来展示每个目录的总大小，不包括子目录。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>du<span class="w"> </span>-hS<span class="w"> </span>/home/daygeek/Documents/<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-20

<span class="m">5</span>.3G<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/Camera
<span class="m">5</span>.3G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-videos
<span class="m">2</span>.3G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-Photos
<span class="m">1</span>.5G<span class="w">    </span>/home/daygeek/Documents/drive-mageshm
831M<span class="w">    </span>/home/daygeek/Documents/drive-mageshm/Tanisha
454M<span class="w">    </span>/home/daygeek/Documents/drive-mageshm/2g-backup
300M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Jan-2017
288M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Oct-2017
253M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Video
226M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Sep-2017
219M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Documents
213M<span class="w">    </span>/home/daygeek/Documents/drive-mageshm/photos
163M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Video/Sent
154M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/June-2017
150M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Nov-2016
127M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Dec-2016
100M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Oct-2016
94M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Nov-2017
92M<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos/WhatsApp<span class="w"> </span>Images
90M<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek/Thanu-photos-by-month/Dec-2017
</code></pre></div>

<h3>5) 在 Linux 上如何仅获取一级子目录的大小</h3>
<p>如果要获取 Linux 上给定目录的一级子目录（包括其子目录）的大小，请使用以下命令格式。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>du<span class="w"> </span>-h<span class="w"> </span>--max-depth<span class="o">=</span><span class="m">1</span><span class="w"> </span>/home/daygeek/Documents/

<span class="m">3</span>.2G<span class="w">    </span>/home/daygeek/Documents/drive-mageshm
<span class="m">4</span>.0K<span class="w">    </span>/home/daygeek/Documents/daygeek
756K<span class="w">    </span>/home/daygeek/Documents/Bank_Details
<span class="m">9</span>.6G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek
<span class="m">6</span>.3G<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos
20G<span class="w">    </span>/home/daygeek/Documents/
</code></pre></div>

<h3>6) 如何在 du 命令输出中获得总计</h3>
<p>如果要在 <code>du</code> 命令输出中获得总计，请使用以下 <code>du</code> 命令格式。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>du<span class="w"> </span>-hsc<span class="w"> </span>/home/daygeek/Documents/*<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-10

20G<span class="w">    </span>total
<span class="m">9</span>.6G<span class="w">    </span>/home/daygeek/Documents/drive-2daygeek
<span class="m">6</span>.3G<span class="w">    </span>/home/daygeek/Documents/Thanu_Photos
<span class="m">3</span>.2G<span class="w">    </span>/home/daygeek/Documents/drive-mageshm
756K<span class="w">    </span>/home/daygeek/Documents/Bank_Details
272K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-TouchInterface1.png
172K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-NightLight.png
164K<span class="w">    </span>/home/daygeek/Documents/ConfigServer<span class="w"> </span>Security<span class="w"> </span>and<span class="w"> </span>Firewall<span class="w"> </span><span class="o">(</span>csf<span class="o">)</span><span class="w"> </span>Cheat<span class="w"> </span>Sheet.pdf
132K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-Todo.png
112K<span class="w">    </span>/home/daygeek/Documents/user-friendly-zorin-os-15-has-been-released-ZorinAutoTheme.png
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>