<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在 Linux 终端快速检测网站是否宕机的 6 个方法</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Magesh Maruthamuthu 本教程教你怎样在 Linux 终端快速检测一个网站是否宕机。 你可能已经了解了一些类似的命令，像 ping、curl 和 wget。我们在本 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/12/zai-linux-zhong-duan-kuai-su-jian-ce-wang-zhan-shi-fou-dang-ji-de-6-ge-fang-fa.html" rel="bookmark"
           title="Permalink to 在 Linux 终端快速检测网站是否宕机的 6 个方法">在 Linux 终端快速检测网站是否宕机的 6 个方法</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-12-10T09:38:26+01:00">
                Published: Tue 10 December 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Magesh Maruthamuthu</p>
<blockquote>
<p>本教程教你怎样在 Linux 终端快速检测一个网站是否宕机。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201912/10/093801u332115oocxz4531.jpg"></p>
<p>你可能已经了解了一些类似的命令，像 <code>ping</code>、<code>curl</code> 和 <code>wget</code>。我们在本教程中又加入了一些其他命令。同时，我们也加入了不同的选项来检测单个和多个主机的信息。</p>
<p>本文将帮助你检测网站是否宕机。但是如果你在维护一些网站，希望网站宕掉时得到实时的报警，我推荐你去使用实时网站监控工具。这种工具有很多，有些是免费的，大部分收费。根据你的需求，选择合适的工具。在后续的文章中我们会涉及这个主题。</p>
<h3>方法 1：使用 fping 命令检测一个网站是否宕机</h3>
<p><a href="https://www.2daygeek.com/how-to-use-ping-fping-gping-in-linux/">fping 命令</a> 是一个类似 <code>ping</code> 的程序，使用互联网控制消息协议（ICMP）的<ruby> 回应请求报文 <rt>  echo request </rt></ruby>来判断目标主机是否能回应。<code>fping</code> 与 <code>ping</code> 的不同之处在于它可以并行地 <code>ping</code> 任意数量的主机，也可以从一个文本文件读入主机名称。<code>fping</code> 发送一个 ICMP 回应请求后不等待目标主机响应，就以轮询模式向下一个目标主机发请求。如果一个目标主机有响应，那么它就被标记为存活的，然后从检查目标列表里去掉。如果一个目标主机在限定的时间和（或）重试次数内没有响应，则被指定为网站无法到达的。</p>
<div class="highlight"><pre><span></span><code># fping 2daygeek.com linuxtechnews.com magesh.co.in

2daygeek.com is alive
linuxtechnews.com is alive
magesh.co.in is alive
</code></pre></div>

<h3>方法 2：使用 http 命令检测一个网站是否宕机</h3>
<p>HTTPie（读作 aitch-tee-tee-pie）是一个命令行 HTTP 客户端。<a href="https://www.2daygeek.com/httpie-curl-wget-alternative-http-client-linux/">httpie</a> 是一个可以与 web 服务通过 CLI 进行交互的现代工具。httpie 工具提供了简单的 <code>http</code> 命令，可以通过发送简单的、自然语言语法的任意 HTTP 请求得到多彩的结果输出。HTTPie 可以用来对 HTTP 服务器进行测试、调试和基本的交互。</p>
<div class="highlight"><pre><span></span><code># http 2daygeek.com

HTTP/1.1 301 Moved Permanently
CF-RAY: 535b66722ab6e5fc-LHR
Cache-Control: max-age=3600
Connection: keep-alive
Date: Thu, 14 Nov 2019 19:30:28 GMT
Expires: Thu, 14 Nov 2019 20:30:28 GMT
Location: https://2daygeek.com/
Server: cloudflare
Transfer-Encoding: chunked
Vary: Accept-Encoding
</code></pre></div>

<h3>方法 3：使用 curl 命令检测一个网站是否宕机</h3>
<p><a href="https://www.2daygeek.com/curl-linux-command-line-download-manager/">curl 命令</a> 是一个用于在服务器间通过支持的协议（DICT、FILE、FTP、FTPS、GOPHER、HTTP、HTTPS、IMAP、IMAPS、LDAP、LDAPS、POP3、POP3S、RTMP、RTSP、SCP、SFTP、SMTP、SMTPS、TELNET 和 TFTP）传输数据的工具。这个工具不支持用户交互。<code>curl</code> 也支持使用代理、用户认证、FTP 上传、HTTP POST 请求、SSL 连接、cookie、断点续传、Metalink 等等。<code>curl</code>由 libcurl 库提供所有与传输有关的能力。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># curl -I https://www.magesh.co.in</span>

<span class="n">HTTP</span><span class="o">/</span><span class="mi">2</span><span class="w"> </span><span class="mi">200</span>
<span class="n">date</span><span class="p">:</span><span class="w"> </span><span class="n">Thu</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="n">Nov</span><span class="w"> </span><span class="mi">2019</span><span class="w"> </span><span class="mi">19</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">47</span><span class="w"> </span><span class="n">GMT</span>
<span class="n">content</span><span class="o">-</span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">text</span><span class="o">/</span><span class="n">html</span>
<span class="n">set</span><span class="o">-</span><span class="n">cookie</span><span class="p">:</span><span class="w"> </span><span class="n">__cfduid</span><span class="o">=</span><span class="n">db16c3aee6a75c46a504c15131ead3e7f1573760386</span><span class="p">;</span><span class="w"> </span><span class="n">expires</span><span class="o">=</span><span class="n">Fri</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="o">-</span><span class="n">Nov</span><span class="o">-</span><span class="mi">20</span><span class="w"> </span><span class="mi">19</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">46</span><span class="w"> </span><span class="n">GMT</span><span class="p">;</span><span class="w"> </span><span class="n">path</span><span class="o">=/</span><span class="p">;</span><span class="w"> </span><span class="n">domain</span><span class="o">=.</span><span class="n">magesh</span><span class="o">.</span><span class="n">co</span><span class="o">.</span><span class="ow">in</span><span class="p">;</span><span class="w"> </span><span class="n">HttpOnly</span>
<span class="n">vary</span><span class="p">:</span><span class="w"> </span><span class="n">Accept</span><span class="o">-</span><span class="n">Encoding</span>
<span class="n">last</span><span class="o">-</span><span class="n">modified</span><span class="p">:</span><span class="w"> </span><span class="n">Sun</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="n">Jun</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">38</span><span class="w"> </span><span class="n">GMT</span>
<span class="n">x</span><span class="o">-</span><span class="n">cache</span><span class="p">:</span><span class="w"> </span><span class="n">HIT</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">Backend</span>
<span class="n">cf</span><span class="o">-</span><span class="n">cache</span><span class="o">-</span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="n">DYNAMIC</span>
<span class="n">expect</span><span class="o">-</span><span class="n">ct</span><span class="p">:</span><span class="w"> </span><span class="nb">max</span><span class="o">-</span><span class="n">age</span><span class="o">=</span><span class="mi">604800</span><span class="p">,</span><span class="w"> </span><span class="n">report</span><span class="o">-</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct&quot;</span>
<span class="n">server</span><span class="p">:</span><span class="w"> </span><span class="n">cloudflare</span>
<span class="n">cf</span><span class="o">-</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="mi">535</span><span class="n">b74123ca4dbf3</span><span class="o">-</span><span class="n">LHR</span>
</code></pre></div>

<p>如果你只想看 HTTP 状态码而不是返回的全部信息，用下面的 <code>curl</code> 命令：</p>
<div class="highlight"><pre><span></span><code># curl -I &quot;www.magesh.co.in&quot; 2&gt;&amp;1 | awk &#39;/HTTP\// {print $2}&#39;
 200
</code></pre></div>

<p>如果你想看一个网站是否宕机，用下面的 bash 脚本：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nt">vi</span><span class="w"> </span><span class="nt">curl-url-check</span><span class="p">.</span><span class="nc">sh</span>

<span class="err">#</span><span class="o">!/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">bash</span>
<span class="nt">if</span><span class="w"> </span><span class="nt">curl</span><span class="w"> </span><span class="nt">-I</span><span class="w"> </span><span class="s2">&quot;https://www.magesh.co.in&quot;</span><span class="w"> </span><span class="nt">2</span><span class="o">&gt;&amp;</span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">grep</span><span class="w"> </span><span class="nt">-w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="o">;</span><span class="w"> </span><span class="nt">then</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;magesh.co.in is up&quot;</span>
<span class="nt">else</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;magesh.co.in is down&quot;</span>
<span class="nt">fi</span>
</code></pre></div>

<p>当你把脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code># sh curl-url-check.sh

HTTP/2 200
magesh.co.in is up
</code></pre></div>

<p>如果你想看多个网站的状态，使用下面的 shell 脚本：</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">vi</span><span class="w"> </span><span class="nv">curl</span><span class="o">-</span><span class="nv">url</span><span class="o">-</span><span class="nv">check</span><span class="o">-</span><span class="mi">1</span>.<span class="nv">sh</span>

#<span class="o">!/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">bash</span>
<span class="k">for</span><span class="w"> </span><span class="nv">site</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">google</span>.<span class="nv">com</span><span class="w"> </span><span class="nv">google</span>.<span class="nv">co</span>.<span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">xyzzz</span>.<span class="nv">com</span>
<span class="k">do</span>
<span class="k">if</span><span class="w"> </span><span class="nv">curl</span><span class="w"> </span><span class="o">-</span><span class="nv">I</span><span class="w"> </span><span class="s2">&quot;$site&quot;</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is up&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is down&quot;</span>
<span class="nv">fi</span>
<span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;----------------------------------&quot;</span>
<span class="nv">done</span>
</code></pre></div>

<p>当你把上面脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code><span class="c"># sh curl</span><span class="nb">-</span><span class="c">url</span><span class="nb">-</span><span class="c">check</span><span class="nb">-</span><span class="c">1</span><span class="nt">.</span><span class="c">sh</span>

<span class="c">HTTP/1</span><span class="nt">.</span><span class="c">1 200 OK</span>
<span class="c">www</span><span class="nt">.</span><span class="c">google</span><span class="nt">.</span><span class="c">com is up</span>
<span class="nb">----------------------------------</span>
<span class="c">HTTP/1</span><span class="nt">.</span><span class="c">1 301 Moved Permanently</span>
<span class="c">google</span><span class="nt">.</span><span class="c">co</span><span class="nt">.</span><span class="c">in is up</span>
<span class="nb">----------------------------------</span>
<span class="c">www</span><span class="nt">.</span><span class="c">xyzzz</span><span class="nt">.</span><span class="c">com is down</span>
<span class="nb">----------------------------------</span>
</code></pre></div>

<h3>方法 4：使用 wget 命令检测一个网站是否宕机</h3>
<p><a href="https://www.2daygeek.com/wget-linux-command-line-download-utility-tool/">wget 命令</a>（前身是 Geturl）是一个自由开源的命令行下载工具，通过 HTTP、HTTPS、FTP 和其他广泛使用的互联网协议获取文件。<code>wget</code> 是非交互式的命令行工具，由 World Wide Web 和 get 得名。<code>wget</code> 相对于其他工具来说更优秀，功能包括后台运行、递归下载、多文件下载、断点续传、非交互式下载和大文件下载。</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nt">wget</span><span class="w"> </span><span class="nt">-S</span><span class="w"> </span><span class="nt">--spider</span><span class="w"> </span><span class="nt">https</span><span class="o">://</span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span>

<span class="nt">Spider</span><span class="w"> </span><span class="nt">mode</span><span class="w"> </span><span class="nt">enabled</span><span class="o">.</span><span class="w"> </span><span class="nt">Check</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="nt">remote</span><span class="w"> </span><span class="nt">file</span><span class="w"> </span><span class="nt">exists</span><span class="o">.</span>
<span class="nt">--2019-11-15</span><span class="w"> </span><span class="nt">01</span><span class="p">:</span><span class="nd">22</span><span class="p">:</span><span class="nd">00--</span><span class="w">  </span><span class="nt">https</span><span class="o">://</span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="o">/</span>
<span class="nt">Loaded</span><span class="w"> </span><span class="nt">CA</span><span class="w"> </span><span class="nt">certificate</span><span class="w"> </span><span class="s1">&#39;/etc/ssl/certs/ca-certificates.crt&#39;</span>
<span class="nt">Resolving</span><span class="w"> </span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="w"> </span><span class="o">(</span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="o">)</span><span class="err">…</span><span class="w"> </span><span class="nt">104</span><span class="p">.</span><span class="nc">18</span><span class="p">.</span><span class="nc">35</span><span class="p">.</span><span class="nc">52</span><span class="o">,</span><span class="w"> </span><span class="nt">104</span><span class="p">.</span><span class="nc">18</span><span class="p">.</span><span class="nc">34</span><span class="p">.</span><span class="nc">52</span><span class="o">,</span><span class="w"> </span><span class="nt">2606</span><span class="p">:</span><span class="nd">4700</span><span class="p">:</span><span class="nd">30</span><span class="p">::</span><span class="nd">6812</span><span class="p">:</span><span class="nd">2334</span><span class="o">,</span><span class="w"> </span><span class="err">…</span>
<span class="nt">Connecting</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="w"> </span><span class="o">(</span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="o">)|</span><span class="nt">104</span><span class="p">.</span><span class="nc">18</span><span class="p">.</span><span class="nc">35</span><span class="p">.</span><span class="nc">52</span><span class="o">|</span><span class="p">:</span><span class="nd">443</span><span class="err">…</span><span class="w"> </span><span class="nt">connected</span><span class="o">.</span>
<span class="nt">HTTP</span><span class="w"> </span><span class="nt">request</span><span class="w"> </span><span class="nt">sent</span><span class="o">,</span><span class="w"> </span><span class="nt">awaiting</span><span class="w"> </span><span class="nt">response</span><span class="err">…</span>
<span class="w">  </span><span class="nt">HTTP</span><span class="o">/</span><span class="nt">1</span><span class="p">.</span><span class="nc">1</span><span class="w"> </span><span class="nt">200</span><span class="w"> </span><span class="nt">OK</span>
<span class="w">  </span><span class="nt">Date</span><span class="o">:</span><span class="w"> </span><span class="nt">Thu</span><span class="o">,</span><span class="w"> </span><span class="nt">14</span><span class="w"> </span><span class="nt">Nov</span><span class="w"> </span><span class="nt">2019</span><span class="w"> </span><span class="nt">19</span><span class="p">:</span><span class="nd">52</span><span class="p">:</span><span class="nd">01</span><span class="w"> </span><span class="nt">GMT</span>
<span class="w">  </span><span class="nt">Content-Type</span><span class="o">:</span><span class="w"> </span><span class="nt">text</span><span class="o">/</span><span class="nt">html</span>
<span class="w">  </span><span class="nt">Connection</span><span class="o">:</span><span class="w"> </span><span class="nt">keep-alive</span>
<span class="w">  </span><span class="nt">Set-Cookie</span><span class="o">:</span><span class="w"> </span><span class="nt">__cfduid</span><span class="o">=</span><span class="nt">db73306a2f1c72c1318ad4709ef49a3a01573761121</span><span class="o">;</span><span class="w"> </span><span class="nt">expires</span><span class="o">=</span><span class="nt">Fri</span><span class="o">,</span><span class="w"> </span><span class="nt">13-Nov-20</span><span class="w"> </span><span class="nt">19</span><span class="p">:</span><span class="nd">52</span><span class="p">:</span><span class="nd">01</span><span class="w"> </span><span class="nt">GMT</span><span class="o">;</span><span class="w"> </span><span class="nt">path</span><span class="o">=/;</span><span class="w"> </span><span class="nt">domain</span><span class="o">=</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="o">;</span><span class="w"> </span><span class="nt">HttpOnly</span>
<span class="w">  </span><span class="nt">Vary</span><span class="o">:</span><span class="w"> </span><span class="nt">Accept-Encoding</span>
<span class="w">  </span><span class="nt">Last-Modified</span><span class="o">:</span><span class="w"> </span><span class="nt">Sun</span><span class="o">,</span><span class="w"> </span><span class="nt">14</span><span class="w"> </span><span class="nt">Jun</span><span class="w"> </span><span class="nt">2015</span><span class="w"> </span><span class="nt">11</span><span class="p">:</span><span class="nd">52</span><span class="p">:</span><span class="nd">38</span><span class="w"> </span><span class="nt">GMT</span>
<span class="w">  </span><span class="nt">X-Cache</span><span class="o">:</span><span class="w"> </span><span class="nt">HIT</span><span class="w"> </span><span class="nt">from</span><span class="w"> </span><span class="nt">Backend</span>
<span class="w">  </span><span class="nt">CF-Cache-Status</span><span class="o">:</span><span class="w"> </span><span class="nt">DYNAMIC</span>
<span class="w">  </span><span class="nt">Expect-CT</span><span class="o">:</span><span class="w"> </span><span class="nt">max-age</span><span class="o">=</span><span class="nt">604800</span><span class="o">,</span><span class="w"> </span><span class="nt">report-uri</span><span class="o">=</span><span class="s2">&quot;https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct&quot;</span>
<span class="w">  </span><span class="nt">Server</span><span class="o">:</span><span class="w"> </span><span class="nt">cloudflare</span>
<span class="w">  </span><span class="nt">CF-RAY</span><span class="o">:</span><span class="w"> </span><span class="nt">535b85fe381ee684-LHR</span>
<span class="nt">Length</span><span class="o">:</span><span class="w"> </span><span class="nt">unspecified</span><span class="w"> </span><span class="cp">[</span><span class="nx">text</span><span class="p">/</span><span class="nx">html</span><span class="cp">]</span>
<span class="nt">Remote</span><span class="w"> </span><span class="nt">file</span><span class="w"> </span><span class="nt">exists</span><span class="w"> </span><span class="nt">and</span><span class="w"> </span><span class="nt">could</span><span class="w"> </span><span class="nt">contain</span><span class="w"> </span><span class="nt">further</span><span class="w"> </span><span class="nt">links</span><span class="o">,</span>
<span class="nt">but</span><span class="w"> </span><span class="nt">recursion</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">disabled</span><span class="w"> </span><span class="nt">--</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">retrieving</span><span class="o">.</span>
</code></pre></div>

<p>如果你只想看 HTTP 状态码而不是返回的全部结果，用下面的 <code>wget</code> 命令：</p>
<div class="highlight"><pre><span></span><code># wget --spider -S &quot;www.magesh.co.in&quot; 2&gt;&amp;1 | awk &#39;/HTTP\// {print $2}&#39;
 200
</code></pre></div>

<p>如果你想看一个网站是否宕机，用下面的 bash 脚本：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nt">vi</span><span class="w"> </span><span class="nt">wget-url-check</span><span class="p">.</span><span class="nc">sh</span>

<span class="err">#</span><span class="o">!/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">bash</span>
<span class="nt">if</span><span class="w"> </span><span class="nt">wget</span><span class="w"> </span><span class="nt">--spider</span><span class="w"> </span><span class="nt">-S</span><span class="w"> </span><span class="s2">&quot;https://www.google.com&quot;</span><span class="w"> </span><span class="nt">2</span><span class="o">&gt;&amp;</span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">grep</span><span class="w"> </span><span class="nt">-w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="o">;</span><span class="w"> </span><span class="nt">then</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;Google.com is up&quot;</span>
<span class="nt">else</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;Google.com is down&quot;</span>
<span class="nt">fi</span>
</code></pre></div>

<p>当你把脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code># wget-url-check.sh

HTTP/1.1 200 OK
Google.com is up
</code></pre></div>

<p>如果你想看多个网站的状态，使用下面的 shell 脚本：</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">vi</span><span class="w"> </span><span class="nv">curl</span><span class="o">-</span><span class="nv">url</span><span class="o">-</span><span class="nv">check</span><span class="o">-</span><span class="mi">1</span>.<span class="nv">sh</span>

#<span class="o">!/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">bash</span>
<span class="k">for</span><span class="w"> </span><span class="nv">site</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">google</span>.<span class="nv">com</span><span class="w"> </span><span class="nv">google</span>.<span class="nv">co</span>.<span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">xyzzz</span>.<span class="nv">com</span>
<span class="k">do</span>
<span class="k">if</span><span class="w"> </span><span class="nv">wget</span><span class="w"> </span><span class="o">--</span><span class="nv">spider</span><span class="w"> </span><span class="o">-</span><span class="nv">S</span><span class="w"> </span><span class="s2">&quot;$site&quot;</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is up&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is down&quot;</span>
<span class="nv">fi</span>
<span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;----------------------------------&quot;</span>
<span class="nv">done</span>
</code></pre></div>

<p>当你把上面脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code><span class="c"># sh wget</span><span class="nb">-</span><span class="c">url</span><span class="nb">-</span><span class="c">check</span><span class="nb">-</span><span class="c">1</span><span class="nt">.</span><span class="c">sh</span>

<span class="c">HTTP/1</span><span class="nt">.</span><span class="c">1 200 OK</span>
<span class="c">www</span><span class="nt">.</span><span class="c">google</span><span class="nt">.</span><span class="c">com is up</span>
<span class="nb">----------------------------------</span>
<span class="c">HTTP/1</span><span class="nt">.</span><span class="c">1 301 Moved Permanently</span>
<span class="c">google</span><span class="nt">.</span><span class="c">co</span><span class="nt">.</span><span class="c">in is up</span>
<span class="nb">----------------------------------</span>
<span class="c">www</span><span class="nt">.</span><span class="c">xyzzz</span><span class="nt">.</span><span class="c">com is down</span>
<span class="nb">----------------------------------</span>
</code></pre></div>

<h3>方法 5：使用 lynx 命令检测一个网站是否宕机</h3>
<p><a href="https://www.2daygeek.com/best-text-mode-based-command-line-web-browser-for-linux/">lynx</a> 是一个在<ruby> 可寻址光标字符单元终端 <rt>  cursor-addressable character cell terminals </rt></ruby>上使用的基于文本的高度可配的 web 浏览器，它是最古老的 web 浏览器并且现在仍在活跃开发。</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nt">lynx</span><span class="w"> </span><span class="nt">-head</span><span class="w"> </span><span class="nt">-dump</span><span class="w"> </span><span class="nt">http</span><span class="o">://</span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span>

<span class="nt">HTTP</span><span class="o">/</span><span class="nt">1</span><span class="p">.</span><span class="nc">1</span><span class="w"> </span><span class="nt">200</span><span class="w"> </span><span class="nt">OK</span>
<span class="nt">Date</span><span class="o">:</span><span class="w"> </span><span class="nt">Fri</span><span class="o">,</span><span class="w"> </span><span class="nt">15</span><span class="w"> </span><span class="nt">Nov</span><span class="w"> </span><span class="nt">2019</span><span class="w"> </span><span class="nt">08</span><span class="p">:</span><span class="nd">14</span><span class="p">:</span><span class="nd">23</span><span class="w"> </span><span class="nt">GMT</span>
<span class="nt">Content-Type</span><span class="o">:</span><span class="w"> </span><span class="nt">text</span><span class="o">/</span><span class="nt">html</span>
<span class="nt">Connection</span><span class="o">:</span><span class="w"> </span><span class="nt">close</span>
<span class="nt">Set-Cookie</span><span class="o">:</span><span class="w"> </span><span class="nt">__cfduid</span><span class="o">=</span><span class="nt">df3cb624024b81df7362f42ede71300951573805662</span><span class="o">;</span><span class="w"> </span><span class="nt">expires</span><span class="o">=</span><span class="nt">Sat</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span>
<span class="nt">4-Nov-20</span><span class="w"> </span><span class="nt">08</span><span class="p">:</span><span class="nd">14</span><span class="p">:</span><span class="nd">22</span><span class="w"> </span><span class="nt">GMT</span><span class="o">;</span><span class="w"> </span><span class="nt">path</span><span class="o">=/;</span><span class="w"> </span><span class="nt">domain</span><span class="o">=</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="o">;</span><span class="w"> </span><span class="nt">HttpOnly</span>
<span class="nt">Vary</span><span class="o">:</span><span class="w"> </span><span class="nt">Accept-Encoding</span>
<span class="nt">Last-Modified</span><span class="o">:</span><span class="w"> </span><span class="nt">Sun</span><span class="o">,</span><span class="w"> </span><span class="nt">14</span><span class="w"> </span><span class="nt">Jun</span><span class="w"> </span><span class="nt">2015</span><span class="w"> </span><span class="nt">11</span><span class="p">:</span><span class="nd">52</span><span class="p">:</span><span class="nd">38</span><span class="w"> </span><span class="nt">GMT</span>
<span class="nt">X-Cache</span><span class="o">:</span><span class="w"> </span><span class="nt">HIT</span><span class="w"> </span><span class="nt">from</span><span class="w"> </span><span class="nt">Backend</span>
<span class="nt">CF-Cache-Status</span><span class="o">:</span><span class="w"> </span><span class="nt">DYNAMIC</span>
<span class="nt">Server</span><span class="o">:</span><span class="w"> </span><span class="nt">cloudflare</span>
<span class="nt">CF-RAY</span><span class="o">:</span><span class="w"> </span><span class="nt">535fc5704a43e694-LHR</span>
</code></pre></div>

<p>如果你只想看 HTTP 状态码而不是返回的全部结果，用下面的 <code>lynx</code> 命令：</p>
<div class="highlight"><pre><span></span><code># lynx -head -dump https://www.magesh.co.in 2&gt;&amp;1 | awk &#39;/HTTP\// {print $2}&#39;
 200
</code></pre></div>

<p>如果你想看一个网站是否宕机，用下面的 bash 脚本：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nt">vi</span><span class="w"> </span><span class="nt">lynx-url-check</span><span class="p">.</span><span class="nc">sh</span>

<span class="err">#</span><span class="o">!/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">bash</span>
<span class="nt">if</span><span class="w"> </span><span class="nt">lynx</span><span class="w"> </span><span class="nt">-head</span><span class="w"> </span><span class="nt">-dump</span><span class="w"> </span><span class="nt">http</span><span class="o">://</span><span class="nt">www</span><span class="p">.</span><span class="nc">magesh</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="w"> </span><span class="nt">2</span><span class="o">&gt;&amp;</span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">grep</span><span class="w"> </span><span class="nt">-w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="o">;</span><span class="w"> </span><span class="nt">then</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;magesh.co.in is up&quot;</span>
<span class="nt">else</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;magesh.co.in is down&quot;</span>
<span class="nt">fi</span>
</code></pre></div>

<p>当你把脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code># sh lynx-url-check.sh

HTTP/1.1 200 OK
magesh.co.in is up
</code></pre></div>

<p>如果你想看多个网站的状态，使用下面的 shell 脚本：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nt">vi</span><span class="w"> </span><span class="nt">lynx-url-check-1</span><span class="p">.</span><span class="nc">sh</span>

<span class="err">#</span><span class="o">!/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">bash</span>
<span class="nt">for</span><span class="w"> </span><span class="nt">site</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">http</span><span class="o">://</span><span class="nt">www</span><span class="p">.</span><span class="nc">google</span><span class="p">.</span><span class="nc">com</span><span class="w"> </span><span class="nt">https</span><span class="o">://</span><span class="nt">google</span><span class="p">.</span><span class="nc">co</span><span class="p">.</span><span class="nc">in</span><span class="w"> </span><span class="nt">http</span><span class="o">://</span><span class="nt">www</span><span class="p">.</span><span class="nc">xyzzz</span><span class="p">.</span><span class="nc">com</span>
<span class="nt">do</span>
<span class="nt">if</span><span class="w"> </span><span class="nt">lynx</span><span class="w"> </span><span class="nt">-head</span><span class="w"> </span><span class="nt">-dump</span><span class="w"> </span><span class="s2">&quot;$site&quot;</span><span class="w"> </span><span class="nt">2</span><span class="o">&gt;&amp;</span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">grep</span><span class="w"> </span><span class="nt">-w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="o">;</span><span class="w"> </span><span class="nt">then</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;$site is up&quot;</span>
<span class="nt">else</span>
<span class="w">    </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;$site is down&quot;</span>
<span class="nt">fi</span>
<span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;----------------------------------&quot;</span>
<span class="nt">done</span>
</code></pre></div>

<p>当你把上面脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code><span class="c"># sh lynx</span><span class="nb">-</span><span class="c">url</span><span class="nb">-</span><span class="c">check</span><span class="nb">-</span><span class="c">1</span><span class="nt">.</span><span class="c">sh</span>

<span class="c">HTTP/1</span><span class="nt">.</span><span class="c">0 200 OK</span>
<span class="c">http://www</span><span class="nt">.</span><span class="c">google</span><span class="nt">.</span><span class="c">com is up</span>
<span class="nb">----------------------------------</span>
<span class="c">HTTP/1</span><span class="nt">.</span><span class="c">0 301 Moved Permanently</span>
<span class="c">https://google</span><span class="nt">.</span><span class="c">co</span><span class="nt">.</span><span class="c">in is up</span>
<span class="nb">----------------------------------</span>
<span class="c">www</span><span class="nt">.</span><span class="c">xyzzz</span><span class="nt">.</span><span class="c">com is down</span>
<span class="nb">----------------------------------</span>
</code></pre></div>

<h3>方法 6：使用 ping 命令检测一个网站是否宕机</h3>
<p><a href="https://www.2daygeek.com/how-to-use-ping-fping-gping-in-linux/">ping 命令</a>（Packet Internet Groper）是网络工具的代表，用于在互联网协议（IP）的网络中测试一个目标主机是否可用/可连接。通过向目标主机发送 ICMP 回应请求报文包并等待 ICMP 回应响应报文来检测主机的可用性。它基于已发送的包、接收到的包和丢失了的包来统计结果数据，通常包含最小/平均/最大响应时间。</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> ping -c 5 2daygeek.com

PING 2daygeek.com (104.27.157.177) 56(84) bytes of data.
64 bytes from 104.27.157.177 (104.27.157.177): icmp_seq=1 ttl=58 time=228 ms
64 bytes from 104.27.157.177 (104.27.157.177): icmp_seq=2 ttl=58 time=227 ms
64 bytes from 104.27.157.177 (104.27.157.177): icmp_seq=3 ttl=58 time=250 ms
64 bytes from 104.27.157.177 (104.27.157.177): icmp_seq=4 ttl=58 time=171 ms
64 bytes from 104.27.157.177 (104.27.157.177): icmp_seq=5 ttl=58 time=193 ms

--- 2daygeek.com ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 13244ms
rtt min/avg/max/mdev = 170.668/213.824/250.295/28.320 ms
</code></pre></div>

<h3>附加 1：使用 telnet 命令检测一个网站是否宕机</h3>
<p><code>telnet</code> 命令是一个使用 TELNET 协议用于 TCP/IP 网络中多个主机相互通信的古老的网络协议。它通过 23 端口连接其他设备如计算机和网络设备。<code>telnet</code> 是不安全的协议，现在由于用这个协议发送的数据没有经过加密可能被黑客拦截，所以不推荐使用。大家都使用经过加密且非常安全的 SSH 协议来代替 <code>telnet</code>。</p>
<div class="highlight"><pre><span></span><code># telnet google.com 80

Trying 216.58.194.46…
Connected to google.com.
Escape character is &#39;^]&#39;.
^]
telnet&gt; quit
Connection closed.
</code></pre></div>

<h3>附加 2：使用 bash 脚本检测一个网站是否宕机</h3>
<p>简而言之，一个 <a href="https://www.2daygeek.com/category/shell-script/">shell 脚本</a> 就是一个包含一系列命令的文件。shell 从文件读取内容按输入顺序逐行在命令行执行。为了让它更有效，我们添加一些条件。这也减轻了 Linux 管理员的负担。</p>
<p>如果你想想用 <code>wget</code> 命令看多个网站的状态，使用下面的 shell 脚本：</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">vi</span><span class="w"> </span><span class="nv">wget</span><span class="o">-</span><span class="nv">url</span><span class="o">-</span><span class="nv">check</span><span class="o">-</span><span class="mi">2</span>.<span class="nv">sh</span>

#<span class="o">!/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">bash</span>
<span class="k">for</span><span class="w"> </span><span class="nv">site</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">google</span>.<span class="nv">com</span><span class="w"> </span><span class="nv">google</span>.<span class="nv">co</span>.<span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">xyzzz</span>.<span class="nv">com</span>
<span class="k">do</span>
<span class="k">if</span><span class="w"> </span><span class="nv">wget</span><span class="w"> </span><span class="o">--</span><span class="nv">spider</span><span class="w"> </span><span class="o">-</span><span class="nv">S</span><span class="w"> </span><span class="s2">&quot;$site&quot;</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">null</span><span class="w"> </span><span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is up&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is down&quot;</span>
<span class="nv">fi</span>
<span class="nv">done</span>
</code></pre></div>

<p>当你把上面脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code># sh wget-url-check-2.sh

www.google.com is up
google.co.in is up
www.xyzzz.com is down
</code></pre></div>

<p>如果你想用 <code>wget</code> 命令看多个网站的状态，使用下面的 <a href="https://www.2daygeek.com/category/bash-script/">shell 脚本</a>：</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">vi</span><span class="w"> </span><span class="nv">curl</span><span class="o">-</span><span class="nv">url</span><span class="o">-</span><span class="nv">check</span><span class="o">-</span><span class="mi">2</span>.<span class="nv">sh</span>

#<span class="o">!/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">bash</span>
<span class="k">for</span><span class="w"> </span><span class="nv">site</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">google</span>.<span class="nv">com</span><span class="w"> </span><span class="nv">google</span>.<span class="nv">co</span>.<span class="nv">in</span><span class="w"> </span><span class="nv">www</span>.<span class="nv">xyzzz</span>.<span class="nv">com</span>
<span class="k">do</span>
<span class="k">if</span><span class="w"> </span><span class="nv">curl</span><span class="w"> </span><span class="o">-</span><span class="nv">I</span><span class="w"> </span><span class="s2">&quot;$site&quot;</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">w</span><span class="w"> </span><span class="s2">&quot;200\|301&quot;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">null</span><span class="w"> </span><span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is up&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$site is down&quot;</span>
<span class="nv">fi</span>
<span class="nv">done</span>
</code></pre></div>

<p>当你把上面脚本内容添加到一个文件后，执行文件，查看结果：</p>
<div class="highlight"><pre><span></span><code># sh curl-url-check-2.sh

www.google.com is up
google.co.in is up
www.xyzzz.com is down
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>