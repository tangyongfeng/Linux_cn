<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何用 Linux 命令行发电子邮件</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Sandra Henry-stocker Linux 提供了几个可以让你通过终端发送电子邮件的命令，下面来展示一些有趣的方法。 Linux 可以用多种方式通过命令 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/06/ru-he-yong-linux-ming-ling-xing-fa-dian-zi-you-jian.html" rel="bookmark"
           title="Permalink to 如何用 Linux 命令行发电子邮件">如何用 Linux 命令行发电子邮件</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-06-26T17:42:49+02:00">
                Published: Wed 26 June 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Sandra Henry-stocker</p>
<blockquote>
<p>Linux 提供了几个可以让你通过终端发送电子邮件的命令，下面来展示一些有趣的方法。</p>
</blockquote>
<p><img alt="Molnia/iStock" src="/data/attachment/album/201906/26/174253tom9999o7dktyqqv.jpg"></p>
<p>Linux 可以用多种方式通过命令行发送电子邮件。有一些方法十分简单，有一些相对会复杂一些，不过仍旧提供了很多有用的特性。选择哪一种方式取决于你想要什么 —— 向同事快速发送消息，还是向一批人群发带有附件的更复杂的信息。接下来看一看几种可行方案：</p>
<h3>mail</h3>
<p>发送一条简单消息最便捷的 Linux 命令是 <code>mail</code>。假设你需要提醒老板你今天得早点走，你可以使用这样的一条命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Reminder: Leaving at 4 PM today&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;early departure&quot;</span><span class="w"> </span>myboss
</code></pre></div>

<p>另一种方式是从一个文件中提取出你想要发送的文本信息：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;Reminder:Leaving early&quot;</span><span class="w"> </span>myboss<span class="w"> </span>&lt;<span class="w"> </span>reason4leaving
</code></pre></div>

<p>在以上两种情况中，你都可以通过 <code>-s</code> 来为邮件添加标题。</p>
<h3>sendmail</h3>
<p>使用 <code>sendmail</code> 命令可以发送一封不包含标题的快信。（用目标收件人替换 <code>recip</code>）：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;leaving now&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sendmail<span class="w"> </span>recip
</code></pre></div>

<p>你可以用这条命令发送一条只有标题，没有内容的信息：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Subject: leaving now&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sendmail<span class="w"> </span>recip
</code></pre></div>

<p>你也可以用 <code>sendmail</code> 发送一条包含一条标题行的完整信息。不过使用这个方法时，你的标题行会被添加到要发送的文件中，如下例所示：</p>
<div class="highlight"><pre><span></span><code><span class="n">Subject</span><span class="o">:</span><span class="w"> </span><span class="n">Requested</span><span class="w"> </span><span class="n">lyrics</span>
<span class="n">I</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">say</span><span class="w"> </span><span class="n">that</span><span class="o">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">my</span><span class="w"> </span><span class="n">opinion</span><span class="o">,</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">hair</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">flamboyant</span>
<span class="n">affectations</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">appearance</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">nothing</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="o">...</span>
</code></pre></div>

<p>你也可以发送这样的文件（<code>lyric</code> 文件包含标题和正文）：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sendmail<span class="w"> </span>recip<span class="w"> </span>&lt;<span class="w"> </span>lyrics
</code></pre></div>

<p><code>sendmain</code> 的输出也可以很冗长。如果你感到好奇并希望查看发送系统和接收系统之间的交互，请添加 <code>-v</code> （verbose）选项。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sendmail<span class="w"> </span>-v<span class="w"> </span>recip@emailsite.com<span class="w"> </span>&lt;<span class="w"> </span>lyrics
</code></pre></div>

<h3>mutt</h3>
<p><code>mutt</code> 是通过命令行发送邮件的一个很好的工具，在使用前你需要安装它。<code>mutt</code> 的一个很方便的优势就是它允许你在邮件中添加附件。</p>
<p>使用 <code>mutt</code> 发送一条快速信息：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Please check last night&#39;s backups&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mutt<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;backup check&quot;</span><span class="w"> </span>recip
</code></pre></div>

<p>从文件中获取内容：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mutt<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;Agenda&quot;</span><span class="w"> </span>recip<span class="w"> </span>&lt;<span class="w"> </span>agenda
</code></pre></div>

<p>使用 <code>-a</code> 选项在 <code>mutt</code> 中添加附件。你甚至可以添加不止一个附件 —— 如下一条命令所示：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mutt<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;Agenda&quot;</span><span class="w"> </span>recip<span class="w"> </span>-a<span class="w"> </span>agenda<span class="w"> </span>-a<span class="w"> </span>speakers<span class="w"> </span>&lt;<span class="w"> </span>msg
</code></pre></div>

<p>在以上的命令中，<code>msg</code> 文件包含了邮件中的正文。如果你没有其他补充的内容，你可以这样来代替之前的命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mutt<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;Agenda&quot;</span><span class="w"> </span>recip<span class="w"> </span>-a<span class="w"> </span>agenda<span class="w"> </span>-a<span class="w"> </span>speakers
</code></pre></div>

<p><code>mutt</code> 另一个有用的功能是可以添加抄送（<code>-c</code>）和密送（<code>-b</code>）。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mutt<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;Minutes from last meeting&quot;</span><span class="w"> </span>recip@somesite.com<span class="w"> </span>-c<span class="w"> </span>myboss<span class="w"> </span>&lt;<span class="w"> </span>mins
</code></pre></div>

<h3>telnet</h3>
<p>如果你想深入了解发送电子邮件的细节，你可以使用 <code>telnet</code> 来进行电子邮件交互操作。但正如所说的那样，你需要“学习术语”。邮件服务器期望一系列命令，其中包括自我介绍（<code>EHLO</code> 命令）、提供发件人（<code>MAIL FROM</code> 命令）、指定收件人（<code>RCPT TO</code> 命令），然后添加消息（<code>DATA</code>）并以 <code>.</code> 结束消息。并不是所有的电子邮件服务器都会响应这些请求。此方法通常仅用于故障排除。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>telnet<span class="w"> </span>emailsite.org<span class="w"> </span><span class="m">25</span>
Trying<span class="w"> </span><span class="m">192</span>.168.0.12...
Connected<span class="w"> </span>to<span class="w"> </span>emailsite.
Escape<span class="w"> </span>character<span class="w"> </span>is<span class="w"> </span><span class="s1">&#39;^]&#39;</span>.
<span class="m">220</span><span class="w"> </span>localhost<span class="w"> </span>ESMTP<span class="w"> </span>Sendmail<span class="w"> </span><span class="m">8</span>.15.2/8.15.2/Debian-12<span class="p">;</span><span class="w"> </span>Wed,<span class="w"> </span><span class="m">12</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">16</span>:32:13<span class="w"> </span>-0400<span class="p">;</span><span class="w"> </span><span class="o">(</span>No<span class="w"> </span>UCE/UBE<span class="o">)</span><span class="w"> </span>logging<span class="w"> </span>access<span class="w"> </span>from:<span class="w"> </span>mysite<span class="o">(</span>OK<span class="o">)</span>-mysite<span class="w"> </span><span class="o">[</span><span class="m">192</span>.168.0.12<span class="o">]</span>
EHLO<span class="w"> </span>mysite.org<span class="w">                </span>&lt;<span class="o">==</span><span class="w"> </span>introduce<span class="w"> </span>yourself
<span class="m">250</span>-localhost<span class="w"> </span>Hello<span class="w"> </span>mysite<span class="w"> </span><span class="o">[</span><span class="m">127</span>.0.0.1<span class="o">]</span>,<span class="w"> </span>pleased<span class="w"> </span>to<span class="w"> </span>meet<span class="w"> </span>you
<span class="m">250</span>-ENHANCEDSTATUSCODES
<span class="m">250</span>-PIPELINING
<span class="m">250</span>-EXPN
<span class="m">250</span>-VERB
<span class="m">250</span>-8BITMIME
<span class="m">250</span>-SIZE
<span class="m">250</span>-DSN
<span class="m">250</span>-ETRN
<span class="m">250</span>-AUTH<span class="w"> </span>DIGEST-MD5<span class="w"> </span>CRAM-MD5
<span class="m">250</span>-DELIVERBY
<span class="m">250</span><span class="w"> </span>HELP
MAIL<span class="w"> </span>FROM:<span class="w"> </span>me@mysite.org<span class="w">       </span>&lt;<span class="o">==</span><span class="w"> </span>指定发件人
<span class="m">250</span><span class="w"> </span><span class="m">2</span>.1.0<span class="w"> </span>shs@mysite.org...<span class="w"> </span>Sender<span class="w"> </span>ok
RCPT<span class="w"> </span>TO:<span class="w"> </span>recip<span class="w">             </span>&lt;<span class="o">==</span><span class="w"> </span>指定收件人
<span class="m">250</span><span class="w"> </span><span class="m">2</span>.1.5<span class="w"> </span>recip...<span class="w"> </span>Recipient<span class="w"> </span>ok
DATA<span class="w">                   </span>&lt;<span class="o">==</span><span class="w"> </span>邮件内容开始
<span class="m">354</span><span class="w"> </span>Enter<span class="w"> </span>mail,<span class="w"> </span>end<span class="w"> </span>with<span class="w"> </span><span class="s2">&quot;.&quot;</span><span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>line<span class="w"> </span>by<span class="w"> </span>itself
This<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span><span class="nb">test</span><span class="w"> </span>message.<span class="w"> </span>Please<span class="w"> </span>deliver<span class="w"> </span>it<span class="w"> </span><span class="k">for</span><span class="w"> </span>me.
.<span class="w">                  </span>&lt;<span class="o">==</span><span class="w"> </span>内容结束
<span class="m">250</span><span class="w"> </span><span class="m">2</span>.0.0<span class="w"> </span>x5CKWDds029287<span class="w"> </span>Message<span class="w"> </span>accepted<span class="w"> </span><span class="k">for</span><span class="w"> </span>delivery
quit<span class="w">                   </span>&lt;<span class="o">==</span><span class="w"> </span>结束交互
</code></pre></div>

<h3>向多个收件人发送电子邮件</h3>
<p>如果你希望通过 Linux 命令行向一大组收件人发送电子邮件，你可以使用一个循环来帮助你完成任务，如下面应用在 <code>mutt</code> 中的例子：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="k">for</span><span class="w"> </span>recip<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>cat<span class="w"> </span>recips<span class="sb">`</span>
<span class="k">do</span>
<span class="w">    </span>mutt<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;Minutes from May meeting&quot;</span><span class="w"> </span><span class="nv">$recip</span><span class="w"> </span>&lt;<span class="w"> </span>May_minutes
<span class="k">done</span>
</code></pre></div>

<h3>总结</h3>
<p>有很多方法可以从 Linux 命令行发送电子邮件。有些工具提供了相当多的选项。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>