<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Vim 入门：基础</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Bryant Son 为工作或者新项目学习足够的 Vim 知识。 我还清晰地记得我第一次接触 Vim 的时候。那时我还是一名大学生，计算机学 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/04/vim-ru-men-ji-chu.html" rel="bookmark"
           title="Permalink to Vim 入门：基础">Vim 入门：基础</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-04-20T10:42:59+02:00">
                Published: Sat 20 April 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Bryant Son</p>
<blockquote>
<p>为工作或者新项目学习足够的 Vim 知识。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201904/20/104238gvg444k5tbm4gqt5.jpg"></p>
<p>我还清晰地记得我第一次接触 Vim 的时候。那时我还是一名大学生，计算机学院的机房里都装着 Ubuntu 系统。尽管我在上大学前也曾接触过不同的 Linux 发行版（比如 RHEL —— Red Hat 在百思买出售它的 CD），但这却是我第一次要在日常中频繁使用 Linux 系统，因为我的课程要求我这样做。当我开始使用 Linux 时，正如我的前辈和将来的后继者们一样，我感觉自己像是一名“真正的程序员”了。</p>
<p><img alt="Real Programmers comic" src="/data/attachment/album/201904/20/104307h6o5ntn9h225onn0.jpg" title="Real Programmers comic"></p>
<p><em>真正的程序员，来自 <a href="https://xkcd.com/378/">xkcd</a></em></p>
<p>学生们可以使用像 <a href="https://kate-editor.org">Kate</a> 一样的图形文本编辑器，这也安装在学校的电脑上了。对于那些可以使用 shell 但不习惯使用控制台编辑器的学生，最流行的选择是 <a href="https://www.nano-editor.org">Nano</a>，它提供了很好的交互式菜单和类似于 Windows 图形文本编辑器的体验。</p>
<p>我有时会用 Nano，但当我听说 <a href="https://www.vim.org">Vi/Vim</a> 和 <a href="https://www.gnu.org/software/emacs">Emacs</a> 能做一些很棒的事情时我决定试一试它们（主要是因为它们看起来很酷，而且我也很好奇它们有什么特别之处）。第一次使用 Vim 时吓到我了 —— 我不想搞砸任何事情！但是，一旦我掌握了它的诀窍，事情就变得容易得多，我就可以欣赏这个编辑器的强大功能了。至于 Emacs，呃，我有点放弃了，但我很高兴我坚持和 Vim 在一起。</p>
<p>在本文中，我将介绍一下 Vim（基于我的个人经验），这样你就可以在 Linux 系统上用它来作为编辑器使用了。这篇文章不会让你变成 Vim 的专家，甚至不会触及 Vim 许多强大功能的皮毛。但是起点总是很重要的，我想让开始的经历尽可能简单，剩下的则由你自己去探索。</p>
<h3>第 0 步：打开一个控制台窗口</h3>
<p>在使用 Vim 前，你需要做一些准备工作。在 Linux 操作系统打开控制台终端。（因为 Vim 也可以在 MacOS 上使用，Mac 用户也可以使用这些说明）。</p>
<p>打开终端窗口后，输入 <code>ls</code> 命令列出当前目录下的内容。然后，输入 <code>mkdir Tutorial</code> 命令创建一个名为 <code>Tutorial</code> 的新目录。通过输入 <code>cd Tutorial</code> 来进入该目录。</p>
<p><img alt="Create a folder" src="/data/attachment/album/201904/20/104312nbyok8arxho0bnok.jpg" title="Create a folder"></p>
<p>这就是全部的准备工作。现在是时候转到有趣的部分了——开始使用 Vim。</p>
<h3>第 1 步：创建一个 Vim 文件和不保存退出</h3>
<p>还记得我一开始说过我不敢使用 Vim 吗？我当时在害怕“如果我改变了一个现有的文件，把事情搞砸了怎么办？”毕竟，一些计算机科学作业要求我修改现有的文件。我想知道：如何在不保存更改的情况下打开和关闭文件？</p>
<p>好消息是你可以使用相同的命令在 Vim 中创建或打开文件：<code>vim &lt;FILE_NAME&gt;</code>，其中 <code>&lt;FILE_NAME&gt;</code> 表示要创建或修改的目标文件名。让我们通过输入 <code>vim HelloWorld.java</code> 来创建一个名为 <code>HelloWorld.java</code> 的文件。</p>
<p>你好，Vim！现在，讲一下 Vim 中一个非常重要的概念，可能也是最需要记住的：Vim 有多种模式，下面是 Vim 基础中需要知道的的三种：</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>正常模式</td>
<td>默认模式，用于导航和简单编辑</td>
</tr>
<tr>
<td>插入模式</td>
<td>用于直接插入和修改文本</td>
</tr>
<tr>
<td>命令行模式</td>
<td>用于执行如保存，退出等命令</td>
</tr>
</tbody>
</table>
<p>Vim 也有其他模式，例如可视模式、选择模式和命令模式。不过上面的三种模式对我们来说已经足够用了。</p>
<p>你现在正处于正常模式，如果有文本，你可以用箭头键移动或使用其他导航键（将在稍后看到）。要确定你正处于正常模式，只需按下 <code>esc</code> (Escape）键即可。</p>
<blockquote>
<p><strong>提示：</strong> <code>Esc</code> 切换到正常模式。即使你已经在正常模式下，点击 <code>Esc</code> 只是为了练习。</p>
</blockquote>
<p>现在，有趣的事情发生了。输入 <code>:</code> （冒号键）并接着 <code>q!</code> （完整命令：<code>:q!</code>）。你的屏幕将显示如下：</p>
<p><img alt="Editing Vim" src="/data/attachment/album/201904/20/104313nxbiqx37yq3kk5qx.jpg" title="Editing Vim"></p>
<p>在正常模式下输入冒号会将 Vim 切换到命令行模式，执行 <code>:q!</code> 命令将退出 Vim 编辑器而不进行保存。换句话说，你放弃了所有的更改。你也可以使用 <code>ZQ</code> 命令；选择你认为更方便的选项。</p>
<p>一旦你按下 <code>Enter</code> （回车），你就不再在 Vim 中。重复练习几次来掌握这条命令。熟悉了这部分内容之后，请转到下一节，了解如何对文件进行更改。</p>
<h3>第 2 步：在 Vim 中修改并保存</h3>
<p>通过输入 <code>vim HelloWorld.java</code> 和回车键来再次打开这个文件。你可以在插入模式中修改文件。首先，通过 <code>Esc</code> 键来确定你正处于正常模式。接着输入 <code>i</code> 来进入插入模式（没错，就是字母 <strong>i</strong>）。</p>
<p>在左下角，你将看到 <code>-- INSERT --</code>，这标志着你这处于插入模式。</p>
<p><img alt="Vim insert mode" src="/data/attachment/album/201904/20/104315z2klgi2lwlbvthgg.jpg" title="Vim insert mode"></p>
<p>写一些 Java 代码。你可以写任何你想写的，不过这也有一份你可以参照的例子。你的屏幕将显示如下：</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">HelloWorld</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="o">[</span><span class="n">String</span><span class="o">][</span><span class="n">11</span><span class="o">]</span><span class="err">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<p>非常漂亮！注意文本是如何在 Java 语法中高亮显示的。因为这是个 Java 文件，所以 Vim 将自动检测语法并高亮颜色。</p>
<p>保存文件：按下 <code>Esc</code> 来退出插入模式并进入命令行模式。输入 <code>:</code> 并接着 <code>x!</code> （完整命令：<code>:x!</code>），按回车键来保存文件。你也可以输入 <code>wq</code> 来执行相同的操作。</p>
<p>现在，你知道了如何使用插入模式输入文本并使用以下命令保存文件：<code>:x!</code> 或者 <code>:wq</code>。</p>
<h3>第 3 步：Vim 中的基本导航</h3>
<p>虽然你总是可以使用上箭头、下箭头、左箭头和右箭头在文件中移动，但在一个几乎有数不清行数的大文件中，这将是非常困难的。能够在一行中跳跃光标将会是很有用的。虽然 Vim 提供了不少很棒的导航功能，不过在一开始，我想向你展示如何在 Vim 中到达某一特定的行。</p>
<p>单击 <code>Esc</code> 来确定你处于正常模式，接着输入 <code>:set number</code> 并键入回车。</p>
<p>瞧！你现在可以在每一行的左侧看到行号。</p>
<p><img alt="Showing Line Numbers" src="/data/attachment/album/201904/20/104319ow29q27wwzs00s0y.jpg" title="Showing Line Numbers"></p>
<p>好，你也许会说，“这确实很酷，不过我该怎么跳到某一行呢？”再一次的，确认你正处于正常模式。接着输入 <code>:&lt;LINE_NUMBER&gt;</code>，在这里 <code>&lt;LINE_NUMBER&gt;</code> 是你想去的那一行的行数。按下回车键来试着移动到第二行。</p>
<div class="highlight"><pre><span></span><code>:2
</code></pre></div>

<p>现在，跳到第三行。</p>
<p><img alt="Jump to line 3" src="/data/attachment/album/201904/20/104322x033zctfxff9ff2z.jpg" title="Jump to line 3"></p>
<p>但是，假如你正在处理一个一千多行的文件，而你正想到文件底部。这该怎么办呢？确认你正处于正常模式，接着输入 <code>:$</code> 并按下回车。</p>
<p>你将来到最后一行！</p>
<p>现在，你知道如何在行间跳跃了，作为补充，我们来学一下如何移动到一行的行尾。确认你正处于有文本内容的一行，如第三行，接着输入 <code>$</code>。</p>
<p><img alt="Go to the last character" src="/data/attachment/album/201904/20/104325w6poo9hhj9x6ozi9.jpg" title="Go to the last character"></p>
<p>你现在来到这行的最后一个字节了。在此示例中，高亮左大括号以显示光标移动到的位置，右大括号被高亮是因为它是高亮的左大括号的匹配字符。</p>
<p>这就是 Vim 中的基本导航功能。等等，别急着退出文件。让我们转到 Vim 中的基本编辑。不过，你可以暂时顺便喝杯咖啡或茶休息一下。</p>
<h3>第 4 步：Vim 中的基本编辑</h3>
<p>现在，你已经知道如何通过跳到想要的一行来在文件中导航，你可以使用这个技能在 Vim 中进行一些基本编辑。切换到插入模式。（还记得怎么做吗？是不是输入 <code>i</code> ？）当然，你可以使用键盘逐一删除或插入字符来进行编辑，但是 Vim 提供了更快捷的方法来编辑文件。</p>
<p>来到第三行，这里的代码是 <code>public static void main(String[] args) {</code>。双击 <code>d</code> 键，没错，就是 <code>dd</code>。如果你成功做到了，你将会看到，第三行消失了，剩下的所有行都向上移动了一行。（例如，第四行变成了第三行）。</p>
<p><img alt="Deleting A Line" src="/data/attachment/album/201904/20/104329i0oripvlg8wz8lk7.jpg" title="Deleting A Line"></p>
<p>这就是<ruby> 删除 <rt>  delete </rt></ruby>命令。不要担心，键入 <code>u</code>，你会发现这一行又回来了。喔，这就是<ruby> 撤销 <rt>  undo </rt></ruby>命令。</p>
<p><img alt="Undoing a change in Vim" src="/data/attachment/album/201904/20/104332o8nnv8qlqqlnelim.jpg" title="Undoing a change in Vim"></p>
<p>下一课是学习如何复制和粘贴文本，但首先，你需要学习如何在 Vim 中突出显示文本。按下 <code>v</code> 并向左右移动光标来选择或反选文本。当你向其他人展示代码并希望标识你想让他们注意到的代码时，这个功能也非常有用。</p>
<p><img alt="Highlighting text in Vim" src="/data/attachment/album/201904/20/104335ol7u6u61uprm7bmr.jpg" title="Highlighting text in Vim"></p>
<p>来到第四行，这里的代码是 <code>System.out.println("Hello, Opensource");</code>。高亮这一行的所有内容。好了吗？当第四行的内容处于高亮时，按下 <code>y</code>。这就叫做<ruby> 复制 <rt>  yank </rt></ruby>模式，文本将会被复制到剪贴板上。接下来，输入 <code>o</code> 来创建新的一行。注意，这将让你进入插入模式。通过按 <code>Esc</code> 退出插入模式，然后按下 <code>p</code>，代表<ruby> 粘贴 <rt>  paste </rt></ruby>。这将把复制的文本从第三行粘贴到第四行。</p>
<p><img alt="Pasting in Vim" src="/data/attachment/album/201904/20/104338li1hb4qmyeq46d2h.jpg" title="Pasting in Vim"></p>
<p>作为练习，请重复这些步骤，但也要修改新创建的行中的文字。此外，请确保这些行对齐工整。</p>
<blockquote>
<p><strong>提示：</strong> 您需要在插入模式和命令行模式之间来回切换才能完成此任务。</p>
</blockquote>
<p>当你完成了，通过 <code>x!</code> 命令保存文件。以上就是 Vim 基本编辑的全部内容。</p>
<h3>第 5 步：Vim 中的基本搜索</h3>
<p>假设你的团队领导希望你更改项目中的文本字符串。你该如何快速完成任务？你可能希望使用某个关键字来搜索该行。</p>
<p>Vim 的搜索功能非常有用。通过 <code>Esc</code> 键来进入命令模式，然后输入冒号 <code>:</code>，我们可以通过输入 <code>/&lt;SEARCH_KEYWORD&gt;</code> 来搜索关键词， <code>&lt;SEARCH_KEYWORD&gt;</code> 指你希望搜索的字符串。在这里，我们搜索关键字符串 <code>Hello</code>。在下面的图示中没有显示冒号，但这是必须输入的。</p>
<p><img alt="Searching in Vim" src="/data/attachment/album/201904/20/104340tlsr8a33l2zr2zdl.jpg" title="Searching in Vim"></p>
<p>但是，一个关键字可以出现不止一次，而这可能不是你想要的那一个。那么，如何找到下一个匹配项呢？只需按 <code>n</code> 键即可，这代表<ruby> 下一个 <rt>  next </rt></ruby>。执行此操作时，请确保你没有处于插入模式！</p>
<h3>附加步骤：Vim 中的分割模式</h3>
<p>以上几乎涵盖了所有的 Vim 基础知识。但是，作为一个额外奖励，我想给你展示 Vim 一个很酷的特性，叫做<ruby> 分割 <rt>  split </rt></ruby>模式。</p>
<p>退出 <code>HelloWorld.java</code> 并创建一个新文件。在控制台窗口中，输入 <code>vim GoodBye.java</code> 并按回车键来创建一个名为 <code>GoodBye.java</code> 的新文件。</p>
<p>输入任何你想输入的让内容，我选择输入 <code>Goodbye</code>。保存文件（记住你可以在命令模式中使用 <code>:x!</code> 或者 <code>:wq</code>）。</p>
<p>在命令模式中，输入 <code>:split HelloWorld.java</code>，来看看发生了什么。</p>
<p><img alt="Split mode in Vim" src="/data/attachment/album/201904/20/104345e9e9ucep9o9cruo4.jpg" title="Split mode in Vim"></p>
<p>Wow！快看！ <code>split</code> 命令将控制台窗口水平分割成了两个部分，上面是 <code>HelloWorld.java</code>，下面是 <code>GoodBye.java</code>。该怎么能在窗口之间切换呢？ 按住 <code>Control</code> 键（在 Mac 上）或 <code>Ctrl</code> 键（在 PC 上），然后按下 <code>ww</code> (即双击 <code>w</code> 键)。</p>
<p>作为最后一个练习，尝试通过复制和粘贴 <code>HelloWorld.java</code> 来编辑 <code>GoodBye.java</code> 以匹配下面屏幕上的内容。</p>
<p><img alt="Modify GoodBye.java file in Split Mode" src="/data/attachment/album/201904/20/104349vqbzq47gnzq4x99u.jpg" title="Modify GoodBye.java file in Split Mode"></p>
<p>保存两份文件，成功！</p>
<blockquote>
<p><strong>提示 1：</strong> 如果你想将两个文件窗口垂直分割，使用 <code>:vsplit &lt;FILE_NAME&gt;</code> 命令。（代替 <code>:split &lt;FILE_NAME&gt;</code> 命令，<code>&lt;FILE_NAME&gt;</code> 指你想要使用分割模式打开的文件名）。</p>
<p><strong>提示 2：</strong> 你可以通过调用任意数量的 <code>split</code> 或者 <code>vsplit</code> 命令来打开两个以上的文件。试一试，看看它效果如何。</p>
</blockquote>
<h3>Vim 速查表</h3>
<p>在本文中，您学会了如何使用 Vim 来完成工作或项目，但这只是你开启 Vim 强大功能之旅的开始，可以查看其他很棒的教程和技巧。</p>
<p>为了让一切变得简单些，我已经将你学到的一切总结到了 <a href="https://opensource.com/downloads/cheat-sheet-vim">一份方便的速查表</a> 中。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>