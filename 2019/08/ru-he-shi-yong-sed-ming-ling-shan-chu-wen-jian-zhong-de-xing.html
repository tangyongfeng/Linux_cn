<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何使用 sed 命令删除文件中的行</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Magesh Maruthamuthu Sed 代表 流编辑器 Stream Editor ，常用于 Linux 中基本的文本处理。sed 命令是 Linux 中的重要命令之一，在文件处理方面有着重要作用 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2019/08/ru-he-shi-yong-sed-ming-ling-shan-chu-wen-jian-zhong-de-xing.html" rel="bookmark"
           title="Permalink to 如何使用 sed 命令删除文件中的行">如何使用 sed 命令删除文件中的行</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-08-28T10:02:17+02:00">
                Published: Wed 28 August 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Magesh Maruthamuthu</p>
<p><img alt="" src="/data/attachment/album/201908/28/100204ei6v98sa69hdf3zf.jpg"></p>
<p>Sed 代表<ruby> 流编辑器 <rt>  Stream Editor </rt></ruby>，常用于 Linux 中基本的文本处理。<code>sed</code> 命令是 Linux 中的重要命令之一，在文件处理方面有着重要作用。可用于删除或移动与给定模式匹配的特定行。</p>
<p>它还可以删除文件中的特定行，它能够从文件中删除表达式，文件可以通过指定分隔符（例如逗号、制表符或空格）进行标识。</p>
<p>本文列出了 15 个使用范例，它们可以帮助你掌握 <code>sed</code> 命令。</p>
<p>如果你能理解并且记住这些命令，在你需要使用 <code>sed</code> 时，这些命令就能派上用场，帮你节约很多时间。</p>
<p>注意：为了方便演示，我在执行 <code>sed</code> 命令时，不使用 <code>-i</code> 选项（因为这个选项会直接修改文件内容），被移除了行的文件内容将打印到 Linux 终端。</p>
<p>但是，如果你想在实际环境中从源文件中删除行，请在 <code>sed</code> 命令中使用 <code>-i</code> 选项。</p>
<p>演示之前，我创建了 <code>sed-demo.txt</code> 文件，并添加了以下内容和相应行号以便更好地理解。</p>
<div class="highlight"><pre><span></span><code># cat sed-demo.txt

1 Linux Operating System
2 Unix Operating System
3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>1) 如何删除文件的第一行？</h3>
<p>使用以下语法删除文件首行。</p>
<p><code>N</code> 表示文件中的第 N 行，<code>d</code> 选项在 <code>sed</code> 命令中用于删除一行。</p>
<p>语法：</p>
<div class="highlight"><pre><span></span><code>sed &#39;Nd&#39; file
</code></pre></div>

<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中的第一行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;1d&#39; sed-demo.txt

2 Unix Operating System
3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>2) 如何删除文件的最后一行？</h3>
<p>使用以下语法删除文件最后一行。</p>
<p><code>$</code> 符号表示文件的最后一行。</p>
<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中的最后一行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;$d&#39; sed-demo.txt

1 Linux Operating System
2 Unix Operating System
3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
</code></pre></div>

<h3>3) 如何删除指定行？</h3>
<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中的第 3 行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;3d&#39; sed-demo.txt

1 Linux Operating System
2 Unix Operating System
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>4) 如何删除指定范围内的行？</h3>
<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中的第 5 到 7 行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;5,7d&#39; sed-demo.txt

1 Linux Operating System
2 Unix Operating System
3 RHEL
4 Red Hat
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>5) 如何删除多行内容？</h3>
<p><code>sed</code> 命令能够删除给定行的集合。</p>
<p>本例中，下面的 <code>sed</code> 命令删除了第 1 行、第 5 行、第 9 行和最后一行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;1d;5d;9d;$d&#39; sed-demo.txt

2 Unix Operating System
3 RHEL
4 Red Hat
6 Arch Linux
7 CentOS
8 Debian
</code></pre></div>

<h3>5a) 如何删除指定范围以外的行？</h3>
<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中第 3 到 6 行范围以外的所有行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;3,6!d&#39; sed-demo.txt

3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
</code></pre></div>

<h3>6) 如何删除空行？</h3>
<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中的空行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/^$/d&#39; sed-demo.txt

1 Linux Operating System
2 Unix Operating System
3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>7) 如何删除包含某个模式的行？</h3>
<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中匹配到 <code>System</code> 模式的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/System/d&#39; sed-demo.txt

3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>8) 如何删除包含字符串集合中某个字符串的行？</h3>
<p>使用以下 <code>sed</code> 命令删除 <code>sed-demo.txt</code> 中匹配到 <code>System</code> 或 <code>Linux</code> 表达式的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/System\|Linux/d&#39; sed-demo.txt

3 RHEL
4 Red Hat
5 Fedora
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>9) 如何删除以指定字符开头的行？</h3>
<p>为了测试，我创建了 <code>sed-demo-1.txt</code> 文件，并添加了以下内容。</p>
<div class="highlight"><pre><span></span><code># cat sed-demo-1.txt

Linux Operating System
Unix Operating System
RHEL
Red Hat
Fedora
debian
ubuntu
Arch Linux - 1
2 - Manjaro
3 4 5 6
</code></pre></div>

<p>使用以下 <code>sed</code> 命令删除以 <code>R</code> 字符开头的所有行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/^R/d&#39; sed-demo-1.txt

Linux Operating System
Unix Operating System
Fedora
debian
ubuntu
Arch Linux - 1
2 - Manjaro
3 4 5 6
</code></pre></div>

<p>使用以下 <code>sed</code> 命令删除 <code>R</code> 或者 <code>F</code> 字符开头的所有行。</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">sed</span><span class="w"> </span><span class="s1">&#39;/^[RF]/d&#39;</span><span class="w"> </span><span class="n">sed</span><span class="o">-</span><span class="n">demo</span><span class="o">-</span><span class="mf">1.</span><span class="n">txt</span>

<span class="n">Linux</span><span class="w"> </span><span class="n">Operating</span><span class="w"> </span><span class="k">System</span>
<span class="n">Unix</span><span class="w"> </span><span class="n">Operating</span><span class="w"> </span><span class="k">System</span>
<span class="n">debian</span>
<span class="n">ubuntu</span>
<span class="n">Arch</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span>
<span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Manjaro</span>
<span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span>
</code></pre></div>

<h3>10) 如何删除以指定字符结尾的行？</h3>
<p>使用以下 <code>sed</code> 命令删除 <code>m</code> 字符结尾的所有行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/m$/d&#39; sed-demo.txt

3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<p>使用以下 <code>sed</code> 命令删除 <code>x</code> 或者 <code>m</code> 字符结尾的所有行。</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">sed</span><span class="w"> </span><span class="s1">&#39;/[xm]$/d&#39;</span><span class="w"> </span><span class="n">sed</span><span class="o">-</span><span class="n">demo</span><span class="p">.</span><span class="n">txt</span>

<span class="mi">3</span><span class="w"> </span><span class="n">RHEL</span>
<span class="mi">4</span><span class="w"> </span><span class="n">Red</span><span class="w"> </span><span class="n">Hat</span>
<span class="mi">5</span><span class="w"> </span><span class="n">Fedora</span>
<span class="mi">7</span><span class="w"> </span><span class="n">CentOS</span>
<span class="mi">8</span><span class="w"> </span><span class="n">Debian</span>
<span class="mi">9</span><span class="w"> </span><span class="n">Ubuntu</span>
<span class="mi">10</span><span class="w"> </span><span class="n">openSUSE</span>
</code></pre></div>

<h3>11) 如何删除所有大写字母开头的行？</h3>
<p>使用以下 <code>sed</code> 命令删除所有大写字母开头的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/^[A-Z]/d&#39; sed-demo-1.txt

debian
ubuntu
2 - Manjaro
3 4 5 6
</code></pre></div>

<h3>12) 如何删除指定范围内匹配模式的行？</h3>
<p>使用以下 <code>sed</code> 命令删除第 1 到 6 行中包含 <code>Linux</code> 表达式的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;1,6{/Linux/d;}&#39; sed-demo.txt

2 Unix Operating System
3 RHEL
4 Red Hat
5 Fedora
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>13) 如何删除匹配模式的行及其下一行？</h3>
<p>使用以下 <code>sed</code> 命令删除包含 <code>System</code> 表达式的行以及它的下一行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/System/{N;d;}&#39; sed-demo.txt

3 RHEL
4 Red Hat
5 Fedora
6 Arch Linux
7 CentOS
8 Debian
9 Ubuntu
10 openSUSE
</code></pre></div>

<h3>14) 如何删除包含数字的行？</h3>
<p>使用以下 <code>sed</code> 命令删除所有包含数字的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/[0-9]/d&#39; sed-demo-1.txt

Linux Operating System
Unix Operating System
RHEL
Red Hat
Fedora
debian
ubuntu
</code></pre></div>

<p>使用以下 <code>sed</code> 命令删除所有以数字开头的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/^[0-9]/d&#39; sed-demo-1.txt

Linux Operating System
Unix Operating System
RHEL
Red Hat
Fedora
debian
ubuntu
Arch Linux - 1
</code></pre></div>

<p>使用以下 <code>sed</code> 命令删除所有以数字结尾的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/[0-9]$/d&#39; sed-demo-1.txt

Linux Operating System
Unix Operating System
RHEL
Red Hat
Fedora
debian
ubuntu
2 - Manjaro
</code></pre></div>

<h3>15) 如何删除包含字母的行？</h3>
<p>使用以下 <code>sed</code> 命令删除所有包含字母的行。</p>
<div class="highlight"><pre><span></span><code># sed &#39;/[A-Za-z]/d&#39; sed-demo-1.txt

3 4 5 6
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>