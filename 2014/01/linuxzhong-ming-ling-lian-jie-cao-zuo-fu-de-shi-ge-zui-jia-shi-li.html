<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Linux中命令链接操作符的十个最佳实例</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: '' Linux命令中的链接的意思是，通过操作符的行为将几个命令组合执行。Linux中的链接命令，有些像你在shell中写短小的shell脚本，并直接在终端中执行。链接使得自动处理变得更 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2014/01/linuxzhong-ming-ling-lian-jie-cao-zuo-fu-de-shi-ge-zui-jia-shi-li.html" rel="bookmark"
           title="Permalink to Linux中命令链接操作符的十个最佳实例">Linux中命令链接操作符的十个最佳实例</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-01-13T09:39:00+01:00">
                Published: Mon 13 January 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: ''</p>
<p>Linux命令中的链接的意思是，通过操作符的行为将几个命令组合执行。Linux中的链接命令，有些像你在shell中写<a href="http://www.tecmint.com/category/bash-shell/">短小的shell脚本</a>，并直接在终端中执行。链接使得自动处理变得更方便。不仅如此，一个无人看管的机器在链接操作符的帮助下能够十分有条理地运行。</p>
<p><img alt="" src="/data/attachment/album/201401/11/213307jav4rv119l3kjhb9.png"></p>
<p><em>Linux中的10个链接操作符</em></p>
<p>本文旨在介绍一些常用的<strong>链接操作符</strong>，通过简短的描述和相关的例子帮助读者提高生产力、降低系统负载、写出更加简短有意义的代码。</p>
<h3>1. 和号操作符 (&amp;)</h3>
<p>‘<strong>&amp;</strong>’的作用是使命令在后台运行。只要在命令后面跟上一个空格和 ‘<strong>&amp;</strong>’。你可以一口气在后台运行多个命令。</p>
<p>在后台运行一个命令:</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span><span class="err">­</span><span class="n">c5</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">tecmint</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">&amp;</span>
</code></pre></div>

<p>同时在后台运行两个命令：</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecmint</span><span class="err">#</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="k">get</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">mkdit</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&amp;</span>
</code></pre></div>

<h3>2. 分号操作符 (;)</h3>
<p>分号操作符使你可以一口气运行几个命令，命令顺序执行。</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecmint</span><span class="err">#</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="k">get</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="k">get</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">test</span>
</code></pre></div>

<p>上述命令先后执行了update和upgrade，最后在当前工作目录下创建了一个‘<strong>test</strong>’文件夹</p>
<h3>3. 与操作符 (&amp;&amp;)</h3>
<p>如果第一个命令执行成功，<strong>与操作符 (&amp;&amp;)</strong>才会执行第二个命令，也就是说，第一个命令退出状态是<strong>0</strong>。（译注：原文的这里明显写错了，我们进行了改译，有兴趣的读者可以参看原文以及原文下面的评论。在UNIX里面，0表示无错误，而所有非0返回值都是各种错误）。这个命令在检查最后一个命令的执行状态时很有用。</p>
<p>比如，我想使用<strong><a href="http://www.tecmint.com/command-line-web-browsers/">links 命令</a></strong>在终端中访问网站<strong>tecmint.com</strong>，但在这之前我需要检查主机是否<strong>在线</strong>或<strong>不在线</strong>。</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecmint</span><span class="err">#</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span><span class="o">-</span><span class="n">c3</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">tecmint</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">tecmint</span><span class="p">.</span><span class="n">com</span>
</code></pre></div>

<h3>4. 或操作符 (||)</h3>
<p><strong>或操作符 (||)</strong>很像编程中的<strong>else</strong>语句。上面的操作符允许你在第一个命令失败的情况下执行第二个命令，比如，第一个命令的退出状态是<strong>1</strong>。</p>
<p>举例来说，我想要在非root帐户中执行‘<strong>apt-get update</strong>‘，如果第一个命令失败了，接着会执行第二个命令‘<strong>links <a href="http://www.tecmint.com">www.tecmint.com</a></strong>‘。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="k">get</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="n">tecmint</span><span class="p">.</span><span class="n">com</span>
</code></pre></div>

<p>上面的命令中，由于该<strong>用户</strong>不允许<strong>更新</strong>系统，这意味着第一个命令的退出状态是’<strong>1</strong>′,因此最后一个命令‘<strong>links tecmint.com</strong>‘会执行。</p>
<p>如果第一个命令成功执行并且退出状态是‘<strong>0</strong>‘呢？很明显的，第二个命令不会执行。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">links</span><span class="w"> </span><span class="n">tecmint</span><span class="p">.</span><span class="n">com</span>
</code></pre></div>

<p>这里，用户在家目录创建了一个‘<strong>test</strong>‘文件夹，这是被允许的。命令成功的执行，退出状态是‘<strong>0</strong>‘,因此，最后的命令不会执行。</p>
<h3>5. 非操作符 (!)</h3>
<p><strong>非操作符 (!)</strong>很像<strong>except</strong>语句。这个命令会执行除了提供的条件外的所有的语句。要理解这点，在你的主目录创建一个目录‘<strong>tecmint</strong>’，并‘<strong>cd</strong>’到它这里。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">tecmint</span><span class="w"> </span>
<span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="n">tecmint</span>
</code></pre></div>

<p>接下来，在文件夹‘<strong>tecmint</strong>’下创建不同类型的文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~/</span><span class="n">tecmint</span><span class="err">$</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">doc</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">doc</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="nc">xml</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nc">xml</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">html</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">html</span>
</code></pre></div>

<p>看一下我们在文件夹‘<strong>tecmint</strong>’创建的新文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~/</span><span class="n">tecmint</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span>

<span class="n">a</span><span class="p">.</span><span class="n">doc</span><span class="w">  </span><span class="n">a</span><span class="p">.</span><span class="n">html</span><span class="w">  </span><span class="n">a</span><span class="p">.</span><span class="n">pdf</span><span class="w">  </span><span class="n">a</span><span class="p">.</span><span class="nc">xml</span><span class="w">  </span><span class="n">b</span><span class="p">.</span><span class="n">doc</span><span class="w">  </span><span class="n">b</span><span class="p">.</span><span class="n">html</span><span class="w">  </span><span class="n">b</span><span class="p">.</span><span class="n">pdf</span><span class="w">  </span><span class="n">b</span><span class="p">.</span><span class="nc">xml</span>
</code></pre></div>

<p>用一种聪明的办法马上删除除了 ‘<strong>html</strong>’之外的所有文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~/</span><span class="n">tecmint</span><span class="err">$</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="err">!</span><span class="p">(</span><span class="o">*</span><span class="p">.</span><span class="n">html</span><span class="p">)</span>
</code></pre></div>

<p>验证一下上次的执行结果，使用<a href="http://www.tecmint.com/15-basic-ls-command-examples-in-linux/">ls 命令</a>列出可见所有文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~/</span><span class="n">tecmint</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span>

<span class="n">a</span><span class="p">.</span><span class="n">html</span><span class="w">  </span><span class="n">b</span><span class="p">.</span><span class="n">html</span>
</code></pre></div>

<h3>6. 与或操作符 (&amp;&amp; – ||)</h3>
<p>上面的操作符实际上是‘<strong>与</strong>’和‘<strong>或</strong>’操作符的组合。它很像‘<strong>if-else</strong>‘语句。</p>
<p>比如，我们ping <strong>tecmint.com</strong>，如果成功打印‘<strong>已验证</strong>’，否则打印‘<strong>主机故障</strong>’。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~/</span><span class="n">tecmint</span><span class="err">$</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span><span class="o">-</span><span class="n">c3</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">tecmint</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">&quot;Verified&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">&quot;Host Down&quot;</span>
</code></pre></div>

<h4>示例输出</h4>
<div class="highlight"><pre><span></span><code>PING www.tecmint.com (212.71.234.61) 56(84) bytes of data. 
64 bytes from www.tecmint.com (212.71.234.61): icmp_req=1 ttl=55 time=216 ms 
64 bytes from www.tecmint.com (212.71.234.61): icmp_req=2 ttl=55 time=224 ms 
64 bytes from www.tecmint.com (212.71.234.61): icmp_req=3 ttl=55 time=226 ms 

--- www.tecmint.com ping statistics --- 
3 packets transmitted, 3 received, 0% packet loss, time 2001ms 
rtt min/avg/max/mdev = 216.960/222.789/226.423/4.199 ms 
Verified
</code></pre></div>

<p>现在，断开我们现在的网络连接诶，再试一下相同的命令。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~/</span><span class="n">tecmint</span><span class="err">$</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span><span class="o">-</span><span class="n">c3</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">tecmint</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">&quot;verified&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">&quot;Host Down&quot;</span>
</code></pre></div>

<h4>实例输出</h4>
<div class="highlight"><pre><span></span><code><span class="n">ping</span><span class="o">:</span><span class="w"> </span><span class="n">unknown</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">www</span><span class="o">.</span><span class="na">tecmint</span><span class="o">.</span><span class="na">com</span><span class="w"> </span>
<span class="n">Host</span><span class="w"> </span><span class="n">Down</span>
</code></pre></div>

<h3>7. 管道操作符 (|)</h3>
<p><strong>PIPE</strong>在将第一个命令的输出作为第二个命令的输入时很有用。比如，‘<strong>ls -l</strong>’的输出通过管道到‘<strong>less</strong>’，并看一下输出。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="nv">@localhost</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">less</span>
</code></pre></div>

<h3>8. 命令合并操作符 {}</h3>
<p>合并两个或多个命令，第二个命令依赖于第一个命令的执行。</p>
<p>比如，检查一下文件‘<strong>xyz.txt</strong>’是否在<strong>Downloads</strong>目录下，如果不存在则创建之并输出提示信息。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="err">@</span><span class="n">localhost</span><span class="p">:</span><span class="o">~$</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecmint</span><span class="o">/</span><span class="n">Downloads</span><span class="o">/</span><span class="n">xyz</span><span class="o">.</span><span class="n">txt</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecmint</span><span class="o">/</span><span class="n">Downloads</span><span class="o">/</span><span class="n">xyz</span><span class="o">.</span><span class="n">txt</span><span class="p">;</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;The file does not exist&quot;</span>
</code></pre></div>

<p>但是这样的命令的运行结果并不如我们预期的运行，会始终都输出提示信息。因此需要使用{}操作符来合并命令：</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="err">@</span><span class="n">localhost</span><span class="p">:</span><span class="o">~$</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecmint</span><span class="o">/</span><span class="n">Downloads</span><span class="o">/</span><span class="n">xyz1</span><span class="o">.</span><span class="n">txt</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="n">touch</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tecmint</span><span class="o">/</span><span class="n">Downloads</span><span class="o">/</span><span class="n">xyz</span><span class="o">.</span><span class="n">txt</span><span class="p">;</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;The file does not exist&quot;</span><span class="p">}</span>

<span class="err">“</span><span class="n">The</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">exist</span><span class="err">”</span>
</code></pre></div>

<p>（译注：原文这里应该也是复制或书写的时候，出现了一些问题，例子中并没有出现小标题中的"{}"操作符，所以这里我们进行了修改）</p>
<h3>9. 优先操作符 ()</h3>
<p>这个操作符可以让命令以优先顺序执行。</p>
<div class="highlight"><pre><span></span><code>Command_x1 &amp;&amp;Command_x2 || Command_x3 &amp;&amp; Command_x4.
</code></pre></div>

<p>在上面的伪代码中，如果<strong>Command_x1</strong>执行失败了会怎么样，<strong>Command_x2</strong>, <strong>Command_x3</strong>, <strong>Command_x4</strong>没有一个会执行，对于这种情况，我们使用<strong>优先操作符</strong>。</p>
<div class="highlight"><pre><span></span><code>(Command_x1 &amp;&amp;Command_x2) || (Command_x3 &amp;&amp; Command_x4)
</code></pre></div>

<p>在上面的伪代码中，如果<strong>Command_x1</strong>执行失败，<strong>Command_x2</strong>不会执行，但是<strong>Command_x3</strong>会继续执行， <strong>Command_x4</strong>会依赖于 <strong>Command_x3</strong>的退出状态。</p>
<h3>10. 连接符 ()</h3>
<p><strong>连接符 ()</strong>如它名字所说，被用于连接shell中那些太长而需要分成多行的命令。可以在输入一个“\”之后就回车，然后继续输入命令行，直到输入完成。比如，下面的命令会打开文本文件<strong>test(1).txt</strong>。</p>
<div class="highlight"><pre><span></span><code><span class="n">tecmint</span><span class="err">@</span><span class="n">localhost</span><span class="p">:</span><span class="o">~/</span><span class="n">Downloads</span><span class="o">$</span><span class="w"> </span><span class="n">nano</span><span class="w"> </span><span class="n">test</span>\
<span class="mf">1.</span><span class="n">txt</span>
</code></pre></div>

<p>今天就到这里，我会近日开始另外一个有趣的文章。不要走开，继续关注<strong>我们</strong>。不要忘记在评论栏里提出有价值的反馈。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>