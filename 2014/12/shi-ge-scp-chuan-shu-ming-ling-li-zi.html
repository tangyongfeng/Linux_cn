<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>十个 SCP 传输命令例子</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Pungki Arianto Linux系统管理员应该很熟悉CLI环境，因为通常在Linux服务器中是不安装GUI的。SSH可能是Linux系统管理员通过远程方式安全管理服务器的最流行协议。在SSH命令中内置了一种叫SCP的命令，用来在服务器之间安全传输文件。 以 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2014/12/shi-ge-scp-chuan-shu-ming-ling-li-zi.html" rel="bookmark"
           title="Permalink to 十个 SCP 传输命令例子">十个 SCP 传输命令例子</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-12-25T14:33:03+01:00">
                Published: Thu 25 December 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Pungki Arianto</p>
<p>Linux系统管理员应该很熟悉<strong>CLI</strong>环境，因为通常在Linux服务器中是不安装<strong>GUI</strong>的。<strong>SSH</strong>可能是Linux系统管理员通过远程方式安全管理服务器的最流行协议。在<strong>SSH</strong>命令中内置了一种叫<strong>SCP</strong>的命令，用来在服务器之间安全传输文件。</p>
<p><img alt="" src="/data/attachment/album/201412/25/143307lejo9fkp7vop6zjk.png"></p>
<p>以下命令可以解读为：用“<strong>username account</strong>”“<strong>拷贝 source file name</strong>”到“<strong>destination host</strong>”上的“<strong>destination folder</strong>”里。</p>
<h4>SCP命令的基本语法</h4>
<div class="highlight"><pre><span></span><code><span class="n">scp</span><span class="w"> </span><span class="n">source_file_name</span><span class="w"> </span><span class="n">username</span><span class="nv">@destination_host</span><span class="err">:</span><span class="n">destination_folder</span>
</code></pre></div>

<p><strong>SCP</strong>命令有很多可以使用的参数，这里指的是每次都会用到的参数。</p>
<h3>用-v参数来提供SCP进程的详细信息</h3>
<p>不带参数的基本<strong>SCP</strong>命令会在后台拷贝文件，除非操作完成或者有错误出现，否则用户在界面上是看不到任何提示信息的。你可以用“<strong>-v</strong>”参数来在屏幕上打印出调试信息，这能帮助你调试连接、认证和配置的一些问题。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>
</code></pre></div>

<h4>部分输出</h4>
<div class="highlight"><pre><span></span><code><span class="nl">Executing</span><span class="p">:</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">mrarianto</span><span class="p">,</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="p">.</span>
<span class="n">OpenSSH_6</span><span class="mf">.0</span><span class="n">p1</span><span class="w"> </span><span class="n">Debian</span><span class="mi">-3</span><span class="p">,</span><span class="w"> </span><span class="n">OpenSSL</span><span class="w"> </span><span class="mf">1.0.1</span><span class="n">c</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">2012</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Reading</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">ssh_config</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">ssh_config</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">19</span><span class="o">:</span><span class="w"> </span><span class="n">Applying</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">*</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Connecting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="p">[</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="mf">22.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="n">established</span><span class="p">.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Host</span><span class="w"> </span><span class="err">&#39;</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">known</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">RSA</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">key</span><span class="p">.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">known_hosts</span><span class="o">:</span><span class="mi">1</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">ssh_rsa_verify</span><span class="o">:</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="n">correct</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Next</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">method</span><span class="o">:</span><span class="w"> </span><span class="n">password</span>
<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Authentication</span><span class="w"> </span><span class="n">succeeded</span><span class="w"> </span><span class="p">(</span><span class="n">password</span><span class="p">).</span>
<span class="n">Authenticated</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="p">([</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">]</span><span class="o">:</span><span class="mi">22</span><span class="p">).</span>
<span class="n">Sending</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">modes</span><span class="o">:</span><span class="w"> </span><span class="n">C0770</span><span class="w"> </span><span class="mi">3760348</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span>
<span class="nl">Sink</span><span class="p">:</span><span class="w"> </span><span class="n">C0770</span><span class="w"> </span><span class="mi">3760348</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span>
<span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">3672</span><span class="n">KB</span><span class="w"> </span><span class="mf">136.0</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">00</span><span class="o">:</span><span class="mi">27</span>
<span class="nl">Transferred</span><span class="p">:</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="mi">3766304</span><span class="p">,</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="mi">3000</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">65.2</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">Bytes</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="o">:</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="mf">57766.4</span><span class="p">,</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="mf">46.0</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>

<h3>从源文件获取修改时间、访问时间和模式</h3>
<p>“<strong>-p</strong>”参数会帮到把预计的时间和连接速度会显示在屏幕上。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>
</code></pre></div>

<h4>部分输出</h4>
<div class="highlight"><pre><span></span><code><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">3672</span><span class="n">KB</span><span class="w"> </span><span class="mf">126.6</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">00</span><span class="o">:</span><span class="mi">29</span>
</code></pre></div>

<h3>用-C参数来让文件传输更快</h3>
<p>有一个参数能让传输文件更快，就是“<strong>-C</strong>”参数，它的作用是不停压缩所传输的文件。它特别之处在于压缩是在网络传输中进行，当文件传到目标服务器时，它会变回压缩之前的原始大小。</p>
<p>来看看这些命令，我们使用一个<strong>93 Mb</strong>的单一文件来做例子。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">pv</span><span class="w"> </span><span class="n">messages</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>
</code></pre></div>

<h4>部分输出</h4>
<div class="highlight"><pre><span></span><code><span class="nl">Executing</span><span class="p">:</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">mrarianto</span><span class="p">,</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="p">.</span>
<span class="n">OpenSSH_6</span><span class="mf">.0</span><span class="n">p1</span><span class="w"> </span><span class="n">Debian</span><span class="mi">-3</span><span class="p">,</span><span class="w"> </span><span class="n">OpenSSL</span><span class="w"> </span><span class="mf">1.0.1</span><span class="n">c</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">2012</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Reading</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">ssh_config</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">ssh_config</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">19</span><span class="o">:</span><span class="w"> </span><span class="n">Applying</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">*</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Connecting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="p">[</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="mf">22.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="n">established</span><span class="p">.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">identity</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="mi">-1</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">known_hosts</span><span class="o">:</span><span class="mi">1</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">ssh_rsa_verify</span><span class="o">:</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="n">correct</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Trying</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">key</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Next</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">method</span><span class="o">:</span><span class="w"> </span><span class="n">password</span>
<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Authentication</span><span class="w"> </span><span class="n">succeeded</span><span class="w"> </span><span class="p">(</span><span class="n">password</span><span class="p">).</span>
<span class="n">Authenticated</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="p">([</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">]</span><span class="o">:</span><span class="mi">22</span><span class="p">).</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Sending</span><span class="w"> </span><span class="n">command</span><span class="o">:</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">mtime</span><span class="w"> </span><span class="mi">1323853868</span><span class="w"> </span><span class="n">atime</span><span class="w"> </span><span class="mi">1380425711</span>
<span class="n">Sending</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">timestamps</span><span class="o">:</span><span class="w"> </span><span class="n">T1323853868</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1380425711</span><span class="w"> </span><span class="mi">0</span>
<span class="n">messages</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">93</span><span class="n">MB</span><span class="w"> </span><span class="mf">58.6</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mi">27</span><span class="o">:</span><span class="mo">05</span>
<span class="nl">Transferred</span><span class="p">:</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="mi">97614832</span><span class="p">,</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="mi">25976</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">1661.3</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">Bytes</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="o">:</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="mf">58758.4</span><span class="p">,</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="mf">15.6</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>

<p>不用“<strong>-C</strong>”参数来拷贝文件，结果用了<strong>1661.3</strong>秒，你可以比较下用了“<strong>-C</strong>”参数之后的结果。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">Cpv</span><span class="w"> </span><span class="n">messages</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>
</code></pre></div>

<h4>部分输出</h4>
<div class="highlight"><pre><span></span><code><span class="nl">Executing</span><span class="p">:</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">mrarianto</span><span class="p">,</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="p">.</span>
<span class="n">OpenSSH_6</span><span class="mf">.0</span><span class="n">p1</span><span class="w"> </span><span class="n">Debian</span><span class="mi">-3</span><span class="p">,</span><span class="w"> </span><span class="n">OpenSSL</span><span class="w"> </span><span class="mf">1.0.1</span><span class="n">c</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">May</span><span class="w"> </span><span class="mi">2012</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Reading</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">ssh_config</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">ssh_config</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">19</span><span class="o">:</span><span class="w"> </span><span class="n">Applying</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">*</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Connecting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="p">[</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="mf">22.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="n">established</span><span class="p">.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">identity</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="mi">-1</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Host</span><span class="w"> </span><span class="err">&#39;</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">known</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">RSA</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="n">key</span><span class="p">.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Found</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">known_hosts</span><span class="o">:</span><span class="mi">1</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">ssh_rsa_verify</span><span class="o">:</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="n">correct</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Next</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">method</span><span class="o">:</span><span class="w"> </span><span class="n">publickey</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Trying</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">key</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Next</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">method</span><span class="o">:</span><span class="w"> </span><span class="n">password</span>
<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Enabling</span><span class="w"> </span><span class="n">compression</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="mf">6.</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Authentication</span><span class="w"> </span><span class="n">succeeded</span><span class="w"> </span><span class="p">(</span><span class="n">password</span><span class="p">).</span>
<span class="n">Authenticated</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="p">([</span><span class="mf">202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">]</span><span class="o">:</span><span class="mi">22</span><span class="p">).</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">channel</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="p">[</span><span class="n">client</span><span class="o">-</span><span class="n">session</span><span class="p">]</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Sending</span><span class="w"> </span><span class="n">command</span><span class="o">:</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">mtime</span><span class="w"> </span><span class="mi">1323853868</span><span class="w"> </span><span class="n">atime</span><span class="w"> </span><span class="mi">1380428748</span>
<span class="n">Sending</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">timestamps</span><span class="o">:</span><span class="w"> </span><span class="n">T1323853868</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1380428748</span><span class="w"> </span><span class="mi">0</span>
<span class="nl">Sink</span><span class="p">:</span><span class="w"> </span><span class="n">T1323853868</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1380428748</span><span class="w"> </span><span class="mi">0</span>
<span class="n">Sending</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">modes</span><span class="o">:</span><span class="w"> </span><span class="n">C0600</span><span class="w"> </span><span class="mi">97517300</span><span class="w"> </span><span class="n">messages</span><span class="p">.</span><span class="n">log</span>
<span class="n">messages</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">93</span><span class="n">MB</span><span class="w"> </span><span class="mf">602.7</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">02</span><span class="o">:</span><span class="mi">38</span>
<span class="nl">Transferred</span><span class="p">:</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="mi">8905840</span><span class="p">,</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="mi">15768</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">162.5</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">Bytes</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="o">:</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="mf">54813.9</span><span class="p">,</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="mf">97.0</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">Exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="mi">0</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">compress</span><span class="w"> </span><span class="n">outgoing</span><span class="o">:</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="mi">97571111</span><span class="p">,</span><span class="w"> </span><span class="n">compressed</span><span class="w"> </span><span class="mi">8806191</span><span class="p">,</span><span class="w"> </span><span class="n">factor</span><span class="w"> </span><span class="mf">0.09</span>
<span class="nl">debug1</span><span class="p">:</span><span class="w"> </span><span class="n">compress</span><span class="w"> </span><span class="n">incoming</span><span class="o">:</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="mi">7885</span><span class="p">,</span><span class="w"> </span><span class="n">compressed</span><span class="w"> </span><span class="mi">3821</span><span class="p">,</span><span class="w"> </span><span class="n">factor</span><span class="w"> </span><span class="mf">0.48</span>
</code></pre></div>

<p>看到了吧，压缩了文件之后，传输过程在<strong>162.5</strong>秒内就完成了，速度是不用“<strong>-C</strong>”参数的10倍。如果你要通过网络拷贝很多份文件，那么“<strong>-C</strong>”参数能帮你节省掉很多时间。</p>
<p>有一点我们需要注意，这个压缩的方法不是适用于所有文件。当源文件已经被压缩过了，那就没办法再压缩很多了。诸如那些像<strong>.zip</strong>，<strong>.rar</strong>，<strong>pictures</strong>和<strong>.iso</strong>的文件，用“<strong>-C</strong>”参数就没什么意义。</p>
<h3>选择其它加密算法来加密文件</h3>
<p><strong>SCP</strong>默认是用“<strong>AES-128</strong>”加密算法来加密传输的。如果你想要改用其它加密算法来加密传输，你可以用“<strong>-c</strong>”参数。我们来瞧瞧。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="mi">3</span><span class="n">des</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>

<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">3672</span><span class="n">KB</span><span class="w"> </span><span class="mf">282.5</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">00</span><span class="o">:</span><span class="mi">13</span>
</code></pre></div>

<p>上述命令是告诉<strong>SCP</strong>用<strong>3des algorithm</strong>来加密文件。要注意这个参数是“<strong>-c</strong>”（小写）而不是“<strong>-C</strong>“（大写）。</p>
<h3>限制带宽使用</h3>
<p>还有一个很有用的参数是“<strong>-l</strong>”参数，它能限制使用带宽。如果你为了拷贝很多文件而去执行了一份自动化脚本又不希望带宽被<strong>SCP</strong>进程耗尽，那这个参数会非常管用。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>

<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">3672</span><span class="n">KB</span><span class="w"> </span><span class="mf">50.3</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">01</span><span class="o">:</span><span class="mi">13</span>
</code></pre></div>

<p>在“<strong>-l</strong>”参数后面的这个<strong>400</strong>值意思是我们给<strong>SCP</strong>进程限制了带宽为<strong>50 KB/秒</strong>。有一点要记住，带宽是以<strong>千比特/秒</strong> (<strong>kbps</strong>)表示的，而<strong>8 比特</strong>等于<strong>1 字节</strong>。</p>
<p>因为<strong>SCP</strong>是用<strong>千字节/秒</strong> (<strong>KB/s</strong>)计算的，所以如果你想要限制<strong>SCP</strong>的最大带宽只有<strong>50 KB/s</strong>，你就需要设置成<strong>50 x 8 = 400</strong>。</p>
<h3>指定端口</h3>
<p>通常<strong>SCP</strong>是把<strong>22</strong>作为默认端口。但是为了安全起见SSH 监听端口改成其它端口。比如说，我们想用<strong>2249</strong>端口，这种情况下就要指定端口。命令如下所示。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">P</span><span class="w"> </span><span class="mi">2249</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>

<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">3672</span><span class="n">KB</span><span class="w"> </span><span class="mf">262.3</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">00</span><span class="o">:</span><span class="mi">14</span>
</code></pre></div>

<p>确认一下写的是大写字母“<strong>P</strong>”而不是“<strong>p</strong>“，因为“<strong>p</strong>”已经被用来保留源文件的修改时间和模式（LCTT 译注：和 ssh 命令不同了）。</p>
<h3>递归拷贝文件和文件夹</h3>
<p>有时我们需要拷贝文件夹及其内部的所有<strong>文件</strong>/<strong>子文件夹</strong>，我们如果能用一条命令解决问题那就更好了。<strong>SCP</strong>用“<strong>-r</strong>”参数就能做到。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>

<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">3672</span><span class="n">KB</span><span class="w"> </span><span class="mf">282.5</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">00</span><span class="o">:</span><span class="mi">13</span>
<span class="n">scp</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="n">KB</span><span class="w"> </span><span class="mf">9.8</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
</code></pre></div>

<p>拷贝完成后，你会在目标服务器中找到一个名为“<strong>documents</strong>”的文件夹，其中就是所拷贝的所有文件。“<strong>documents</strong>”是系统自动创建的文件夹。</p>
<h3>禁用进度条和警告/诊断信息</h3>
<p>如果你不想从SCP中看到进度条和警告/诊断信息，你可以用“<strong>-q</strong>”参数来静默它们，举例如下。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">q</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>

<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span>
</code></pre></div>

<p>正如你所看到的，在你输入密码之后，没有任何关于SCP进度的消息反馈。进度完成后，你也看不到任何提示。</p>
<h3>用SCP通过代理来拷贝文件</h3>
<p>代理服务器经常用于办公环境，SCP自然是没有经过代理方面的配置的。当你的环境正在使用代理，那么你就必须要“告诉”SCP与代理关联起来。</p>
<p>场景如下：代理的地址是<strong>10.0.96.6</strong>，端口是8080。该代理还实现了用户认证功能。首先，你需要创建一个“<strong>~/.ssh/config</strong>”文件，其次把以下命令输入进该文件。</p>
<div class="highlight"><pre><span></span><code>ProxyCommand /usr/bin/corkscrew 10.0.96.6 8080 %h %p ~/.ssh/proxyauth
</code></pre></div>

<p>接着你需要创建一个同样包括以下命令的“<strong>~/.ssh/proxyauth</strong>”文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">myusername</span><span class="o">:</span><span class="n">mypassword</span>
</code></pre></div>

<p>然后你就可以像往常一样使用SCP了。</p>
<p>请注意corkscrew可能还没有安装在你的系统中。在我的Linux Mint中，我需要首先先用标准Linux Mint安装程序来安装它。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>corkscrew
</code></pre></div>

<p>对于其它的一些基于yum安装的系统，用户能用以下的命令来安装corkscrew。</p>
<div class="highlight"><pre><span></span><code># yum install corkscrew
</code></pre></div>

<p>还有一点就是因为“<strong>~/.ssh/proxyauth</strong>”文件中以明文的格式包含了你的“<strong>用户名</strong>”和“<strong>密码</strong>”，所以请确保该文件只能你来查看。</p>
<h3>选择不同的ssh_config文件</h3>
<p>对于经常在公司网络和公共网络之间切换的移动用户来说，一直改变SCP的设置显然是很痛苦的。如果我们能放一个保存不同配置的<strong>ssh_config</strong>文件来匹配我们的需求那就很好了。</p>
<h4>以下是一个简单的场景</h4>
<p>代理是被用来在公司网络但不是公共网络并且你会定期切换网络时候使用的。</p>
<div class="highlight"><pre><span></span><code><span class="n">pungki</span><span class="p">@</span><span class="n">mint</span><span class="w"> </span><span class="o">~/</span><span class="n">Documents</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">F</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pungki</span><span class="o">/</span><span class="n">proxy_ssh_config</span><span class="w"> </span><span class="n">Label</span><span class="p">.</span><span class="n">pdf</span>

<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="o">:</span><span class="p">.</span>
<span class="n">mrarianto</span><span class="mf">@202.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">password</span><span class="o">:</span>
<span class="n">Label</span><span class="p">.</span><span class="n">pdf</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="mi">3672</span><span class="n">KB</span><span class="w"> </span><span class="mf">282.5</span><span class="n">KB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mo">00</span><span class="o">:</span><span class="mi">13</span>
</code></pre></div>

<p>默认情况下每个用户会把“<strong>ssh_config</strong>”文件放在“<strong>~/.ssh/config</strong>“路径下。用兼容的代理创建一个特定的“<strong>ssh_config</strong>”文件，能让你切换网络时更加方便容易。</p>
<p>当你处于公司网络时，你可以用“<strong>-F</strong>”参数，当你处于公共网络时，你可以忽略掉“<strong>-F</strong>”参数。</p>
<p>以上就是关于<strong>SCP</strong>的全部内容了，你可以查看<strong>SCP</strong>的<strong>man页面</strong>来获取更多内容，请随意留下您的评论及建议。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>