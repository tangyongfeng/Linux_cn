<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>跨越终端中多个vim实例访问剪切板内容</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: '' Vim (Vi IMproved)是一款在程序员之间非常受欢迎的文本编辑器。它在执行不同的快捷命令操作上有它自己的特长。 比如，要拷贝 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li class="active"><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2014/03/kua-yue-zhong-duan-zhong-duo-ge-vimshi-li-fang-wen-jian-qie-ban-nei-rong.html" rel="bookmark"
           title="Permalink to 跨越终端中多个vim实例访问剪切板内容">跨越终端中多个vim实例访问剪切板内容</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-03-25T16:15:00+01:00">
                Published: Tue 25 March 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/zhuo-mian-ying-yong">桌面应用</a>.</p>

</footer><!-- /.post-info -->      <p>Author: ''</p>
<p><strong>Vim (Vi IMproved)</strong>是一款在程序员之间非常受欢迎的文本编辑器。它在执行不同的快捷命令操作上有它自己的特长。</p>
<p><img alt="从Vim访问剪切板" src="/data/attachment/album/201403/25/161531p3re526k6ljn7u2e.jpeg"></p>
<p>比如，要拷贝高亮的文本，我们使用‘<strong>y</strong>’命令，并用‘x’来剪切。但是，<strong>vim</strong>(不是<strong>gVim</strong>)剪切板的内容默认情况下是不能被其他的vim实例访问的。</p>
<p>Vim版本信息中使用‘<strong>+</strong>’表示启用了系统剪切板。你可以运行‘<strong>vim ­­–version</strong>’，如果你看不到像“<strong>+xterm_clipboard</strong>”而是显示“­<strong>xterm_clipboard</strong>“，那么会使用内部剪切板，其将不能被其它的<strong>vim</strong>实例访问。</p>
<h3>安装gvim和parcellite</h3>
<p>为了访问vim剪切板的内容，你需要安装<strong>gvim</strong>包。<strong>gVim</strong>是vim编辑器的GUI模式，它的剪切板选项默认启用。</p>
<div class="highlight"><pre><span></span><code># yum install -y gvim
</code></pre></div>

<p>然后，使用<a href="http://www.tecmint.com/install-and-enable-rpmforge-repository-in-rhel-centos-6-5-4/">RPMForge 仓库</a>安装<strong>parcellite</strong> 包。Parcellite是一款轻量级，小巧而免费的Linux剪切板管理工具。</p>
<div class="highlight"><pre><span></span><code># yum install -y parcellite
</code></pre></div>

<p>一旦安装后，运行下面的命令。这里的参数‘<strong>&amp;</strong>’是使parcellite以后台进程运行。</p>
<div class="highlight"><pre><span></span><code># parcellite &amp;
</code></pre></div>

<p>检查选项已经在gvim中启用。</p>
<div class="highlight"><pre><span></span><code># gvim --version
</code></pre></div>

<p>确保“<strong>+xterm_clipboard</strong>”选项显示在下面的输出中。</p>
<div class="highlight"><pre><span></span><code><span class="n">VIM</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Vi</span><span class="w"> </span><span class="n">IMproved</span><span class="w"> </span><span class="mf">7.2</span><span class="w"> </span><span class="p">(</span><span class="mi">2008</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="n">compiled</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="mi">2012</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">08</span><span class="p">)</span>
<span class="n">Included</span><span class="w"> </span><span class="n">patches</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="o">-</span><span class="mi">411</span>
<span class="n">Modified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">&lt;</span><span class="n">bugzilla</span><span class="err">@</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
<span class="n">Compiled</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">&lt;</span><span class="n">bugzilla</span><span class="err">@</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
<span class="n">Huge</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">GTK2</span><span class="w"> </span><span class="n">GUI</span><span class="o">.</span><span class="w">  </span><span class="n">Features</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="p">(</span><span class="o">+</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="p">):</span>
<span class="o">+</span><span class="n">arabic</span><span class="w"> </span><span class="o">+</span><span class="n">autocmd</span><span class="w"> </span><span class="o">+</span><span class="n">balloon_eval</span><span class="w"> </span><span class="o">+</span><span class="n">browse</span><span class="w"> </span><span class="o">++</span><span class="n">builtin_terms</span><span class="w"> </span><span class="o">+</span><span class="n">byte_offset</span><span class="w"> </span><span class="o">+</span><span class="n">cindent</span><span class="w"> </span>
<span class="o">+</span><span class="n">clientserver</span><span class="w"> </span><span class="o">+</span><span class="n">clipboard</span><span class="w"> </span><span class="o">+</span><span class="n">cmdline_compl</span><span class="w"> </span><span class="o">+</span><span class="n">cmdline_hist</span><span class="w"> </span><span class="o">+</span><span class="n">cmdline_info</span><span class="w"> </span><span class="o">+</span><span class="n">comments</span><span class="w"> </span>
<span class="o">+</span><span class="n">cryptv</span><span class="w"> </span><span class="o">+</span><span class="n">cscope</span><span class="w"> </span><span class="o">+</span><span class="n">cursorshape</span><span class="w"> </span><span class="o">+</span><span class="n">dialog_con_gui</span><span class="w"> </span><span class="o">+</span><span class="n">diff</span><span class="w"> </span><span class="o">+</span><span class="n">digraphs</span><span class="w"> </span><span class="o">+</span><span class="n">dnd</span><span class="w"> </span><span class="o">-</span><span class="n">ebcdic</span><span class="w"> </span>
<span class="o">+</span><span class="n">emacs_tags</span><span class="w"> </span><span class="o">+</span><span class="n">eval</span><span class="w"> </span><span class="o">+</span><span class="n">ex_extra</span><span class="w"> </span><span class="o">+</span><span class="n">extra_search</span><span class="w"> </span><span class="o">+</span><span class="n">farsi</span><span class="w"> </span><span class="o">+</span><span class="n">file_in_path</span><span class="w"> </span><span class="o">+</span><span class="n">find_in_path</span><span class="w"> </span>
<span class="o">+</span><span class="nb nb-Type">float</span><span class="w"> </span><span class="o">+</span><span class="n">folding</span><span class="w"> </span><span class="o">-</span><span class="n">footer</span><span class="w"> </span><span class="o">+</span><span class="n">fork</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="n">gettext</span><span class="w"> </span><span class="o">-</span><span class="n">hangul_input</span><span class="w"> </span><span class="o">+</span><span class="n">iconv</span><span class="w"> </span><span class="o">+</span><span class="n">insert_expand</span><span class="w"> </span>
<span class="o">+</span><span class="n">jumplist</span><span class="w"> </span><span class="o">+</span><span class="n">keymap</span><span class="w"> </span><span class="o">+</span><span class="n">langmap</span><span class="w"> </span><span class="o">+</span><span class="n">libcall</span><span class="w"> </span><span class="o">+</span><span class="n">linebreak</span><span class="w"> </span><span class="o">+</span><span class="n">lispindent</span><span class="w"> </span><span class="o">+</span><span class="n">listcmds</span><span class="w"> </span><span class="o">+</span><span class="n">localmap</span><span class="w"> </span>
<span class="o">+</span><span class="n">menu</span><span class="w"> </span><span class="o">+</span><span class="n">mksession</span><span class="w"> </span><span class="o">+</span><span class="n">modify_fname</span><span class="w"> </span><span class="o">+</span><span class="n">mouse</span><span class="w"> </span><span class="o">+</span><span class="n">mouseshape</span><span class="w"> </span><span class="o">+</span><span class="n">mouse_dec</span><span class="w"> </span><span class="o">+</span><span class="n">mouse_gpm</span><span class="w"> </span>
<span class="o">-</span><span class="n">mouse_jsbterm</span><span class="w"> </span><span class="o">+</span><span class="n">mouse_netterm</span><span class="w"> </span><span class="o">-</span><span class="n">mouse_sysmouse</span><span class="w"> </span><span class="o">+</span><span class="n">mouse_xterm</span><span class="w"> </span><span class="o">+</span><span class="n">multi_byte</span><span class="w"> </span>
<span class="o">+</span><span class="n">multi_lang</span><span class="w"> </span><span class="o">-</span><span class="n">mzscheme</span><span class="w"> </span><span class="o">+</span><span class="n">netbeans_intg</span><span class="w"> </span><span class="o">-</span><span class="n">osfiletype</span><span class="w"> </span><span class="o">+</span><span class="n">path_extra</span><span class="w"> </span><span class="o">+</span><span class="n">perl</span><span class="w"> </span><span class="o">+</span><span class="n">postscript</span><span class="w"> </span>
<span class="o">+</span><span class="n">printer</span><span class="w"> </span><span class="o">+</span><span class="n">profile</span><span class="w"> </span><span class="o">+</span><span class="n">python</span><span class="w"> </span><span class="o">+</span><span class="n">quickfix</span><span class="w"> </span><span class="o">+</span><span class="n">reltime</span><span class="w"> </span><span class="o">+</span><span class="n">rightleft</span><span class="w"> </span><span class="o">-</span><span class="n">ruby</span><span class="w"> </span><span class="o">+</span><span class="n">scrollbind</span><span class="w"> </span>
<span class="o">+</span><span class="n">signs</span><span class="w"> </span><span class="o">+</span><span class="n">smartindent</span><span class="w"> </span><span class="o">-</span><span class="n">sniff</span><span class="w"> </span><span class="o">+</span><span class="n">startuptime</span><span class="w"> </span><span class="o">+</span><span class="n">statusline</span><span class="w"> </span><span class="o">-</span><span class="n">sun_workshop</span><span class="w"> </span><span class="o">+</span><span class="n">syntax</span><span class="w"> </span>
<span class="o">+</span><span class="n">tag_binary</span><span class="w"> </span><span class="o">+</span><span class="n">tag_old_static</span><span class="w"> </span><span class="o">-</span><span class="n">tag_any_white</span><span class="w"> </span><span class="o">-</span><span class="n">tcl</span><span class="w"> </span><span class="o">+</span><span class="n">terminfo</span><span class="w"> </span><span class="o">+</span><span class="n">termresponse</span><span class="w"> </span>
<span class="o">+</span><span class="n">textobjects</span><span class="w"> </span><span class="o">+</span><span class="n">title</span><span class="w"> </span><span class="o">+</span><span class="n">toolbar</span><span class="w"> </span><span class="o">+</span><span class="n">user_commands</span><span class="w"> </span><span class="o">+</span><span class="n">vertsplit</span><span class="w"> </span><span class="o">+</span><span class="n">virtualedit</span><span class="w"> </span><span class="o">+</span><span class="n">visual</span><span class="w"> </span>
<span class="o">+</span><span class="n">visualextra</span><span class="w"> </span><span class="o">+</span><span class="n">viminfo</span><span class="w"> </span><span class="o">+</span><span class="n">vreplace</span><span class="w"> </span><span class="o">+</span><span class="n">wildignore</span><span class="w"> </span><span class="o">+</span><span class="n">wildmenu</span><span class="w"> </span><span class="o">+</span><span class="n">windows</span><span class="w"> </span><span class="o">+</span><span class="n">writebackup</span><span class="w"> </span>
<span class="o">+</span><span class="n">X11</span><span class="w"> </span><span class="o">-</span><span class="n">xfontset</span><span class="w"> </span><span class="o">+</span><span class="n">xim</span><span class="w"> </span><span class="o">+</span><span class="n">xsmp_interact</span><span class="w"> </span><span class="o">+</span><span class="n">xterm_clipboard</span><span class="w"> </span><span class="o">-</span><span class="n">xterm_save</span>
</code></pre></div>

<p>打开用户的.bashrc文件。</p>
<div class="highlight"><pre><span></span><code># vim ~/.bashrc
</code></pre></div>

<p>加入别名并保存文件(按下‘<strong>i</strong>’来插入行并按下<strong>ESC</strong>,接着运行<strong>:wq</strong>来保存并退出)。</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span>.<span class="nv">bashrc</span>

#<span class="w"> </span><span class="nv">User</span><span class="w"> </span><span class="nv">specific</span><span class="w"> </span><span class="nv">aliases</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">functions</span>

<span class="nv">alias</span><span class="w"> </span><span class="nv">rm</span><span class="o">=</span><span class="s1">&#39;rm -i&#39;</span>
<span class="nv">alias</span><span class="w"> </span><span class="nv">cp</span><span class="o">=</span><span class="s1">&#39;cp -i&#39;</span>
<span class="nv">alias</span><span class="w"> </span><span class="nv">mv</span><span class="o">=</span><span class="s1">&#39;mv -i&#39;</span>
<span class="nv">alias</span><span class="w"> </span><span class="nv">vim</span><span class="o">=</span><span class="s1">&#39;gvim -v&#39;</span>
#<span class="w"> </span><span class="nv">Source</span><span class="w"> </span><span class="nv">global</span><span class="w"> </span><span class="nv">definitions</span>
<span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">f</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">bashrc</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">        </span>.<span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">bashrc</span>
<span class="nv">fi</span>
</code></pre></div>

<p>这个alias是内置的用于将一些命令绕到其他命令上。这样每次当vim命令运行时，相应的别名会启动默认带剪切板的gVim。</p>
<p>现在，用类似的方式编辑你的‘<strong>.vimrc</strong>’文件(以防你没有 <strong>.vimrc</strong>文件，生成这样一个文件然后再回来)。</p>
<div class="highlight"><pre><span></span><code># vim ~/.vimrc
</code></pre></div>

<p>追加下面这行并保存文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">autocmd</span><span class="w"> </span><span class="n">VimLeave</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">system</span><span class="p">(</span><span class="s">&quot;echo -n $&#39;&quot;</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">escape</span><span class="p">(</span><span class="n">getreg</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;&#39;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="s">&quot;&#39; | xsel -ib&quot;</span><span class="p">)</span>
</code></pre></div>

<p>现在在vim中打开任何文件并高亮部分文本(使用'v'命令)并按下'y'。尝试在vim外面的任何地方粘帖(关不关vim都行)，你就发现vim里面复制的内容被粘帖出来了。</p>
<h3>附：生成 .vimrc 文件</h3>
<p>运行下面的命令来生成<strong>.vimrc</strong>文件（如果你已做了就跳过这部分）。</p>
<div class="highlight"><pre><span></span><code># cd   [返回到你的主目录]       
# vim .vimrc
</code></pre></div>

<p>在vim中在按下ESC键后运行下面的命令（在vim中，每个命令是在按下ESC键后也就是带你进入命令模式后运行的）。</p>
<div class="highlight"><pre><span></span><code>:r $VIMRUNTIME/vimrc_example.vim 
:w
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>