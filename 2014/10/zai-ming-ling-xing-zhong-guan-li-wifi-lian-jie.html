<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在命令行中管理 Wifi 连接</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Adrien Brochard 无论何时要安装一款新的 Linux 发行系统，一般的建议都是让您通过有线连接来接到互联网的。这主要的原因有两条 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li class="active"><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2014/10/zai-ming-ling-xing-zhong-guan-li-wifi-lian-jie.html" rel="bookmark"
           title="Permalink to 在命令行中管理 Wifi 连接">在命令行中管理 Wifi 连接</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-10-15T21:34:39+02:00">
                Published: Wed 15 October 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/zhuo-mian-ying-yong">桌面应用</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Adrien Brochard</p>
<p>无论何时要安装一款新的 Linux 发行系统，一般的建议都是让您通过有线连接来接到互联网的。这主要的原因有两条：第一，您的无线网卡也许安装的驱动不正确而不能用；第二，如果您是从命令行中来安装系统的，管理 WiFi 就非常可怕。我总是试图避免在命令行中处理 WiFi 。但 Linux 的世界，应具有无所畏惧的精神。如果您不知道怎样操作，您需要继续往下来学习之，这就是写这篇文章的唯一原因。所以我迫使自己学习如何在命令行中管理 WiFi 连接。</p>
<p><img alt="" src="/data/attachment/album/201410/15/213452kymvmph5phl9ljjl.png"></p>
<p>通过命令行来设置连接到 WiFi 当然有很多种方法，但在这篇文章里，同时也是一个建议，我使用最基本的方法：那就是使用在任何发布版本中都有的包含在“默认包”里的程序和工具。或者说我偏向于使用这一种方法。使用此方法显而易见的好处是这个操作过程能在任意有 Linux 系统的机器上复用。不好的一点是它相对来说比较复杂。</p>
<p>首先，我假设您们都已经正确安装了无线网卡的驱动程序。没有这前提，后续的一切都如镜花水月。如果您你机器确实没有正确安装上，您应该看看关于您的发布版本的维基和文档。</p>
<p>然后您就可以用如下命令来检查是哪一个接口来支持无线连接的：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>iwconfig
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201410/15/213057mpwiw9pw9fsipws4.jpg"></p>
<p>一般来说，无线接口都叫做 wlan0。当然也有例外的，但在这篇教程中我们将会一直用通用叫法。</p>
<p>以防万一，你得确认下以使此接口服务是启动着的：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>wlan0<span class="w"> </span>up
</code></pre></div>

<p>一但确认了无线接口是工作着的，你就可以用如下命令来扫描附近的无线网络了：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>iw<span class="w"> </span>dev<span class="w"> </span>wlan0<span class="w"> </span>scan<span class="w"> </span><span class="p">|</span><span class="w"> </span>less<span class="w"> </span>
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201410/15/213457euqbiqibebezo0yu.jpg"></p>
<p>根据扫描出的结果，可以得到网络的名字（它的 SSID），它的信息强度，以及它使用的是哪个安全加密的（如：WEP、WPA/WPA2）。从此时起，将会分成两条路线：情况很好、很容易的以及情况稍微复杂的。</p>
<p>如果您想连接的网络是没有加密的，您可以用下面的命令直接连接：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>iw<span class="w"> </span>dev<span class="w"> </span>wlan0<span class="w"> </span>connect<span class="w"> </span><span class="o">[</span>网络<span class="w"> </span>SSID<span class="o">]</span>
</code></pre></div>

<p>如果网络是用 WEP 加密的，也非常容易：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>iw<span class="w"> </span>dev<span class="w"> </span>wlan0<span class="w"> </span>connect<span class="w"> </span><span class="o">[</span>网络<span class="w"> </span>SSID<span class="o">]</span><span class="w"> </span>key<span class="w"> </span><span class="m">0</span>:<span class="o">[</span>WEP<span class="w"> </span>密钥<span class="o">]</span>
</code></pre></div>

<p>但网络使用的是 WPA 或 WPA2 协议的话，事情就不好办了。这种情况，您就得使用叫做 wpa<em>supplicant 的工具，它默认是没有的。然后需要修改 /etc/wpa</em>supplicant/wpa_supplicant.conf 文件，增加如下行：</p>
<div class="highlight"><pre><span></span><code>network={
    ssid=&quot;[网络 ssid]&quot;
    psk=&quot;[密码]&quot;
    priority=1
}
</code></pre></div>

<p>我建议你​​在文件的末尾添加它，并确保其他配置都注释掉。要注意 SSID 和密码字串都是大小写敏感的。在技术上您也可以把接入点的名称当做是 SSID，使用 wpa_supplicant 工具的话会有合适的 SSID 来替代这个名字。</p>
<p>一旦配置文件修改完成后，在后台启动此命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>wpa_supplicant<span class="w"> </span>-i<span class="w"> </span>wlan0<span class="w"> </span>-c<span class="w"> </span>/etc/wpa_supplicant/wpa_supplicant.conf
</code></pre></div>

<p>最后，无论是连到开放的网络还是加密的安全网络，您都得获取 IP 地址。简单地使用如下命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>dhcpcd<span class="w"> </span>wlan0
</code></pre></div>

<p>如果一切顺利的话，您应该已经通过 DHCP 获取到了一个全新的本地 IP，这个过程是在后台自动完成的。如果想确认下是否真正连接上的话，您可以再一次输入如下命令检查：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>iwconfig
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201410/15/213501zpb7zlrtrbaaaenp.jpg"></p>
<p>最后，我认为多次重复第一步的检查操作是很有必要的。您永远不会知道什么时候您的图形用户界面挂了，或者是什么时候不能访问无线连接了，所以现在就准备着用命令来检测吧。还有，前面提到过的，有很多种方式（如 NetworkManager、<a href="http://wicd.sourceforge.net/">wicd</a>、<a href="https://www.archlinux.org/netcfg/">netcfg</a>、<a href="https://github.com/rockymeza/wifi">wifi</a> 等等）来管理无线连接。我坚持使用最基本的方式，但在某些情况下，我使用的工具可能您还没有，所以您在之前就得先下载它们。另一方面，有很多高级的应用程序，他们确实是不包含在“默认包”里面的，使用它们会大大简化操作过程。但一般建议是开始的话最好从基本的来。</p>
<p>关于从命令行来管理连接 WiFi 您还有其他方式方法吗？请在评论中让我们知道。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>