<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Linux有问必答：如何在Apache网站服务器上关闭服务器签名</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: '' 问题：每当Apache2网站服务器返回错误页时（如，404 页面无法找到，403 禁止访问页面），它会在页面底部显示网站服务器签名（如，Apache版本号和操作系统信息）。同时，当Apache2网站服务器为PHP页面服务时，它也会显示PHP的版本信息。我 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2014/08/linuxyou-wen-bi-da-ru-he-zai-apachewang-zhan-fu-wu-qi-shang-guan-bi-fu-wu-qi-qian-ming.html" rel="bookmark"
           title="Permalink to Linux有问必答：如何在Apache网站服务器上关闭服务器签名">Linux有问必答：如何在Apache网站服务器上关闭服务器签名</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-08-20T17:37:00+02:00">
                Published: Wed 20 August 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: ''</p>
<blockquote>
<p><strong>问题</strong>：每当Apache2网站服务器返回错误页时（如，404 页面无法找到，403 禁止访问页面），它会在页面底部显示网站服务器签名（如，Apache版本号和操作系统信息）。同时，当Apache2网站服务器为PHP页面服务时，它也会显示PHP的版本信息。我如何在Apache2网站服务器上关闭这些网站服务器签名呢？</p>
</blockquote>
<p>透露网站服务器带有服务器/PHP版本信息的签名会带来安全隐患，因为你基本上将你系统上的已知漏洞告诉给了攻击者。因此，作为服务器加固的一个部分，强烈推荐你禁用所有网站服务器签名。</p>
<p><a href="https://camo.githubusercontent.com/7c0050095c1ca46e38c710361e4c5849dc9ee0d6/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333839372f31343930323937303534355f633364343036333232665f6f2e706e67"><img alt="" src="https://camo.githubusercontent.com/7c0050095c1ca46e38c710361e4c5849dc9ee0d6/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333839372f31343930323937303534355f633364343036333232665f6f2e706e67"></a></p>
<h3>禁用Apache网站服务器签名</h3>
<p>禁用Apache网站服务器签名可以通过编辑Apache配置文件来实现。</p>
<p>在Debian，Ubunt或者Linux Mint上：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/apache2/apache2.conf
</code></pre></div>

<p>在CentOS，Fedora，RHEL或者Arch Linux上：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/httpd/conf/httpd.conf
</code></pre></div>

<p>将下面两行添加到Apache配置文件底部。</p>
<blockquote>
<p>ServerSignature Off</p>
<p>ServerTokens Prod</p>
</blockquote>
<p>然后重启网站服务器以使修改生效：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>service<span class="w"> </span>apache2<span class="w"> </span>restart<span class="w"> </span><span class="o">(</span>Debian,<span class="w"> </span>Ubuntu<span class="w"> </span>or<span class="w"> </span>Linux<span class="w"> </span>Mint<span class="o">)</span>
$<span class="w"> </span>sudo<span class="w"> </span>service<span class="w"> </span>httpd<span class="w"> </span>restart<span class="w"> </span><span class="o">(</span>CentOS/RHEL<span class="w"> </span><span class="m">6</span><span class="o">)</span>
$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>httpd.service<span class="w"> </span><span class="o">(</span>Fedora,<span class="w"> </span>CentOS/RHEL<span class="w"> </span><span class="m">7</span>,<span class="w"> </span>Arch<span class="w"> </span>Linux<span class="o">)</span>
</code></pre></div>

<p>第一行‘ServerSignature Off’使得Apache2网站服务器在所有错误页面上隐藏Apache版本信息。</p>
<p><a href="https://camo.githubusercontent.com/ff7bcc6296f571245d6d9a5c5c396f095cba7e99/68747470733a2f2f6661726d362e737461746963666c69636b722e636f6d2f353535362f31343837393938323031365f376337623862626633645f6f2e706e67"><img alt="" src="https://camo.githubusercontent.com/ff7bcc6296f571245d6d9a5c5c396f095cba7e99/68747470733a2f2f6661726d362e737461746963666c69636b722e636f6d2f353535362f31343837393938323031365f376337623862626633645f6f2e706e67"></a></p>
<p>然而，若没有第二行的‘ServerTokens Prod’，Apache服务器将仍然在HTTP回应头部包含详细的服务器标记，这会泄漏Apache的版本号。</p>
<p><a href="https://camo.githubusercontent.com/e684a0f4d72a0a67400517cc1690b052c903402c/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333838392f31343930323937303533355f653834656332333039305f7a2e6a7067"><img alt="" src="https://camo.githubusercontent.com/e684a0f4d72a0a67400517cc1690b052c903402c/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333838392f31343930323937303533355f653834656332333039305f7a2e6a7067"></a></p>
<p>第二行‘<strong>ServerTokens Prod</strong>’所要做的是在HTTP响应头中将服务器标记压缩到最小。</p>
<p>因此，同时放置两行时，Apache将不会在页面中或者HTTP响应头中泄漏版本信息。</p>
<p><a href="https://camo.githubusercontent.com/008ed3a44caebac203bc319388f2e6c501a34e04/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333930322f31343930323937303530355f643739323235663235645f7a2e6a7067"><img alt="" src="https://camo.githubusercontent.com/008ed3a44caebac203bc319388f2e6c501a34e04/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333930322f31343930323937303530355f643739323235663235645f7a2e6a7067"></a></p>
<h3>隐藏PHP版本</h3>
<p>另外一个潜在的安全威胁是HTTP响应头中的PHP版本信息泄漏。默认情况下，Apache网站服务器通过HTTP响应头中的“X-Powered-By”字段包含有PHP版本信息。如果你想要在HTTP头部中隐藏PHP版本，请使用文本编辑器打开php.ini文件，找到“expose_php = On”这一行，将它改为“expose_php = Off”即可。</p>
<p><a href="https://camo.githubusercontent.com/da9bfd0221df42831a9d895b1748dab2f2c43036/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333835332f31343839393931373938315f616165663731656230612e6a7067"><img alt="" src="https://camo.githubusercontent.com/da9bfd0221df42831a9d895b1748dab2f2c43036/68747470733a2f2f6661726d342e737461746963666c69636b722e636f6d2f333835332f31343839393931373938315f616165663731656230612e6a7067"></a></p>
<p>在Debian，Ubunt或者Linux Mint上：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/php5/apache2/php.ini
</code></pre></div>

<p>在CentOS，Fedora，RHEL或者Arch Linux上：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/php.ini
</code></pre></div>

<blockquote>
<p>expose_php = Off</p>
</blockquote>
<p>最后，重启Apache2网站服务器来重新加载已更新的PHP配置文件。</p>
<p>现在，你不会再看到带有“X-Powered-By”字段的HTTP响应头了。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>