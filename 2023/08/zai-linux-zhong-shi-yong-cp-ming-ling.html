<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在 Linux 中使用 cp 命令</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Abhishek Prakash 熟悉在 Linux 命令行中复制文件和目录的 cp 命令。 cp 命令是 Linux 中一个重要的命令，你可能经常会用到它。 正如名称所示 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/08/zai-linux-zhong-shi-yong-cp-ming-ling.html" rel="bookmark"
           title="Permalink to 在 Linux 中使用 cp 命令">在 Linux 中使用 cp 命令</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-08-12T13:52:00+02:00">
                Published: Sat 12 August 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Abhishek Prakash</p>
<p><img alt="" src="/data/attachment/album/202308/12/135152eqsy2yiczqiicqvt.jpg"></p>
<blockquote>
<p>熟悉在 Linux 命令行中复制文件和目录的 cp 命令。</p>
</blockquote>
<p><code>cp</code> 命令是 Linux 中一个重要的命令，你可能经常会用到它。</p>
<p>正如名称所示，<code>cp</code> 代表 <ruby> 复制 <rt>  copy </rt></ruby>，它被用于 <a href="https://itsfoss.com/copy-files-directory-linux/">在 Linux 命令行中复制文件和目录</a>。</p>
<p>这是一个相对简单的命令，只有几个选项，但你仍有必要深入了解它。</p>
<p>在展示 <code>cp</code> 命令的实际示例之前，我更建议你先熟悉绝对路径和相对路径的概念，将文件从一个位置复制到另一个位置时，你需要用到它们。</p>
<blockquote>
<p><a href="https://linuxhandbook.com/absolute-vs-relative-path/">Linux 中的绝对路径和相对路径的不同之处</a></p>
</blockquote>
<h3>复制单个文件</h3>
<p><code>cp</code> 命令最简单和最常见的用途是复制文件，只需指定源文件和要“粘贴”文件的目标目录即可。</p>
<div class="highlight"><pre><span></span><code>cp 源文件 目标目录
</code></pre></div>

<p><img alt="将单个文件从源目录复制到目标目录。" src="/data/attachment/album/202308/12/135235cm6fw9mpoomo5hot.png"></p>
<h3>在复制文件的同时重命名它</h3>
<p>你将文件复制到另一个位置时可以同时进行 <a href="https://learnubuntu.com:443/rename-files/">重命名</a>。这有点类似于文本编辑器中的“另存为”选项。</p>
<p>为此，你必须在路径中给出新的文件名。</p>
<div class="highlight"><pre><span></span><code>cp 源文件 目标目录/新文件名
</code></pre></div>

<p><img alt="在复制文件的同时重命名" src="/data/attachment/album/202308/12/135237b433kr8xpqpp2q2p.png"></p>
<h3>复制多个文件</h3>
<p>你还可以将多个文件复制到另一个位置。</p>
<div class="highlight"><pre><span></span><code>cp 文件1 文件2 文件3 目标目录
</code></pre></div>

<p><img alt="复制多个文件时，将目标目录放在最后" src="/data/attachment/album/202308/12/135238htv73fsu2yzvsbvb.png"></p>
<p>在这种情况下，你无法重命名文件。</p>
<p>你还可以使用通配符扩展，将特定后缀的文件复制到另一个位置：</p>
<div class="highlight"><pre><span></span><code>cp *.txt 目标目录
</code></pre></div>

<p><img alt="使用通配符扩展复制多个文件，比如所有 .txt 后缀的文件" src="/data/attachment/album/202308/12/135238zj00io3wywwlwfyj.png"></p>
<h3>复制文件时避免覆盖现有文件</h3>
<p>如果你将 <code>file1.txt</code> 复制到一个已经存在名为 <code>file1.txt</code> 文件的目录中，它会将原有的文件覆盖掉。</p>
<p>如果你不希望这样，<code>cp</code> 命令还提供了几个选项来处理文件覆盖的情况。</p>
<p>首先是使用选项 <code>-i</code> 的交互模式。在交互模式下，它会询问是否确认或放弃覆盖目标文件。</p>
<div class="highlight"><pre><span></span><code>cp -i 源文件 目标目录
cp：覆盖 &#39;目标目录/源文件&#39; ？
</code></pre></div>

<p>按 <code>Y</code> 覆盖文件，按 <code>N</code> 跳过复制该文件。</p>
<p><img alt="覆盖，但以交互方式询问（内容将被覆盖）" src="/data/attachment/album/202308/12/135238prfrgdzggjg9fsgj.png"></p>
<p><img alt="覆盖，但以交互方式询问（内容不会被覆盖）" src="/data/attachment/album/202308/12/135239o4xr35wfaqrz83s6.png"></p>
<p>选项 <code>-n</code> 代表完全取消覆盖。使用此选项时目标文件不会被覆盖。</p>
<div class="highlight"><pre><span></span><code>cp -n 源文件 目标目录
</code></pre></div>

<p><img alt="取消覆盖（目录内文件的内容未更改）" src="/data/attachment/album/202308/12/135239jmzpo7e915h01ts5.png"></p>
<p>还有一个选项 <code>-b</code>，在目标目录的文件将被覆盖时自动为其创建备份。我猜这里 <code>b</code> 代表 <ruby> 备份 <rt>  backup </rt></ruby>。</p>
<div class="highlight"><pre><span></span><code>cp -b 源文件 目标目录
</code></pre></div>

<p><img alt="覆盖文件，但在备份文件后附加了“~”。" src="/data/attachment/album/202308/12/135240h9cyr9hzbwxay067.png"></p>
<p>最后，还有一个“<ruby> 更新 <rt>  update </rt></ruby>”选项 <code>-u</code>，如果目标文件比源文件旧，或者目标文件不存在，就会被覆盖掉。</p>
<div class="highlight"><pre><span></span><code>cp -u 源文件 目标目录
</code></pre></div>

<p><img alt="新文件会覆盖旧文件" src="/data/attachment/album/202308/12/135240aqvqvqqxxtrv4vql.png"></p>
<h3>复制目录（文件夹）</h3>
<p>cp 命令也用来<a href="https://linuxhandbook.com:443/copy-directory-linux/">在 Linux 命令行中复制目录</a>。</p>
<p>在复制目录时，你需要使用递归选项 <code>-r</code>。</p>
<div class="highlight"><pre><span></span><code>cp -r 源目录 目标目录
</code></pre></div>

<p><img alt="在 Linux 中使用 cp 命令复制整个目录" src="/data/attachment/album/202308/12/135240vx11dkdywyrc9wfd.png"></p>
<p>你还可以将多个目录复制到另一个位置：</p>
<div class="highlight"><pre><span></span><code>cp -r 目录1 目录2 目录3 目标目录
</code></pre></div>

<p><img alt="使用 cp 命令复制多个目录" src="/data/attachment/album/202308/12/135241ormufj8982n8gzmy.png"></p>
<h3>在复制时保留属性</h3>
<p>当你将文件复制到另一个位置时，它的 <a href="https://linuxhandbook.com:443/file-timestamps/">时间戳</a>、<a href="https://linuxhandbook.com:443/linux-file-permissions/">文件权限</a> 甚至所有权都会发生变化。</p>
<p>这是正常的行为。但在某些情况下，你可能希望在复制文件时保留其原始属性。</p>
<p>要保留属性，请使用选项 <code>-p</code>：</p>
<div class="highlight"><pre><span></span><code>cp -p 源文件 目标目录
</code></pre></div>

<p><img alt="" src="/data/attachment/album/202308/12/135241b11zrkk7kdm01nok.png"></p>
<blockquote>
<p>? 还有一个 <code>-a</code> 选项用于存档模式。它将连 ACL 也保留下来。</p>
</blockquote>
<h3>?️ 练习时间</h3>
<p>想要练习一下 <code>cp</code> 命令吗？以下是一些简单的练习题供你尝试。</p>
<ul>
<li>打开终端并创建一个名为 <code>practice_cp</code> 的目录。</li>
<li>现在，将 <code>/etc/services</code> 文件复制到这个新创建的目录中。</li>
<li>在 <code>practice</code> 目录中对复制的 <code>services</code> 文件进行一些小的更改。</li>
<li>现在，使用更新模式再次复制 <code>/etc/services</code> 文件。有什么变化吗？观察一下。</li>
<li>查看 <code>/var/log</code> 目录，并将以 <code>mail</code> 开头的日志文件复制到你的联系目录下。</li>
<li>现在，返回到你的家目录，并创建一个名为 <code>new_dir</code> 的新目录（好吧，我想不出更好的名字）。</li>
<li>将 <code>practice_cp</code> 目录复制到 <code>new_dir</code> 目录中。</li>
</ul>
<p>对你来说这些练习足够用了。希望你能喜欢在这里学习 Linux 命令。</p>
<p><em>（题图：MJ/07b35a39-826e-4904-9f85-25257831ce9d）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>