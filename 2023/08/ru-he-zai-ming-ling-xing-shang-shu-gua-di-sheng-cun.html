<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在命令行上舒适地生存？</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Julia Evans 有时我与一些害怕使用命令行的朋友交谈，我感到自己给不出好的建议（我已经使用命令行太长时间了），因此我向 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/08/ru-he-zai-ming-ling-xing-shang-shu-gua-di-sheng-cun.html" rel="bookmark"
           title="Permalink to 如何在命令行上舒适地生存？">如何在命令行上舒适地生存？</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-08-12T10:18:28+02:00">
                Published: Sat 12 August 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Julia Evans</p>
<p><img alt="" src="/data/attachment/album/202308/12/101712ivlgozjogfvfczcg.jpg"></p>
<p>有时我与一些害怕使用命令行的朋友交谈，我感到自己给不出好的建议（我已经使用命令行太长时间了），因此我向一些 <a href="https://social.jvns.ca/@b0rk/110842645317766338">Mastodon</a> 上的人提出了以下问题：</p>
<blockquote>
<p>如果在过去一到三年内，你刚刚不再害怕使用命令行了，是什么帮助了你？</p>
<p>（如果你不记得，或者你已经使用命令行舒适地工作了 15 年，则无需回答——这个问题不适用于你 ?）</p>
</blockquote>
<p>这个列表还不如我希望的那么长，但我希望通过发布它来收集更多的答案。显然，并没有一个单一的方法适用于所有人，不同的人会选择不同的路径。</p>
<p>我认为舒适使用命令行有三个方面：<strong>减少风险</strong>、<strong>动机</strong>和<strong>资源</strong>。我将先谈谈减少风险，然后是一些动机，并列出一些资源。</p>
<h3>减少风险的方式</h3>
<p>很多人（没错！）对在命令行上意外执行了一些无法撤销的破坏性操作感到担心。</p>
<p>以下是一些人们提到的帮助他们减少风险的策略：</p>
<ul>
<li>定期备份（有人提到他们在上周的一个命令行错误中意外删除了整个家目录，但很幸运他们有备份）。</li>
<li>对于代码，尽可能多地使用 <code>git</code>。</li>
<li>将 <code>rm</code> 设置为类似 <code>safe-rm</code> 或 <code>rmtrash</code> 这样的工具的别名，这样你就不会意外删除不应删除的内容（或者就设置别名到 <code>rm -i</code>）。</li>
<li>尽量避免使用通配符，使用制表符键补全代替（我的 Shell 会使用 <code>TAB</code> 键补全 <code>rm *.txt</code> 并显示我将要删除的内容）。</li>
<li>使用精美的终端提示符，可以显示当前目录、计算机名称、<code>git</code> 分支和你是否具有 root 权限。</li>
<li>如果你计划对文件运行未经测试或危险的命令，先备份文件副本。</li>
<li>拥有一台专用的测试机器（如便宜的旧 Linux 计算机或树莓派）进行特别危险的测试，例如测试备份软件或分区。</li>
<li>对于危险命令，如果有的话，使用 <code>--dry-run</code> 选项来查看执行结果而不实际执行操作。</li>
<li>在你的 Shell 脚本中构建自己的 <code>--dry-run</code> 选项。</li>
</ul>
<p>这些策略有助于降低在命令行上引发不可逆操作的风险。</p>
<h3>杀手级应用程序</h3>
<p>一些人提到了一个“杀手级命令行应用程序”，这激励他们开始花更多时间在命令行上。例如：</p>
<ul>
<li><a href="https://github.com/BurntSushi/ripgrep">ripgrep</a></li>
<li>jq</li>
<li>wget / curl</li>
<li>git（一些人发现他们更喜欢使用 git 命令行界面而不是使用图形界面）</li>
<li>ffmpeg（用于视频处理）</li>
<li>yt-dlp</li>
<li>硬盘数据恢复工具（来自 <a href="https://github.com/summeremacs/public/blob/main/20230629T180135--how-i-came-to-use-emacs-and-other-things__emacs_explanation_linux_origin_raspberrypi_story_terminal.org">这个精彩的故事</a>）</li>
</ul>
<p>还有一些人提到他们对图形界面工具感到失望（例如使用了所有内存，并使计算机崩溃的重型集成开发环境），并因此有动机用更轻量级的命令行工具替代它们。</p>
<h3>激发人们的命令行技巧</h3>
<p>有人提到被其他人在命令行上展示的酷炫功能所激励，例如：</p>
<ul>
<li><a href="https://adamdrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html">命令行工具可以比你的 Hadoop 集群快 235 倍</a></li>
<li><a href="https://www.youtube.com/watch?v=ZQnyApKysg4&amp;feature=youtu.be">Gary Bernhardt 的这个“命令行链锯”演讲</a></li>
</ul>
<h3>explainshell</h3>
<p>有几个人提到了 <a href="https://explainshell.com/">explainshell</a>，它可以让你粘贴任何命令行指令，并将其分解成不同的部分解释。</p>
<h3>命令历史、制表符补全等等</h3>
<p>有很多小技巧和窍门可以使在命令行上工作更容易，例如：</p>
<ul>
<li>使用向上箭头查看先前的命令</li>
<li>使用 <code>Ctrl+R</code> 搜索你的 Bash 历史记录</li>
<li>使用快捷键在行内导航：<code>Ctrl+w</code> （删除一个单词）、<code>Ctrl+a</code>（跳转到行首）、<code>Ctrl+e</code>（跳转到行尾），以及 <code>Ctrl+left arrow</code> / <code>Ctrl+right arrow</code>（向前/向后跳转一个单词）</li>
<li>将 Bash 历史记录设置为无限制</li>
<li>使用 <code>cd -</code> 返回上一个目录</li>
<li>文件名和命令名的制表符自动补全</li>
<li>学习如何使用像 <code>less</code> 这样的分页工具阅读手册页或其他大型文本文件（如搜索、滚动等）</li>
<li>在 macOS 上使用 <code>pbcopy</code>/<code>pbpaste</code> 将剪贴板内容复制/粘贴到 stdout/stdin</li>
<li>在编辑配置文件之前备份它们</li>
</ul>
<h3>fzf</h3>
<p>很多人提到使用 <a href="https://github.com/junegunn/fzf">fzf</a> 作为模糊搜索 Shell 历史记录的更好方法。除了作为更好的模糊搜索 Shell 历史记录的工具，人们还提到了一些其他用途：</p>
<ul>
<li>选择 <code>git</code> 分支（<code>git checkout $(git for-each-ref --format='%(refname:short)' refs/heads/ | fzf)</code>）</li>
<li>快速查找要编辑的文件（<code>nvim $(fzf)</code>）</li>
<li>切换 Kubernetes 上下文（<code>kubectl config use-context $(kubectl config get-contexts -o name | fzf --height=10 --prompt="Kubernetes Context&gt; ")</code>）</li>
<li>从测试套件中选择要运行的特定测试</li>
</ul>
<p>一般的模式是使用 <code>fzf</code> 来选择某个对象（文件、<code>git</code> 分支、命令行参数），<code>fzf</code> 将所选对象输出到标准输出，然后将其插入作为另一个命令的命令行参数。</p>
<p>你还可以将 <code>fzf</code> 用作工具，自动预览输出并快速迭代，例如：</p>
<ul>
<li>自动预览 <code>jq</code> 的输出（<code>echo '' | fzf --preview "jq {q} &lt; YOURFILE.json"</code>）</li>
<li>自动预览 <code>sed</code> 的输出（<code>echo '' | fzf --preview "sed {q} YOURFILE"</code>）</li>
<li>自动预览 <code>awk</code> 的输出（<code>echo '' | fzf --preview "awk {q} YOURFILE"</code>）</li>
</ul>
<p>你可以参考这个思路。</p>
<p>通常，人们会为 <code>fzf</code> 的使用定义别名，比如输入 <code>gcb</code> 或其他命令，以快速选择要检出的 <code>git</code> 分支。</p>
<h3>树莓派</h3>
<p>一些人开始使用树莓派，这样可以更安全地进行实验，而不必担心损坏计算机（只需擦除 SD 卡然后重新开始即可！）。</p>
<h3>漂亮的 Shell 环境</h3>
<p>很多人说，当他们开始使用像 <a href="https://ohmyz.sh/">oh-my-zsh</a> 或 <a href="https://fishshell.com/">Fish</a> 这样更用户友好的 Shell 环境时，他们在命令行上感到更舒适。我非常同意这一点 – 我已经使用 Fish 十年了，我非常喜欢它。</p>
<p>在这里还有一些其他的事情可以做：</p>
<ul>
<li>有些人说，让他们的终端更漂亮可以帮助他们感到更舒适（“让它变成粉色！”）。</li>
<li>设置一个漂亮的 Shell 提示符来提供更多信息（例如，当命令失败时，可以将提示符设置为红色）。特别是 <a href="https://www.reddit.com/r/zsh/comments/dsh1g3/new_powerlevel10k_feature_transient_prompt/">transient prompts</a>（在当前命令设置一个非常花哨的提示符，但在之前的命令中设置一个简单得多的提示符）看起来非常好。</li>
</ul>
<p><img alt="" src="/data/attachment/album/202308/12/101828ito9zx77079p59yy.gif"></p>
<p>一些用于美化终端的工具：</p>
<ul>
<li>我使用 <a href="https://github.com/chriskempson/base16-shell">base16-shell</a></li>
<li><a href="https://github.com/romkatv/powerlevel10k">powerlevel10k</a> 是一个流行的漂亮的 Zsh 主题，具有 transient prompts</li>
<li><a href="https://github.com/starship/starship">starship</a> 是一个漂亮的提示符工具</li>
<li>在 Mac 上，我认为 <a href="https://iterm2.com/">iTerm2</a> 比默认的终端更容易自定义。</li>
</ul>
<h3>漂亮的文件管理器</h3>
<p>一些人提到了像 <a href="https://github.com/ranger/ranger">ranger</a> 或 <a href="https://github.com/jarun/nnn">nnn</a> 这样的漂亮的终端文件管理器，这是我之前没有听说过的。</p>
<h3>一个有帮助的朋友或同事</h3>
<p>一个可以回答初学者问题并给你指点的人是无价的。</p>
<h3>通过肩并肩地观察学习</h3>
<p>有人提到观察更有经验的人使用终端 - 有很多经验丰富的用户甚至没有意识到自己在做什么，你可以从中学到很多小技巧。</p>
<h3>别名</h3>
<p>很多人说，为常用任务创建自己的别名或脚本就像是一个神奇的“灵光一现”时刻，因为：</p>
<ul>
<li>他们不必记住语法</li>
<li>然后他们就有了一份自己常用命令的列表，可以轻松调用</li>
</ul>
<h3>查找示例的备忘单</h3>
<p>很多手册页没有示例，例如 <a href="https://linux.die.net/man/1/s_client">openssl s_client</a> 的手册页就没有示例。这使得起步变得更加困难！</p>
<p>人们提到了一些备忘单工具，比如：</p>
<ul>
<li><a href="https://tldr.sh/">tldr.sh</a></li>
<li><a href="https://github.com/cheat/cheat">cheat</a>（还可以进行编辑 - 你可以添加自己的命令以供以后参考）</li>
<li><a href="http://ratfactor.com/cards/um">um</a>（一个非常精简的需要自己构建的系统）</li>
</ul>
<p>例如，<a href="https://github.com/cheat/cheatsheets/blob/master/openssl">openssl 的备忘单</a> 非常棒 - 我认为它几乎包含了我在实际中使用 <code>openssl</code> 时用过的所有内容（除了 <code>openssl s_client</code> 的 <code>-servername</code> 选项）。</p>
<p>有人说他们配置了他们的 <code>.bash_profile</code>，这样每次登录时都会打印出一张备忘单。</p>
<h3>不要试图背诵</h3>
<p>一些人说他们需要改变自己的方法 - 他们意识到不需要试图记住所有的命令，只需按需查找命令，随着时间的推移，他们会自然而然地记住最常用的命令。</p>
<p>（我最近对学习阅读 x86 汇编有了完全相同的体会 - 我正在上一门课程，讲师说“是的，刚开始时可以每次都查找，最终你会记住最常见的指令。”）</p>
<p>还有一些人说相反的观点 - 他们使用间隔重复应用程序（如 Anki）来记忆常用的命令。</p>
<h3>Vim</h3>
<p>有人提到他们开始在命令行上使用 Vim 编辑文件，一旦他们开始使用终端文本编辑器，使用命令行处理其他事情也变得更自然。</p>
<p>此外，显然有一个名为 <a href="https://micro-editor.github.io/">micro</a> 的新编辑器，像是更好的 <code>pico</code>/<code>nano</code>，适用于那些不想学习 Emacs 或 Vim 的人。</p>
<h3>桌面上使用 Linux</h3>
<p>有人说他们开始使用 Linux 作为他们的日常主力系统，而需要修复 Linux 问题可以帮助他们学习。这也是我在大约 2004 年熟悉命令行的方式（我非常喜欢安装各种不同的 Linux 发行版，以找到我最喜欢的那个），但我猜这不是如今最受欢迎的策略。</p>
<h3>被迫仅使用终端</h3>
<p>有些人说他们参加了一门大学课程，教授让他们在终端上做所有事情，或者他们自己制定了一个规则，一段时间内必须在终端上完成所有工作。</p>
<h3>工作坊</h3>
<p>有几个人说像 <a href="https://software-carpentry.org/">Software Carpentry</a> 这样的工作坊（面向科学家的命令行、Git 和 Python/R 编程简介）帮助他们更熟悉命令行。</p>
<p>你可以在这里查看 <a href="https://software-carpentry.org/lessons/">Software Carpentry 课程</a>。</p>
<h3>书籍和文章</h3>
<p>一些提到的材料：</p>
<p>文章：</p>
<ul>
<li>《<a href="https://furbo.org/2014/09/03/the-terminal/">终端</a>》</li>
<li>《<a href="http://blog.commandlinekungfu.com/">命令行功夫</a>》（包含 UNIX 和 Windows 命令行技巧）</li>
</ul>
<p>书籍：</p>
<ul>
<li>《<a href="https://www.oreilly.com/library/view/efficient-linux-at/9781098113391/">Effective Linux at The Command Line</a>》</li>
<li>《Unix Power Tools》（可能有些过时）</li>
<li>《The Linux Pocket guide》</li>
</ul>
<p>视频：</p>
<ul>
<li>Mindy Preston 的 <a href="https://www.youtube.com/watch?v=IcV9TVb-vF4">CLI tools aren’t inherently user-hostile</a></li>
<li>Gary Bernhardt 的 <a href="https://www.destroyallsoftware.com/screencasts">destroy all software screencasts</a></li>
<li><a href="https://www.youtube.com/@DistroTube">DistroTube</a></li>
</ul>
<p><em>（题图：MJ/c0dc082a-a477-434b-b826-77a42c8f61c3）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>