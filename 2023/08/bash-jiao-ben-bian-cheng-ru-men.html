<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Bash 脚本编程入门</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Abhishek Prakash 初学者们，让我们在这个大型的教程中来认识一下 Bash 脚本编程。 Shell 是 Linux 的核心部分，它允许你使用各种诸如 cd、ls、cat …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/08/bash-jiao-ben-bian-cheng-ru-men.html" rel="bookmark"
           title="Permalink to Bash 脚本编程入门">Bash 脚本编程入门</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-08-23T11:37:25+02:00">
                Published: Wed 23 August 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Abhishek Prakash</p>
<p><img alt="" src="/data/attachment/album/202308/23/113613l034n4fu2zt8m40q.jpg"></p>
<blockquote>
<p>初学者们，让我们在这个大型的教程中来认识一下 Bash 脚本编程。</p>
</blockquote>
<p>Shell 是 Linux 的核心部分，它允许你使用各种诸如 <code>cd</code>、<code>ls</code>、<code>cat</code> 等的命令与 Linux 内核进行交互。</p>
<p>Bash 是 Linux 上众多可用的 Shell 中的一个。这些 Shell 主要的语法基本相同，但并非完全一样。Bash 是目前最受欢迎的 Shell，并在大多数 Linux 发行版中被设为默认 Shell。</p>
<p>当你打开一个终端或 SSH 会话时，即使你无法真切地看到它，你其实已经在运行着一个 Shell。</p>
<p><img alt="" src="/data/attachment/album/202308/23/113725wortgc6h5ccf1e4s.png"></p>
<p>当你输入一个命令，它会被 Shell 解释。如果命令和语法是正确的，它就会被执行，否则你会看到一个错误。</p>
<h3>当你可以直接运行 Linux 命令时，为什么还需要 Bash 脚本？</h3>
<p>你可以直接在终端输入命令，它们就会被执行。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hello world&quot;</span>
hello<span class="w"> </span>world
</code></pre></div>

<p>并且，同样的操作也可以在脚本中进行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>script.sh
<span class="c1">#!/bin/bash</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hello world&quot;</span>
$<span class="w"> </span>bash<span class="w"> </span>script.sh
hello<span class="w"> </span>world
</code></pre></div>

<p>那么，为什么我们需要 Shell 脚本呢？因为你不必一遍又一遍地输入同一个命令，你只需运行 Shell 脚本即可。</p>
<p>此外，如果你的脚本中有复杂的逻辑，把所有的命令都输入到终端中可能并不是一个好主意。</p>
<p>例如，如果你输入下面的命令，它会奏效，但这并不容易理解。不断地输入相同的命令（甚至要在 Bash 历史记录中搜索）会造成困扰。</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span>[<span class="w"> </span>$<span class="ss">(</span><span class="nv">whoami</span><span class="ss">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"> </span>]<span class="c1">; then echo &quot;root&quot;; else echo &quot;not root&quot;; fi</span>
</code></pre></div>

<p>相反，你可以把命令放进 shell 脚本中，这样就更容易理解并且可以轻松运行了：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You are root&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You are not root&quot;</span>
<span class="k">fi</span>
</code></pre></div>

<p>这还是比较简单的情况。尝试想象一下，一个复杂的脚本可能有五十行或一百行！</p>
<h3>你将会学到什么？</h3>
<p>在这个 Bash 脚本教程中，有九个部分。你将会学到：</p>
<ul>
<li>创建并运行你的第一个 Bash Shell 脚本</li>
<li>使用变量</li>
<li>在你的 Bash 脚本中传递参数和接受用户输入</li>
<li>进行数学计算</li>
<li>操作字符串</li>
<li>使用条件语句，例如 <code>if-else</code></li>
<li>使用 <code>for</code>、<code>while</code> 和 <code>until</code> 循环</li>
<li>创建函数</li>
</ul>
<blockquote>
<p>? 所有的部分都会给你一个简单的例子。如果你愿意，你可以通过访问每个部分的详细章节来更深入地学习。这些章节也都包含了实践练习。</p>
</blockquote>
<h3>这个教程的目标读者是谁？</h3>
<p>这个教程适合任何想要开始学习 Bash Shell 脚本的人。</p>
<p>如果你是一名学生，而你的课程里包括了 Shell 脚本，那么这个系列就是为你准备的。</p>
<p>如果你是一个常规的桌面 Linux 用户，这个系列将会帮助你理解在探索各种软件和修复问题时遇到的大多数 Shell 脚本。你也可以使用它来自动化一些常见的、重复的任务。</p>
<p>在这个 Bash 脚本教程结束时，你应该可以编写简单的 Bash 脚本。</p>
<blockquote>
<p>? 希望你已经拥有 Linux 命令行和编程语言的基础知识。</p>
</blockquote>
<p>如果你对 Linux 命令行完全不熟悉，我建议你先掌握基础知识。</p>
<blockquote>
<p><strong><a href="https://itsfoss.com/basic-terminal-tips-ubuntu/">19 个你应该知道的基础而重要的 Linux 终端技巧</a></strong></p>
</blockquote>
<p>你应该了解如何在命令行中进入特定的位置。为了做到这一点，你需要理解 Linux 文件系统中的路径是如何工作的。</p>
<blockquote>
<p><strong><a href="https://linuxhandbook.com/absolute-vs-relative-path/">Linux 中的绝对路径和相对路径有什么不同</a></strong></p>
</blockquote>
<p>接下来，这个教程系列会给你介绍目录导航和文件操作的基本知识。</p>
<blockquote>
<p><strong><a href="/article-16104-1.html">终端基础：Linux 终端入门</a></strong></p>
</blockquote>
<h3>1、编写你的第一个 Bash Shell 脚本</h3>
<p>创建一个名为 <code>hello.sh</code> 的新文件：</p>
<div class="highlight"><pre><span></span><code>nano hello.sh
</code></pre></div>

<p>这将在终端中打开 nano 编辑器。在其中输入以下几行代码：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello World&quot;</span>
</code></pre></div>

<p>通过按 <code>Ctrl+X</code> 键可以保存并退出 nano 编辑器。</p>
<p>现在，你可以以以下方式运行 Bash Shell 脚本：</p>
<div class="highlight"><pre><span></span><code>bash hello.sh
</code></pre></div>

<p>你应该可以看到以下的输出：</p>
<div class="highlight"><pre><span></span><code>Hello World
</code></pre></div>

<p>另一种方式是首先赋予脚本执行权限：</p>
<div class="highlight"><pre><span></span><code>chmod u+x hello.sh
</code></pre></div>

<p>然后这样运行它：</p>
<div class="highlight"><pre><span></span><code>./hello.sh
</code></pre></div>

<blockquote>
<p>? 你也可以使用基于图形用户界面的文本编辑器来编写脚本。这可能更适合编写较长的脚本。然而，你需要切换到保存脚本的目录中才能运行它。</p>
</blockquote>
<p>恭喜！你刚刚运行了你的第一个 Bash 脚本。</p>
<blockquote>
<p><strong><a href="/article-15921-1.html">Bash 基础知识系列 #1：创建并运行你的第一个 Bash Shell 脚本</a></strong></p>
</blockquote>
<h3>2、在 Bash 脚本中使用变量</h3>
<p>变量的声明方式如下：</p>
<div class="highlight"><pre><span></span><code><span class="k">var</span><span class="o">=</span><span class="n">some_value</span>
</code></pre></div>

<p>然后可以像这样访问变量：</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="k">var</span>
</code></pre></div>

<blockquote>
<p>? 在声明变量时，等号（<code>=</code>）前后不能有空格。</p>
</blockquote>
<p>我们通过添加一个变量来修改前面的脚本。</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nv">message</span><span class="o">=</span><span class="s2">&quot;Hello World&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$message</span>
</code></pre></div>

<p>如果运行这个脚本，输出仍然会保持不变。</p>
<div class="highlight"><pre><span></span><code>Hello World
</code></pre></div>

<blockquote>
<p><strong><a href="/article-15991-1.html">Bash 基础知识系列 #2：在 Bash 中使用变量</a></strong></p>
</blockquote>
<h3>3、向 Bash 脚本传递参数</h3>
<p>你可以在运行 Bash 脚本时以以下方式传递参数：</p>
<div class="highlight"><pre><span></span><code>./my_script.sh arg1 arg2
</code></pre></div>

<p>在脚本中，你可以使用 <code>$1</code> 来代表第 1 个参数，用 <code>$2</code> 来代表第 2 个参数，以此类推。<code>$0</code> 是一个特殊变量，它代表正在运行的脚本的名字。</p>
<p>现在，创建一个新的 shell 脚本，命名为 <code>arguments.sh</code>，并向其中添加以下几行代码：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Script name is: </span><span class="nv">$0</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;First argument is: </span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Second argument is: </span><span class="nv">$2</span><span class="s2">&quot;</span>
</code></pre></div>

<p>使其可执行并像这样运行它：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./argument.sh<span class="w"> </span>abhishek<span class="w"> </span>prakash
Script<span class="w"> </span>name<span class="w"> </span>is:<span class="w"> </span>./argument.sh
First<span class="w"> </span>argument<span class="w"> </span>is:<span class="w"> </span>abhishek
Second<span class="w"> </span>argument<span class="w"> </span>is:<span class="w"> </span>prakash
</code></pre></div>

<p>让我们快速看一下特殊变量：</p>
<table>
<thead>
<tr>
<th>特殊变量</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$0</code></td>
<td>脚本名称</td>
</tr>
<tr>
<td><code>$1</code>、<code>$2</code>...<code>$9</code></td>
<td>脚本参数</td>
</tr>
<tr>
<td><code>${n}</code></td>
<td>10 到 255 的脚本参数</td>
</tr>
<tr>
<td><code>$#</code></td>
<td>参数数量</td>
</tr>
<tr>
<td><code>$@</code></td>
<td>所有参数一起</td>
</tr>
<tr>
<td><code>$$</code></td>
<td>当前 shell 的进程 id</td>
</tr>
<tr>
<td><code>$!</code></td>
<td>最后执行命令的进程 id</td>
</tr>
<tr>
<td><code>$?</code></td>
<td>最后执行命令的退出状态</td>
</tr>
</tbody>
</table>
<p>你也可以通过接受键盘输入使你的 Bash 脚本变得交互式。</p>
<p>为此，你必须使用 <code>read</code> 命令。你还可以使用 <code>read -p</code> 命令提示用户进行键盘输入，而不需要 <code>echo</code> 命令。</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;What is your name, stranger?&quot;</span>
<span class="nb">read</span><span class="w"> </span>name
<span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;What&#39;s your full name, </span><span class="nv">$name</span><span class="s2">? &quot;</span><span class="w"> </span>full_name
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Welcome, </span><span class="nv">$full_name</span><span class="s2">&quot;</span>
</code></pre></div>

<p>现在，如果你运行这个脚本，当系统提示你输入“参数”时，你必须输入。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./argument.sh
What<span class="w"> </span>is<span class="w"> </span>your<span class="w"> </span>name,<span class="w"> </span>stranger?
abhishek
What<span class="err">&#39;</span>s<span class="w"> </span>your<span class="w"> </span>full<span class="w"> </span>name,<span class="w"> </span>abhishek?<span class="w"> </span>abhishek<span class="w"> </span>prakash
Welcome,<span class="w"> </span>abhishek<span class="w"> </span>prakash
</code></pre></div>

<blockquote>
<p><strong><a href="/article-16001-1.html">Bash 基础知识系列 #3：传递参数和接受用户输入</a></strong></p>
</blockquote>
<h3>4、执行算术运算</h3>
<p>在 Bash Shell 中执行算术运算的语法是这样的：</p>
<div class="highlight"><pre><span></span><code>$((arithmetic_operation))
</code></pre></div>

<p>下面是你可以在 Bash 中执行的算术运算的列表：</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>加法</td>
</tr>
<tr>
<td><code>-</code></td>
<td>减法</td>
</tr>
<tr>
<td><code>*</code></td>
<td>乘法</td>
</tr>
<tr>
<td><code>/</code></td>
<td>整数除法（没有小数）</td>
</tr>
<tr>
<td><code>%</code></td>
<td>模运算（只余）</td>
</tr>
<tr>
<td><code>**</code></td>
<td>指数（a 的 b 次方）</td>
</tr>
</tbody>
</table>
<p>以下是在 Bash 脚本中进行加法和减法的示例：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Enter first number: &quot;</span><span class="w"> </span>num1
<span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Enter second number: &quot;</span><span class="w"> </span>num2

<span class="nv">sum</span><span class="o">=</span><span class="k">$((</span><span class="nv">$num1</span><span class="o">+</span><span class="nv">$num2</span><span class="k">))</span>
<span class="nv">sub</span><span class="o">=</span><span class="k">$((</span><span class="nv">$num1</span><span class="o">-</span><span class="nv">$num2</span><span class="k">))</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;The summation of </span><span class="nv">$num1</span><span class="s2"> and </span><span class="nv">$num2</span><span class="s2"> is </span><span class="nv">$sum</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;The substraction of </span><span class="nv">$num2</span><span class="s2"> from </span><span class="nv">$num1</span><span class="s2"> is </span><span class="nv">$sub</span><span class="s2">&quot;</span>
</code></pre></div>

<p>你可以执行 Shell 脚本，使用你选择的任意数字作为参数。</p>
<p><img alt="" src="/data/attachment/album/202308/23/113725b531151fr0va46dq.png"></p>
<p>如果你尝试除法，会出现一个大问题。Bash 只使用整数。默认情况下，它没有小数的概念。因此，你会得到 10/3 的结果为3，而不是 3.333。</p>
<p>对于浮点数运算，你需要这样使用 <code>bc</code> 命令：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nv">num1</span><span class="o">=</span><span class="m">50</span>
<span class="nv">num2</span><span class="o">=</span><span class="m">6</span>

<span class="nv">result</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$num1</span><span class="s2">/</span><span class="nv">$num2</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;The result is </span><span class="nv">$result</span><span class="s2">&quot;</span>
</code></pre></div>

<p>这个时候，你将看到准确的结果。</p>
<div class="highlight"><pre><span></span><code>    The result is 8.33333333333333333333
</code></pre></div>

<blockquote>
<p><strong><a href="/article-16006-1.html">Bash 基础知识系列 #4：算术运算</a></strong></p>
</blockquote>
<h3>5、在 Bash 脚本中使用数组</h3>
<p>你可以使用 Bash 中的数组来存储同一类别的值，而不是使用多个变量。</p>
<p>你可以像这样声明一个数组：</p>
<div class="highlight"><pre><span></span><code>distros=(Ubuntu Fedora SUSE &quot;Arch Linux&quot; Nix)
</code></pre></div>

<p>要访问一个元素，使用：</p>
<div class="highlight"><pre><span></span><code><span class="err">${</span><span class="n">array_name</span><span class="o">[</span><span class="n">N</span><span class="o">]</span><span class="err">}</span>
</code></pre></div>

<p>像大多数其他的编程语言一样，数组的索引从 0 开始。</p>
<p>你可以像这样显示数组的所有元素：</p>
<div class="highlight"><pre><span></span><code><span class="cp">${</span><span class="n">array</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="cp">}</span>
</code></pre></div>

<p>这样获取数组长度：</p>
<div class="highlight"><pre><span></span><code><span class="cp">${</span><span class="c1">#array_name[@]</span><span class="cp">}</span>
</code></pre></div>

<blockquote>
<p><strong><a href="/article-16016-1.html">Bash 基础知识系列 #5：在 Bash 中使用数组</a></strong></p>
</blockquote>
<h3>6、Bash 中的基础字符串操作</h3>
<p>Bash 能够执行许多字符串操作。</p>
<p>你可以使用这种方式获取字符串长度：</p>
<div class="highlight"><pre><span></span><code><span class="cp">${</span><span class="c1">#string</span><span class="cp">}</span>
</code></pre></div>

<p>连接两个字符串：</p>
<div class="highlight"><pre><span></span><code>str3=$str1$str2
</code></pre></div>

<p>提供子字符串的起始位置和长度来提取子字符串：</p>
<div class="highlight"><pre><span></span><code><span class="cp">${</span><span class="n">string</span><span class="p">:</span><span class="err">$</span><span class="n">pos</span><span class="p">:</span><span class="err">$</span><span class="nb">len</span><span class="cp">}</span>
</code></pre></div>

<p>这里有一个例子：</p>
<p><img alt="" src="/data/attachment/album/202308/23/113726w0rf2l9lb38mm24t.png"></p>
<p>你也可以替换给定字符串的一部分：</p>
<div class="highlight"><pre><span></span><code><span class="cp">${</span><span class="n">string</span><span class="o">/</span><span class="n">substr1</span><span class="o">/</span><span class="n">substr2</span><span class="cp">}</span>
</code></pre></div>

<p>并且你也可以从给定字符串中删除一个子字符串：</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="cp">${</span><span class="n">string</span><span class="o">/</span><span class="n">substring</span><span class="cp">}</span>
</code></pre></div>

<blockquote>
<p><strong><a href="/article-16047-1.html">Bash 基础知识系列 #6：处理字符串操作</a></strong></p>
</blockquote>
<h3>7、在 Bash 中使用条件语句</h3>
<p>你可以通过使用 <code>if</code> 或 <code>if-else</code> 语句为你的 Bash 脚本添加条件逻辑。这些语句以 <code>fi</code> 结束。</p>
<p>单个 <code>if</code> 语句的语法是：</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="nv">condition</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">  </span><span class="nv">your</span><span class="w"> </span><span class="nv">code</span>
<span class="nv">fi</span>
</code></pre></div>

<p>注意使用 <code>[ ... ];</code> 和 <code>then</code> 。</p>
<p><code>if-else</code> 语句的语法是：</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="n"> expression </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="err">##</span><span class="w"> </span><span class="k">execute</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">condition</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">go</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">next</span>
<span class="n">elif</span><span class="w"> </span><span class="o">[</span><span class="n"> expression </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="err">##</span><span class="w"> </span><span class="k">execute</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">condition</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">go</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">next</span>
<span class="k">else</span>
<span class="w">    </span><span class="err">##</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">none</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">conditions</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="k">execute</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">block</span>
<span class="n">fi</span>
</code></pre></div>

<p>这里有一个使用 <code>if-else</code> 语句的 Bash 脚本示例：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Enter the number: &quot;</span><span class="w"> </span>num
<span class="nv">mod</span><span class="o">=</span><span class="k">$((</span><span class="nv">$num</span><span class="o">%</span><span class="m">2</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$mod</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Number </span><span class="nv">$num</span><span class="s2"> is even&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Number </span><span class="nv">$num</span><span class="s2"> is odd&quot;</span>
<span class="k">fi</span>
</code></pre></div>

<p>运行它，你应该能看到这样的结果：</p>
<p><img alt="" src="/data/attachment/album/202308/23/113726q2008j8aw9tjw02n.png"></p>
<p><code>-eq</code> 被称为测试条件或条件操作符。有许多这样的操作符可以给你不同类型的比较：</p>
<p>这些是你可以用来进行数值比较的测试条件操作符：</p>
<table>
<thead>
<tr>
<th>条件</th>
<th>当...时，等同于 true</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$a -lt $b</code></td>
<td><code>$a &lt; $b</code> （<code>$a</code> 是小于 <code>$b</code>）</td>
</tr>
<tr>
<td><code>$a -gt $b</code></td>
<td><code>$a &gt; $b</code> （<code>$a</code> 是大于 <code>$b</code>）</td>
</tr>
<tr>
<td><code>$a -le $b</code></td>
<td><code>$a &lt;= $b</code> （<code>$a</code> 是小于或等于 <code>$b</code>）</td>
</tr>
<tr>
<td><code>$a -ge $b</code></td>
<td><code>$a &gt;= $b</code> （<code>$a</code> 是大于或等于 <code>$b</code>）</td>
</tr>
<tr>
<td><code>$a -eq $b</code></td>
<td><code>$a == $b</code> （<code>$a</code> 等于 <code>$b</code>）</td>
</tr>
<tr>
<td><code>$a -ne $b</code></td>
<td><code>$a != $b</code> （<code>$a</code> 不等于 <code>$b</code>）</td>
</tr>
</tbody>
</table>
<p>如果你在进行字符串比较，你可以使用以下这些测试条件：</p>
<table>
<thead>
<tr>
<th>条件</th>
<th>当...时，等同于 true</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"$a" = "$b"</code></td>
<td><code>$a</code> 等同于 <code>$b</code></td>
</tr>
<tr>
<td><code>"$a" == "$b"</code></td>
<td><code>$a</code> 等同于 <code>$b</code></td>
</tr>
<tr>
<td><code>"$a" != "$b"</code></td>
<td><code>$a</code> 不同于 <code>$b</code></td>
</tr>
<tr>
<td><code>-z "$a"</code></td>
<td><code>$a</code> 是空的</td>
</tr>
</tbody>
</table>
<p>还有些条件用于检查文件类型：</p>
<table>
<thead>
<tr>
<th>条件</th>
<th>当...时，等同于 true</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-f $a</code></td>
<td><code>$a</code> 是一个文件</td>
</tr>
<tr>
<td><code>-d $a</code></td>
<td><code>$a</code> 是一个目录</td>
</tr>
<tr>
<td><code>-L $a</code></td>
<td><code>$a</code> 是一个链接</td>
</tr>
</tbody>
</table>
<blockquote>
<p>? 要特别注意空格。开括号和闭括号、条件之间必须有空格。同样地，条件操作符（<code>-le</code>、<code>==</code> 等）之前和之后必须有空格。</p>
<p><strong><a href="/article-16083-1.html">Bash 基础知识系列 #7：If-Else 语句</a></strong></p>
</blockquote>
<h3>8、使用 Bash 脚本中的循环</h3>
<p>Bash 支持三种类型的循环：<code>for</code>、<code>while</code> 和 <code>until</code>。</p>
<p>这是 <code>for</code> 循环的一个例子：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="k">for</span><span class="w"> </span>num<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..10<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$num</span>
<span class="k">done</span>
</code></pre></div>

<p>运行它，你将看到以下输出：</p>
<div class="highlight"><pre><span></span><code><span class="mf">1</span>
<span class="mf">2</span>
<span class="mf">3</span>
<span class="mf">4</span>
<span class="mf">5</span>
<span class="mf">6</span>
<span class="mf">7</span>
<span class="mf">8</span>
<span class="mf">9</span>
<span class="mf">10</span>
</code></pre></div>

<p>如果你选择使用上面的示例，可以使用 <code>while</code> 循环这样重写：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nv">num</span><span class="o">=</span><span class="m">1</span>
<span class="k">while</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$num</span><span class="w"> </span>-le<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$num</span>
<span class="w">    </span><span class="nv">num</span><span class="o">=</span><span class="k">$((</span><span class="nv">$num</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="k">done</span>
</code></pre></div>

<p>同样，可以使用 <code>until</code> 循环来重写：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nv">num</span><span class="o">=</span><span class="m">1</span>
<span class="k">until</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$num</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$num</span>
<span class="w">    </span><span class="nv">num</span><span class="o">=</span><span class="k">$((</span><span class="nv">$num</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="k">done</span>
</code></pre></div>

<blockquote>
<p>? <code>while</code> 循环和 <code>until</code> 循环非常相似。区别在于：<code>while</code> 循环在条件为真时运行，而 <code>until</code> 循环在条件为假时运行。</p>
<p><strong><a href="/article-16114-1.html">Bash 基础知识系列 #8：For、While 和 Until 循环</a></strong></p>
</blockquote>
<h3>9、在 Bash 脚本中使用函数</h3>
<p>Bash Shell 支持使用函数，这样你不必反复编写相同的代码片段。</p>
<p>这是声明 Bash 函数的通用语法：</p>
<div class="highlight"><pre><span></span><code>function_name() {
  commands
}
</code></pre></div>

<p>这是一个使用带参数的函数的 Bash 脚本样例：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

sum<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">sum</span><span class="o">=</span><span class="k">$((</span><span class="nv">$1</span><span class="o">+</span><span class="nv">$2</span><span class="k">))</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;The sum of </span><span class="nv">$1</span><span class="s2"> and </span><span class="nv">$2</span><span class="s2"> is: </span><span class="nv">$sum</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Let&#39;s use the sum function&quot;</span>
sum<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>

<p>如果你运行该脚本，你将看到以下输出：</p>
<div class="highlight"><pre><span></span><code>Let&#39;s use the sum function
The sum of 1 and 5 is: 6
</code></pre></div>

<blockquote>
<p><strong><a href="/article-16116-1.html">Bash 基础知识系列 #9：Bash 中的函数</a></strong></p>
</blockquote>
<h3>接下来呢？</h3>
<p>这只是一个初窥。这个 Bash 脚本教程只是一篇引言。Bash 脚本的内容还有很多，你可以慢慢地、逐渐地探索。</p>
<p>GNU Bash 参考是一份优秀的在线资源，可以解答你的 Bash 疑问。</p>
<blockquote>
<p><strong><a href="https://www.gnu.org/software/bash/manual/bash.html">GNU Bash 参考</a></strong></p>
</blockquote>
<p>除此之外，你可以下载这本免费书籍来学习更多在此未涵盖的 Bash 内容：</p>
<blockquote>
<p><strong><a href="https://tldp.org/LDP/Bash-Beginners-Guide/Bash-Beginners-Guide.pdf">下载 Bash 初学者指南</a></strong></p>
</blockquote>
<p>一旦你具有足够的 Bash 基础知识，你可以通过这本免费书籍来学习高级 Bash 脚本：</p>
<blockquote>
<p><strong><a href="https://tldp.org/LDP/abs/abs-guide.pdf">下载高级 Bash 编程指南</a></strong></p>
</blockquote>
<p>这两本书至少都有十年的历史，但你仍然可以使用它们来学习 Bash。</p>
<p>? 希望你喜欢这个作为学习 Bash 脚本起点的教程。请在评论区提供你的反馈。</p>
<p><em>（题图：MJ/98f47121-7426-4297-9242-8683ccf0496d）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>