<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>i3 窗口管理器终极定制指南</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Sagar Sharma 在这份超详细的指南中了解如何通过 i3 窗口管理器来自定义系统的外观和体验。 你可能在网上（尤其是通过 r/unixporn …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li class="active"><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/06/i3-chuang-kou-guan-li-qi-zhong-ji-ding-zhi-zhi-nan.html" rel="bookmark"
           title="Permalink to i3 窗口管理器终极定制指南">i3 窗口管理器终极定制指南</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-06-30T10:26:00+02:00">
                Published: Fri 30 June 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/zhuo-mian-ying-yong">桌面应用</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Sagar Sharma</p>
<p><img alt="" src="/data/attachment/album/202306/30/102801n3z6gasul1lliwz0.jpg"></p>
<blockquote>
<p>在这份超详细的指南中了解如何通过 i3 窗口管理器来自定义系统的外观和体验。</p>
</blockquote>
<p>你可能在网上（尤其是通过 <code>r/unixporn</code> 子区）看到过很多炫酷的截图，用户可以根据个人喜好自定义他们的桌面并与大家分享。</p>
<p>这是因为 Linux 允许你自定义桌面体验的方方面面。</p>
<p>而结果？就是比任何 Mac 或 Windows 系统<strong>更具视觉和感知效果</strong>。</p>
<p>来看一下这个 ?</p>
<p><img alt="" src="/data/attachment/album/202306/30/102820uocpcshfuyf888yr.jpg"></p>
<p><strong>看起来像一个 Linux Mint 系统吗？</strong> ?</p>
<p>但是你怎样才能做到这样呢？<strong>自定义你的 Linux 桌面外观是很困难的</strong>。</p>
<p>答案就在于 <strong>窗口管理器</strong>。如果你能配置好窗口管理器，你就能自定义外观。</p>
<p>在本指南中，我将引导你完成使用 <strong>i3 窗口管理器</strong> 进行基本配置。它是 <a href="https://itsfoss.com/best-window-managers/">Linux 上最好的窗口管理器之一</a>。</p>
<blockquote>
<p>? “<ruby> 加料 <rt>  Rice </rt></ruby>” 是一个常用的词汇，用来指代在桌面上进行视觉改进和自定义。<strong>引用自</strong> <a href="https://www.reddit.com/r/unixporn">/r/unixporn</a> （LCTT 译注：“加料”一词来自于购买便宜的亚洲汽车，并给它们安装售后零件，以让它更好地类似于赛车。）</p>
</blockquote>
<p>在遵循本指南之前，你需要了解以下内容：</p>
<ul>
<li>在本指南中，<strong>我将使用 Arch Linux</strong> 来演示步骤，但你可以使用你喜欢的任何发行版，结果也是一样的。</li>
<li>请记住，本指南是 <strong>对 i3 进行“加料”定制的基础</strong>。</li>
</ul>
<p>在按照本指南进行操作后，你应该得到以下预期结果：</p>
<p><img alt="如何在 Linux 中配置 i3 窗口管理器、i3blocks 和 i3gaps" src="/data/attachment/album/202306/30/102821zq7ttqtktfu7pkqb.png"></p>
<blockquote>
<p>? 为了节省你的时间，我已经在 <a href="https://github.com/itsfoss/text-files/tree/master/i3_config_files">GitHub</a> 上上传了与本文相关的所有 i3 配置文件，你可以通过这些文件实现我们在本文中所期望的最终外观。</p>
<p><strong><a href="https://github.com/itsfoss/text-files/tree/master/i3_config_files">下载 i3 配置文件</a></strong></p>
</blockquote>
<p><strong>首先</strong>，让我们开始安装 <strong>i3 窗口管理器</strong>。</p>
<h3>在 Linux 上安装 i3 窗口管理器</h3>
<p>基于 Ubuntu/Debian：</p>
<div class="highlight"><pre><span></span><code>sudo apt install xorg lightdm lightdm-gtk-greeter i3-wm i3lock i3status i3blocks dmenu terminator
</code></pre></div>

<p>Arch Linux：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S xorg lightdm lightdm-gtk-greeter i3-wm i3lock i3status i3blocks dmenu terminator
</code></pre></div>

<p>当你完成安装后，使用以下命令启用 lightdm 服务：</p>
<div class="highlight"><pre><span></span><code>sudo systemctl enable lightdm.service
</code></pre></div>

<p>然后启动 lightdm 服务：</p>
<div class="highlight"><pre><span></span><code>sudo systemctl start lightdm.service
</code></pre></div>

<p>这将启动 lightdm 登录界面，并要求你输入用户名密码。</p>
<p>如果你安装了多个桌面环境，你可以从选择菜单中选择 i3：</p>
<p><img alt="在 Arch Linux 上使用 lightdm 使用 i3 窗口管理器" src="/data/attachment/album/202306/30/102822t5et88z1k5158u7f.png"></p>
<p>当首次登录 i3 时，它会询问你是否要创建一个 i3 配置文件。</p>
<p>按下回车键创建一个新的 i3 配置文件：</p>
<p><img alt="生成 i3 配置文件" src="/data/attachment/album/202306/30/102822hnnnomobnrnerwub.png"></p>
<p>接下来，它会询问你选择 <code>Win</code> 或 <code>Alt</code> 键哪个作为修饰键（<code>mod</code>）。</p>
<p>我建议你选择 <code>Win</code>（或者 <code>Super</code> 键），因为大多数用户已经习惯将其用作快捷键：</p>
<p><img alt="" src="/data/attachment/album/202306/30/102823rd00ll9fd0sdfnqd.png"></p>
<p>现在你可以开始使用 i3 窗口管理器了。</p>
<p>但在我们开始定制之前，让我先介绍一下你如何使用 i3。</p>
<h3>i3 窗口管理器的按键绑定</h3>
<p>让我们从基础知识开始。</p>
<p>窗口管理器的基本功能是将多个窗口水平和垂直地组合在一起，这样你就可以同时监视多个进程。</p>
<p>结果是这样的：</p>
<p><img alt="在 Arch Linux 上使用 i3" src="/data/attachment/album/202306/30/102823pdthka1ttmbmyw9h.png"></p>
<p>你可以使用以下按键绑定执行更多操作：</p>
<table>
<thead>
<tr>
<th>按键绑定</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Mod + Enter</code></td>
<td>打开终端。</td>
</tr>
<tr>
<td><code>Mod + ←</code></td>
<td>切换到左侧窗口。</td>
</tr>
<tr>
<td><code>Mod + →</code></td>
<td>切换到右侧窗口。</td>
</tr>
<tr>
<td><code>Mod + ↑</code></td>
<td>切换到上方窗口。</td>
</tr>
<tr>
<td><code>Mod + ↓</code></td>
<td>切换到下方窗口。</td>
</tr>
<tr>
<td><code>Mod + Shift + ←</code></td>
<td>将窗口移动到左侧。</td>
</tr>
<tr>
<td><code>Mod + Shift + →</code></td>
<td>将窗口移动到右侧。</td>
</tr>
<tr>
<td><code>Mod + Shift + ↑</code></td>
<td>将窗口移动到上方。</td>
</tr>
<tr>
<td><code>Mod + Shift + ↓</code></td>
<td>将窗口移动到下方。</td>
</tr>
<tr>
<td><code>Mod + f</code></td>
<td>将焦点窗口切换到全屏模式。</td>
</tr>
<tr>
<td><code>Mod + v</code></td>
<td>下一个窗口将垂直放置。</td>
</tr>
<tr>
<td><code>Mod + h</code></td>
<td>下一个窗口将水平放置。</td>
</tr>
<tr>
<td><code>Mod + s</code></td>
<td>启用堆叠式窗口布局。</td>
</tr>
<tr>
<td><code>Mod + w</code></td>
<td>启用选项卡式窗口布局。</td>
</tr>
<tr>
<td><code>Mod + Shift + Space</code></td>
<td>启用浮动窗口（针对焦点窗口）。</td>
</tr>
<tr>
<td><code>Mod + 鼠标左键单击</code></td>
<td>使用鼠标拖动整个窗口。</td>
</tr>
<tr>
<td><code>Mod + 0-9</code></td>
<td>切换到另一个工作区。</td>
</tr>
<tr>
<td><code>Mod + Shift + 0-9</code></td>
<td>将窗口移动到另一个工作区。</td>
</tr>
<tr>
<td><code>Mod + d</code></td>
<td>打开应用程序启动器（D 菜单）。</td>
</tr>
<tr>
<td><code>Mod + Shift + q</code></td>
<td>关闭焦点窗口。</td>
</tr>
<tr>
<td><code>Mod + Shift + c</code></td>
<td>重新加载 i3 配置文件。</td>
</tr>
<tr>
<td><code>Mod + Shift + r</code></td>
<td>重启 i3 窗口管理器。</td>
</tr>
<tr>
<td><code>Mod + Shift + e</code></td>
<td>退出 i3 窗口管理器。</td>
</tr>
</tbody>
</table>
<p>我知道按键绑定很多，但如果你每天练习它们，你很快就会习惯。</p>
<p>如果你想知道，你可以根据需要更改按键绑定，后面的指南中我会分享如何做到这一点。</p>
<p>现在，让我们来看看配置部分。</p>
<h3>在 Arch Linux 中启用 AUR</h3>
<p>如果你刚刚安装了 Arch Linux，可能还没有启用 AUR。</p>
<p>这意味着你错过了 Arch Linux 最重要的特性。</p>
<p>要 <a href="https://itsfoss.com/aur-arch-linux/">启用 AUR</a>，你需要使用 AUR 包管理器。在这里，我将使用 <code>yay</code>。</p>
<p>首先，安装 <code>git</code>：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S git
</code></pre></div>

<p>现在，克隆 <code>yay</code> 存储库并切换到 <code>yay</code> 目录：</p>
<div class="highlight"><pre><span></span><code>git clone https://aur.archlinux.org/yay-git.git &amp;&amp; cd yay
</code></pre></div>

<p>最后，构建包：</p>
<div class="highlight"><pre><span></span><code>makepkg -si
</code></pre></div>

<p>还有其他一些 <a href="https://itsfoss.com/best-aur-helpers/">AUR 包管理器</a>，比如 Paru，如果你想使用除 <code>yay</code> 之外的其他工具，你可以继续或者探索其他选项。</p>
<h3>更改 i3 窗口管理器的分辨率</h3>
<p>如果你使用虚拟机运行窗口管理器，可能会遇到问题，尤其是显示分辨率可能被锁定在 <code>1024x768</code> 上，就像我一样。</p>
<p>因此，你需要执行以下命令，指定所需的显示分辨率：</p>
<div class="highlight"><pre><span></span><code>xrandr --output [显示名称] --mode [分辨率]
</code></pre></div>

<p>要找到已连接显示器的名称，你需要使用以下形式的 <code>xrandr</code> 命令：</p>
<div class="highlight"><pre><span></span><code>xrandr | grep -w &#39;connected&#39;
</code></pre></div>

<p><img alt="在 i3 中查找已连接显示器" src="/data/attachment/album/202306/30/102857zxxtczz82tbzipnd.png"></p>
<p>在我的情况下，显示名称是 <code>Virtual-1</code>。</p>
<p>因此，如果我想将分辨率更改为 <code>1920*1080</code>，我需要执行以下命令：</p>
<div class="highlight"><pre><span></span><code>xrandr --output Virtual-1 --mode 1920x1080
</code></pre></div>

<p><strong>但这只是暂时生效</strong>。要使其永久生效，你需要在 i3 配置文件中进行更改。</p>
<p>首先，打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>通过按下 <code>Alt + /</code> 来在 <code>nano</code> 中 <a href="https://linuxhandbook.com/beginning-end-file-nano/">跳到文件末尾</a>，并使用以下语法来永久更改显示分辨率：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> 显示分辨率
exec_always xrandr --output [显示名称] --mode [分辨率]
</code></pre></div>

<p>结果应该是这样的：</p>
<p><img alt="在 i3 中永久更改显示分辨率" src="/data/attachment/album/202306/30/102857ezeazoaha70u423l.png"></p>
<p>完成后，<a href="https://linuxhandbook.com/nano-save-exit/">保存更改并退出 nano</a> 文本编辑器。</p>
<p>现在，使用 <code>Mod + Shift + r</code> 重新启动 i3 窗口管理器，以使你对配置文件所做的更改生效！</p>
<h3>在 i3 窗口管理器中更改壁纸</h3>
<p>默认情况下，i3 的外观比较陈旧，你可能想切换回之前的桌面环境。</p>
<p>但是通过更改壁纸，你可以改变整个系统的氛围。</p>
<p>在 i3 中有多种方式可以更改壁纸，但在这里，我将向你展示如何使用 <code>feh</code> 实用工具。</p>
<p>首先，让我们从安装开始：</p>
<p>对于基于 <strong>Arch 的发行版</strong>：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S feh
</code></pre></div>

<p>对于 <strong>Ubuntu/Debian</strong> 系的发行版：</p>
<div class="highlight"><pre><span></span><code>sudo apt install feh
</code></pre></div>

<p>安装完成后，你可以从互联网上下载你喜欢的壁纸。接下来，<strong>打开 i3 配置文件</strong>：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>跳到文件的末尾，使用如下所示的 <code>feh</code> 命令：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> 显示壁纸
exec_always feh --bg-fill /path/to/wallpaper
</code></pre></div>

<p>在我的情况下，壁纸位于 <code>Downloads</code> 目录中，所以我的命令如下：</p>
<p><img alt="使用 feh 实用工具在 I3 窗口管理器中更改背景" src="/data/attachment/album/202306/30/102857dstn6m5zz7a34rrn.png"></p>
<p>保存更改并退出 <code>nano</code> 文本编辑器。</p>
<p>为了使配置文件的更改生效，使用 <code>Mod + Shift + r</code> 重新启动 i3 窗口管理器。</p>
<p>我的效果如下：</p>
<p><img alt="在 i3 窗口管理器中更改壁纸" src="/data/attachment/album/202306/30/102857x7quo1u1juj7jyyo.png"></p>
<h3>自定义 i3 锁屏界面</h3>
<p>默认情况下，如果你想锁定系统，你需要执行以下命令：</p>
<div class="highlight"><pre><span></span><code>i3lock
</code></pre></div>

<p>锁屏界面如下所示：</p>
<p><img alt="锁定 i3 窗口管理器" src="/data/attachment/album/202306/30/102858men99bu3enni9q54.gif"></p>
<p>下面，我将向你展示：</p>
<ul>
<li>如何创建自定义快捷方式以锁定 i3 会话</li>
<li>如何更改锁屏界面的壁纸</li>
</ul>
<p>为了使锁屏界面更加美观，你需要使用 <code>i3lock-color</code> 包。</p>
<p>但首先，你需要移除现有的 <code>i3lock</code>，因为它会与 <code>i3lock-color</code> 冲突：</p>
<p>在 Arch Linux 上移除它：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -R i3lock
</code></pre></div>

<p>对于 Ubuntu/Debian 用户：</p>
<div class="highlight"><pre><span></span><code>sudo apt remove i3lock
</code></pre></div>

<p>完成后，你可以使用 AUR 包管理器安装 <code>i3lock-color</code>：</p>
<div class="highlight"><pre><span></span><code>yay i3lock-color
</code></pre></div>

<p>如果你使用的是基于 Ubuntu 的系统，你需要从头编译它。你可以在他们的 GitHub 页面上找到 <a href="https://github.com/Raymo111/i3lock-color">详细的说明</a>。</p>
<p>安装完成后，让我们创建一个新目录并创建一个新文件来存储锁屏界面的配置：</p>
<p>安装好 <code>i3lock-color</code> 后，你可以创建一个新目录并创建一个新文件来存储锁屏界面的配置：</p>
<div class="highlight"><pre><span></span><code>mkdir ~/.config/scripts &amp;&amp; nano ~/.config/scripts/lock
</code></pre></div>

<p>将以下文件内容粘贴到文件中，定义锁屏界面的样式：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/sh</span>

<span class="nv">BLANK</span><span class="o">=</span><span class="s1">&#39;#00000000&#39;</span>
<span class="nv">CLEAR</span><span class="o">=</span><span class="s1">&#39;#ffffff22&#39;</span>
<span class="nv">DEFAULT</span><span class="o">=</span><span class="s1">&#39;#00897bE6&#39;</span>
<span class="nv">TEXT</span><span class="o">=</span><span class="s1">&#39;#00897bE6&#39;</span>
<span class="nv">WRONG</span><span class="o">=</span><span class="s1">&#39;#880000bb&#39;</span>
<span class="nv">VERIFYING</span><span class="o">=</span><span class="s1">&#39;#00564dE6&#39;</span>

i3lock<span class="w"> </span><span class="se">\</span>
--insidever-color<span class="o">=</span><span class="nv">$CLEAR</span><span class="w">     </span><span class="se">\</span>
--ringver-color<span class="o">=</span><span class="nv">$VERIFYING</span><span class="w">   </span><span class="se">\</span>
<span class="se">\</span>
--insidewrong-color<span class="o">=</span><span class="nv">$CLEAR</span><span class="w">   </span><span class="se">\</span>
--ringwrong-color<span class="o">=</span><span class="nv">$WRONG</span><span class="w">     </span><span class="se">\</span>
<span class="se">\</span>
--inside-color<span class="o">=</span><span class="nv">$BLANK</span><span class="w">        </span><span class="se">\</span>
--ring-color<span class="o">=</span><span class="nv">$DEFAULT</span><span class="w">        </span><span class="se">\</span>
--line-color<span class="o">=</span><span class="nv">$BLANK</span><span class="w">          </span><span class="se">\</span>
--separator-color<span class="o">=</span><span class="nv">$DEFAULT</span><span class="w">   </span><span class="se">\</span>
<span class="se">\</span>
--verif-color<span class="o">=</span><span class="nv">$TEXT</span><span class="w">          </span><span class="se">\</span>
--wrong-color<span class="o">=</span><span class="nv">$TEXT</span><span class="w">          </span><span class="se">\</span>
--time-color<span class="o">=</span><span class="nv">$TEXT</span><span class="w">           </span><span class="se">\</span>
--date-color<span class="o">=</span><span class="nv">$TEXT</span><span class="w">           </span><span class="se">\</span>
--layout-color<span class="o">=</span><span class="nv">$TEXT</span><span class="w">         </span><span class="se">\</span>
--keyhl-color<span class="o">=</span><span class="nv">$WRONG</span><span class="w">         </span><span class="se">\</span>
--bshl-color<span class="o">=</span><span class="nv">$WRONG</span><span class="w">          </span><span class="se">\</span>
<span class="se">\</span>
--screen<span class="w"> </span><span class="m">1</span><span class="w">                   </span><span class="se">\</span>
--blur<span class="w"> </span><span class="m">9</span><span class="w">                     </span><span class="se">\</span>
--clock<span class="w">                      </span><span class="se">\</span>
--indicator<span class="w">                  </span><span class="se">\</span>
--time-str<span class="o">=</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="w">        </span><span class="se">\</span>
--date-str<span class="o">=</span><span class="s2">&quot;%A, %Y-%m-%d&quot;</span><span class="w">       </span><span class="se">\</span>
--keylayout<span class="w"> </span><span class="m">1</span><span class="w">                </span><span class="se">\</span>
</code></pre></div>

<p>保存更改并退出文本编辑器。</p>
<blockquote>
<p>? 在网上可以找到各种不同的 i3 锁屏样式的 bash 脚本。这只是一个示例，对于大多数情况来说是一个较为简单的选项。</p>
</blockquote>
<p>现在，使用 <a href="https://linuxhandbook.com/chmod-command/">chmod 命令</a> 将该文件设置为可执行文件：</p>
<div class="highlight"><pre><span></span><code>sudo chmod +x .config/scripts/lock
</code></pre></div>

<p>接下来，你需要对配置文件进行一些更改，以添加该配置文件的路径以使其生效。</p>
<p>此外，我将向你展示如何使用自定义键盘快捷键锁定屏幕。</p>
<p>首先，打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>使用 <code>Alt + /</code> 跳至行尾并粘贴以下内容：</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span>锁屏快捷键
<span class="nv">bindsym</span><span class="w"> </span>$<span class="nv">mod</span><span class="o">+</span><span class="nv">x</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="o">/</span><span class="nv">home</span><span class="o">/</span>$<span class="nv">USER</span><span class="o">/</span>.<span class="nv">config</span><span class="o">/</span><span class="nv">scripts</span><span class="o">/</span><span class="nv">lock</span>
</code></pre></div>

<p>在上面的示例中，我将 <code>mod + x</code> 作为锁定屏幕的快捷键，你可以选择任何你喜欢的快捷键。</p>
<p>最后的配置文件将如下所示：</p>
<p><img alt="如何在 Arch Linux 中使用 i3lock-color" src="/data/attachment/album/202306/30/102858rkjukk79wzkwy865.png"></p>
<p>相当不错，不是吗？</p>
<h3>在 i3 窗口管理器中更改主题和图标</h3>
<p>我知道你可能会想到这个问题。</p>
<p>你为什么需要图标呢？你并不仅仅使用窗口管理器来使用命令行工具。</p>
<p>有时候，使用图形界面更加方便，比如使用文件管理器。所以，在处理这些工具时，你希望界面看起来更好看？</p>
<p>因此，在本部分中，我将向你展示：</p>
<ul>
<li>如何在 i3 中更改主题</li>
<li>如何在 i3 中更改图标</li>
</ul>
<p>让我们从安装主题开始。</p>
<p>在这里，我将使用 <code>materia-gtk-theme</code> 和 <code>papirus</code> 图标，但你可以使用任何你喜欢的主题和图标。</p>
<p>在 Arch 中安装主题，使用以下命令：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S materia-gtk-theme papirus-icon-theme
</code></pre></div>

<p>在 Ubuntu/Debian 系统中：</p>
<div class="highlight"><pre><span></span><code>sudo apt install materia-gtk-theme papirus-icon-theme
</code></pre></div>

<p>但仅仅安装还不能完成任务。<strong>你需要像使用 GNOME “<ruby> 调整 <rt>  Tweaks </rt></ruby>” 应用更改主题一样来应用主题。</strong></p>
<p><strong>在 i3 中，你可以使用 <code>lxappearance</code> 工具</strong> 来更改主题和图标。</p>
<p>在 Arch 中安装 <code>lxappearance</code>，使用以下命令：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S lxappearance
</code></pre></div>

<p>在 Ubuntu/Debian 系统中：</p>
<div class="highlight"><pre><span></span><code>sudo apt install lxappearance
</code></pre></div>

<p>安装完成后，使用 <code>Mod + d</code> 启动 D 菜单，然后输入 <code>lxappearance</code>，并在第一个结果上按回车键。</p>
<p>在这里，选择你喜欢的主题。我这里选择 <code>Materia-dark</code>。</p>
<p>选择主题后，点击应用按钮以应用更改：</p>
<p><img alt="" src="/data/attachment/album/202306/30/102858o9c9o59k9zk7c9ia.png"></p>
<p>同样地，要更改图标，选择 “<ruby> 图标主题 <rt>  Icon Theme </rt></ruby>”，选择图标主题，然后点击应用按钮：</p>
<p><img alt="使用 lxappearance 更改 i3 窗口管理器中的图标" src="/data/attachment/album/202306/30/102859pfgywww1a6yfswg9.png"></p>
<p>应用主题和图标后，我的文件管理器如下所示：</p>
<p><img alt="在 i3 窗口管理器中更改主题和图标" src="/data/attachment/album/202306/30/102859dsg97i9ngxxgza5o.png"></p>
<h3>在 i3 窗口管理器中为工作区设置图标</h3>
<p>默认情况下，工作区仅由数字表示，这并不是你想要使用工作区的最理想方式。</p>
<p>因此，在本部分中，我将引导你如何使用合适的图标更改工作区的名称。</p>
<p>为了在配置文件中使用图标，首先你需要安装名为 <code>Awesome</code> 的新字体：</p>
<p>对于基于 Arch 的发行版：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S ttf-font-awesome
</code></pre></div>

<p>对于 Ubuntu/Debian 系统：</p>
<div class="highlight"><pre><span></span><code>sudo apt install fonts-font-awesome
</code></pre></div>

<p>安装完成后，打开 i3 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>在这个配置文件中，找到工作区的部分，你将会看到为每个工作区给出的变量：</p>
<p><img alt="在 i3 配置文件中的工作区变量" src="/data/attachment/album/202306/30/102931n80bo8eowvszz040.png"></p>
<p>在这个部分，你需要用你想要的名称替换给出的工作区数字。</p>
<p>我将把第一个工作区命名为 “programs”，因为<strong>在本教程的后面部分，我将展示如何将特定的应用程序分配到特定的工作区。</strong></p>
<p>我主要使用前 5 个工作区，所以我会相应地命名它们：</p>
<div class="highlight"><pre><span></span><code># 定义默认工作区的名称，稍后我们将在其中配置键绑定。
# 我们使用变量来避免在多个地方重复使用名称。
set $ws1 &quot;1: Terminal&quot;
set $ws2 &quot;2: Firefox&quot;
set $ws3 &quot;3: VMWare&quot;
set $ws4 &quot;4: Spotify&quot;
set $ws5 &quot;5: Shutter&quot;
set $ws6 &quot;6&quot;
set $ws7 &quot;7&quot;
set $ws8 &quot;8&quot;
set $ws9 &quot;9&quot;
set $ws10 &quot;10&quot;
</code></pre></div>

<p>现在让我们为配置文件中提到的每个应用程序添加图标。</p>
<p>你可以 <a href="https://fontawesome.com/v5/cheatsheet">参考 awesome 字体的备忘单</a> 来找到合适的图标。</p>
<p>将图标复制粘贴到名称前面：</p>
<div class="highlight"><pre><span></span><code># 定义默认工作区的名称，稍后我们将在其中配置键绑定。
# 我们使用变量来避免在多个地方重复使用名称。
set $ws1 &quot;1:  Terminal&quot;
set $ws2 &quot;2:  Firefox&quot;
set $ws3 &quot;3:  VMWare&quot;
set $ws4 &quot;4:  Spotify&quot;
set $ws5 &quot;5:  Shutter&quot;
set $ws6 &quot;6&quot;
set $ws7 &quot;7&quot;
set $ws8 &quot;8&quot;
set $ws9 &quot;9&quot;
set $ws10 &quot;10&quot;
</code></pre></div>

<p>不要担心它看起来可怕！</p>
<p>完成后，使用 <code>Mod + e</code> 退出 i3，然后再次登录以应用你刚刚所做的更改。</p>
<p>我的效果如下图所示：</p>
<p><img alt="" src="/data/attachment/album/202306/30/102931wsbrrwobbm2s5i2t.png"></p>
<p>字体看起来太小？是时候解决这个问题了！</p>
<h3>在 i3 中更改标题窗口和状态栏的字体</h3>
<p>首先，让我们安装新的字体（我将在这里使用 Ubuntu 字体）。</p>
<p>要在 Arch 上安装 Ubuntu 字体，请执行以下操作：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S ttf-ubuntu-font-family
</code></pre></div>

<p>如果你使用的是 Ubuntu，你已经安装了这些字体！</p>
<p>安装完成后，打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>在配置文件中，找到 <code>font pango:monospace 8</code> 这一行，这是默认字体。</p>
<p>找到那行后，添加字体名称和大小，如下所示：</p>
<div class="highlight"><pre><span></span><code>font pango:Ubuntu Regular 14
</code></pre></div>

<p>然后，使用 <code>Mod + Shift + r</code> 重新启动窗口管理器，这样就完成了工作：</p>
<p><img alt="" src="/data/attachment/album/202306/30/102931i7k5o1z5ovxfrx5n.png"></p>
<h3>在 i3 窗口管理器中分配应用程序到工作区</h3>
<p>在给工作区命名之后，你会想要将特定的软件分配到相应的工作区中。</p>
<p>例如，如果我将第二个工作区命名为 “Firefox”，那么我只想在该工作区中使用 Firefox。</p>
<p>那么要如何实现呢？</p>
<p>为了做到这一点，你需要找到每个要分配的应用程序的类名。</p>
<p><strong>听起来复杂？</strong> 让我告诉你如何做。</p>
<p>首先，将应用程序和终端并排打开。例如，在这个例子中，我将 Firefox 和终端并排打开：</p>
<p><img alt="并排打开应用程序和终端" src="/data/attachment/album/202306/30/102932vow0ggvqzfqtvdzt.png"></p>
<p>现在，在终端中执行 <code>xprop</code> 命令，它会改变鼠标指针的形状：</p>
<div class="highlight"><pre><span></span><code>xprop
</code></pre></div>

<p>接下来，将鼠标悬停在应用程序上，并在应用程序窗口内的任何位置单击，如图所示：</p>
<p><img alt="在 i3 窗口管理器中查找类名" src="/data/attachment/album/202306/30/102933fupn6zuuu5skil5n.gif"></p>
<p>类名将在以下行的最后一个字符串中找到：</p>
<div class="highlight"><pre><span></span><code>WM_CLASS(STRING) = &quot;Navigator&quot;, &quot;firefox&quot;
</code></pre></div>

<p>在我的情况下，Firefox 浏览器的类名将是 <code>firefox</code>。</p>
<p>对所有你想要分配到工作区的应用程序重复这个过程。</p>
<p><strong>一旦你知道每个你想要分配到工作区的应用程序的类名，打开配置文件：</strong></p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>使用 <code>Alt + /</code> 将 <code>nano</code> 定位到文件末尾，并使用以下语法将应用程序分配到工作区：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> 分配应用到工作区
for_window [class=&quot;类名&quot;] move to workspace $[工作区变量]
</code></pre></div>

<p>作为参考，下面是我为不同应用程序分配了 4 个工作区后的配置文件示例：</p>
<p><img alt="将应用分配到工作区" src="/data/attachment/album/202306/30/102933xs34z04so04ec9im.png"></p>
<p>现在，无论在哪个工作区打开任何应用程序，它都会自动放置在配置的工作区中。非常方便！ ?</p>
<h3>在 i3 窗口管理器中让终端变透明</h3>
<p>要启用透明效果，你需要安装 <code>picom</code> 合成器并对配置文件进行一些更改。</p>
<p>让我们从安装开始。</p>
<p>对于基于 Arch 的发行版：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S picom
</code></pre></div>

<p>对于基于 Ubuntu/Debian 的发行版：</p>
<div class="highlight"><pre><span></span><code>sudo apt install picom
</code></pre></div>

<p>安装完成后，你需要告诉系统使用 <code>picom</code>。</p>
<p>首先打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>在配置文件的末尾插入以下行：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> 使用 picom 合成器实现透明效果
exec_always picom -f
</code></pre></div>

<p>这里，我使用 <code>-f</code> 标志来在切换工作区、打开新应用程序等时启用淡入淡出效果。</p>
<p>保存并退出文本编辑器。</p>
<p>现在，使用 <code>Mod + Shift + r</code> 重新启动 i3。</p>
<p>接下来，打开终端，打开 “<ruby> 首选项 <rt>  Preference </rt></ruby>”，然后选择“<ruby> 配置文件 <rt>  Profiles </rt></ruby>”，选择“<ruby> 背景 <rt>  Background </rt></ruby>”，然后选择“<ruby> 透明背景 <rt>  Transparent background </rt></ruby>”选项。</p>
<p>从这里，你可以调整透明度：</p>
<p><img alt="在 i3 窗口管理器中更改终端背景透明度" src="/data/attachment/album/202306/30/102933luamt555uzrltu7g.png"></p>
<h3>在 i3 窗口管理器中自定义状态栏</h3>
<p>默认情况下，状态栏显示各种信息，但没有图标。</p>
<p>因此，在这个部分，我将展示如何从状态栏中删除一些元素以及如何为它们添加图标。</p>
<p>但是，在这里，我将在 <code>/etc/i3status.conf</code> 中创建一个原始状态栏的副本，以便如果出现任何错误，你可以随时恢复到默认配置。</p>
<p>首先，在 <code>.config</code> 目录下创建一个新的目录：</p>
<div class="highlight"><pre><span></span><code>mkdir .config/i3status
</code></pre></div>

<p>在以下命令中，我使用了 <a href="https://linuxhandbook.com/cp-command/">cp 命令来复制文件</a>：</p>
<div class="highlight"><pre><span></span><code>sudo cp /etc/i3status.conf ~/.config/i3status/i3status.conf
</code></pre></div>

<p>接下来，使用 <a href="https://linuxhandbook.com/chown-command/">chown 命令更改所有者</a>，以便你可以进行所需的更改：</p>
<div class="highlight"><pre><span></span><code>sudo chown $USER:$USER ~/.config/i3status/i3status.conf
</code></pre></div>

<p>现在，你需要通过修改 i3 配置文件来指示窗口管理器使用新的 i3status 配置文件。首先打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>在该配置文件中查找 <code>status_command i3status</code> 这一行。这是你将提供新状态配置文件路径的行。</p>
<p>找到该行后，进行以下更改：</p>
<div class="highlight"><pre><span></span><code>bar {
    status_command i3status -c /home/$USER/.config/i3status/i3status.conf
}
</code></pre></div>

<p>最终的结果应该如下所示：</p>
<p><img alt="在 i3 窗口管理器中更改 i3 状态配置路径" src="/data/attachment/album/202306/30/102935ri04p7zm411zyjvm.png"></p>
<p>保存更改并退出文本编辑器。</p>
<p>现在，让我们从状态栏中删除不必要的指示器。</p>
<p>首先，打开 i3status 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano .config/i3status/i3status.conf
</code></pre></div>

<p>在这里，你可以将以 <code>order</code> 开头的行注释掉，这些行实际上是指示器的变量。</p>
<p><strong>例如，在这里</strong>，我禁用了 <code>ipv6</code>、<code>wireless _first_</code>、<code>battery all</code> 和 <code>load</code> 这些对我来说不必要的指示器：</p>
<div class="highlight"><pre><span></span><code><span class="c1">#order += &quot;ipv6&quot;</span>
<span class="c1">#order += &quot;wireless _first_&quot;</span>
<span class="n">order</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;ethernet _first_&quot;</span>
<span class="c1">#order += &quot;battery all&quot;</span>
<span class="n">order</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;disk /&quot;</span>
<span class="c1">#order += &quot;load&quot;</span>
<span class="n">order</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span>
<span class="n">order</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s2">&quot;tztime local&quot;</span>
</code></pre></div>

<p>然后，<a href="https://fontawesome.com/v5/cheatsheet">在浏览器中打开 awesome font 列表</a>，找到与状态栏中列出的项目相关的适当图标。</p>
<p>在我的设置中，我删除了以下内容：</p>
<ul>
<li>删除了显示可用内存的行</li>
<li>删除了显示以太网连接速度的行</li>
</ul>
<p>最终，我的状态栏如下所示：</p>
<p><img alt="自定义 i3 窗口管理器中的状态栏" src="/data/attachment/album/202306/30/102935jencumgmru7zg2xu.png"></p>
<h3>在 i3 窗口管理器中改变颜色方案</h3>
<p>更改 i3 窗口管理器中的颜色方案是这个指南中最重要的部分，因为窗口管理器最吸引人的地方就是你选择的窗口装饰颜色。</p>
<blockquote>
<p>? 我将为每个颜色声明变量，这样你只需更改变量本身的值，就可以轻松地获得新的颜色方案。</p>
</blockquote>
<p>首先，打开 i3 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>使用 <code>Alt + /</code> 快捷键到达文件末尾，并使用以下语法添加变量来存储颜色：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> 窗口的色彩方案
set $bgcolor    #523d64
set $in-bgcolor #363636
set $text       #ffffff
set $u-bgcolor  #ff0000
set $indicator  #a8a3c1
set $in-text    #969696
<span class="gh">#</span>                       边框            背景            文本            指示器（显示下一个窗口位置的线条）     
client.focused          $bgcolor        $bgcolor        $text           $indicator
client.unfocused        $in-bgcolor     $in-bgcolor     $in-text        $in-bgcolor
client.focused_inactive $in-bgcolor     $in-bgcolor     $in-text        $in-bgcolor
client.urgent           $u-bgcolor      $u-bgcolor      $text           $u-bgcolor
</code></pre></div>

<p>在这里：</p>
<ul>
<li><code>bgcolor</code> 表示背景色。</li>
<li><code>in-bgcolor</code> 表示非活动窗口的背景色。</li>
<li><code>text</code> 是文本颜色。</li>
<li><code>u-bgcolor</code> 表示紧急操作的背景色。</li>
<li><code>indicator</code> 是标示下一个窗口位置的线条的颜色。</li>
<li><code>in-text</code> 是非活动窗口的文本颜色。</li>
</ul>
<p>对于本指南，我仅使用了四个基本类别：</p>
<ul>
<li><code>client.focused</code> 定义了焦点窗口的颜色。</li>
<li><code>client.unfocused</code> 定义了失去焦点时窗口的装饰。</li>
<li><code>client.focused_inactive</code> 当其中一个容器处于焦点但当前没有焦点时，显示的颜色。</li>
<li><code>client.urgent</code> 定义了紧急操作时的颜色。</li>
</ul>
<blockquote>
<p>? 除了这四个类别，还有更多类别，请参考 <a href="https://i3wm.org/docs/userguide.html#client_colors">官方 i3 配置手册</a> 以了解更多信息。</p>
</blockquote>
<p>一旦你对配置文件进行了更改，请使用 <code>Mod + Shift + r</code> 重新启动 i3。</p>
<p>如果你按照我的颜色方案，设置应该如下所示：</p>
<p><img alt="更改 I3 窗口管理器中的窗口颜色" src="/data/attachment/album/202306/30/103014uo5uca5ujzqcnq1a.png"></p>
<p>那么，状态栏的颜色怎么办？当然可以改！</p>
<h4>更改 i3 窗口管理器中状态栏的颜色方案</h4>
<p>在本节中，你将意识到为什么我使用变量来存储颜色，因为我将使用相同的变量来为我的状态栏上色！</p>
<p>要在状态栏中使用颜色，你需要在 i3 配置文件的 <code>bar {...}</code> 部分进行更改。</p>
<p>首先，打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>在配置文件中查找 <code>bar {...}</code> 部分。</p>
<p>找到该部分后，创建一个颜色部分，并为状态栏定义颜色和类别，与你为窗口所做的相同：</p>
<div class="highlight"><pre><span></span><code>bar {
        status_command i3status -c /home/$USER/.config/i3status/i3status.conf
        colors {
                background $bgcolor
                separator #191919
                #                       border          background      text
                focused_workspace       $bgcolor        $bgcolor        $text
                inactive_workspace      $in-bgcolor     $in-bgcolor     $text
                urgent_workspace        $u-bgcolor      $u-bgcolor      $text   

        }
}
</code></pre></div>

<p>在这里，我使用了 <code>focused_workspace</code>、<code>inactive_workspace</code> 和 <code>urgent_workspace</code> 这三个类别，根据需要定义了相应的颜色。</p>
<p>保存更改后，重新启动 i3，状态栏也会显示颜色。</p>
<h3>设置 i3 状态栏的透明度</h3>
<p>本节将向你展示如何使 i3 状态栏透明。</p>
<p>在此之前，让我们先更改 i3 状态栏的字体。</p>
<p>这里，我将使用 Droid 字体，使其看起来干净而带有一种极客风格。</p>
<p>要在 Arch Linux 上安装 Droid 字体，请使用以下命令：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S ttf-droid
</code></pre></div>

<p>对于 Ubuntu/Debian 系统，请使用以下命令：</p>
<div class="highlight"><pre><span></span><code>sudo apt install fonts-droid-fallback
</code></pre></div>

<p>安装完成后，打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>进入 <code>bar {...}</code> 部分，并按下面的示例输入字体名称和大小：</p>
<div class="highlight"><pre><span></span><code>font pango: Droid Sans Mono 11
</code></pre></div>

<p><img alt="在 i3 状态栏中更改字体" src="/data/attachment/album/202306/30/103016y9ieq631zqxdipoo.png"></p>
<p>完成后，请重新启动 i3，字体将会被更改！</p>
<p>要使状态栏透明，你可以使用现有十六进制代码中的额外两个数字来定义透明度。</p>
<p>如果你想要控制透明度，我建议你查看 <a href="https://gist.github.com/lopspower/03fb1cc0ac9f32ef38f4">此指南，其中提供了从 0 到 100% 透明度的代码范围</a>。</p>
<p>为此，我将在配置文件中使用两个新变量。首先，打开配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>在这里，我为背景颜色添加了 60% 的透明度，并为非活跃背景颜色添加了 30% 的透明度：</p>
<div class="highlight"><pre><span></span><code>set $bgcolor    #523d6499
set $in-bgcolor #3636364D
</code></pre></div>

<p>如果你仔细观察，我在现有的十六进制颜色代码中添加了两位数字来定义透明度。例如，使用 <code>99</code> 来表示 <code>60%</code> 的透明度，而使用 <code>4D</code> 来表示 <code>30%</code> 的透明度。</p>
<p>此外，我添加了两个新变量，透明度不同但颜色相同，作为背景使用，使其看起来更好：</p>
<div class="highlight"><pre><span></span><code>set $focused-ws #523d6480
set $bar-color  #523d640D
</code></pre></div>

<p>完成后，让我们修改 <code>bar {...}</code> 部分来应用透明度。</p>
<p>在 <code>bar {...}</code> 中添加两行代码：</p>
<div class="highlight"><pre><span></span><code>i3bar_command i3bar --transparency
tray_output none
</code></pre></div>

<p>请注意，使用 <code>tray_output none</code>，它将不会在托盘中显示任何图标。如果你不希望出现这种行为，则可以跳过此行，只添加第一行以实现透明度。</p>
<p>一旦完成，修改状态栏的颜色方案，例如更改背景颜色、边框和活动工作区的背景。</p>
<p>修改后，配置文件应如下所示：</p>
<p><img alt="使 i3 状态栏透明的配置文件（i3 窗口管理器）" src="/data/attachment/album/202306/30/103016a62ffo7pg1l0z2qf.png"></p>
<p>为了使你所做的更改生效，请重新启动 i3，你将得到透明的窗口和状态栏：</p>
<p><img alt="在 i3 窗口管理器中使状态栏和窗口透明" src="/data/attachment/album/202306/30/103017nc3ztxjpupuukthc.png"></p>
<h3>在窗口管理器中使用 i3blocks</h3>
<p>默认的 i3 状态栏在我看来毫无用处；怎么样让它变得有用起来呢？</p>
<p>在本部分，我将解释如何添加以下功能：</p>
<ul>
<li>软件包更新</li>
<li>内存使用情况</li>
<li>磁盘使用情况</li>
<li>音量指示器</li>
<li>Spotify 指示器</li>
</ul>
<blockquote>
<p>? 要实现这些功能，你需要使用一些脚本，这些脚本将允许你向状态栏添加所需的操作。不用担心，我不会让你手动输入脚本；GitHub 上有各种脚本可供选择，几乎涵盖了你所需的所有方面。</p>
</blockquote>
<p>但在此之前，你需要进行一些配置，以存储脚本并指示 i3 使用 i3block 的配置，而不是使用 i3bar。</p>
<p>如果你在本指南的开头按照给定的说明进行操作，那么 i3blocks 已经安装好了，并且配置文件位于 <code>/etc/i3blocks.conf</code>。</p>
<p><em>如果你希望快速下载块配置文件以进行设置而不阅读其他内容，请点击以下链接：</em></p>
<blockquote>
<p><strong><a href="https://github.com/itsfoss/text-files/tree/master/i3_config_files">i3 配置文件</a></strong></p>
</blockquote>
<p>在本教程中，我将创建一个副本，使用它代替原始的配置文件，因此首先我们要创建一个目录来存储配置文件的副本：</p>
<div class="highlight"><pre><span></span><code>mkdir ~/.config/i3blocks
</code></pre></div>

<p>现在，创建一个原始配置文件的副本：</p>
<div class="highlight"><pre><span></span><code>sudo cp /etc/i3blocks.conf ~/.config/i3blocks/
</code></pre></div>

<p>最后，使用 <code>chown</code> 命令更改文件的所有者，以便你进行所需的更改：</p>
<div class="highlight"><pre><span></span><code>sudo chown $USER:$USER ~/.config/i3blocks/i3blocks.conf
</code></pre></div>

<p>要启用 i3blocks，在 i3 配置文件中进行一些更改：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>进入 <code>bar {...}</code> 部分，在这里，你需要将 <code>status_command</code> 更改为 <code>i3blocks</code> 并添加 i3blocks 配置文件的路径，如下所示：</p>
<p><img alt="在 i3 窗口管理器中启用 i3blocks" src="/data/attachment/album/202306/30/103019tz822cr0znt03zcr.png"></p>
<p>完成后，使用 <code>Mod + Shift + r</code> 重新启动 i3 窗口管理器，整个状态栏都会被更改，并显示如下：</p>
<p><img alt="i3 窗口管理器中 i3blocks 的默认外观" src="/data/attachment/album/202306/30/103020ulb4p4tco5cplcce.png"></p>
<p>不要担心，你将很快使状态栏比以前的 i3bar 更有价值和好看。</p>
<h4>添加磁盘块</h4>
<p>如果你想要显示磁盘剩余空间，可以添加此块。</p>
<p>在这里，我将使用 <code>nano</code> 创建并打开用于磁盘块的配置文件。</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/scripts/disk
</code></pre></div>

<p>然后粘贴以下行：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env sh</span>
<span class="nv">DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">DIR</span><span class="k">:-</span><span class="nv">$BLOCK_INSTANCE</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">DIR</span><span class="k">:-</span><span class="nv">$HOME</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">ALERT_LOW</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ALERT_LOW</span><span class="k">:-</span><span class="nv">$1</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">ALERT_LOW</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ALERT_LOW</span><span class="k">:-</span><span class="nv">10</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="c1"># color will turn red under this value (default: 10%)</span>

<span class="nv">LOCAL_FLAG</span><span class="o">=</span><span class="s2">&quot;-l&quot;</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;-n&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;-n&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">LOCAL_FLAG</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="k">fi</span>

df<span class="w"> </span>-h<span class="w"> </span>-P<span class="w"> </span><span class="nv">$LOCAL_FLAG</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DIR</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span>-v<span class="w"> </span><span class="nv">label</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LABEL</span><span class="s2">&quot;</span><span class="w"> </span>-v<span class="w"> </span><span class="nv">alert_low</span><span class="o">=</span><span class="nv">$ALERT_LOW</span><span class="w"> </span><span class="s1">&#39;</span>
<span class="s1">/\/.*/ {</span>
<span class="s1">    # full text</span>
<span class="s1">    print label $4</span>
<span class="s1">    # short text</span>
<span class="s1">    print label $4</span>
<span class="s1">    use=$5</span>
<span class="s1">    # no need to continue parsing</span>
<span class="s1">    exit 0</span>
<span class="s1">}</span>
<span class="s1">END {</span>
<span class="s1">    gsub(/%$/,&quot;&quot;,use)</span>
<span class="s1">    if (100 - use &lt; alert_low) {</span>
<span class="s1">        # color</span>
<span class="s1">        print &quot;#FF0000&quot;</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">&#39;</span>
</code></pre></div>

<p>保存更改并从文本编辑器中退出。</p>
<p>现在，将此文件设置为可执行：</p>
<div class="highlight"><pre><span></span><code>sudo chmod +x ~/.config/scripts/disk
</code></pre></div>

<p>接下来，打开 I3blocks 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3blocks/i3blocks.conf
</code></pre></div>

<p>根据你想要放置磁盘块的位置，粘贴以下行：</p>
<div class="highlight"><pre><span></span><code><span class="k">[disk]</span>
<span class="na">command</span><span class="o">=</span><span class="s">/home/$USER/.config/scripts/disk</span>
<span class="na">LABEL</span><span class="o">=</span><span class="s"></span>
<span class="c1">#DIR=$HOME</span>
<span class="c1">#ALERT_LOW=10</span>
<span class="na">interval</span><span class="o">=</span><span class="s">30</span>
</code></pre></div>

<p>完成后，保存更改并使用 <code>Mod + Shift + r</code> 重新启动 i3，状态栏中将显示带有磁盘图标的可用磁盘空间。</p>
<h4>添加内存块</h4>
<p>这将是状态栏中指示系统中已使用内存的块。</p>
<p>首先，创建并打开一个新文件用于新的块：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/scripts/memory
</code></pre></div>

<p>然后在新文件中粘贴以下行：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env sh</span>
<span class="nv">TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BLOCK_INSTANCE</span><span class="k">:-</span><span class="nv">mem</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">PERCENT</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PERCENT</span><span class="k">:-</span><span class="nv">true</span><span class="si">}</span><span class="s2">&quot;</span>

awk<span class="w"> </span>-v<span class="w"> </span><span class="nv">type</span><span class="o">=</span><span class="nv">$TYPE</span><span class="w"> </span>-v<span class="w"> </span><span class="nv">percent</span><span class="o">=</span><span class="nv">$PERCENT</span><span class="w"> </span><span class="s1">&#39;</span>
<span class="s1">/^MemTotal:/ {</span>
<span class="s1">    mem_total=$2</span>
<span class="s1">}</span>
<span class="s1">/^MemFree:/ {</span>
<span class="s1">    mem_free=$2</span>
<span class="s1">}</span>
<span class="s1">/^Buffers:/ {</span>
<span class="s1">    mem_free+=$2</span>
<span class="s1">}</span>
<span class="s1">/^Cached:/ {</span>
<span class="s1">    mem_free+=$2</span>
<span class="s1">}</span>
<span class="s1">/^SwapTotal:/ {</span>
<span class="s1">    swap_total=$2</span>
<span class="s1">}</span>
<span class="s1">/^SwapFree:/ {</span>
<span class="s1">    swap_free=$2</span>
<span class="s1">}</span>
<span class="s1">END {</span>
<span class="s1">    if (type == &quot;swap&quot;) {</span>
<span class="s1">        free=swap_free/1024/1024</span>
<span class="s1">        used=(swap_total-swap_free)/1024/1024</span>
<span class="s1">        total=swap_total/1024/1024</span>
<span class="s1">    } else {</span>
<span class="s1">        free=mem_free/1024/1024</span>
<span class="s1">        used=(mem_total-mem_free)/1024/1024</span>
<span class="s1">        total=mem_total/1024/1024</span>
<span class="s1">    }</span>
<span class="s1">    pct=0</span>
<span class="s1">    if (total &gt; 0) {</span>
<span class="s1">        pct=used/total*100</span>
<span class="s1">    }</span>
<span class="s1">    # full text</span>
<span class="s1">    if (percent == &quot;true&quot; ) {</span>
<span class="s1">        printf(&quot;%.1fG/%.1fG (%.f%%)\n&quot;, used, total, pct)</span>
<span class="s1">    } else {</span>
<span class="s1">        printf(&quot;%.1fG/%.1fG\n&quot;, used, total)</span>
<span class="s1">    }</span>
<span class="s1">    # short text</span>
<span class="s1">    printf(&quot;%.f%%\n&quot;, pct)</span>
<span class="s1">    # color</span>
<span class="s1">    if (pct &gt; 90) {</span>
<span class="s1">        print(&quot;#FF0000&quot;)</span>
<span class="s1">    } else if (pct &gt; 80) {</span>
<span class="s1">        print(&quot;#FFAE00&quot;)</span>
<span class="s1">    } else if (pct &gt; 70) {</span>
<span class="s1">        print(&quot;#FFF600&quot;)</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">&#39;</span><span class="w"> </span>/proc/meminfo
</code></pre></div>

<p>保存更改并从文本编辑器中退出。</p>
<p>现在，要使其生效，你需要使用以下命令将此文件设置为可执行：</p>
<div class="highlight"><pre><span></span><code>sudo chmod +x ~/.config/scripts/memory
</code></pre></div>

<p>接下来，打开 i3blocks 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3blocks/i3blocks.conf
</code></pre></div>

<p>并将以下内容粘贴到你希望在状态栏中显示内存使用情况的位置：</p>
<div class="highlight"><pre><span></span><code><span class="k">[memory]</span>
<span class="na">command</span><span class="o">=</span><span class="s">/home/$USER/.config/scripts/memory</span>
<span class="na">label</span><span class="o">=</span><span class="s"></span>
<span class="na">interval</span><span class="o">=</span><span class="s">30</span>
</code></pre></div>

<p>保存更改并从文本编辑器中退出。重新启动 i3 以使更改生效！</p>
<h4>添加更新指示块</h4>
<p>这是最有帮助的指示器，它显示需要更新的旧软件包数量。</p>
<p>首先，使用以下命令安装依赖项以使其正常工作：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S pacman-contrib
</code></pre></div>

<p>现在，创建一个新文件来存储脚本：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/scripts/arch-update
</code></pre></div>

<p>然后粘贴以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">check_output</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>


<span class="k">def</span> <span class="nf">create_argparse</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">_default</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">arg_type</span><span class="o">=</span><span class="nb">str</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">default</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">arg_type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

    <span class="n">strbool</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span>
    <span class="n">strlist</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Check for pacman updates&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-b&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--base_color&#39;</span><span class="p">,</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">_default</span><span class="p">(</span><span class="s1">&#39;BASE_COLOR&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">),</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;base color of the output(default=green)&#39;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-u&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--updates_available_color&#39;</span><span class="p">,</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">_default</span><span class="p">(</span><span class="s1">&#39;UPDATE_COLOR&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">),</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;color of the output, when updates are available(default=yellow)&#39;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-a&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--aur&#39;</span><span class="p">,</span>
        <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_const&#39;</span><span class="p">,</span>
        <span class="n">const</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">_default</span><span class="p">(</span><span class="s1">&#39;AUR&#39;</span><span class="p">,</span> <span class="s1">&#39;False&#39;</span><span class="p">,</span> <span class="n">strbool</span><span class="p">),</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Include AUR packages. Attn: Yaourt must be installed&#39;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-y&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--aur_yay&#39;</span><span class="p">,</span>
        <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_const&#39;</span><span class="p">,</span>
        <span class="n">const</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">_default</span><span class="p">(</span><span class="s1">&#39;AUR_YAY&#39;</span><span class="p">,</span> <span class="s1">&#39;False&#39;</span><span class="p">,</span> <span class="n">strbool</span><span class="p">),</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Include AUR packages. Attn: Yay must be installed&#39;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-q&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--quiet&#39;</span><span class="p">,</span>
        <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_const&#39;</span><span class="p">,</span>
        <span class="n">const</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">_default</span><span class="p">(</span><span class="s1">&#39;QUIET&#39;</span><span class="p">,</span> <span class="s1">&#39;False&#39;</span><span class="p">,</span> <span class="n">strbool</span><span class="p">),</span>
        <span class="n">help</span> <span class="o">=</span> <span class="s1">&#39;Do not produce output when system is up to date&#39;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;-w&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--watch&#39;</span><span class="p">,</span>
        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span>
        <span class="n">default</span> <span class="o">=</span> <span class="n">_default</span><span class="p">(</span><span class="s1">&#39;WATCH&#39;</span><span class="p">,</span> <span class="n">arg_type</span><span class="o">=</span><span class="n">strlist</span><span class="p">),</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Explicitly watch for specified packages. &#39;</span>
        <span class="s1">&#39;Listed elements are treated as regular expressions for matching.&#39;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">get_updates</span><span class="p">():</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">check_output</span><span class="p">([</span><span class="s1">&#39;checkupdates&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="c1"># checkupdates exits with 2 and no output if no updates are available.</span>
        <span class="c1"># we ignore this case and go on</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">exc</span><span class="o">.</span><span class="n">output</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">exc</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="n">updates</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
               <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
               <span class="k">if</span> <span class="n">line</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">updates</span>


<span class="k">def</span> <span class="nf">get_aur_yaourt_updates</span><span class="p">():</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">check_output</span><span class="p">([</span><span class="s1">&#39;yaourt&#39;</span><span class="p">,</span> <span class="s1">&#39;-Qua&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="c1"># yaourt exits with 1 and no output if no updates are available.</span>
        <span class="c1"># we ignore this case and go on</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">exc</span><span class="o">.</span><span class="n">output</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">exc</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="n">aur_updates</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                   <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                   <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;aur/&#39;</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">aur_updates</span>

<span class="k">def</span> <span class="nf">get_aur_yay_updates</span><span class="p">():</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">check_output</span><span class="p">([</span><span class="s1">&#39;yay&#39;</span><span class="p">,</span> <span class="s1">&#39;-Qua&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="n">aur_updates</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">line</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">aur_updates</span>


<span class="k">def</span> <span class="nf">matching_updates</span><span class="p">(</span><span class="n">updates</span><span class="p">,</span> <span class="n">watch_list</span><span class="p">):</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">updates</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">watch_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
                <span class="n">matches</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">matches</span>


<span class="n">label</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;LABEL&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">&lt;span color=&#39;</span><span class="si">{1}</span><span class="s2">&#39;&gt;</span><span class="si">{2}</span><span class="s2">&lt;/span&gt;&quot;</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">create_argparse</span><span class="p">()</span>

<span class="n">updates</span> <span class="o">=</span> <span class="n">get_updates</span><span class="p">()</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">aur</span><span class="p">:</span>
    <span class="n">updates</span> <span class="o">+=</span> <span class="n">get_aur_yaourt_updates</span><span class="p">()</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">aur_yay</span><span class="p">:</span>
    <span class="n">updates</span> <span class="o">+=</span> <span class="n">get_aur_yay_updates</span><span class="p">()</span>

<span class="n">update_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">updates</span><span class="p">)</span>
<span class="k">if</span> <span class="n">update_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">update_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
      <span class="n">info</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">update_count</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; update available&#39;</span>
      <span class="n">short_info</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">update_count</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; update&#39;</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">info</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">update_count</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; updates available&#39;</span>
      <span class="n">short_info</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">update_count</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; updates&#39;</span>

    <span class="n">matches</span> <span class="o">=</span> <span class="n">matching_updates</span><span class="p">(</span><span class="n">updates</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">watch</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">matches</span><span class="p">:</span>
        <span class="n">info</span> <span class="o">+=</span> <span class="s1">&#39; [</span><span class="si">{0}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">matches</span><span class="p">))</span>
        <span class="n">short_info</span> <span class="o">+=</span> <span class="s1">&#39;*&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">updates_available_color</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">updates_available_color</span><span class="p">,</span> <span class="n">short_info</span><span class="p">))</span>
<span class="k">elif</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">base_color</span><span class="p">,</span> <span class="s1">&#39;system up to date&#39;</span><span class="p">))</span>
</code></pre></div>

<p>保存更改并从文本编辑器中退出。</p>
<p>现在，使用以下命令将此文件设置为可执行：</p>
<div class="highlight"><pre><span></span><code>sudo chmod +x ~/.config/scripts/arch-update
</code></pre></div>

<p>接下来，打开 i3blocks 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3blocks/i3blocks.conf
</code></pre></div>

<p>并将以下内容粘贴到所需的位置：</p>
<div class="highlight"><pre><span></span><code><span class="k">[arch-update]</span>
<span class="na">command</span><span class="o">=</span><span class="s">/home/$USER/.config/scripts/arch-update</span>
<span class="na">interval</span><span class="o">=</span><span class="s">3600</span>
<span class="na">markup</span><span class="o">=</span><span class="s">pango</span>
<span class="na">LABEL</span><span class="o">=</span><span class="s"></span>
</code></pre></div>

<p>保存更改并重新加载 i3 窗口管理器，它将显示需要更新的软件包数量。</p>
<p>如果你正在使用 Ubuntu，你可以 <a href="https://github.com/vivien/i3blocks-contrib/tree/master/apt-upgrades">按照 GitHub 页面上的说明</a> 进行操作。</p>
<h4>添加音量指示块</h4>
<p>添加音量指示块需要一些努力，因为你希望它的行为符合预期。你需要实现以下功能：</p>
<ul>
<li>使用媒体控制键管理音量的键绑定</li>
<li>添加一个指示音量的音量块</li>
</ul>
<p>但要做到这一点，首先你需要安装一些依赖项。</p>
<p>如果你使用的是 Arch Linux，请使用以下命令：</p>
<div class="highlight"><pre><span></span><code>sudo pacman -S pulseaudio-alsa pulseaudio-bluetooth pulseaudio-equalizer pulseaudio-jack alsa-utils playerctl
</code></pre></div>

<p>如果你使用的是 Ubuntu/Debian 系统，请使用以下命令：</p>
<div class="highlight"><pre><span></span><code>sudo apt install pulseaudio-module-bluetooth pulseaudio-equalizer pulseaudio-module-jack alsa-utils playerctl
</code></pre></div>

<p>接下来，让我们看看如何在 i3 窗口管理器中启用媒体控制键。</p>
<p>首先，打开 i3 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>转到文件的末尾，并粘贴以下内容：</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">Key</span><span class="w"> </span><span class="nv">bindings</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Media</span><span class="w"> </span><span class="nv">control</span><span class="w"> </span><span class="nv">keys</span>
<span class="nv">bindsym</span><span class="w"> </span><span class="nv">XF86AudioPlay</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="nv">playerctl</span><span class="w"> </span><span class="nv">play</span>
<span class="nv">bindsym</span><span class="w"> </span><span class="nv">XF86AudioPause</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="nv">playerctl</span><span class="w"> </span><span class="k">pause</span>
<span class="nv">bindsym</span><span class="w"> </span><span class="nv">XF86AudioNext</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="nv">playerctl</span><span class="w"> </span><span class="k">next</span>
<span class="nv">bindsym</span><span class="w"> </span><span class="nv">XF86AudioPrev</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="nv">playerctl</span><span class="w"> </span><span class="nv">previous</span>
</code></pre></div>

<p>现在，让我们为此块创建一个新文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/scripts/volume
</code></pre></div>

<p>然后粘贴以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MIXER</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">MIXER</span><span class="o">=</span><span class="s2">&quot;default&quot;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>-v<span class="w"> </span>pulseaudio<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>pulseaudio<span class="w"> </span>--check<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="c1"># pulseaudio is running, but not all installations use &quot;pulse&quot;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span>amixer<span class="w"> </span>-D<span class="w"> </span>pulse<span class="w"> </span>info<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="nv">MIXER</span><span class="o">=</span><span class="s2">&quot;pulse&quot;</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>jack<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">MIXER</span><span class="o">=</span><span class="s2">&quot;jackplug&quot;</span>
<span class="w">    </span><span class="nv">MIXER</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">$MIXER</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SCONTROL</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">SCONTROL</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BLOCK_INSTANCE</span><span class="k">:-$(</span>amixer<span class="w"> </span>-D<span class="w"> </span><span class="nv">$MIXER</span><span class="w"> </span>scontrols<span class="w"> </span><span class="p">|</span>
<span class="w">                      </span>sed<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;s/Simple mixer control &#39;\([^&#39;]*\)&#39;,0/\1/p&quot;</span><span class="w"> </span><span class="p">|</span>
<span class="w">                      </span>head<span class="w"> </span>-n1
<span class="w">                    </span><span class="k">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>

<span class="c1"># The first parameter sets the step to change the volume by (and units to display)</span>
<span class="c1"># This may be in in % or dB (eg. 5% or 3dB)</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$STEP</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">STEP</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">5</span><span class="p">%</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">fi</span>

<span class="nv">NATURAL_MAPPING</span><span class="o">=</span><span class="si">${</span><span class="nv">NATURAL_MAPPING</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NATURAL_MAPPING</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">AMIXER_PARAMS</span><span class="o">=</span><span class="s2">&quot;-M&quot;</span>
<span class="k">fi</span>

<span class="c1">#------------------------------------------------------------------------</span>

capability<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="c1"># Return &quot;Capture&quot; if the device is a capture device</span>
<span class="w">  </span>amixer<span class="w"> </span><span class="nv">$AMIXER_PARAMS</span><span class="w"> </span>-D<span class="w"> </span><span class="nv">$MIXER</span><span class="w"> </span>get<span class="w"> </span><span class="nv">$SCONTROL</span><span class="w"> </span><span class="p">|</span>
<span class="w">    </span>sed<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;s/  Capabilities:.*cvolume.*/Capture/p&quot;</span>
<span class="o">}</span>

volume<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>amixer<span class="w"> </span><span class="nv">$AMIXER_PARAMS</span><span class="w"> </span>-D<span class="w"> </span><span class="nv">$MIXER</span><span class="w"> </span>get<span class="w"> </span><span class="nv">$SCONTROL</span><span class="w"> </span><span class="k">$(</span>capability<span class="k">)</span>
<span class="o">}</span>
</code></pre></div>

<p>保存更改并退出配置文件。</p>
<p>接下来，打开 I3blocks 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3blocks/i3blocks.conf
</code></pre></div>

<p>然后粘贴以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="k">[volume]</span>
<span class="na">command</span><span class="o">=</span><span class="s">/home/$USER/.config/scripts/volume</span>
<span class="na">LABEL</span><span class="o">=</span><span class="s">♪</span>
<span class="c1">#LABEL=VOL </span>
<span class="na">interval</span><span class="o">=</span><span class="s">1</span>
<span class="na">signal</span><span class="o">=</span><span class="s">10</span>
<span class="c1">#STEP=5%</span>
<span class="na">MIXER</span><span class="o">=</span><span class="s">default</span>
<span class="c1">#SCONTROL=[determined automatically]</span>
<span class="c1">#NATURAL_MAPPING=0</span>
</code></pre></div>

<p>保存更改并重新加载 i3，从现在开始，音量快捷键将起作用，并且指示器将按预期工作！</p>
<blockquote>
<p>? 如果遇到音频/视频不工作等问题，请使用此命令，它应该解决该问题：</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="n">systemctl</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="k">disable</span><span class="w"> </span><span class="o">--</span><span class="n">now</span><span class="w"> </span><span class="n">pipewire</span><span class="p">.{</span><span class="n">socket</span><span class="p">,</span><span class="n">service</span><span class="p">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="o">--</span><span class="n">user</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="n">pipewire</span><span class="p">.</span><span class="n">socket</span>
</code></pre></div>

<h4>添加 Spotify 块</h4>
<p>我将使用 <a href="https://github.com/firatakandere">firatakandere</a> 的脚本来添加此功能。在继续之前，你可以先查看一下该脚本。</p>
<p>首先，创建并打开一个用于 Spotify 块的新文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/scripts/spotify.py
</code></pre></div>

<p>然后粘贴以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/python</span>

<span class="kn">import</span> <span class="nn">dbus</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">bus</span> <span class="o">=</span> <span class="n">dbus</span><span class="o">.</span><span class="n">SessionBus</span><span class="p">()</span>
    <span class="n">spotify</span> <span class="o">=</span> <span class="n">bus</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="s2">&quot;org.mpris.MediaPlayer2.spotify&quot;</span><span class="p">,</span> <span class="s2">&quot;/org/mpris/MediaPlayer2&quot;</span><span class="p">)</span>


    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;BLOCK_BUTTON&#39;</span><span class="p">):</span>
        <span class="n">control_iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="o">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">spotify</span><span class="p">,</span> <span class="s1">&#39;org.mpris.MediaPlayer2.Player&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;BLOCK_BUTTON&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="n">control_iface</span><span class="o">.</span><span class="n">Previous</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;BLOCK_BUTTON&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">):</span>
            <span class="n">control_iface</span><span class="o">.</span><span class="n">PlayPause</span><span class="p">()</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;BLOCK_BUTTON&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;3&#39;</span><span class="p">):</span>
            <span class="n">control_iface</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>

    <span class="n">spotify_iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="o">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">spotify</span><span class="p">,</span> <span class="s1">&#39;org.freedesktop.DBus.Properties&#39;</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">spotify_iface</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s1">&#39;org.mpris.MediaPlayer2.Player&#39;</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="s1">&#39;xesam:artist&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; - &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="s1">&#39;xesam:title&#39;</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="s1">&#39;xesam:artist&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; - &quot;</span> <span class="o">+</span> <span class="n">props</span><span class="p">[</span><span class="s1">&#39;xesam:title&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">exit</span>
<span class="k">except</span> <span class="n">dbus</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">DBusException</span><span class="p">:</span>
    <span class="n">exit</span>
</code></pre></div>

<p>完成后，使用以下命令使其可执行：</p>
<div class="highlight"><pre><span></span><code>sudo chmod +x ~/.config/scripts/spotify.py
</code></pre></div>

<p>现在，打开 I3blocks 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3blocks/i3blocks.conf
</code></pre></div>

<p>然后粘贴以下内容（建议将其粘贴到块的开头）：</p>
<div class="highlight"><pre><span></span><code><span class="k">[spotify]</span>
<span class="na">label</span><span class="o">=</span><span class="s"></span>
<span class="na">command</span><span class="o">=</span><span class="s">/home/$USER/.config/scripts/spotify.py</span>
<span class="na">color</span><span class="o">=</span><span class="c1">#81b71a</span>
<span class="na">interval</span><span class="o">=</span><span class="s">5</span>
</code></pre></div>

<p>保存更改，退出配置文件，并重新启动 i3。</p>
<p>添加了我提到的块后，状态栏将如下所示：</p>
<p><img alt="在 i3 窗口管理器中定制 i3blocks " src="/data/attachment/album/202306/30/103114h87ph979097p705c.jpg"></p>
<p>你可以查看我的主屏幕，其中包含这些块（点击下方的图片查看）。</p>
<p><img alt="在 i3 窗口管理器中定制 i3blocks " src="/data/attachment/album/202306/30/103115a7v0jci0zc70woew.png"></p>
<blockquote>
<p>? 如果你对那些默认块（文档和问候语）的位置感到困惑，我用了几个注释将它们禁用以实现所示的外观！</p>
</blockquote>
<h3>在 Linux 中使用 i3gaps</h3>
<p>如果你想在窗口之间添加间隙，可以使用 <code>i3gaps</code>。在颜色方案之后，<code>i3gaps</code> 是这个指南中最关键的元素。</p>
<p>要使用间隙，你必须对 i3 配置文件进行一些更改。</p>
<p>打开 i3 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano ~/.config/i3/config
</code></pre></div>

<p>转到文件的末尾，并粘贴以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> default gaps
gaps inner 15
gaps outer 5

<span class="gh">#</span> gaps
set $mode_gaps Gaps: (o)uter, (i)nner, (h)orizontal, (v)ertical, (t)op, (r)ight, (b)ottom, (l)eft
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_horiz Horizontal Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_verti Vertical Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_top Top Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_right Right Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_bottom Bottom Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_left Left Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode &quot;$mode_gaps&quot;

mode &quot;$mode_gaps&quot; {
        bindsym o      mode &quot;$mode_gaps_outer&quot;
        bindsym i      mode &quot;$mode_gaps_inner&quot;
        bindsym h      mode &quot;$mode_gaps_horiz&quot;
        bindsym v      mode &quot;$mode_gaps_verti&quot;
        bindsym t      mode &quot;$mode_gaps_top&quot;
        bindsym r      mode &quot;$mode_gaps_right&quot;
        bindsym b      mode &quot;$mode_gaps_bottom&quot;
        bindsym l      mode &quot;$mode_gaps_left&quot;
        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}

mode &quot;$mode_gaps_outer&quot; {
        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
mode &quot;$mode_gaps_inner&quot; {
        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
mode &quot;$mode_gaps_horiz&quot; {
        bindsym plus  gaps horizontal current plus 5
        bindsym minus gaps horizontal current minus 5
        bindsym 0     gaps horizontal current set 0

        bindsym Shift+plus  gaps horizontal all plus 5
        bindsym Shift+minus gaps horizontal all minus 5
        bindsym Shift+0     gaps horizontal all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
mode &quot;$mode_gaps_verti&quot; {
        bindsym plus  gaps vertical current plus 5
        bindsym minus gaps vertical current minus 5
        bindsym 0     gaps vertical current set 0

        bindsym Shift+plus  gaps vertical all plus 5
        bindsym Shift+minus gaps vertical all minus 5
        bindsym Shift+0     gaps vertical all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
mode &quot;$mode_gaps_top&quot; {
        bindsym plus  gaps top current plus 5
        bindsym minus gaps top current minus 5
        bindsym 0     gaps top current set 0

        bindsym Shift+plus  gaps top all plus 5
        bindsym Shift+minus gaps top all minus 5
        bindsym Shift+0     gaps top all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
mode &quot;$mode_gaps_right&quot; {
        bindsym plus  gaps right current plus 5
        bindsym minus gaps right current minus 5
        bindsym 0     gaps right current set 0

        bindsym Shift+plus  gaps right all plus 5
        bindsym Shift+minus gaps right all minus 5
        bindsym Shift+0     gaps right all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
mode &quot;$mode_gaps_bottom&quot; {
        bindsym plus  gaps bottom current plus 5
        bindsym minus gaps bottom current minus 5
        bindsym 0     gaps bottom current set 0

        bindsym Shift+plus  gaps bottom all plus 5
        bindsym Shift+minus gaps bottom all minus 5
        bindsym Shift+0     gaps bottom all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
mode &quot;$mode_gaps_left&quot; {
        bindsym plus  gaps left current plus 5
        bindsym minus gaps left current minus 5
        bindsym 0     gaps left current set 0

        bindsym Shift+plus  gaps left all plus 5
        bindsym Shift+minus gaps left all minus 5
        bindsym Shift+0     gaps left all set 0

        bindsym Return mode &quot;$mode_gaps&quot;
        bindsym Escape mode &quot;default&quot;
}
</code></pre></div>

<p>保存更改并退出配置文件。</p>
<p>使用 <code>Mod + Shift + r</code> 重新加载 i3，并会看到窗口之间的间隙：</p>
<p><img alt="在 i3 窗口管理器中使用 i3gaps" src="/data/attachment/album/202306/30/103149s6kreu8rcuqswwle.png"></p>
<p>但是，如果你想调整间隙的大小怎么办？这非常简单，只需要简单的步骤即可完成：</p>
<ul>
<li>按下 <code>Mod + Shift + g</code> 进入间隙模式</li>
<li>使用给定的选项选择要更改的内容</li>
<li>使用 <code>+</code> 或 <code>-</code> 增加/减小间隙</li>
<li>完成后，按 <code>Esc</code> 键退出间隙模式</li>
</ul>
<p>就是这样！</p>
<h3>我们忘记自定义终端了吗？</h3>
<p>不用担心；你可以 <a href="https://itsfoss.com/zsh-ubuntu/">切换到 Zsh</a>，这是一个不同的 shell，使终端看起来与众不同，或者探索一些鲜为人知的 <a href="https://itsfoss.com/shells-linux/">Linux Shell</a>。</p>
<p>无论如何，你都可以 <a href="https://itsfoss.com/customize-linux-terminal/">自定义现有终端</a>，或选择不同的 <a href="https://itsfoss.com/linux-terminal-emulators/">终端模拟器</a>。</p>
<p><strong>我希望你不再畏难如何美化系统！</strong> ?</p>
<p><em>如果你有任何建议或想展示你的配置，请在评论部分留言。</em></p>
<p><em>（题图：MJ/2874542d-6a8f-4b27-8e65-477389a0dcca）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>