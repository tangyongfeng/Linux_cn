<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>'Rust 基础系列 #1: 创建并运行你的首个 Rust 程序'</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Pratham Patel 在 Rust 编程系列的第一篇中，你将学习如何用 Rust 编写和执行你的第一个程序。 Rust 是最快风靡开发者和科技公司的系 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/04/rust-ji-chu-xi-lie-1-chuang-jian-bing-yun-xing-ni-de-shou-ge-rust-cheng-xu.html" rel="bookmark"
           title="Permalink to 'Rust 基础系列 #1: 创建并运行你的首个 Rust 程序'">'Rust 基础系列 #1: 创建并运行你的首个 Rust 程序'</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-04-10T16:42:58+02:00">
                Published: Mon 10 April 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Pratham Patel</p>
<p><img alt="" src="/data/attachment/album/202304/10/164143yksc0b56bbs0itiu.jpg"></p>
<blockquote>
<p>在 Rust 编程系列的第一篇中，你将学习如何用 Rust 编写和执行你的第一个程序。</p>
</blockquote>
<p>Rust 是最快风靡开发者和科技公司的系统编程语言之一。日常使用它的开发者将其评为<strong>最受欢迎的编程语言</strong>之一，而它 <a href="https://survey.stackoverflow.co/2022/?ref=itsfoss.com#section-most-loved-dreaded-and-wanted-programming-scripting-and-markup-languages">已经连续七年获此殊荣了</a>！</p>
<p>它是如此的受欢迎，以致于现在有两股巨大的推力将其带入 Linux 生态系统中：</p>
<ul>
<li><a href="https://news.itsfoss.com/linux-kernel-6-1-release/?ref=itsfoss.com">将 Rust 作为 Linux 内核的二级支持语言</a></li>
<li>System76 <a href="https://news.itsfoss.com/pop-os-cosmic-rust/?ref=itsfoss.com">正在使用 Rust 重写他们自己的桌面环境</a></li>
</ul>
<p>而这还仅仅是在 Linux 生态系统中。安卓上的蓝牙软件 <a href="https://android.googlesource.com/platform//system/bt/+/83498aa554aea220fcff30b6310a0a7b4557969f/gd/rust/linux/stack/src/bluetooth.rs?ref=itsfoss.com">Gabeldorsche</a> 现在也是由 Rust 编写的。</p>
<p>你是否也看到了 Rust 的流行趋势？那么你或许也想学习使用 Rust 进行编程。</p>
<h3>为什么你要考虑 Rust 而不是其他编程语言？</h3>
<p>首先，Rust 是一门 <strong>类型安全的编程语言</strong> 并且 <strong>拥有极其严格的编译期检查</strong>。因此，你首先会 “被迫” 写不出不安全的代码（好吧，通常是这样）。</p>
<p>Rust 编程语言有以下 “目标”：</p>
<ul>
<li><strong>性能</strong>：Rust 的二进制文件和 C 语言的二进制文件一样快，有时甚至超过了 C++ 的二进制文件！</li>
<li><strong>内存安全</strong>：Rust 非常重视内存安全。</li>
<li><strong>并发性</strong>：对内存安全的关注消除了很多类似竞争的情况，并帮助你在程序中无畏并发。</li>
</ul>
<p>以下是在 C/C++ 等语言中可能犯的一些错误（但 Rust 不会）：</p>
<ul>
<li>释放后使用</li>
<li>双重释放</li>
<li>越界访问</li>
<li>使用 <code>NULL</code></li>
<li>不适当的指针运算或访问</li>
<li>使用未经初始化的变量</li>
<li>线程不安全的多线程</li>
</ul>
<p>看看 <a href="https://langui.sh/2019/07/23/apple-memory-safety/?ref=itsfoss.com">苹果</a>、<a href="https://msrc-blog.microsoft.com/2019/07/18/we-need-a-safer-systems-programming-language/?ref=itsfoss.com">微软</a>、<a href="https://security.googleblog.com/2019/05/queue-hardening-enhancements.html?ref=itsfoss.com">谷歌</a> 等大公司因这类 <a href="https://docs.google.com/spreadsheets/d/1lkNJ0uQwbeC1ZTRrxdtuPLCIl7mlUreoKfSIgajnSyY/view?ref=itsfoss.com#gid=1190662839">0day</a> 错误而引起的问题吧。</p>
<p>现在你可能知道了为什么要选择 Rust 语言而不是其他编程语言，让我们开始学习 Rust 语言的系列教程吧！</p>
<h3>目标受众</h3>
<p>出于对 Rust 的热爱，我写了这个系列的 Rust 教程，帮助你熟悉 Rust 编程的概念。</p>
<p>这个教程系列是为已经熟悉 C 和 C++ 等编程语言的人准备的。我假设你已经知道了 <em>变量</em>、<em>函数</em>、<em>循环</em> 等基本术语。</p>
<p>我对你的唯一要求是你不懈的坚持与努力。</p>
<h3>安装 Rust 工具链</h3>
<p>我希望你能在本地安装 <a href="https://itsfoss.com/install-rust-cargo-ubuntu-linux/">Rust 工具链</a>。你可以通过运行以下命令来做到这一点： （LCTT 译注：如果你使用 Linux 发行版，请不要直接安装软件源里的 Rust 工具链，尽管这样看起来很便捷。）</p>
<div class="highlight"><pre><span></span><code>curl --proto &#39;=https&#39; --tlsv1.3 -sSf https://sh.rustup.rs | sh
</code></pre></div>

<p><img alt="Installing Rust on Ubuntu Linux" src="/data/attachment/album/202304/10/164259fn33ln3kvq717nc7.svg"></p>
<p>除了 Rust 基本工具链，我还建议再安装一些工具，这些工具将在开发过程中帮助你：</p>
<div class="highlight"><pre><span></span><code>rustup component add rust-src rust-analyzer rust-analysis
</code></pre></div>

<p>你还需要 <a href="https://learnubuntu.com/install-gcc/?ref=itsfoss.com">安装 gcc</a>。否则，你可能会遇到“链接器 <code>cc</code> 未找到”的错误。该软件包在不同的发行版中都被称为 gcc。</p>
<p>在 Ubuntu 和 Debian 上使用：</p>
<div class="highlight"><pre><span></span><code>sudo apt install gcc
</code></pre></div>

<blockquote>
<p>? 如果你不希望在本地安装 Rust 工具链，不用担心。你还可以直接在你的浏览器中运行 Rust 代码！只要到 <a href="https://play.rust-lang.org/?ref=itsfoss.com">Rust 试验场</a> 并把所讨论的代码粘贴在那里。</p>
</blockquote>
<h3>Hello Rust!</h3>
<p>自从 <ruby> 丹尼斯·里奇 <rt>  Dennis Ritchie </rt></ruby> 和 <ruby> 布莱恩・柯林汉 <rt>  Brian Kernighan </rt></ruby> 用 “Hello World” 程序介绍了 C 语言后，在 UNIX 世界里，你学习的任何新编程语言第一步都这样做，这已经成为一种习惯。</p>
<p>因此，让我们也用 Rust 编写我们的 Hello World 程序。</p>
<p>我将在我的家目录里 <a href="https://itsfoss.com/make-directories/">新建一个项目目录</a> 叫做 <code>learn-rust-its-foss</code>。然后，在这里我将新建一个叫 <code>hello-world</code> 的目录。最后，在里面新建 <code>main.rs</code> 文件：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 这串代码将打印字符</span>
<span class="c1">// &quot;Hello world!&quot; 将被打印到 `标准输出`</span>

<span class="n">fn</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">println</span>!<span class="p">(</span><span class="s">&quot;Hello world!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<blockquote>
<p>? 就像 C、C++ 和 Java 源代码文件相应的扩展名是 <code>.c</code>、<code>.cpp</code> 和 <code>.java</code>，Rust 的源文件扩展名是 <code>.rs</code>。</p>
</blockquote>
<p>作为一个 C/C++ 程序员，你可能已经在 <a href="https://learnubuntu.com/install-gcc/?ref=itsfoss.com">Linux 上使用 GCC</a>，在 macOS 上使用 <code>Clang</code>，在 Windows 上使用 MSVC。但是为了编译 Rust 代码，该语言的创造者自己提供了一个官方的 <code>rustc</code> 编译器。</p>
<p>运行 Rust 程序和 <a href="https://itsfoss.com/run-c-program-linux/">执行 C/C++ 程序</a> 是一样的。你首先编译代码，然后得到可执行文件，最后再运行这个可执行文件从而来运行代码。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls
main.rs

$<span class="w"> </span>rustc<span class="w"> </span>main.rs

$<span class="w"> </span>ls
main<span class="w">  </span>main.rs

$<span class="w"> </span>./main
Hello<span class="w"> </span>world!
</code></pre></div>

<p>很好！</p>
<h3>解读 Rust 代码</h3>
<p>现在你已经编写、编译并运行了你的第一个 Rust 程序，让我们对 “Hello World” 的代码进行解读，并理解每一部分。</p>
<div class="highlight"><pre><span></span><code>fn main() {
}
</code></pre></div>

<p><code>fn</code> 关键字用来在 Rust 中声明一个函数。在它后面 <code>main</code> 是这个被声明函数的名字。像许多编译型编程语言一样，<code>main</code> 是一个特殊的函数，用来作为你的程序的入口。</p>
<p>任何写在 <code>main</code> 函数里的代码（在大括号 <code>{</code> <code>}</code> 之间）将在程序被启动时运行。</p>
<h4>println 宏</h4>
<p>在 <code>main</code> 函数中, 有一个语句（LCTT 译注：“语句” 区别于 “表达式”）:</p>
<div class="highlight"><pre><span></span><code>println!(&quot;Hello world!&quot;);
</code></pre></div>

<p>就像 C 语言的标准库有 <code>printf</code> 函数一样，Rust 语言的标准库有 <code>println</code> <strong>宏</strong>。宏类似于函数，但它以<strong>感叹号</strong>（<code>!</code>）来区分。你将在本系列的后面学习宏和函数的知识。</p>
<p><code>println</code> 宏接收一个格式化的字符串，并把它放到程序的标准输出中（在我们的例子中，就是终端）。由于我希望输出一些文本而不是一个变量，我将把文本放在双引号（<code>"</code>）内。最后，我用一个分号来结束这个语句，表示语句的结束。</p>
<blockquote>
<p>? 你只需知道，任何看起来像函数调用但在开头括号前有感叹号的东西，就是 Rust 编程语言中的一个宏。</p>
</blockquote>
<h4>注释</h4>
<p>Rust 遵循已知的 C 编程语言的注释风格。单行注释以两个正斜杠（<code>//</code>）开始，多行注释以 <code>/*</code> 开始，以 <code>*/</code> 结束。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 这是一个多行注释</span>
<span class="c1">// 但是没有什么阻止你在</span>
<span class="c1">// 第二行或第三行也这样写</span>

<span class="o">/*</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span>这是一个“真•多行注释”
<span class="w"> </span><span class="o">*</span><span class="w"> </span>它看起来比较漂亮
<span class="w"> </span><span class="o">*/</span>
</code></pre></div>

<h3>总结</h3>
<p>你刚刚通过 Hello World 程序迈出了用 Rust 写代码的第一步。</p>
<p>作为一种练习，也许你可以编写并执行一个打印出 <code>Yes! I did Rust</code> 的 Rust 程序。</p>
<p>在本系列的下一部分中，你将学习在 Rust 程序中使用变量。敬请期待！</p>
<p><em>（题图：MJ:computer sci-fi ,code secure ,"rust" ,gold blue slive ,background dark, high resolution super detailed）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>