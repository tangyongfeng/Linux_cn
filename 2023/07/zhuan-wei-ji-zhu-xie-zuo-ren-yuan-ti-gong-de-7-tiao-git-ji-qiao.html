<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>专为技术写作人员提供的 7 条 Git 技巧</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Maximilian Kolb 跟随这个演示来了解我如何使用 Git 为 Foreman 编写文档。 作为 ATIX 的技术作家，我的任务包括为 Foreman 创建和维护存放在 github.com …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/07/zhuan-wei-ji-zhu-xie-zuo-ren-yuan-ti-gong-de-7-tiao-git-ji-qiao.html" rel="bookmark"
           title="Permalink to 专为技术写作人员提供的 7 条 Git 技巧">专为技术写作人员提供的 7 条 Git 技巧</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-07-29T08:21:20+02:00">
                Published: Sat 29 July 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Maximilian Kolb</p>
<p><img alt="" src="/data/attachment/album/202307/29/082043e587yilezk45ayin.jpg"></p>
<blockquote>
<p>跟随这个演示来了解我如何使用 Git 为 Foreman 编写文档。</p>
</blockquote>
<p>作为 <a href="https://atix.de/en/">ATIX</a> 的技术作家，我的任务包括为 <a href="https://opensource.com/article/17/8/system-management-foreman">Foreman</a> 创建和维护存放在 <a href="https://github.com/theforeman/foreman-documentation">github.com/theforeman/foreman-documentation</a> 的文档。Git 帮助我跟踪内容的版本，并与开源社区进行协作。它是我存储工作成果、共享和讨论改进的重要工具。我主要使用的工具包括浏览器、用 OpenSSH 连接 Foreman 实例、用 <a href="https://opensource.com/resources/what-vim">Vim</a> 编辑源文件，以及使用 Git 进行版本控制。</p>
<p>本文重点介绍在开始使用 Git 和为 Foreman 文档做贡献时经常遇到的挑战。适用于中级 Git 用户。</p>
<h3>先决条件</h3>
<ul>
<li>你已在系统上安装和配置了 Git。你至少需要设置用户名和电子邮件地址。</li>
<li>你在 <a href="https://github.com/">github.com</a> 上拥有一个帐户。GitHub 本身并不是一个开源项目，但它是许多开源 Git 存储库的托管站点（包括 Foreman 的文档）。</li>
<li>你已将 <a href="https://github.com/theforeman/foreman-documentation">foreman-documentation</a> 存储库复刻到你自己的账户或组织（例如，<code>github.com/&lt;My_User_Account&gt;/foreman-documentation</code>，这里 <code>&lt;My_User_Account&gt;</code> 是你的 GitHub 用户名）。有关更多信息，请参阅 Kedar Vijay Kulkarni 的 <a href="https://opensource.com/article/18/1/step-step-guide-git">Kedar Vijay Kulkarni 的 Git 逐步指南</a>。</li>
<li>你已将你的 SSH 公钥添加到 GitHub。这是将你的更改推送到 GitHub 所必需的。有关更多信息，请参阅 Nicole C. Baratta 的《<a href="https://opensource.com/life/15/11/short-introduction-github">GitHub 简单指引</a>》。</li>
</ul>
<h3>对 Foreman 文档做出贡献</h3>
<p>Foreman 是一个开源项目，依靠社区的贡献而发展壮大。该项目欢迎所有人的参与，并且只有一些要求才能做出有意义的贡献。这些要求和惯例在 <a href="https://github.com/theforeman/foreman-documentation/blob/master/guides/README.md#contribution-guidelines">README.md</a> 和 <a href="https://github.com/theforeman/foreman-documentation/blob/master/CONTRIBUTING.md#contributing-to-foreman-documentation">CONTRIBUTING.md</a> 文件中有详细记录。</p>
<p>以下是在处理 Foreman 文档时最常见的一些任务。</p>
<h4>我想开始贡献 Foreman 文档</h4>
<p>1、从 <a href="http://github.com">github.com</a> 克隆存储库：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:theforeman/foreman-documentation.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>foreman-documentation/
</code></pre></div>

<p>2、重命名远程存储库：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>rename<span class="w"> </span>origin<span class="w"> </span>upstream
</code></pre></div>

<p>3、可选：确保你的本地主分支跟踪 theforeman 组织的 <code>foreman-documentation</code> 存储库的 <code>master</code> 分支：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>status
</code></pre></div>

<p>这将自动将你置于默认分支（本例中为 <code>master</code>）的最新提交上。</p>
<p>4、如果你的账户或组织中尚未有该存储库的 <ruby> 复刻 <rt>  Fork </rt></ruby>，请创建一个。前往 <a href="https://github.com/theforeman/foreman-documentation">github.com/theforeman/foreman-documentation</a> 并点击 “<ruby> 复刻 <rt>  Fork </rt></ruby>” 按钮。</p>
<p>5、将你的复刻添加到你的存储库中：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>github<span class="w"> </span>git@github.com:&lt;My_User_Account&gt;/foreman-documentation.git
</code></pre></div>

<p>你的本地存储库现在有两个远程存储库：<code>upstream</code> 和 <code>github</code>。</p>
<h4>我想扩展 Foreman 文档</h4>
<p>对于简单的更改，比如修正拼写错误，你可以直接创建一个拉取请求（PR）。</p>
<p>1、创建一个分支，例如 <code>fix_spelling</code>。<code>git switch</code> 命令用于切换当前所在的分支，<code>-c</code> 参数用于创建分支：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>fix_spelling
</code></pre></div>

<p>2、进行你的更改。</p>
<p>3、添加你的更改并进行提交：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>guides/common/modules/abc.adoc
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Fix spelling of existing&quot;</span>
</code></pre></div>

<p>良好的 Git 提交消息的重要性无需再强调。提交消息告诉贡献者你做了哪些工作，因为它与代码库的其余部分一起保存，所以它在查看代码时起到历史注释的作用，帮助了解代码的演化过程。有关优秀的 Git 提交消息的更多信息，请参阅由 cbeams 撰写的 《<a href="https://cbea.ms/git-commit/#seven-rules">创建完美的 Git 提交信息的 7 条规则</a>》。</p>
<p>4、可选但建议的操作：查看并验证与默认分支的差异。<code>foreman-documentation</code> 的默认分支称为 <code>master</code>，但其他项目可能有不同的命名（例如 <code>main</code>、<code>dev</code> 或 <code>devel</code>）。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>diff<span class="w"> </span>master
</code></pre></div>

<p>5、将分支推送到 GitHub。这将发布你的更改到你的代码库副本：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>--set-upstream<span class="w"> </span>github<span class="w"> </span>fix_spelling
</code></pre></div>

<p>6、点击终端中 Git 提供的链接来创建一个拉取请求（PR）：</p>
<div class="highlight"><pre><span></span><code><span class="n">remote</span><span class="o">:</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">&#39;fix_spelling&#39;</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">Github</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">visiting</span><span class="o">:</span>
<span class="n">remote</span><span class="o">:</span><span class="w">      </span><span class="n">https</span><span class="o">://</span><span class="n">github</span><span class="o">.</span><span class="na">com</span><span class="sr">/_My_User_Account_/foreman-documentation/pull/new/</span><span class="n">fix_spelling</span>
</code></pre></div>

<p>7、在解释中说明社区<em>为什么</em>应该接受你的更改。对于修正拼写错误等简单 PR，这并不是必需的，但对于重大更改则很重要。</p>
<h4>我想将我的分支变基到 master</h4>
<p>1、确保你的本地 <code>master</code> 分支跟踪的是 <a href="https://github.com/theforeman/foreman-documentation">github.com/theforeman/foreman-documentation</a> 的 <code>master</code> 分支，而不是你自己命名空间下的 <code>foreman-documentation</code>：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>master
</code></pre></div>

<p>此时应该显示 <code>Your branch is up to date with 'upstream/master'</code>，其中 <code>upstream</code> 是指向 <code>github.com/theforeman/foreman-documentation</code> 的远程存储库的名称。你可以通过运行 <code>git remote -v</code> 来查看远程存储库设置情况。</p>
<p>2、从远程获取可能的更改。<code>git fetch</code> 命令会从远程下载被跟踪的分支，并且使用 <code>--all</code> 选项可以同时更新所有分支。在使用其他分支时这是必要的。<code>--prune</code> 选项会删除对已不存在的分支的引用。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>fetch<span class="w"> </span>--all<span class="w"> </span>--prune
</code></pre></div>

<p>3、将可能的更改从 <code>upstream/master</code> 拉取到你的本地 <code>master</code> 分支。<code>git pull</code> 命令将跟踪的分支上的提交复制到当前分支。这用于将你的本地 <code>master</code> 分支“更新”为远程（在本例中为 GitHub）<code>master</code> 分支的最新状态。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>pull
</code></pre></div>

<p>4、将你的分支 <ruby> 变基 <rt>  rebase </rt></ruby> 到 <code>master</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>my_branch
$<span class="w"> </span>git<span class="w"> </span>rebase<span class="w"> </span>-i<span class="w"> </span>master
</code></pre></div>

<h4>我在 master 分支上意外地提交了代码</h4>
<p>1、创建一个分支来保存你的工作：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>my_feature
</code></pre></div>

<p>2、切换回 <code>master</code> 分支：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>master
</code></pre></div>

<p>3、回退 <code>master</code> 分支上的最后一次提交：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>reset<span class="w"> </span>--soft<span class="w"> </span>HEAD~1
</code></pre></div>

<p>4、切换回 <code>my_feature</code> 分支并继续工作：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>my_feature
</code></pre></div>

<h4>我想修改我的提交消息</h4>
<p>1、如果你的分支只有一次提交，可以使用 <code>git amend</code> 来修改你的最后一次提交：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>--amend
</code></pre></div>

<p>这假设你没有将其他文件添加到暂存区（即，没有运行过 <code>git add My_File</code>，并且没有进行提交）。</p>
<p>2、使用 <code>--force</code> 选项将你的 “更改” 推送到 GitHub，因为 Git 提交消息是你现有提交的一部分，所以你正在更改分支上的历史记录：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>--force
</code></pre></div>

<h4>我想重新整理单个分支上的多个更改</h4>
<p>1、可选但强烈推荐：从 GitHub 获取更改。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>master
$<span class="w"> </span>git<span class="w"> </span>fetch
$<span class="w"> </span>git<span class="w"> </span>pull
</code></pre></div>

<p>这确保你将其他更改按照它们被合并到 <code>master</code> 中的顺序直接合并到你的分支中。</p>
<p>2、若要重新整理你的工作，请对你的分支进行变基并根据需要进行更改。对于将分支变基到 <code>master</code>，这意味着你需要更改你的分支上第一个提交的父提交：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>rebase<span class="w"> </span>--interactive<span class="w"> </span>master
</code></pre></div>

<p>使用你喜欢的编辑器打开变基交互界面，将第一个单词 <code>pick</code> 替换为你要修改的提交。</p>
<ul>
<li>使用 <code>e</code> 来对你的提交进行实际更改。这会中断你的变基操作！</li>
<li>使用 <code>f</code> 将一个提交与其父提交合并。</li>
<li>使用 <code>d</code> 完全删除一个提交。</li>
<li>移动行以改变你更改的顺序。</li>
</ul>
<p>成功进行变基后，你自己的提交将位于 <code>master</code> 上最后一个提交的顶部。</p>
<h4>我想从其他分支复制一个提交</h4>
<p>1、从稳定分支（例如名为 <code>3.3</code> 的分支）获取提交的 ID，请使用 <code>-n</code> 选项限制提交数量：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>log<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">3</span>.3
</code></pre></div>

<p>2、通过挑选提交来复制更改到你的分支。<code>-x</code> 选项将提交的 ID 添加到你的提交消息中。这仅建议在从稳定分支挑选提交时使用：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>My_Branch
$<span class="w"> </span>git<span class="w"> </span>cherry-pick<span class="w"> </span>-x<span class="w"> </span>Commit_ID
</code></pre></div>

<h3>更多技巧</h3>
<p>在 ATIX，我们运行一个 <a href="https://about.gitlab.com/">GitLab</a> 实例，用于内部共享代码、协作以及自动化测试和构建。对于围绕 Foreman 生态系统的开源社区，我们依赖于 GitHub。</p>
<p>我建议你始终将名为 <code>origin</code> 的远程指向你的<em>内部的</em>版本控制系统。这样做可以防止在纯粹凭记忆进行 <code>git push</code> 时向外部服务泄露信息。</p>
<p>此外，我建议使用固定的命名方案来命名远程。我总是将指向自己的 GitLab 实例的远程命名为 <code>origin</code>，将指向开源项目的远程命名为 <code>upstream</code>，将指向我在 Github 上的复刻的远程命名为 <code>github</code>。</p>
<p>对于 <code>foreman-documentation</code>，该存储库具有相对较平的历史记录。当处理更复杂结构时，我倾向于以非常可视化的方式思考 Git 存储库，其中节点（提交）指向线上的节点（分支），这些分支可以交织在一起。图形化工具如 <code>gitk</code> 或 <a href="https://opensource.com/article/20/3/git-cola">Git Cola</a> 可以帮助可视化你的 Git 历史记录。一旦你完全掌握了 Git 的工作原理，如果你更喜欢命令行，可以使用别名。</p>
<p>在进行具有大量预期合并冲突的大型变基之前，我建议创建一个“备份”分支，以便你可以快速查看差异。请注意，要永久删除提交是相当困难的，因此在进行重大更改之前，请在本地 Git 存储库中进行测试。</p>
<h3>Git 对技术文档编写者的帮助</h3>
<p>Git 对技术文档编写者来说是一个巨大的帮助。不仅可以使用 Git 对文档进行版本控制，还可以与他人积极地进行协作。</p>
<p><em>（题图：MJ/1fb1dd43-e460-4e76-9ff6-b6ef76570f7e）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>