<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>'Bash 基础知识系列 #2：在 Bash 中使用变量'</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Abhishek Prakash 在本章的 Bash 基础知识系列中，学习在 Bash 脚本中使用变量。 在 Bash 基础知识系列的第一部分中，我简要提到了变量。现在 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/07/bash-ji-chu-zhi-shi-xi-lie-2zai-bash-zhong-shi-yong-bian-liang.html" rel="bookmark"
           title="Permalink to 'Bash 基础知识系列 #2：在 Bash 中使用变量'">'Bash 基础知识系列 #2：在 Bash 中使用变量'</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-07-12T11:17:00+02:00">
                Published: Wed 12 July 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Abhishek Prakash</p>
<p><img alt="" src="/data/attachment/album/202307/12/111750bzruv9jiako6j694.jpg"></p>
<blockquote>
<p>在本章的 Bash 基础知识系列中，学习在 Bash 脚本中使用变量。</p>
</blockquote>
<p>在 Bash 基础知识系列的第一部分中，我简要提到了变量。现在是时候在本章中详细了解它们了。</p>
<p>如果你曾经进行过任何类型的编码，你一定熟悉术语“变量”。</p>
<p>如果没有，请将变量视为保存信息的盒子，并且该信息可以随着时间的推移而改变。</p>
<p>让我们看看如何使用它们。</p>
<h3>在 Bash shell 中使用变量</h3>
<p>打开终端并使用一个随机的数字 4 初始化变量：</p>
<div class="highlight"><pre><span></span><code><span class="k">var</span><span class="o">=</span><span class="mi">4</span>
</code></pre></div>

<p>现在你有一个名为 <code>var</code> 的变量，它的值为 <code>4</code>。想验证一下吗？ <strong>通过在变量名前添加 <code>$</code> 来访问变量的值</strong>。这称为参数扩展。</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">abhishek</span><span class="err">@</span><span class="n">itsfoss</span><span class="p">]:</span><span class="o">~$</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="o">$</span><span class="k">var</span>
<span class="n">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mi">4</span>
</code></pre></div>

<blockquote>
<p>? 变量初始化时 <code>=</code> 前后不能有空格。</p>
</blockquote>
<p>如果需要，你可以将该值更改为其他值：</p>
<p><img alt="Using variables in shell" src="/data/attachment/album/202307/12/111759x6acec65lqj75ba7.png"></p>
<p>在 Bash shell 中，变量可以是数字、字符或字符串（包括空格在内的字符）。</p>
<p><img alt="Different variable types in Bash shell" src="/data/attachment/album/202307/12/111759jptr77z2yfd7fu0u.png"></p>
<blockquote>
<p>? 与 Linux 中的其他事物一样，变量名称也区分大小写。它们可以由字母、数字和下划线 “<code>_</code>” 组成。</p>
</blockquote>
<h3>在 Bash 脚本中使用变量</h3>
<p>你是否注意到我没有运行 shell 脚本来显示变量示例？ 你可以直接在 shell 中做很多事情.当你关闭终端时，你创建的那些变量将不再存在。</p>
<p>但是，你的发行版通常会添加全局变量，以便可以在所有脚本和 shell 中访问它们。</p>
<p>让我们再写一些脚本.你应该之前创建了脚本目录，但无论哪种情况，此命令都会处理该目录：</p>
<div class="highlight"><pre><span></span><code>mkdir -p bash_scripts &amp;&amp; cd bash_scripts
</code></pre></div>

<p>基本上，如果 <code>bash_scripts</code> 目录尚不存在，它将创建它，然后切换到该目录。</p>
<p>这里让我们使用以下文本创建一个名为 <code>knock.sh</code> 的新脚本。</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">echo</span><span class="w"> </span>knock,<span class="w"> </span>knock
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Who&#39;s there?&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;It&#39;s me, </span><span class="nv">$USER</span><span class="s2">&quot;</span>
</code></pre></div>

<p>更改文件权限并运行脚本。你在上一章中已经学到了。</p>
<p>这是它为我生成的内容：</p>
<p><img alt="Using global variable in Bahs script" src="/data/attachment/album/202307/12/111800kcuaumooouldu2fl.png"></p>
<p><strong>你是否注意到它如何自动将我的名字添加到其中？</strong> 这就是包含用户名的全局变量 <code>$USER</code> 的魔力。</p>
<p>你可能还注意到，我有时将 <code>"</code> 与 <code>echo</code> 一起使用，但其他时候则不使用。这是故意的。<a href="https://linuxhandbook.com:443/quotes-in-bash/">bash 中的引号</a> 有特殊含义。它们可用于处理空格和其他特殊字符。让我展示一个例子。</p>
<h3>处理变量中的空格</h3>
<p>假设你必须使用一个名为 <code>greetings</code> 的变量，其值为 <code>hello and welcome</code>。</p>
<p>如果你尝试像这样初始化变量：</p>
<div class="highlight"><pre><span></span><code>greetings=Hello and Welcome
</code></pre></div>

<p>你会得到这样的错误：</p>
<div class="highlight"><pre><span></span><code>Command &#39;and&#39; not found, but can be installed with:
sudo apt install and
</code></pre></div>

<p>这就是为什么你需要使用单引号或双引号：</p>
<div class="highlight"><pre><span></span><code>greetings=&quot;Hello and Welcome&quot;
</code></pre></div>

<p>现在你可以根据需要使用该变量。</p>
<p><img alt="Using spaces in variable names in bash" src="/data/attachment/album/202307/12/111800agjunjgar4nnnu3u.png"></p>
<h3>将命令输出分配给变量</h3>
<p>是的！你可以将命令的输出存储在变量中并在脚本中使用它们。这称为命令替换。</p>
<div class="highlight"><pre><span></span><code><span class="k">var</span><span class="o">=$</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</code></pre></div>

<p>这是一个例子：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">abhishek@itsfoss</span><span class="o">]</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">today</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="nc">date</span><span class="w"> </span><span class="o">+%</span><span class="n">D</span><span class="p">)</span>
<span class="o">[</span><span class="n">abhishek@itsfoss</span><span class="o">]</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">&quot;Today&#39;s date is $today&quot;</span>
<span class="n">Today</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">date</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mi">06</span><span class="o">/</span><span class="mi">19</span><span class="o">/</span><span class="mi">23</span>
<span class="o">[</span><span class="n">abhishek@itsfoss</span><span class="o">]</span><span class="err">:</span><span class="o">~</span><span class="err">$</span>
</code></pre></div>

<p><img alt="Command substitution in bash" src="/data/attachment/album/202307/12/111801t3jjjwuaabrruj32.png"></p>
<p>旧语法使用反引号而不是 <code>$()</code> 进行命令替换。虽然它可能仍然有效，但你应该使用新的推荐符号。</p>
<blockquote>
<p>? 变量会更改值，除非你声明一个“常量”变量，如下所示：<code>readonly pi=3.14</code>。在这种情况下，变量 <code>pi</code> 的值无法更改，因为它被声明为 <code>readlonly</code>。</p>
</blockquote>
<h3>?️ 练习时间</h3>
<p>是时候练习你所学到的东西了。这里有一些练习来测试你的学习情况。</p>
<p><strong>练习 1</strong>：编写一个 bash 脚本，以以下格式打印你的用户名、当前工作目录、主目录和默认 shell。</p>
<div class="highlight"><pre><span></span><code>Hello, there
My name is XYZ
My current location is XYZ
My home directory is XYZ
My default shell is XYZ
</code></pre></div>

<p><strong>提示</strong>：使用全局变量 <code>$USER</code>、<code>$PWD</code>、<code>$HOME</code> 和 <code>$SHELL</code>。</p>
<p><strong>练习 2：</strong> 编写一个 bash 脚本，声明一个名为 <code>price</code> 的变量.使用它来获取以下格式的输出：</p>
<div class="highlight"><pre><span></span><code>Today&#39;s price is $X
Tomorrow&#39;s price is $Y
</code></pre></div>

<p>其中 X 是变量 <code>price</code> 的初始值，并且明天价格翻倍。</p>
<p><strong>提示</strong>：使用 <code>\</code> 转义特殊字符 <code>$</code>。</p>
<p>练习的答案可以在社区的这个专用帖子中讨论。</p>
<p>在 Bash 基础知识系列的下一章中，你将了解如何通过传递参数和接受用户输入来使 bash 脚本具有交互性。</p>
<p><em>（题图：MJ/37c5c26e-3289-4ebd-b8ae-88eb8a3b2eb1）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>