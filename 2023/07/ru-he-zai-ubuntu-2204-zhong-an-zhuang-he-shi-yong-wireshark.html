<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在 Ubuntu 22.04 中安装和使用 Wireshark</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Pradeep Kumar 技术兄弟们，大家好，在这篇文章中我们将介绍如何在 Ubuntu 22.04 中安装和使用 Wireshark。 Wireshark 是自由开源的、跨平台的、基于 GUI 的 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li class="active"><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/07/ru-he-zai-ubuntu-2204-zhong-an-zhuang-he-shi-yong-wireshark.html" rel="bookmark"
           title="Permalink to 如何在 Ubuntu 22.04 中安装和使用 Wireshark">如何在 Ubuntu 22.04 中安装和使用 Wireshark</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-07-05T15:48:00+02:00">
                Published: Wed 05 July 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/fen-xiang">分享</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Pradeep Kumar</p>
<p><img alt="" src="/data/attachment/album/202307/05/154817pj3jx0jl03levzu9.jpg"></p>
<blockquote>
<p>技术兄弟们，大家好，在这篇文章中我们将介绍如何在 Ubuntu 22.04 中安装和使用 Wireshark。</p>
</blockquote>
<p>Wireshark 是自由开源的、跨平台的、基于 GUI 的网络数据包分析器，可用于 Linux、Windows、MacOS、Solaris 等。它实时捕获网络数据包并以人类可读的格式呈现它们。它使我们能够监控微观层面的网络数据包。它还有一个名为 <code>tshark</code> 的命令行程序，它执行与 Wireshark 相同的功能，但通过终端而不是通过 GUI。</p>
<p>Wireshark 可用于网络故障排除、分析、软件和通信协议开发，也可用于教育目的。Wireshark 使用名为 <code>pcap</code> 的库来捕获网络数据包。</p>
<h3>Wireshark 的功能</h3>
<ul>
<li>支持检查数百种协议</li>
<li>能够实时捕获数据包并保存它们以供以后离线分析</li>
<li>一些用于分析数据的过滤器</li>
<li>捕获的数据可以动态压缩和解压缩</li>
<li>支持多种数据分析文件格式，输出也可以保存为 XML、CSV、纯文本格式</li>
<li>可以从以太网、WiFi、蓝牙、USB、帧中继、令牌环等多种接口捕获数据</li>
</ul>
<h3>先决条件</h3>
<ul>
<li>预装 Ubuntu 22.04</li>
<li>具有 sudo 权限的本地用户</li>
<li>互联网连接</li>
</ul>
<h3>Wireshark 安装步骤</h3>
<h4>从 Ubuntu 仓库安装</h4>
<p>Wireshark 包可在默认的 Ubuntu 仓库中找到，并且可以使用以下命令简单地安装。但你可能无法获得最新版本的 wireshark。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>update
$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>wireshark
</code></pre></div>

<p><img alt="Apt-Command-Install-Wireshark-Ubuntu" src="/data/attachment/album/202307/05/155102f0xsxrrrl0bxu2sz.jpg"></p>
<p>选择 “Yes” 允许非超级用户使用 Wireshark 捕获数据包：</p>
<p><img alt="Allow-Non-SuperUsers-To-Capture-Packets-Wireshark-Ubuntu" src="/data/attachment/album/202307/05/155110smmb00a5vmaf21ya.jpg"></p>
<p>安装成功后，访问 Wireshare UI。从“<ruby> 活动 <rt>  Activities </rt></ruby>”中搜索 “wireshark”，然后单击其图标。</p>
<p><img alt="Wireshark-UI-Ubuntu-Linux-Desktop" src="/data/attachment/album/202307/05/155117g4zv5wkck8vjvzer.jpg"></p>
<p>以上确认你的 Wireshark 安装已成功完成。</p>
<h4>安装最新的版本</h4>
<p>如果要安装最新版本的 Wireshark，我们必须使用以下 <code>apt</code> 命令启用官方 Wireshark 仓库：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>add-apt-repository<span class="w"> </span>ppa:wireshark-dev/stable
$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>update
</code></pre></div>

<p>现在，安装最新版本的 Wireshark，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>wireshark<span class="w"> </span>-y
</code></pre></div>

<p>安装 Wireshark 后，验证其版本：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>wireshark<span class="w"> </span>--version
</code></pre></div>

<p><img alt="Wireshark-Version-Check-Ubuntu-Linux" src="/data/attachment/album/202307/05/155127etqht5yca4tthtt8.jpg"></p>
<p>要允许普通用户使用 Wireshark 使用和捕获数据包，请运行以下命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>dpkg-reconfigure<span class="w"> </span>wireshark-common
</code></pre></div>

<p>选择 “Yes” 并按回车键。</p>
<p><img alt="Allow-Regular-User-Use-Wireshark-Ubuntu" src="/data/attachment/album/202307/05/155135vq9d4fzx4v6a4v1f.jpg"></p>
<p>使用 <code>usermod</code> 命令将本地用户添加到 <code>wireshark</code> 组:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>wireshark<span class="w"> </span><span class="nv">$USER</span>
$<span class="w"> </span>newgrp<span class="w"> </span>wireshark
</code></pre></div>

<p>要使上述更改生效，请重新启动系统。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>reboot
</code></pre></div>

<h3>使用 Wireshark 捕获数据包</h3>
<p>启动 Wireshark，从“活动”-&gt;搜索 “wireshark”。</p>
<p><img alt="Access-Wireshark-Ubuntu-Desktop" src="/data/attachment/album/202307/05/155147jcpezsem5zp22e2y.jpg"></p>
<p>单击 Wireshark 图标，</p>
<p><img alt="Choose-Interface-Wireshark-UI-Ubuntu" src="/data/attachment/album/202307/05/155216waw0q0tnhgg2jazt.jpg"></p>
<p>所有这些都是我们可以捕获网络数据包的接口。根据你系统上的界面，此页面可能会有所不同。</p>
<p>我们选择 “enp0s3” 来捕获该接口的网络流量。选择接口后，我们网络上所有设备的网络数据包开始填充（请参阅下面的截图）：</p>
<p><img alt="Capturing-Packets-WireShark-UI-Ubuntu" src="/data/attachment/album/202307/05/155510pshznz2uexmlhgml.jpg"></p>
<p>第一次看到此页面时，我们可能会被此屏幕中显示的数据淹没，并且可能会想到如何整理这些数据，但不用担心，Wireshark 的最佳功能之一就是它的过滤器。</p>
<p>我们可以根据 IP 地址、端口号对数据进行排序/过滤，还可以使用源和目标过滤器、数据包大小等，还可以将 2 个或更多过滤器组合在一起以创建更全面的搜索。我们可以在“<ruby> 应用显示过滤器 <rt>  Apply a Display Filter </rt></ruby>”选项卡中编写过滤器，也可以选择已创建的规则之一。要选择预建过滤器，请单击“旗帜”图标，然后点击“应用显示过滤器”选项卡。</p>
<p><img alt="IP-Based-Filtering-WireShark-UI-Ubuntu" src="/data/attachment/album/202307/05/155350bvo29nkuytntrrki.jpg"></p>
<p>我们还可以根据颜色代码来过滤数据，默认情况下，浅紫色是 TCP 流量，浅蓝色是 UDP 流量，黑色标识有错误的数据包，要查看这些代码的含义，请单击“<ruby> 查看 <rt>  View </rt></ruby>”-&gt;“<ruby> 颜色规则 <rt>  Coloring Rules </rt></ruby>”，我们也可以更改这些代码。</p>
<p><img alt="Coloring-Rules-WireShark-Ubuntu" src="/data/attachment/album/202307/05/155338ehx79q0nx67bpxnr.jpg"></p>
<p>获得所需的结果后，我们可以单击任何捕获的数据包以获取有关该数据包的更多详细信息，这将显示有关该网络数据包的所有数据。</p>
<p>要停止捕获数据包，请单击红色停止按钮，然后将捕获的数据包保存到文件中。</p>
<p><img alt="Save-Captured-Packets-Wireshark-Ubuntu" src="/data/attachment/album/202307/05/155309hqt8icwz0ww46vro.jpg"></p>
<h3>总结</h3>
<p>Wireshark 是一款非常强大的工具，需要一些时间来适应和掌握它，这篇文章将帮助你开始使用。请随时在下面的评论栏中提出你的疑问或建议。</p>
<p><em>（题图：MJ/63c09e75-a3e7-4dbf-ac6f-0233bdd34ad8）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>