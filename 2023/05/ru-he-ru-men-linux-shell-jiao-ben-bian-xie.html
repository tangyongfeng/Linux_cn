<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何入门 Linux Shell 脚本编写</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Pradeep Kumar 各位读者，我们将在本文中介绍如何在 Linux 或 UNIX 系统中入门 Shell 脚本编写。 什么是 Shell 呢？ Shell（交互界面）是类 UNIX/Linux 操作系统 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2023/05/ru-he-ru-men-linux-shell-jiao-ben-bian-xie.html" rel="bookmark"
           title="Permalink to 如何入门 Linux Shell 脚本编写">如何入门 Linux Shell 脚本编写</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-05-19T23:58:00+02:00">
                Published: Fri 19 May 2023
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Pradeep Kumar</p>
<p><img alt="" src="/data/attachment/album/202305/19/235745hz7r48umu1eerm2e.jpg"></p>
<blockquote>
<p>各位读者，我们将在本文中介绍如何在 Linux 或 UNIX 系统中入门 Shell 脚本编写。</p>
</blockquote>
<h3>什么是 Shell 呢？</h3>
<p>Shell（交互界面）是类 UNIX/Linux 操作系统中的一个解释器。它将用户输入的命令解释成操作系统的系统调用来执行这些命令。简单来说，Shell 形式上是操作系统的包装。比如，你可能使用 Shell 命令来列出目录中的文件，如 <a href="https://www.linuxtechi.com/linux-ls-command-examples-beginners/">ls</a> 命令，或使用命令复制，如 <code>cp</code> 命令。</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">ls</span>
<span class="n">Desktop</span><span class="w"> </span><span class="n">Documents</span><span class="w"> </span><span class="n">Downloads</span><span class="w"> </span><span class="n">Music</span><span class="w"> </span><span class="n">Pictures</span><span class="w"> </span><span class="n">playbook</span><span class="o">.</span><span class="n">yaml</span><span class="w"> </span><span class="n">Public</span><span class="w"> </span><span class="n">snap</span><span class="w"> </span><span class="n">Templates</span><span class="w"> </span><span class="n">test5</span><span class="w"> </span><span class="n">Videos</span>
</code></pre></div>

<p>在上方的例子中，当你输入 <code>ls</code> 并按下回车键。<code>$</code> 符号是 Shell 的提示符，意味着 Shell 等着命令的输入。下面的一行就是当前目录下的文件名。</p>
<h3>什么是 Shell 提示符？</h3>
<p>提示符，即 <code>$</code>，被称作命令提示符，是由 Shell 发出的（LCTT 译注：这个概念，可能有误。请参看：<a href="https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Controlling-the-Prompt">https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Controlling-the-Prompt</a> ）。当提示符出现后（LCTT 译注：此处提示符并不特指 <code>$</code> 符号），你就可以输入命令了。Shell 将会在你按下回车键后读取你的输入。它会通过查看你输入的第一个单词来确定你希望执行的命令。“单词”指的是一组连续的字符。空格和制表符作为分割单词的标志。</p>
<h3>不同类型的 Shell</h3>
<p>由于没有限制只能有一个 Shell，你可以按照自己的意愿来自由选择运行任何一种 Shell。这当然挺好的，但是在不清楚其它替代方案的情况下选择一种 Shell 没有多大益处。下面列出了一些 UNIx/Linux 下常见的 Shell。</p>
<h4>Sh（Bourne Shell）</h4>
<p>最初的 Unix Shell 通常被称作 Sh，是 Shell（或 Bourne Shell）的简写，以其作者 Steven Bourne 命名。它在几乎所有的类 UNIX 操作系统下都可以找到。基本的 Bourne Shell 仅支持相当有限的命令行编辑。你可以输入字符，使用退格键删除字符，还有就是按下回车键来执行命令。当命令行出现异常了，你可以按下 <code>Ctrl-C</code> 组合键来终止整个命令。</p>
<h4>Csh（C Shell）</h4>
<p>它是由加利福尼亚大学伯克利分校的 Bill Joy 设计的，由于它的语法和 C 语言相似，所以被命名为 C Shell。这种 Shell 在 Bourne shell 的基础上增加了一些实用功能，尤其是可以重用之前的命令来帮助创建之后要执行的命令。当你去完成一项专门任务的时候，大多数的情况下需要执行不止一条命令，这样 C shell 的能力就相当有用了。</p>
<h4>Ksh（Korn Shell）</h4>
<p>它是由贝尔实验室的 David Korn 创造的，Korn Shell 提供了和 C Shell 相同的增强，其中有一项重要的不同：Korn Shell 提供了对旧的 Bourne Shell 语法的向后兼容。在 Unix 下，如 AIX &amp; HP-UX 上，Korn Shell 是默认 Shell。</p>
<h4>Bash（Bourne Again Shell）</h4>
<p>Bash 提供了像 Korn Shell 一样的命令行编辑，像 C Shell 一样的文件名补全和许多其它的高级功能。许多用户认为 Bash 集 Korn Shell 和 C Shell 的优点于一身。在 Linux 和 Mac OS X 系统下，Bash 是默认的 Shell。</p>
<h4>Tcsh（T C Shell）</h4>
<p>Linux 系统推广了 Tcsh。Tcsh 扩展了传统的 csh，增加了命令行编辑、文件名补全和其它功能。例如，当你按下 <code>Tab</code> 键后，Tcsh 会补全文件和目录名（与 Bash 中的按键相同）。旧的 C Shell 不支持这项功能。</p>
<h3>什么是 Shell 脚本呢？</h3>
<p>Shell 脚本是包含一条或多条命令的文本文件。在 Shell 脚本中，Shell 程序假定文本文件的每一行是一条不同的命令。这些命令的大部分就和你在 Shell 窗口手动输入的一样。</p>
<h4>为什么要使用 Shell 脚本呢？</h4>
<p>Shell 脚本被用来自动化管理任务、简化复杂的配置细节，并且充分运用操作系统的性能。有了组合不同命令的能力就可以创造新命令了，从而增加操作系统的价值。此外，结合使用 Shell 与图形化桌面环境，可以兼得二者之长。</p>
<p>从系统管理员的角度看，日复一日的重复工作可以使用 Shell 脚本来实现自动处理，那就可以节约时间从事其它高质量的工作。</p>
<h3>创建第一个 Shell 脚本</h3>
<p>在当前工作目录下创建一个名为 <code>myscript.sh</code> 的文本文件，所有的 Shell 脚本都有 <code>.sh</code> 的扩展名（LCTT 译注：Linux 下根本没有扩展名一说，没有这个扩展一样是可以执行的）。脚本的第一行是 <code>#!/bin/sh</code> 或 <code>#!/bin/bash</code>，因为 <code>#</code> 符号被称作 “hash” 并且 <code>!</code> 符号被称作 “bang” 故被称为 shebang（释伴）。至于 <code>/bin/sh</code> 和 <code>/bin/bash</code> 则指出了命令将被 Sh 还是 Bash shell 执行。</p>
<p>以下就是 <code>myscript.sh</code> 的内容：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># Written by LinuxTechi</span>
<span class="nb">echo</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Current Working Directory: </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">echo</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Today&#39; Date &amp; Time: </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">DISK</span><span class="o">=</span><span class="k">$(</span>df<span class="w"> </span>-Th<span class="k">)</span>
<span class="nb">echo</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Disk Space on System:&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DISK</span><span class="s2">&quot;</span>
</code></pre></div>

<p>上方的脚本将会展示当前工作目录、今天的日期与时间，还有磁盘空间。我们需要用到 <a href="https://www.linuxtechi.com/echo-command-examples-in-linux/">echo 命令</a> 和其它 <a href="https://www.linuxtechi.com/20-linux-commands-interview-questions-answers/">Linux 命令</a> 来实现这个脚本。</p>
<p>使用如下的 <a href="https://www.linuxtechi.com/chmod-command-examples-in-linux/">chmod 命令</a> 来给文件增加执行权限：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>chmod<span class="w"> </span>a+x<span class="w"> </span>myscript.sh
</code></pre></div>

<p>现在来执行脚本：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sh<span class="w"> </span>myscript.sh
或
$<span class="w"> </span>./myscript.sh
</code></pre></div>

<p>注意：在当前目录下执行当前目录下的 Shell 脚本，须使用 <code>./&lt;脚本名&gt;</code> 方式，如下所示：</p>
<p><img alt="" src="/data/attachment/album/202305/19/235953e44jzssz4iqf1wyy.jpg"></p>
<h4>在 Shell 脚本中获取用户输入</h4>
<p><code>read</code> 命令用来获取用户的键盘输入，并且将之赋值给一个变量。<code>echo</code> 命令用来展示内容。</p>
<p>让我们更改上方的脚本以使之获取输入：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># Written by LinuxTechi</span>
<span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Your Name: &quot;</span><span class="w"> </span>NAME
<span class="nb">echo</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Today&#39; Date &amp; Time: </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">echo</span>
<span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Enter the file system:&quot;</span><span class="w"> </span>DISK
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>df<span class="w"> </span>-Th<span class="w"> </span><span class="nv">$DISK</span><span class="k">)</span><span class="s2">&quot;&quot;</span>
</code></pre></div>

<p>现在，再执行脚本试试，这回应该会有输入信息的提醒：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./myscript.sh
Your<span class="w"> </span>Name:<span class="w"> </span>Pradeep<span class="w"> </span>Kumar

Today<span class="err">&#39;</span><span class="w"> </span>Date<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span>Time:<span class="w"> </span>Sat<span class="w"> </span><span class="m">15</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">05</span>:32:38<span class="w"> </span>BST<span class="w"> </span><span class="m">2022</span>

Enter<span class="w"> </span>the<span class="w"> </span>file<span class="w"> </span>system:/mnt/data
Filesystem<span class="w"> </span>Type<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
/dev/mapper/volgrp01-lv01<span class="w"> </span>ext4<span class="w"> </span>14G<span class="w"> </span>24K<span class="w"> </span>13G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/mnt/data
</code></pre></div>

<p><img alt="" src="/data/attachment/album/202305/20/000008gvifoiiy9pspgwww.jpg"></p>
<p>完美，上方的输出表明脚本有输入提醒，并加工处理了相应的数据。</p>
<p>本文结束。希望对你是有用的。非常欢迎任何的疑问、反馈。</p>
<p><em>（题图：MJ/f83b771e-a70d-4c62-a169-ec42e9004a14）</em></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>