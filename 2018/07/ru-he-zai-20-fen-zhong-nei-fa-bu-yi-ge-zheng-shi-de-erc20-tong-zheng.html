<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在 20 分钟内发布一个正式的 ERC20 通证</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Mason 这段时间以来，以太坊通证很流行。这些通证可以用来代表现实世界的各种价值单位：黄金、 谎言、 猫咪 甚至是类似 公司 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/07/ru-he-zai-20-fen-zhong-nei-fa-bu-yi-ge-zheng-shi-de-erc20-tong-zheng.html" rel="bookmark"
           title="Permalink to 如何在 20 分钟内发布一个正式的 ERC20 通证">如何在 20 分钟内发布一个正式的 ERC20 通证</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-07-10T22:21:00+02:00">
                Published: Tue 10 July 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Mason</p>
<p><img alt="" src="/data/attachment/album/201807/10/222045hwhg7mp7w766v7dz.jpg"></p>
<p>这段时间以来，以太坊通证很流行。这些通证可以用来代表现实世界的各种价值单位：<a href="https://digix.global/">黄金</a>、 <a href="https://www.cnbc.com/2017/08/28/burger-king-russia-cryptocurrency-whoppercoin.html">谎言</a>、 <a href="https://www.cryptokitties.co/">猫咪</a> 甚至是类似 <a href="https://www.investopedia.com/terms/i/initial-coin-offering-ico.asp">公司股票</a> 一样的东西。迄今为止，人们已经募集了 <a href="https://www.forbes.com/sites/chancebarnett/2017/09/23/inside-the-meteoric-rise-of-icos/#57ac46d95670">20 亿美元的通证</a>。那些通证是以 <a href="https://theethereum.wiki/w/index.php/ERC20_Token_Standard">ERC20</a> 为标准的，人们可以轻松地在钱包之间进行交易。在这篇教程中，我准备指导你部署你自己的 ERC20 通证到真实的以太坊网络上去。</p>
<p>事先准备：</p>
<ul>
<li>一个文本编辑器（<a href="https://atom.io/">Atom</a> 不错，不过我喜欢 <a href="http://www.vim.org/">Vim</a>）</li>
<li>对命令行和终端（模拟器）有起码的了解。Mac 内置的应用“终端”就很好，不过我喜欢 <a href="https://www.iterm2.com/">iTerm2</a></li>
<li>Chrome 浏览器</li>
<li><a href="https://nodejs.org/">Node.js 8</a>（或更高版本）</li>
<li>你的通证的名字。我的准备叫做 HamburgerCoin（汉堡币）</li>
</ul>
<p>你需要做的第一件事是安装 <a href="https://metamask.io/">MetaMask</a>。访问 <a href="https://metamask.io/">Metamask 网站</a> 并点击“Get Chrome Extention”。</p>
<p>Metamask 可以让你通过 Chrome 在以太坊上进行交易。它依靠运行着公开以太坊节点的 <a href="https://infura.io/">Infura</a> ，所以你不用自己运行以太坊全节点。如果你颇具探索精神，你也可以下载和安装 <a href="https://github.com/ethereum/mist/releases">Mist</a> 以替代它。运行 Mist 就可以让你运行你自己的以太坊节点。运行自己的节点你就需要将你的计算机与该网络进行同步，这需要不短的时间。从技术上讲这更安全，因为这样你不必信任 Infura 来处理你的交易。Infura 可以忽略你的交易而干预你，但是它并不能偷走你的钱。因为安装 Metamask 比 Mist 更快也更简单，所以我假设你在下面的教程中使用 Metamask。</p>
<p>接着你需要安装 <a href="http://truffleframework.com/">truffle</a>：</p>
<div class="highlight"><pre><span></span><code> $ npm install -g truffle
</code></pre></div>

<p>现在为你自己的新通证创建一个新目录，cd 到其中并初始化你的 truffle 项目。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdir<span class="w"> </span>hamburger-coin
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>hamburger-coin
$<span class="w"> </span>truffle<span class="w"> </span>init
</code></pre></div>

<p>很好，你的 truffle 项目已经设置好了！</p>
<p>现在来创建我们的通证。首先我们需要安装 <a href="https://github.com/OpenZeppelin">OpenZepplin</a> 框架。OpenZepplin 框架包括了大量预先构建好的合约，包括我们要部署的 ERC20 通证合约。</p>
<p>（只需要按下回车接受默认值即可）</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>init
package<span class="w"> </span>name:<span class="w"> </span><span class="o">(</span>hamburger-coin<span class="o">)</span>
version:<span class="w"> </span><span class="o">(</span><span class="m">1</span>.0.0<span class="o">)</span>
description:
entry<span class="w"> </span>point:<span class="w"> </span><span class="o">(</span>truffle.js<span class="o">)</span>
<span class="nb">test</span><span class="w"> </span>command:
git<span class="w"> </span>repository:
keywords:
author:
license:<span class="w"> </span><span class="o">(</span>ISC<span class="o">)</span>
About<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span>to<span class="w"> </span>/Users/masonf/src/hamburger-coin/package.json:

<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;hamburger-coin&quot;</span>,
<span class="w">  </span><span class="s2">&quot;version&quot;</span>:<span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>,
<span class="w">  </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">  </span><span class="s2">&quot;main&quot;</span>:<span class="w"> </span><span class="s2">&quot;truffle.js&quot;</span>,
<span class="w">  </span><span class="s2">&quot;directories&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;test&quot;</span>:<span class="w"> </span><span class="s2">&quot;test&quot;</span>
<span class="w">  </span><span class="o">}</span>,
<span class="w">  </span><span class="s2">&quot;scripts&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;test&quot;</span>:<span class="w"> </span><span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
<span class="w">  </span><span class="o">}</span>,
<span class="w">  </span><span class="s2">&quot;author&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">  </span><span class="s2">&quot;license&quot;</span>:<span class="w"> </span><span class="s2">&quot;ISC&quot;</span>
<span class="o">}</span>


Is<span class="w"> </span>this<span class="w"> </span>ok?<span class="w"> </span><span class="o">(</span>yes<span class="o">)</span><span class="w"> </span>yes
$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>zeppelin-solidity
</code></pre></div>

<p>现在我们可以创建我们的通证合约了。创建一个 <code>contracts/HamburgerCoin.sol</code> 文件并加入如下内容：</p>
<div class="highlight"><pre><span></span><code><span class="n">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.4.18</span><span class="p">;</span>
<span class="kn">import</span> <span class="s2">&quot;zeppelin-solidity/contracts/token/StandardToken.sol&quot;</span><span class="p">;</span>

<span class="n">contract</span> <span class="n">HamburgerCoin</span> <span class="ow">is</span> <span class="n">StandardToken</span> <span class="p">{</span>
  <span class="n">string</span> <span class="n">public</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;HamburgerCoin&quot;</span><span class="p">;</span> 
  <span class="n">string</span> <span class="n">public</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s2">&quot;HBC&quot;</span><span class="p">;</span>
  <span class="n">uint</span> <span class="n">public</span> <span class="n">decimals</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">uint</span> <span class="n">public</span> <span class="n">INITIAL_SUPPLY</span> <span class="o">=</span> <span class="mi">10000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="n">decimals</span><span class="p">);</span>

  <span class="n">function</span> <span class="n">HamburgerCoin</span><span class="p">()</span> <span class="n">public</span> <span class="p">{</span>
    <span class="n">totalSupply_</span> <span class="o">=</span> <span class="n">INITIAL_SUPPLY</span><span class="p">;</span>
    <span class="n">balances</span><span class="p">[</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">=</span> <span class="n">INITIAL_SUPPLY</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>（LCTT 译注：上述合约内容中指定了合约的名称、符号和供应量。在 ERC20 当中，通证的供应量其实是整数，上述合约中通证的实际供应量是 10000 * 100 个，出于显示 2 位小数的需求，你在合约浏览器、钱包软件中看到和操作的 1 个通证，实际上在交易中是以 100 个进行的。）</p>
<p>OpenZepplin 的 <code>StandardToken</code> 是一个标准的 ERC20 通证。如果你感兴趣，你可以看看它的 <a href="https://github.com/OpenZeppelin/zeppelin-solidity/tree/master/contracts/token">源代码</a> 以了解是如何工作的。</p>
<p>实际上并不太复杂。该合约有一个 <a href="https://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/token/BasicToken.sol#L15">地址到余额</a> 的映射（LCTT 译注：你可以理解为哈希、关联数组），它也有一个 <a href="https://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/token/StandardToken.sol#L17">允许转账</a> 的列表。你可以看做是支票。你可以写张支票，但是直到它被兑付前，钱并不会被转账。</p>
<p>如果有人要转走一些资金，你可以在合约上调用 <a href="https://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/token/StandardToken.sol#L48">approve</a> 方法，设置你要发送的通证数量。这就像是写支票一样。</p>
<p>然后调用 <a href="https://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/token/StandardToken.sol#L26">transferFrom</a> 会实际进行转账。</p>
<p>我们可以从头写这些合约，但是最好采用经过完备的社区测试的合约。从头写一个 ERC20 通证那就是另外一篇文章了。</p>
<p>试着运行 <code>compile</code> 来编译我们的合约：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>truffle<span class="w"> </span>compile
Compiling<span class="w"> </span>./contracts/HamburgerCoin.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/math/SafeMath.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/ownership/Ownable.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/BasicToken.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/ERC20.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/ERC20Basic.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/MintableToken.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/StandardToken.sol...
Writing<span class="w"> </span>artifacts<span class="w"> </span>to<span class="w"> </span>./build/contracts<span class="w"> </span>Next<span class="w"> </span>you<span class="err">&#39;</span>ll<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>add<span class="w"> </span>a<span class="w"> </span>migration<span class="w"> </span>file<span class="w"> </span>which<span class="w"> </span>will<span class="w"> </span>tell<span class="w"> </span>truffle<span class="w"> </span>how<span class="w"> </span>to<span class="w"> </span>deploy<span class="w"> </span>your<span class="w"> </span>contract.
</code></pre></div>

<p>接下来我们需要增加一个 truffle <a href="http://truffleframework.com/docs/getting_started/migrations">迁移</a>。</p>
<p>创建 <code>migrations/2_deploy_hamburgercoin.js</code> 文件并添加如下内容：</p>
<div class="highlight"><pre><span></span><code><span class="k">var</span><span class="w"> </span><span class="n">HamburgerCoin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">artifacts</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="s2">&quot;./HamburgerCoin.sol&quot;</span><span class="p">);</span>

<span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">deployer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">deployer</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span><span class="n">HamburgerCoin</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>

<p>现在让我们配置 truffle 以能够使用 Infura 公共节点。如果我们要部署到公共节点，那就需要钱包的私钥。我们可以将该私钥包含在我们的源代码当中，但是如果任何人可以访问你的源代码（和版本库），他就能够偷走我们所有的汉堡币！要避免这种情况，我们会使用 <a href="https://github.com/motdotla/dotenv">dotenv</a> node.js 模块。（LCTT 译注：dotenv 用于存储机密信息的文件 .env 是以 “.” 开头的，默认不会进入版本库，当然，如果有人能查看你全部的项目文件，你的私钥还是会被泄露。）</p>
<p>让我们安装部署到 Infura 所需的所有模块。</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev dotenv truffle-wallet-provider ethereumjs-wallet
</code></pre></div>

<p>（LCTT 译注：可能安装过程中会有很多警告，大多应该是属于定义了未使用的变量和方法的编译警告，可以忽略。）</p>
<p>现在编辑 <code>truffle.js</code> 并（原样）加入如下内容：</p>
<div class="highlight"><pre><span></span><code><span class="n">require</span><span class="p">(</span><span class="s1">&#39;dotenv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">config</span><span class="p">();</span>
<span class="k">const</span><span class="w"> </span><span class="n">Web3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s2">&quot;web3&quot;</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">web3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Web3</span><span class="p">();</span>
<span class="k">const</span><span class="w"> </span><span class="n">WalletProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s2">&quot;truffle-wallet-provider&quot;</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">Wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">&#39;ethereumjs-wallet&#39;</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">mainNetPrivateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Buffer</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s2">&quot;MAINNET_PRIVATE_KEY&quot;</span><span class="p">],</span><span class="w"> </span><span class="s2">&quot;hex&quot;</span><span class="p">)</span>
<span class="k">var</span><span class="w"> </span><span class="n">mainNetWallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Wallet</span><span class="o">.</span><span class="n">fromPrivateKey</span><span class="p">(</span><span class="n">mainNetPrivateKey</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">mainNetProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">WalletProvider</span><span class="p">(</span><span class="n">mainNetWallet</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;https://mainnet.infura.io/&quot;</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">ropstenPrivateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Buffer</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s2">&quot;ROPSTEN_PRIVATE_KEY&quot;</span><span class="p">],</span><span class="w"> </span><span class="s2">&quot;hex&quot;</span><span class="p">)</span>
<span class="k">var</span><span class="w"> </span><span class="n">ropstenWallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Wallet</span><span class="o">.</span><span class="n">fromPrivateKey</span><span class="p">(</span><span class="n">ropstenPrivateKey</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">ropstenProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">WalletProvider</span><span class="p">(</span><span class="n">ropstenWallet</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;https://ropsten.infura.io/&quot;</span><span class="p">);</span>


<span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">networks</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">development</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="n">port</span><span class="p">:</span><span class="w"> </span><span class="mi">8545</span><span class="p">,</span>
<span class="w">      </span><span class="n">network_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Match</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">id</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">ropsten</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">provider</span><span class="p">:</span><span class="w"> </span><span class="n">ropstenProvider</span><span class="p">,</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">gasLimit</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">running</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">truffle</span><span class="w"> </span><span class="n">deploy</span><span class="w"> </span><span class="o">--</span><span class="n">network</span><span class="w"> </span><span class="n">rinkeby</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">truffle</span><span class="p">(</span><span class="n">rinkeby</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">getBlock</span><span class="p">(</span><span class="s2">&quot;pending&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="w">      </span><span class="o">//</span><span class="w">   </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">gasLimit</span><span class="p">))</span>
<span class="w">      </span><span class="n">gas</span><span class="p">:</span><span class="w"> </span><span class="mi">4600000</span><span class="p">,</span>
<span class="w">      </span><span class="n">gasPrice</span><span class="p">:</span><span class="w"> </span><span class="n">web3</span><span class="o">.</span><span class="n">toWei</span><span class="p">(</span><span class="s2">&quot;20&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;gwei&quot;</span><span class="p">),</span>
<span class="w">      </span><span class="n">network_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">mainnet</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">provider</span><span class="p">:</span><span class="w"> </span><span class="n">mainNetProvider</span><span class="p">,</span>
<span class="w">      </span><span class="n">gas</span><span class="p">:</span><span class="w"> </span><span class="mi">4600000</span><span class="p">,</span>
<span class="w">      </span><span class="n">gasPrice</span><span class="p">:</span><span class="w"> </span><span class="n">web3</span><span class="o">.</span><span class="n">toWei</span><span class="p">(</span><span class="s2">&quot;20&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;gwei&quot;</span><span class="p">),</span>
<span class="w">      </span><span class="n">network_id</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>

<p>（LCTT 译注：原文采用 <code>new Buffer</code> 来获取私钥设置，但 node.js 升级后，废弃了 <code>new Buffer</code> 这种用法，运行时会发出警告，所以上面我修改为使用 <code>Buffer.from</code> 。）</p>
<p>接下来我们从 Metamask 中得到我们的私钥：</p>
<ol>
<li>点击你的 Chrome 窗口右上角的狐狸图标。</li>
<li>点击 “Account 1” 右侧的省略号。</li>
<li>点击 “Export Private Key”。</li>
<li>输入你的密码。</li>
<li>点击该文字以复制私钥到剪贴板。</li>
</ol>
<p>然后打开 <code>.env</code>文件，并像下面这样贴入你的私钥（对于 Ropsten 测试网和 Mainnet 主网，你的私钥是一样的）：</p>
<div class="highlight"><pre><span></span><code>ROPSTEN_PRIVATE_KEY=&quot;123YourPrivateKeyHere&quot;
MAINNET_PRIVATE_KEY=&quot;123YourPrivateKeyHere&quot;
</code></pre></div>

<p>接下来，让我们部署到 Ropsten 以太坊测试网。</p>
<p>以太坊测试网是一个你可以测试合约的地方。此外还有 <a href="https://kovan-testnet.github.io/website/">Kovan</a> 和 <a href="https://www.rinkeby.io/">Rinkeby</a> 测试网。我在这个教程中选择 Ropsten 是因为现在很容易得到 Ropsten 的测试 ETH。这些测试网都类似，你可以使用任何一个你喜欢的，但是在此教程当中我假设你在使用 Ropsten。访问 <a href="https://faucet.metamask.io/">https://faucet.metamask.io/</a> 以得到一些测试 ETH。从 faucet 得到一些 ETH 后，你就可以部署了。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>truffle<span class="w"> </span>deploy<span class="w"> </span>--network<span class="w"> </span>ropsten
Compiling<span class="w"> </span>./contracts/HamburgerCoin.sol...
Compiling<span class="w"> </span>./contracts/Migrations.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/math/SafeMath.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/BasicToken.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/ERC20.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/ERC20Basic.sol...
Compiling<span class="w"> </span>zeppelin-solidity/contracts/token/StandardToken.sol...
Writing<span class="w"> </span>artifacts<span class="w"> </span>to<span class="w"> </span>./build/contracts

Using<span class="w"> </span>network<span class="w"> </span><span class="s1">&#39;ropsten&#39;</span>.

Running<span class="w"> </span>migration:<span class="w"> </span>1_initial_migration.js
<span class="w">  </span>Deploying<span class="w"> </span>Migrations...
<span class="w">  </span>...<span class="w"> </span>0xc2bbe6bf5a7c7c7312c43d65de4c18c51c4d620d5bf51481ea530411dcebc499
<span class="w">  </span>Migrations:<span class="w"> </span>0xd827b6f93fcb50631edc4cf8e293159f0c056538
Saving<span class="w"> </span>successful<span class="w"> </span>migration<span class="w"> </span>to<span class="w"> </span>network...
<span class="w">  </span>...<span class="w"> </span>0xe6f92402e6ca0b1d615a310751568219f66b9d78b80a37c6d92ca59af26cf475
Saving<span class="w"> </span>artifacts...
Running<span class="w"> </span>migration:<span class="w"> </span>2_deploy_contracts.js
<span class="w">  </span>Deploying<span class="w"> </span>HamburgerCoin...
<span class="w">  </span>...<span class="w"> </span>0x02c4d47526772dc524851fc2180b338a6b037500ab298fa2f405f01abdee21c4
<span class="w">  </span>HamburgerCoin:<span class="w"> </span>0x973b1a5c753a2d5d3924dfb66028b975e7ccca51
Saving<span class="w"> </span>artifacts...
</code></pre></div>

<p>在 “Saving aritfacts” 上面的这行即是你的合约的新地址。</p>
<p>复制并黏贴该地址到 <a href="https://ropsten.etherscan.io/">Ropsten Etherscan 搜索框</a>，你就能看到你新部署的合约。</p>
<p>现在你可以在任何 ERC20 兼容的钱包，如 <a href="https://github.com/ethereum/mist">Mist</a> 、<a href="https://www.myetherwallet.com/">MyEtherWallet</a>（LCTT 译注：或 ImToken 这样的手机应用）里面使用你的通证了。</p>
<p>为了这篇教程，我构建了一个名为 <a href="http://etherface.io/">Etherface</a> 的钱包来做演示。</p>
<p>首先你需要添加你的通证到 Etherface：</p>
<ol>
<li>访问 <a href="http://etherface.io/">http://etherface.io/</a> 。</li>
<li>确认你在 Metamask 中选择了 “Ropsten” 网络。</li>
<li>点击 “Tokens”。</li>
<li>点击右上角的加号按钮。</li>
<li>输入上面的合约地址。</li>
</ol>
<p>如果你有朋友想要一些汉堡币，你现在就可以发送给他们了。如果没有，你也可以在你的两个账号间测试转账：</p>
<ol>
<li>在 Metamask 中点击 “切换账号”按钮（在右上角），并改变你的账号为 “Account 2”。</li>
<li>点击 “Account 2” 右边的省略号，然后选择 “Copy Address to clipboard”。</li>
<li>切换回 “Account 1”，这很重要！否则交易会失败。</li>
<li>在 Etherface 中你的余额下点击 “Send”。</li>
<li>黏贴 “Account 2” 的地址。</li>
<li>输入你要发送的数量。</li>
<li>Metamask 会弹出确认窗口，点击 “Submit”。</li>
<li>等大约 15-30 秒。</li>
<li>你的 “Account 1” 的余额应该会减少，“Account 2” 现在会有了一些汉堡币！</li>
</ol>
<p>最后，让我们来部署到主网（LCTT 译注：这会花费你真实的 ETH，你可以通过查看前面部署到 Ropsten 的合约信息中了解花费了多少 gas，以相应估计实际要花费多少 ETH）：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>truffle<span class="w"> </span>deploy<span class="w"> </span>--network<span class="w"> </span>mainnet
</code></pre></div>

<p>你可以如前面一样加你的通证到 Etherface ，并发送你新打造的通证给你的朋友们了！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>