<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何使用 npm 管理 NodeJS 包</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Sk 前一段时间，我们发布了一个使用 pip 管理 Python 包的指南。今天，我们将讨论如何使用 npm 管理 NodeJS 包。npm 是最大的软件注册中 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/05/ru-he-shi-yong-npm-guan-li-nodejs-bao.html" rel="bookmark"
           title="Permalink to 如何使用 npm 管理 NodeJS 包">如何使用 npm 管理 NodeJS 包</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-05-07T10:15:54+02:00">
                Published: Mon 07 May 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Sk</p>
<p><img alt="" src="/data/attachment/album/201805/07/101556gyaxm33zchx3bax7.png"></p>
<p>前一段时间，我们发布了一个<a href="https://docs.npmjs.com/getting-started/">使用 pip 管理 Python 包</a>的指南。今天，我们将讨论如何使用 npm 管理 NodeJS 包。npm 是最大的软件注册中心，包含 600,000 多个包。每天，世界各地的开发人员通过 npm 共享和下载软件包。在本指南中，我将解释使用 npm 基础知识，例如安装包（本地和全局）、安装特定版本的包、更新、删除和管理 NodeJS 包等等。</p>
<h3>安装 npm</h3>
<p>用于 npm 是用 NodeJS 编写的，我们需要安装 NodeJS 才能使用 npm。要在不同的 Linux 发行版上安装 NodeJS，请参考下面的链接。</p>
<ul>
<li><a href="https://www.ostechnix.com/install-node-js-linux/">在 Linux 上安装 NodeJS</a></li>
</ul>
<p>检查 node 安装的位置：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>which<span class="w"> </span>node
/home/sk/.nvm/versions/node/v9.4.0/bin/node
</code></pre></div>

<p>检查它的版本：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>node<span class="w"> </span>-v
v9.4.0
</code></pre></div>

<p>进入 Node 交互式解释器：</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">node</span>
<span class="o">&gt;</span><span class="w"> </span><span class="o">.</span><span class="n">help</span>
<span class="o">.</span><span class="k">break</span><span class="w"> </span><span class="n">Sometimes</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">stuck</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">gets</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">out</span>
<span class="o">.</span><span class="n">clear</span><span class="w"> </span><span class="n">Alias</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">.</span><span class="k">break</span>
<span class="o">.</span><span class="n">editor</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">editor</span><span class="w"> </span><span class="n">mode</span>
<span class="o">.</span><span class="n">exit</span><span class="w"> </span><span class="n">Exit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">repl</span>
<span class="o">.</span><span class="n">help</span><span class="w"> </span><span class="n">Print</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="n">message</span>
<span class="o">.</span><span class="n">load</span><span class="w"> </span><span class="n">Load</span><span class="w"> </span><span class="n">JS</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">REPL</span><span class="w"> </span><span class="n">session</span>
<span class="o">.</span><span class="n">save</span><span class="w"> </span><span class="n">Save</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">evaluated</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">REPL</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span>
<span class="o">&gt;</span><span class="w"> </span><span class="o">.</span><span class="n">exit</span>
</code></pre></div>

<p>检查 npm 安装的位置：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>which<span class="w"> </span>npm
/home/sk/.nvm/versions/node/v9.4.0/bin/npm
</code></pre></div>

<p>还有版本：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>-v
<span class="m">5</span>.6.0
</code></pre></div>

<p>棒极了！Node 和 npm 已安装好！正如你可能已经注意到，我已经在我的 <code>$HOME</code> 目录中安装了 NodeJS 和 NPM，这样是为了避免在全局模块时出现权限问题。这是 NodeJS 团队推荐的方法。</p>
<p>那么，让我们继续看看如何使用 npm 管理 NodeJS 模块（或包）。</p>
<h3>安装 NodeJS 模块</h3>
<p>NodeJS 模块可以安装在本地或全局（系统范围）。现在我将演示如何在本地安装包（LCTT 译注：即将包安装到一个 NodeJS 项目当中，所以下面会先创建一个空项目做演示）。</p>
<h4>在本地安装包</h4>
<p>为了在本地管理包，我们通常使用 <code>package.json</code> 文件来管理。</p>
<p>首先，让我们创建我们的项目目录。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdir<span class="w"> </span>demo
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>demo
</code></pre></div>

<p>在项目目录中创建一个 <code>package.json</code> 文件。为此，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>init
</code></pre></div>

<p>输入你的包的详细信息，例如名称、版本、作者、GitHub 页面等等，或者按下回车键接受默认值并键入 <code>yes</code> 确认。</p>
<div class="highlight"><pre><span></span><code><span class="nx">This</span><span class="w"> </span><span class="nx">utility</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">walk</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">through</span><span class="w"> </span><span class="nx">creating</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="kn">package</span><span class="p">.</span><span class="nx">json</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span>
<span class="nx">It</span><span class="w"> </span><span class="nx">only</span><span class="w"> </span><span class="nx">covers</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">most</span><span class="w"> </span><span class="nx">common</span><span class="w"> </span><span class="nx">items</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">tries</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">guess</span><span class="w"> </span><span class="nx">sensible</span><span class="w"> </span><span class="nx">defaults</span><span class="p">.</span>

<span class="nx">See</span><span class="w"> </span><span class="err">`</span><span class="nx">npm</span><span class="w"> </span><span class="nx">help</span><span class="w"> </span><span class="nx">json</span><span class="err">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">definitive</span><span class="w"> </span><span class="nx">documentation</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">these</span><span class="w"> </span><span class="nx">fields</span>
<span class="k">and</span><span class="w"> </span><span class="nx">exactly</span><span class="w"> </span><span class="nx">what</span><span class="w"> </span><span class="nx">they</span><span class="w"> </span><span class="nx">do</span><span class="p">.</span>

<span class="nx">Use</span><span class="w"> </span><span class="err">`</span><span class="nx">npm</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="p">&lt;</span><span class="nx">pkg</span><span class="p">&gt;</span><span class="err">`</span><span class="w"> </span><span class="nx">afterwards</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="k">and</span>
<span class="nx">save</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">dependency</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="kn">package</span><span class="p">.</span><span class="nx">json</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span>

<span class="nx">Press</span><span class="w"> </span><span class="o">^</span><span class="nx">C</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">any</span><span class="w"> </span><span class="nx">time</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">quit</span><span class="p">.</span>
<span class="kn">package</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="nx">demo</span><span class="p">)</span>
<span class="nx">version</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">1.0.0</span><span class="p">)</span>
<span class="nx">description</span><span class="p">:</span><span class="w"> </span><span class="nx">demo</span><span class="w"> </span><span class="nx">nodejs</span><span class="w"> </span><span class="nx">app</span>
<span class="nx">entry</span><span class="w"> </span><span class="nx">point</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="p">.</span><span class="nx">js</span><span class="p">)</span>
<span class="nx">test</span><span class="w"> </span><span class="nx">command</span><span class="p">:</span>
<span class="nx">git</span><span class="w"> </span><span class="nx">repository</span><span class="p">:</span>
<span class="nx">keywords</span><span class="p">:</span>
<span class="nx">author</span><span class="p">:</span>
<span class="nx">license</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="nx">ISC</span><span class="p">)</span>
<span class="nx">About</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">write</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="o">/</span><span class="nx">home</span><span class="o">/</span><span class="nx">sk</span><span class="o">/</span><span class="nx">demo</span><span class="o">/</span><span class="kn">package</span><span class="p">.</span><span class="nx">json</span><span class="p">:</span>

<span class="p">{</span>
<span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;demo&quot;</span><span class="p">,</span>
<span class="w"> </span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="w"> </span><span class="s">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;demo nodejs app&quot;</span><span class="p">,</span>
<span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;index.js&quot;</span><span class="p">,</span>
<span class="w"> </span><span class="s">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
<span class="w"> </span><span class="p">},</span>
<span class="w"> </span><span class="s">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w"> </span><span class="s">&quot;license&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ISC&quot;</span>
<span class="p">}</span>

<span class="nx">Is</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">ok</span><span class="p">?</span><span class="w"> </span><span class="p">(</span><span class="nx">yes</span><span class="p">)</span><span class="w"> </span><span class="nx">yes</span>
</code></pre></div>

<p>上面的命令初始化你的项目并创建了 <code>package.json</code> 文件。</p>
<p>你也可以使用命令以非交互式方式执行此操作：</p>
<div class="highlight"><pre><span></span><code>npm init --y
</code></pre></div>

<p>现在让我们安装名为 <a href="https://www.npmjs.com/package/commander">commander</a> 的包。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>commander
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code><span class="n">npm</span><span class="w"> </span><span class="n">notice</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lockfile</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">package</span><span class="o">-</span><span class="n">lock</span><span class="p">.</span><span class="n">json</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">npm</span><span class="w"> </span><span class="n">WARN</span><span class="w"> </span><span class="n">demo</span><span class="mf">@1.0.0</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="n">field</span><span class="p">.</span>

<span class="o">+</span><span class="w"> </span><span class="n">commander</span><span class="mf">@2.13.0</span>
<span class="n">added</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">2.519</span><span class="n">s</span>
</code></pre></div>

<p>这将在项目的根目录中创建一个名为 <code>node_modules</code> 的目录（如果它不存在的话），并在其中下载包。</p>
<p>让我们检查 <code>pachage.json</code> 文件。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>package.json<span class="w"> </span>
<span class="o">{</span>
<span class="w"> </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;demo&quot;</span>,
<span class="w"> </span><span class="s2">&quot;version&quot;</span>:<span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>,
<span class="w"> </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;demo nodejs app&quot;</span>,
<span class="w"> </span><span class="s2">&quot;main&quot;</span>:<span class="w"> </span><span class="s2">&quot;index.js&quot;</span>,
<span class="w"> </span><span class="s2">&quot;scripts&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w"> </span><span class="s2">&quot;test&quot;</span>:<span class="w"> </span><span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
<span class="w"> </span><span class="o">}</span>,
<span class="w"> </span><span class="s2">&quot;author&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w"> </span><span class="s2">&quot;license&quot;</span>:<span class="w"> </span><span class="s2">&quot;ISC&quot;</span>,
<span class="w"> </span><span class="s2">&quot;dependencies&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w"> </span><span class="s2">&quot;commander&quot;</span>:<span class="w"> </span><span class="s2">&quot;^2.13.0&quot;</span>
<span class="w"> </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<p>你会看到添加了依赖文件，版本号前面的插入符号 ( <code>^</code> ) 表示在安装时，npm 将取出它可以找到的最高版本的包。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>node_modules/
commander
</code></pre></div>

<p><code>package.json</code> 文件的优点是，如果你的项目目录中有 <code>package.json</code> 文件，只需键入 <code>npm install</code>，那么 <code>npm</code> 将查看文件中列出的依赖关系并下载它们。你甚至可以与其他开发人员共享它或将其推送到你的 GitHub 仓库。因此，当他们键入 <code>npm install</code> 时，他们将获得你拥有的所有相同的包。</p>
<p>你也可能会注意到另一个名为 <code>package-lock.json</code> 的文件，该文件确保在项目安装的所有系统上都保持相同的依赖关系。</p>
<p>要在你的程序中使用已安装的包，使用实际代码在项目目录中创建一个 <code>index.js</code>（或者其他任何名称）文件，然后使用以下命令运行它：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>node<span class="w"> </span>index.js
</code></pre></div>

<h4>在全局安装包</h4>
<p>如果你想使用一个包作为命令行工具，那么最好在全局安装它。这样，无论你的当前目录是哪个目录，它都能正常工作。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">npm</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="o">-</span><span class="n">g</span>
<span class="o">+</span><span class="w"> </span><span class="n">async</span><span class="mf">@2.6.0</span>
<span class="n">added</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">packages</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">4.695</span><span class="n">s</span>
</code></pre></div>

<p>或者</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>async<span class="w"> </span>--global
</code></pre></div>

<p>要安装特定版本的包，我们可以：</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">npm</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">async</span><span class="mf">@2.6.0</span><span class="w"> </span><span class="o">--</span><span class="n">global</span>
</code></pre></div>

<h3>更新 NodeJS 模块</h3>
<p>要更新本地包，转到 <code>package.json</code> 所在的项目目录并运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>update
</code></pre></div>

<p>然后，运行以下命令确保所有包都更新了。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>outdated
</code></pre></div>

<p>如果没有需要更新的，那么它返回空。</p>
<p>要找出哪一个全局包需要更新，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>outdated<span class="w"> </span>-g<span class="w"> </span>--depth<span class="o">=</span><span class="m">0</span>
</code></pre></div>

<p>如果没有输出，意味着所有包都已更新。</p>
<p>更新单个全局包，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>update<span class="w"> </span>-g<span class="w"> </span>&lt;package-name&gt;
</code></pre></div>

<p>更新所有的全局包，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>update<span class="w"> </span>-g
</code></pre></div>

<h3>列出 NodeJS 模块</h3>
<p>列出本地包，转到项目目录并运行：</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">npm</span><span class="w"> </span><span class="n">list</span>
<span class="n">demo</span><span class="mf">@1.0.0</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sk</span><span class="o">/</span><span class="n">demo</span>
<span class="err">└──</span><span class="w"> </span><span class="n">commander</span><span class="mf">@2.13.0</span>
</code></pre></div>

<p>如你所见，我在本地安装了 <code>commander</code> 这个包。</p>
<p>要列出全局包，从任何位置都可以运行以下命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>list<span class="w"> </span>-g
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sk</span><span class="o">/</span><span class="p">.</span><span class="n">nvm</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span><span class="n">node</span><span class="o">/</span><span class="n">v9</span><span class="mf">.4.0</span><span class="o">/</span><span class="n">lib</span>
<span class="err">├─┬</span><span class="w"> </span><span class="n">async</span><span class="mf">@2.6.0</span>
<span class="err">│</span><span class="w"> </span><span class="err">└──</span><span class="w"> </span><span class="n">lodash</span><span class="mf">@4.17.4</span>
<span class="err">└─┬</span><span class="w"> </span><span class="n">npm</span><span class="mf">@5.6.0</span>
<span class="w"> </span><span class="err">├──</span><span class="w"> </span><span class="n">abbrev</span><span class="mf">@1.1.1</span>
<span class="w"> </span><span class="err">├──</span><span class="w"> </span><span class="n">ansi</span><span class="o">-</span><span class="n">regex</span><span class="mf">@3.0.0</span>
<span class="w"> </span><span class="err">├──</span><span class="w"> </span><span class="n">ansicolors</span><span class="mf">@0.3.2</span>
<span class="w"> </span><span class="err">├──</span><span class="w"> </span><span class="n">ansistyles</span><span class="mf">@0.1.3</span>
<span class="w"> </span><span class="err">├──</span><span class="w"> </span><span class="n">aproba</span><span class="mf">@1.2.0</span>
<span class="w"> </span><span class="err">├──</span><span class="w"> </span><span class="n">archy</span><span class="mf">@1.0.0</span>
<span class="p">[...]</span>
</code></pre></div>

<p>该命令将列出所有模块及其依赖关系。</p>
<p>要仅仅列出顶级模块，使用 <code>-depth=0</code> 选项：</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">npm</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="o">--</span><span class="n">depth</span><span class="o">=</span><span class="mi">0</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sk</span><span class="o">/</span><span class="p">.</span><span class="n">nvm</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span><span class="n">node</span><span class="o">/</span><span class="n">v9</span><span class="mf">.4.0</span><span class="o">/</span><span class="n">lib</span>
<span class="err">├──</span><span class="w"> </span><span class="n">async</span><span class="mf">@2.6.0</span>
<span class="err">└──</span><span class="w"> </span><span class="n">npm</span><span class="mf">@5.6.0</span>
</code></pre></div>

<h4>寻找 NodeJS 模块</h4>
<p>要搜索一个模块，使用 <code>npm search</code> 命令：</p>
<div class="highlight"><pre><span></span><code>npm search &lt;search-string&gt;
</code></pre></div>

<p>例如：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>search<span class="w"> </span>request
</code></pre></div>

<p>该命令将显示包含搜索字符串 <code>request</code> 的所有模块。</p>
<h5>移除 NodeJS 模块</h5>
<p>要删除本地包，转到项目目录并运行以下命令，这会从 <code>node_modules</code> 目录中删除包：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>uninstall<span class="w"> </span>&lt;package-name&gt;
</code></pre></div>

<p>要从 <code>package.json</code> 文件中的依赖关系中删除它，使用如下所示的 <code>save</code> 选项：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>uninstall<span class="w"> </span>--save<span class="w"> </span>&lt;package-name&gt;
</code></pre></div>

<p>要删除已安装的全局包，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>uninstall<span class="w"> </span>-g<span class="w"> </span>&lt;package&gt;
</code></pre></div>

<h3>清除 npm 缓存</h3>
<p>默认情况下，npm 在安装包时，会将其副本保存在 <code>$HOME</code> 目录中名为 <code>.npm</code> 的缓存文件夹中。所以，你可以在下次安装时不必再次下载。</p>
<p>查看缓存模块：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>~/.npm
</code></pre></div>

<p>随着时间的推移，缓存文件夹会充斥着大量旧的包。所以不时清理缓存会好一些。</p>
<p>从 npm@5 开始，npm 缓存可以从 corruption 问题中自行修复，并且保证从缓存中提取的数据有效。如果你想确保一切都一致，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>cache<span class="w"> </span>verify
</code></pre></div>

<p>清除整个缓存，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>cache<span class="w"> </span>clean<span class="w"> </span>--force
</code></pre></div>

<h3>查看 npm 配置</h3>
<p>要查看 npm 配置，键入：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>config<span class="w"> </span>list
</code></pre></div>

<p>或者：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>config<span class="w"> </span>ls
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code><span class="p">;</span><span class="w"> </span><span class="n">cli</span><span class="w"> </span><span class="n">configs</span>
<span class="n">metrics</span><span class="o">-</span><span class="n">registry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://registry.npmjs.org/&quot;</span>
<span class="n">scope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="n">user</span><span class="o">-</span><span class="n">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;npm/5.6.0 node/v9.4.0 linux x64&quot;</span>

<span class="p">;</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">bin</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sk</span><span class="o">/</span><span class="p">.</span><span class="n">nvm</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span><span class="n">node</span><span class="o">/</span><span class="n">v9</span><span class="mf">.4.0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">node</span>
<span class="p">;</span><span class="w"> </span><span class="n">cwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sk</span>
<span class="p">;</span><span class="w"> </span><span class="n">HOME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">sk</span>
<span class="p">;</span><span class="w"> </span><span class="s">&quot;npm config ls -l&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">defaults</span><span class="p">.</span>
</code></pre></div>

<p>要显示当前的全局位置：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>config<span class="w"> </span>get<span class="w"> </span>prefix
/home/sk/.nvm/versions/node/v9.4.0
</code></pre></div>

<p>好吧，这就是全部了。我们刚才介绍的只是基础知识，npm 是一个广泛话题。有关更多详细信息，参阅 <a href="https://docs.npmjs.com/getting-started/"><strong>NPM Getting Started</strong></a> 指南。</p>
<p>希望这对你有帮助。更多好东西即将来临，敬请关注！</p>
<p>干杯！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>