<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在树莓派上搭建 WordPress</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Ben Nuttall 这篇简单的教程可以让你在树莓派上运行你的 WordPress 网站。 WordPress 是一个非常受欢迎的开源博客平台和内容管理平台（CMS …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li class="active"><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/11/ru-he-zai-shu-mei-pai-shang-da-jian-wordpress.html" rel="bookmark"
           title="Permalink to 如何在树莓派上搭建 WordPress">如何在树莓派上搭建 WordPress</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-11-07T21:35:17+01:00">
                Published: Wed 07 November 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/shu-mei-pai">树莓派</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Ben Nuttall</p>
<blockquote>
<p>这篇简单的教程可以让你在树莓派上运行你的 WordPress 网站。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201811/07/213524y2djj3jvz9tjhcoz.png"></p>
<p>WordPress 是一个非常受欢迎的开源博客平台和内容管理平台（CMS)。它很容易搭建，而且还有一个活跃的开发者社区构建网站、创建主题和插件供其他人使用。</p>
<p>虽然通过一键式 WordPress 设置获得托管包很容易，但也可以简单地通过命令行在 Linux 服务器上设置自己的托管包，而且树莓派是一种用来尝试它并顺便学习一些东西的相当好的途径。</p>
<p>一个经常使用的 Web 套件的四个部分是 Linux、Apache、MySQL 和 PHP。这里是你对它们每一个需要了解的。</p>
<h3>Linux</h3>
<p>树莓派上运行的系统是 Raspbian，这是一个基于 Debian，为运行在树莓派硬件上而优化的很好的 Linux 发行版。你有两个选择：桌面版或是精简版。桌面版有一个熟悉的桌面还有很多教育软件和编程工具，像是 LibreOffice 套件、Mincraft，还有一个 web 浏览器。精简版本没有桌面环境，因此它只有命令行以及一些必要的软件。</p>
<p>这篇教程在两个版本上都可以使用，但是如果你使用的是精简版，你必须要有另外一台电脑去访问你的站点。</p>
<h3>Apache</h3>
<p>Apache 是一个受欢迎的 web 服务器应用，你可以安装在你的树莓派上伺服你的 web 页面。就其自身而言，Apache 可以通过 HTTP 提供静态 HTML 文件。使用额外的模块，它也可以使用像是 PHP 的脚本语言提供动态网页。</p>
<p>安装 Apache 非常简单。打开一个终端窗口，然后输入下面的命令：</p>
<div class="highlight"><pre><span></span><code>sudo apt install apache2 -y
</code></pre></div>

<p>Apache 默认放了一个测试文件在一个 web 目录中，你可以从你的电脑或是你网络中的其他计算机进行访问。只需要打开 web 浏览器，然后输入地址 <code>&lt;http://localhost&gt;</code>。或者（特别是你使用的是 Raspbian Lite 的话）输入你的树莓派的 IP 地址代替 <code>localhost</code>。你应该会在你的浏览器窗口中看到这样的内容：</p>
<p><img alt="" src="/data/attachment/album/201811/07/213529fzs0x9sksorszco0.png"></p>
<p>这意味着你的 Apache 已经开始工作了！</p>
<p>这个默认的网页仅仅是你文件系统里的一个文件。它在你本地的 <code>/var/www/html/index/html</code>。你可以使用 <a href="https://en.wikipedia.org/wiki/Leafpad">Leafpad</a> 文本编辑器写一些 HTML 去替换这个文件的内容。</p>
<div class="highlight"><pre><span></span><code><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="o">/</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">leafpad</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</code></pre></div>

<p>保存并关闭 Leafpad 然后刷新网页，查看你的更改。</p>
<h3>MySQL</h3>
<p>MySQL（读作 “my S-Q-L” 或者 “my sequel”）是一个很受欢迎的数据库引擎。就像 PHP，它被非常广泛的应用于网页服务，这也是为什么像 WordPress 一样的项目选择了它，以及这些项目是为何如此受欢迎。</p>
<p>在一个终端窗口中输入以下命令安装 MySQL 服务（LCTT 译注：实际上安装的是 MySQL 分支 MariaDB）：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install mysql-server -y
</code></pre></div>

<p>WordPress 使用 MySQL 存储文章、页面、用户数据、还有许多其他的内容。</p>
<h3>PHP</h3>
<p>PHP 是一个预处理器：它是在服务器通过网络浏览器接受网页请求是运行的代码。它解决那些需要展示在网页上的内容，然后发送这些网页到浏览器上。不像静态的 HTML，PHP 能在不同的情况下展示不同的内容。PHP 是一个在 web 上非常受欢迎的语言；很多像 Facebook 和 Wikipedia 的项目都使用 PHP 编写。</p>
<p>安装 PHP 和 MySQL 的插件：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install php php-mysql -y
</code></pre></div>

<p>删除 <code>index.html</code>，然后创建 <code>index.php</code>：</p>
<div class="highlight"><pre><span></span><code>sudo rm index.html
sudo leafpad index.php
</code></pre></div>

<p>在里面添加以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span> <span class="nb">phpinfo</span><span class="p">();</span> <span class="cp">?&gt;</span>
</code></pre></div>

<p>保存、退出、刷新你的网页。你将会看到 PHP 状态页：</p>
<p><img alt="" src="/data/attachment/album/201811/07/213533sbj7f7qntfk1dm5z.png"></p>
<h3>WordPress</h3>
<p>你可以使用 <code>wget</code> 命令从 <a href="http://wordpress.org/">wordpress.org</a> 下载 WordPress。最新的 WordPress 总是使用 <a href="https://wordpress.org/latest.tar.gz">wordpress.org/latest.tar.gz</a> 这个网址，所以你可以直接抓取这些文件，而无需到网页里面查看，现在的版本是 4.9.8。</p>
<p>确保你在 <code>/var/www/html</code> 目录中，然后删除里面的所有内容：</p>
<div class="highlight"><pre><span></span><code><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="o">/</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">*</span>
</code></pre></div>

<p>使用 <code>wget</code> 下载 WordPress，然后提取里面的内容，并移动提取的 WordPress 目录中的内容移动到 <code>html</code> 目录下：</p>
<div class="highlight"><pre><span></span><code>sudo wget http://wordpress.org/latest.tar.gz
sudo tar xzf latest.tar.gz
sudo mv wordpress/* .
</code></pre></div>

<p>现在可以删除压缩包和空的 <code>wordpress</code> 目录了：</p>
<div class="highlight"><pre><span></span><code>sudo rm -rf wordpress latest.tar.gz
</code></pre></div>

<p>运行 <code>ls</code> 或者 <code>tree -L 1</code> 命令显示 WordPress 项目下包含的内容：</p>
<div class="highlight"><pre><span></span><code><span class="o">.</span>
<span class="err">├──</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">license</span><span class="o">.</span><span class="n">txt</span>
<span class="err">├──</span><span class="w"> </span><span class="n">readme</span><span class="o">.</span><span class="n">html</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">activate</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">admin</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">blog</span><span class="o">-</span><span class="n">header</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">comments</span><span class="o">-</span><span class="n">post</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">sample</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">content</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">cron</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">includes</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">links</span><span class="o">-</span><span class="n">opml</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="nb">load</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">login</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">mail</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">settings</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">signup</span><span class="o">.</span><span class="n">php</span>
<span class="err">├──</span><span class="w"> </span><span class="n">wp</span><span class="o">-</span><span class="n">trackback</span><span class="o">.</span><span class="n">php</span>
<span class="err">└──</span><span class="w"> </span><span class="n">xmlrpc</span><span class="o">.</span><span class="n">php</span>

<span class="mi">3</span><span class="w"> </span><span class="n">directories</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="n">files</span>
</code></pre></div>

<p>这是 WordPress 的默认安装源。在 <code>wp-content</code> 目录中，你可以编辑你的自定义安装。</p>
<p>你现在应该把所有文件的所有权改为 Apache 的运行用户 <code>www-data</code>：</p>
<div class="highlight"><pre><span></span><code>sudo chown -R www-data: .
</code></pre></div>

<h3>WordPress 数据库</h3>
<p>为了搭建你的 WordPress 站点，你需要一个数据库。这里使用的是 MySQL。</p>
<p>在终端窗口运行 MySQL 的安全安装命令：</p>
<div class="highlight"><pre><span></span><code>sudo mysql_secure_installation
</code></pre></div>

<p>你将会被问到一系列的问题。这里原来没有设置密码，但是在下一步你应该设置一个。确保你记住了你输入的密码，后面你需要使用它去连接你的 WordPress。按回车确认下面的所有问题。</p>
<p>当它完成之后，你将会看到 “All done!” 和 “Thanks for using MariaDB!” 的信息。</p>
<p>在终端窗口运行 <code>mysql</code> 命令：</p>
<div class="highlight"><pre><span></span><code>sudo mysql -uroot -p
</code></pre></div>

<p>输入你创建的 root 密码（LCTT 译注：不是 Linux 系统的 root 密码，是 MySQL 的 root 密码）。你将看到 “Welcome to the MariaDB monitor.” 的欢迎信息。在 “MariaDB [(none)] &gt;” 提示处使用以下命令，为你 WordPress 的安装创建一个数据库：</p>
<div class="highlight"><pre><span></span><code>create database wordpress;
</code></pre></div>

<p>注意声明最后的分号，如果命令执行成功，你将看到下面的提示：</p>
<div class="highlight"><pre><span></span><code>Query OK, 1 row affected (0.00 sec)
</code></pre></div>

<p>把数据库权限交给 root 用户在声明的底部输入密码：</p>
<div class="highlight"><pre><span></span><code>GRANT ALL PRIVILEGES ON wordpress.* TO &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;YOURPASSWORD&#39;;
</code></pre></div>

<p>为了让更改生效，你需要刷新数据库权限：</p>
<div class="highlight"><pre><span></span><code>FLUSH PRIVILEGES;
</code></pre></div>

<p>按 <code>Ctrl+D</code> 退出 MariaDB 提示符，返回到 Bash shell。</p>
<h3>WordPress 配置</h3>
<p>在你的 树莓派 打开网页浏览器，地址栏输入 <code>http://localhost</code>。选择一个你想要在 WordPress 使用的语言，然后点击“Continue”。你将会看到 WordPress 的欢迎界面。点击 “Let’s go!” 按钮。</p>
<p>按照下面这样填写基本的站点信息：</p>
<div class="highlight"><pre><span></span><code>Database Name:      wordpress
User Name:          root
Password:           &lt;YOUR PASSWORD&gt;
Database Host:      localhost
Table Prefix:       wp_
</code></pre></div>

<p>点击 “Submit” 继续，然后点击 “Run the install”。</p>
<p><img alt="" src="/data/attachment/album/201811/07/213535lkjk0blvkkkkzbtz.png"></p>
<p>按下面的格式填写：为你的站点设置一个标题、创建一个用户名和密码、输入你的 email 地址。点击 “Install WordPress” 按钮，然后使用你刚刚创建的账号登录，你现在已经登录，而且你的站点已经设置好了，你可以在浏览器地址栏输入 <code>http://localhost/wp-admin</code> 查看你的网站。</p>
<h3>永久链接</h3>
<p>更改你的永久链接设置，使得你的 URL 更加友好是一个很好的想法。</p>
<p>要这样做，首先登录你的 WordPress ，进入仪表盘。进入 “Settings”，“Permalinks”。选择 “Post name” 选项，然后点击 “Save Changes”。接着你需要开启 Apache 的 <code>rewrite</code> 模块。</p>
<div class="highlight"><pre><span></span><code>sudo a2enmod rewrite
</code></pre></div>

<p>你还需要告诉虚拟托管服务，站点允许改写请求。为你的虚拟主机编辑 Apache 配置文件：</p>
<div class="highlight"><pre><span></span><code>sudo leafpad /etc/apache2/sites-available/000-default.conf
</code></pre></div>

<p>在第一行后添加下面的内容：</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;Directory</span><span class="w"> </span><span class="err">&quot;/var/www/html&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span>AllowOverride<span class="w"> </span>All
<span class="nt">&lt;/Directory&gt;</span>
</code></pre></div>

<p>确保其中有像这样的内容 <code>&lt;VirtualHost *:80&gt;</code>：</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="err">*:80</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Directory</span><span class="w"> </span><span class="err">&quot;/var/www/html&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span>AllowOverride<span class="w"> </span>All
<span class="w">    </span><span class="nt">&lt;/Directory&gt;</span>
<span class="w">    </span>...
</code></pre></div>

<p>保存这个文件，然后退出，重启 Apache：</p>
<div class="highlight"><pre><span></span><code>sudo systemctl restart apache2
</code></pre></div>

<h3>下一步？</h3>
<p>WordPress 是可以高度自定义的。在网站顶部横幅处点击你的站点名，你就会进入仪表盘。在这里你可以修改主题、添加页面和文章、编辑菜单、添加插件、以及许多其他的事情。</p>
<p>这里有一些你可以在树莓派的网页服务上尝试的有趣的事情：</p>
<ul>
<li>添加页面和文章到你的网站</li>
<li>从外观菜单安装不同的主题</li>
<li>自定义你的网站主题或是创建你自己的</li>
<li>使用你的网站服务向你的网络上的其他人显示有用的信息</li>
</ul>
<p>不要忘记，树莓派是一台 Linux 电脑。你也可以使用相同的结构在运行着 Debian 或者 Ubuntu 的服务器上安装 WordPress。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>