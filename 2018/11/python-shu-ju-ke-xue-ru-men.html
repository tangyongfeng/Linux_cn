<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Python 数据科学入门</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Payal Singh 不需要昂贵的工具即可领略数据科学的力量，从这些开源工具起步即可。 无论你是一个具有数学或计算机科学背 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/11/python-shu-ju-ke-xue-ru-men.html" rel="bookmark"
           title="Permalink to Python 数据科学入门">Python 数据科学入门</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-11-06T19:50:28+01:00">
                Published: Tue 06 November 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Payal Singh</p>
<blockquote>
<p>不需要昂贵的工具即可领略数据科学的力量，从这些开源工具起步即可。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201811/06/195017agc777rln78znrl2.jpg"></p>
<p>无论你是一个具有数学或计算机科学背景的资深数据科学爱好者，还是一个其它领域的专家，数据科学提供的可能性都在你力所能及的范围内，而且你不需要昂贵的，高度专业化的企业级软件。本文中讨论的开源工具就是你入门时所需的全部内容。</p>
<p><a href="https://www.python.org/">Python</a>，其机器学习和数据科学库（<a href="https://pandas.pydata.org/">pandas</a>、 <a href="https://keras.io/">Keras</a>、 <a href="https://www.tensorflow.org/">TensorFlow</a>、 <a href="http://scikit-learn.org/stable/">scikit-learn</a>、 <a href="https://www.scipy.org/">SciPy</a>、 <a href="http://www.numpy.org/">NumPy</a> 等），以及大量可视化库（<a href="https://matplotlib.org/">Matplotlib</a>、<a href="https://matplotlib.org/api/pyplot_api.html">pyplot</a>、 <a href="https://plot.ly/">Plotly</a> 等）对于初学者和专家来说都是优秀的自由及开源软件工具。它们易于学习，很受欢迎且受到社区支持，并拥有为数据科学而开发的最新技术和算法。它们是你在开始学习时可以获得的最佳工具集之一。</p>
<p>许多 Python 库都是建立在彼此之上的（称为依赖项），其基础是 <a href="http://www.numpy.org/">NumPy</a> 库。NumPy 专门为数据科学设计，经常被用于在其 ndarray 数据类型中存储数据集的相关部分。ndarray 是一种方便的数据类型，用于将关系表中的记录存储为 <code>cvs</code> 文件或其它任何格式，反之亦然。将 scikit 函数应用于多维数组时，它特别方便。SQL 非常适合查询数据库，但是对于执行复杂和资源密集型的数据科学操作，在 ndarray 中存储数据可以提高效率和速度（但请确保在处理大量数据集时有足够的 RAM）。当你使用 pandas 进行知识提取和分析时，pandas 中的 DataFrame 数据类型和 NumPy 中的 ndarray 之间的无缝转换分别为提取和计算密集型操作创建了一个强大的组合。</p>
<p>作为快速演示，让我们启动 Python shell 并在 pandas DataFrame 变量中加载来自巴尔的摩的犯罪统计数据的开放数据集，并查看加载的一部分 DataFrame：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span>  <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="o">&gt;&gt;&gt;</span>  <span class="n">crime_stats</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;BPD_Arrests.csv&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>  <span class="n">crime_stats</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201811/06/195030toone53knfmxnp31.jpg"></p>
<p>我们现在可以在这个 pandas DataFrame 上执行大多数查询，就像我们可以在数据库中使用 SQL 一样。例如，要获取 <code>Description</code> 属性的所有唯一值，SQL 查询是：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>SELECT<span class="w"> </span>unique<span class="o">(</span>“Description”<span class="o">)</span><span class="w"> </span>from<span class="w"> </span>crime_stats<span class="p">;</span>
</code></pre></div>

<p>利用 pandas DataFrame 编写相同的查询如下所示：</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt;  crime_stats[&#39;Description&#39;].unique()
[&#39;COMMON   ASSAULT&#39;   &#39;LARCENY&#39;   &#39;ROBBERY   - STREET&#39;   &#39;AGG.   ASSAULT&#39;
&#39;LARCENY   FROM   AUTO&#39;   &#39;HOMICIDE&#39;   &#39;BURGLARY&#39;   &#39;AUTO   THEFT&#39;
&#39;ROBBERY   - RESIDENCE&#39;   &#39;ROBBERY   - COMMERCIAL&#39;   &#39;ROBBERY   - CARJACKING&#39;
&#39;ASSAULT   BY  THREAT&#39;   &#39;SHOOTING&#39;   &#39;RAPE&#39;   &#39;ARSON&#39;]
</code></pre></div>

<p>它返回的是一个 NumPy 数组（ndarray 类型）：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;</span><span class="p">&gt;</span><span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="nx">crime_stats</span><span class="p">[</span><span class="err">&#39;</span><span class="nx">Description</span><span class="err">&#39;</span><span class="p">].</span><span class="nx">unique</span><span class="p">())</span>
<span class="p">&lt;</span><span class="kd">class</span><span class="w">   </span><span class="err">&#39;</span><span class="nx">numpy</span><span class="p">.</span><span class="nx">ndarray</span><span class="err">&#39;</span><span class="p">&gt;</span>
</code></pre></div>

<p>接下来让我们将这些数据输入神经网络，看看它能多准确地预测使用的武器类型，给出的数据包括犯罪事件，犯罪类型以及发生的地点：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span>  <span class="kn">from</span>   <span class="nn">sklearn.neural_network</span>   <span class="kn">import</span>   <span class="n">MLPClassifier</span>
<span class="o">&gt;&gt;&gt;</span>  <span class="kn">import</span>   <span class="nn">numpy</span>   <span class="k">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>  <span class="n">prediction</span>   <span class="o">=</span>  <span class="n">crime_stats</span><span class="p">[[</span><span class="err">‘</span><span class="n">Weapon</span><span class="err">’</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span>  <span class="n">predictors</span>   <span class="o">=</span>  <span class="n">crime_stats</span><span class="p">[</span><span class="s1">&#39;CrimeTime&#39;</span><span class="p">,</span>   <span class="err">‘</span><span class="n">CrimeCode</span><span class="err">’</span><span class="p">,</span>   <span class="err">‘</span><span class="n">Neighborhood</span><span class="err">’</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>  <span class="n">nn_model</span>   <span class="o">=</span>  <span class="n">MLPClassifier</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="s1">&#39;lbfgs&#39;</span><span class="p">,</span>   <span class="n">alpha</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">,</span>   <span class="n">hidden_layer_sizes</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span>
<span class="mi">2</span><span class="p">),</span>   <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">predict_weapon</span>   <span class="o">=</span>  <span class="n">nn_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span>   <span class="n">predictors</span><span class="p">)</span>
</code></pre></div>

<p>现在学习模型准备就绪，我们可以执行一些测试来确定其质量和可靠性。对于初学者，让我们输入一个训练集数据（用于训练模型的原始数据集的一部分，不包括在创建模型中）：</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt;  predict_weapon.predict(training_set_weapons)
array([4,   4,   4,   ..., 0,   4,   4])
</code></pre></div>

<p>如你所见，它返回一个列表，每个数字预测训练集中每个记录的武器。我们之所以看到的是数字而不是武器名称，是因为大多数分类算法都是用数字优化的。对于分类数据，有一些技术可以将属性转换为数字表示。在这种情况下，使用的技术是标签编码，使用 sklearn 预处理库中的 <code>LabelEncoder</code> 函数：<code>preprocessing.LabelEncoder()</code>。它能够对一个数据和其对应的数值表示来进行变换和逆变换。在这个例子中，我们可以使用 <code>LabelEncoder()</code> 的 <code>inverse_transform</code> 函数来查看武器 0 和 4 是什么:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt;  preprocessing.LabelEncoder().inverse_transform(encoded_weapons)
array([&#39;HANDS&#39;,   &#39;FIREARM&#39;,   &#39;HANDS&#39;,   ..., &#39;FIREARM&#39;,   &#39;FIREARM&#39;,   &#39;FIREARM&#39;]
</code></pre></div>

<p>这很有趣，但为了了解这个模型的准确程度，我们将几个分数计算为百分比：</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt;  nn_model.score(X,   y)
0.81999999999999995
</code></pre></div>

<p>这表明我们的神经网络模型准确度约为 82%。这个结果似乎令人印象深刻，但用于不同的犯罪数据集时，检查其有效性非常重要。还有其它测试来做这个，如相关性、混淆、矩阵等。尽管我们的模型有很高的准确率，但它对于一般犯罪数据集并不是非常有用，因为这个特定数据集具有不成比例的行数，其列出 <code>FIREARM</code> 作为使用的武器。除非重新训练，否则我们的分类器最有可能预测 <code>FIREARM</code>，即使输入数据集有不同的分布。</p>
<p>在对数据进行分类之前清洗数据并删除异常值和畸形数据非常重要。预处理越好，我们的见解准确性就越高。此外，为模型或分类器提供过多数据（通常超过 90%）以获得更高的准确度是一个坏主意，因为它看起来准确但由于<a href="https://www.kdnuggets.com/2014/06/cardinal-sin-data-mining-data-science.html">过度拟合</a>而无效。</p>
<p><a href="http://jupyter.org/">Jupyter notebooks</a> 相对于命令行来说是一个很好的交互式替代品。虽然 CLI 对于大多数事情都很好，但是当你想要运行代码片段以生成可视化时，Jupyter 会很出色。它比终端更好地格式化数据。</p>
<p><a href="https://machinelearningmastery.com/best-machine-learning-resources-for-getting-started/">这篇文章</a> 列出了一些最好的机器学习免费资源，但是还有很多其它的指导和教程。根据你的兴趣和爱好，你还会发现许多开放数据集可供使用。作为起点，由 <a href="https://www.kaggle.com/">Kaggle</a> 维护的数据集，以及在州政府网站上提供的数据集是极好的资源。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>