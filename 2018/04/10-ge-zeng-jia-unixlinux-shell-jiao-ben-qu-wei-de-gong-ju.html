<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>10 个增加 UNIX/Linux Shell 脚本趣味的工具</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Vivek Gite 有些误解认为 shell 脚本仅用于 CLI 环境。实际上在 KDE 或 Gnome 桌面下，你可以有效的使用各种工具编写 GUI 或者网络（socket）脚本 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/04/10-ge-zeng-jia-unixlinux-shell-jiao-ben-qu-wei-de-gong-ju.html" rel="bookmark"
           title="Permalink to 10 个增加 UNIX/Linux Shell 脚本趣味的工具">10 个增加 UNIX/Linux Shell 脚本趣味的工具</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-04-03T17:48:27+02:00">
                Published: Tue 03 April 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Vivek Gite</p>
<p><img alt="" src="/data/attachment/album/201804/03/174820hxf6fwcrzf7rpyfx.jpg"></p>
<p>有些误解认为 shell 脚本仅用于 CLI 环境。实际上在 KDE 或 Gnome 桌面下，你可以有效的使用各种工具编写 GUI 或者网络（socket）脚本。shell 脚本可以使用一些 GUI 组件（菜单、警告框、进度条等），你可以控制终端输出、光标位置以及各种输出效果等等。利用下面的工具，你可以构建强壮的、可交互的、对用户友好的 UNIX/Linux bash 脚本。</p>
<p>制作 GUI 应用不是一项困难的任务，但需要时间和耐心。幸运的是，UNIX 和 Linux 都带有大量编写漂亮 GUI 脚本的工具。以下工具是基于 FreeBSD 和 Linux 操作系统做的测试，而且也适用于其他类 UNIX 操作系统。</p>
<h3>1、notify-send 命令</h3>
<p><code>notify-send</code> 命令允许你借助通知守护进程发送桌面通知给用户。这种避免打扰用户的方式，对于通知桌面用户一个事件或显示一些信息是有用的。在 Debian 或 Ubuntu 上，你需要使用 <a href="https://www.cyberciti.biz/faq/ubuntu-lts-debian-linux-apt-command-examples/" title="See Linux/Unix apt command examples for more info">apt 命令</a> 或 <a href="https://www.cyberciti.biz/tips/linux-debian-package-management-cheat-sheet.html" title="See Linux/Unix apt-get command examples for more info">apt-get 命令</a> 安装的包：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install libnotify-bin
</code></pre></div>

<p>CentOS/RHEL 用户使用下面的 <a href="https://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/" title="See Linux/Unix yum command examples for more info">yum 命令</a>：</p>
<div class="highlight"><pre><span></span><code>sudo yum install libnotify
</code></pre></div>

<p>Fedora Linux 用户使用下面的 dnf 命令：</p>
<div class="highlight"><pre><span></span><code><span class="err">`$</span><span class="w"> </span><span class="nx">sudo</span><span class="w"> </span><span class="nx">dnf</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">libnotify</span><span class="err">`</span>
<span class="nx">In</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">example</span><span class="p">,</span><span class="w"> </span><span class="nx">send</span><span class="w"> </span><span class="nx">simple</span><span class="w"> </span><span class="nx">desktop</span><span class="w"> </span><span class="nx">notification</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">command</span><span class="w"> </span><span class="nx">line</span><span class="p">,</span><span class="w"> </span><span class="nx">enter</span><span class="p">:</span>
<span class="err">###</span><span class="w"> </span><span class="nx">发送一些通知</span><span class="w"> </span><span class="err">###</span>
<span class="nx">notify</span><span class="o">-</span><span class="nx">send</span><span class="w"> </span><span class="s">&quot;rsnapshot done :)&quot;</span>
</code></pre></div>

<p>示例输出：</p>
<p><img alt="Fig:01: notify-send in action " src="/data/attachment/album/201804/03/174831ng1nmfk28ughghvf.png" title="notify-send: Shell Script Get Or Send Desktop Notifications"></p>
<p>下面是另一个附加选项的代码：</p>
<div class="highlight"><pre><span></span><code><span class="o">...</span>
<span class="nt">alert</span><span class="o">=</span><span class="nt">18000</span>
<span class="nt">live</span><span class="o">=$(</span><span class="nt">lynx</span><span class="w"> </span><span class="nt">--dump</span><span class="w"> </span><span class="nt">http</span><span class="o">://</span><span class="nt">money</span><span class="p">.</span><span class="nc">rediff</span><span class="p">.</span><span class="nc">com</span><span class="o">/</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">grep</span><span class="w"> </span><span class="s1">&#39;BSE LIVE&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">awk</span><span class="w"> </span><span class="s1">&#39;{ print $5}&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">sed</span><span class="w"> </span><span class="s1">&#39;s/,//g;s/\.</span><span class="cp">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="cp">]</span><span class="s1">*//g&#39;</span><span class="o">)</span>
<span class="cp">[</span><span class="w"> </span><span class="nv">$notify_counter</span><span class="w"> </span><span class="na">-eq</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="cp">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="cp">[</span><span class="w"> </span><span class="nv">$live</span><span class="w"> </span><span class="na">-ge</span><span class="w"> </span><span class="nv">$alert</span><span class="w"> </span><span class="cp">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">notify-send</span><span class="w"> </span><span class="err">-t</span><span class="w"> </span><span class="err">5000</span><span class="w"> </span><span class="err">-u</span><span class="w"> </span><span class="err">low</span><span class="w"> </span><span class="err">-i</span><span class="w">   </span><span class="err">&quot;BSE</span><span class="w"> </span><span class="err">Sensex</span><span class="w"> </span><span class="err">touched</span><span class="w"> </span><span class="err">18k&quot;</span><span class="p">;</span><span class="w">  </span><span class="err">notify_counter=1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="o">...</span>
</code></pre></div>

<p>示例输出：</p>
<p><img alt="Fig.02: notify-send with timeouts and other options" src="/data/attachment/album/201804/03/174832az4lbvex53lymes3.png" title="Linux / UNIX: Display Notifications From Your Shell Scripts With notify-send"></p>
<p>这里：</p>
<ul>
<li><code>-t 5000</code>：指定超时时间（毫秒） （5000 毫秒 = 5 秒）</li>
<li><code>-u low</code>： 设置紧急等级 （如：低、普通、紧急）</li>
<li><code>-i gtk-dialog-info</code>： 设置要显示的图标名称或者指定的图标（你可以设置路径为：<code>-i /path/to/your-icon.png</code>）</li>
</ul>
<p>关于更多使用 <code>notify-send</code> 功能的信息，请参考 man 手册。在命令行下输入 <code>man notify-send</code> 即可看见：</p>
<div class="highlight"><pre><span></span><code><span class="nv">man</span><span class="w"> </span><span class="nv">notify</span><span class="o">-</span><span class="k">send</span>
</code></pre></div>

<h3>2、tput 命令</h3>
<p><code>tput</code> 命令用于设置终端特性。通过 <code>tput</code> 你可以设置：</p>
<ul>
<li>在屏幕上移动光标。</li>
<li>获取终端信息。</li>
<li>设置颜色（背景和前景）。</li>
<li>设置加粗模式。</li>
<li>设置反转模式等等。</li>
</ul>
<p>下面有一段示例代码：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1"># clear the screen</span>
tput<span class="w"> </span>clear

<span class="c1"># Move cursor to screen location X,Y (top left is 0,0)</span>
tput<span class="w"> </span>cup<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">15</span>

<span class="c1"># Set a foreground colour using ANSI escape</span>
tput<span class="w"> </span>setaf<span class="w"> </span><span class="m">3</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;XYX Corp LTD.&quot;</span>
tput<span class="w"> </span>sgr0

tput<span class="w"> </span>cup<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">17</span>
<span class="c1"># Set reverse video mode</span>
tput<span class="w"> </span>rev
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;M A I N - M E N U&quot;</span>
tput<span class="w"> </span>sgr0

tput<span class="w"> </span>cup<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">15</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1. User Management&quot;</span>

tput<span class="w"> </span>cup<span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">15</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2. Service Management&quot;</span>

tput<span class="w"> </span>cup<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">15</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;3. Process Management&quot;</span>

tput<span class="w"> </span>cup<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;4. Backup&quot;</span>

<span class="c1"># Set bold mode</span>
tput<span class="w"> </span>bold
tput<span class="w"> </span>cup<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">15</span>
<span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Enter your choice [1-4] &quot;</span><span class="w"> </span>choice

tput<span class="w"> </span>clear
tput<span class="w"> </span>sgr0
tput<span class="w"> </span>rc
</code></pre></div>

<p>示例输出：</p>
<p><img alt="Fig.03: tput in action" src="/data/attachment/album/201804/03/174832bz0t7fu2rthjjc22.png" title="Linux / UNIX Script Colours and Cursor Movement With tput"></p>
<p>关于 <code>tput</code> 命令的详细信息，参见手册：</p>
<div class="highlight"><pre><span></span><code>man 5 terminfo
man tput
</code></pre></div>

<h3>3、setleds 命令</h3>
<p><code>setleds</code> 命令允许你设置键盘灯。下面是打开数字键灯的示例：</p>
<div class="highlight"><pre><span></span><code>setleds -D +num
</code></pre></div>

<p>关闭数字键灯，输入：</p>
<div class="highlight"><pre><span></span><code>setleds -D -num
</code></pre></div>

<ul>
<li><code>-caps</code>：关闭大小写锁定灯</li>
<li><code>+caps</code>：打开大小写锁定灯</li>
<li><code>-scroll</code>：关闭滚动锁定灯</li>
<li><code>+scroll</code>：打开滚动锁定灯</li>
</ul>
<p>查看 <code>setleds</code> 手册可看见更多信息和选项 <code>man setleds</code>。</p>
<h3>4、zenity 命令</h3>
<p><a href="https://bash.cyberciti.biz/guide/Zenity:_Shell_Scripting_with_Gnome">zenity 命令显示 GTK+ 对话框</a>，并且返回用户输入。它允许你使用各种 Shell 脚本向用户展示或请求信息。下面是一个 <code>whois</code> 指定域名目录服务的 GUI 客户端示例。</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># Get domain name</span>
<span class="nv">_zenity</span><span class="o">=</span><span class="s2">&quot;/usr/bin/zenity&quot;</span>
<span class="nv">_out</span><span class="o">=</span><span class="s2">&quot;/tmp/whois.output.</span><span class="nv">$$</span><span class="s2">&quot;</span>
<span class="nv">domain</span><span class="o">=</span><span class="k">$(</span><span class="si">${</span><span class="nv">_zenity</span><span class="si">}</span><span class="w"> </span>--title<span class="w">  </span><span class="s2">&quot;Enter domain&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--entry<span class="w"> </span>--text<span class="w"> </span><span class="s2">&quot;Enter the domain you would like to see whois info&quot;</span><span class="w"> </span><span class="k">)</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span>
<span class="k">then</span>
<span class="w">  </span><span class="c1"># Display a progress dialog while searching whois database</span>
<span class="w">  </span>whois<span class="w"> </span><span class="nv">$domain</span><span class="w">  </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>&gt;<span class="o">(</span><span class="si">${</span><span class="nv">_zenity</span><span class="si">}</span><span class="w"> </span>--width<span class="o">=</span><span class="m">200</span><span class="w"> </span>--height<span class="o">=</span><span class="m">100</span><span class="w"> </span><span class="se">\</span>
<span class="w">                    </span>--title<span class="o">=</span><span class="s2">&quot;whois&quot;</span><span class="w"> </span>--progress<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--pulsate<span class="w"> </span>--text<span class="o">=</span><span class="s2">&quot;Searching domain info...&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                                    </span>--auto-kill<span class="w"> </span>--auto-close<span class="w"> </span><span class="se">\</span>
<span class="w">                                    </span>--percentage<span class="o">=</span><span class="m">10</span><span class="o">)</span><span class="w"> </span>&gt;<span class="si">${</span><span class="nv">_out</span><span class="si">}</span>

<span class="w">  </span><span class="c1"># Display back output</span>
<span class="w">  </span><span class="si">${</span><span class="nv">_zenity</span><span class="si">}</span><span class="w"> </span>--width<span class="o">=</span><span class="m">800</span><span class="w"> </span>--height<span class="o">=</span><span class="m">600</span><span class="w">  </span><span class="se">\</span>
<span class="w">         </span>--title<span class="w"> </span><span class="s2">&quot;Whois info for </span><span class="nv">$domain</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--text-info<span class="w"> </span>--filename<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">_out</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">  </span><span class="si">${</span><span class="nv">_zenity</span><span class="si">}</span><span class="w"> </span>--error<span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--text<span class="o">=</span><span class="s2">&quot;No input provided&quot;</span>
<span class="k">fi</span>
</code></pre></div>

<p>示例输出：</p>
<p><img alt="Fig.04: zenity in Action" src="/data/attachment/album/201804/03/174832kyqetem3t9mcvqeh.png" title="zenity: Linux / UNIX display Dialogs Boxes From The Shell Scripts"></p>
<p>参见手册获取更多 <code>zenity</code> 信息以及其他支持 GTK+ 的组件：</p>
<div class="highlight"><pre><span></span><code>zenity --help
man zenity
</code></pre></div>

<h3>5、kdialog 命令</h3>
<p><code>kdialog</code> 命令与 <code>zenity</code> 类似，但它是为 KDE 桌面和 QT 应用设计。你可以使用 <code>kdialog</code> 展示对话框。下面示例将在屏幕上显示信息：</p>
<div class="highlight"><pre><span></span><code>kdialog --dontagain myscript:nofilemsg --msgbox &quot;File: &#39;~/.backup/config&#39; not found.&quot;
</code></pre></div>

<p>示例输出：</p>
<p><img alt="Fig.05: Suppressing the display of a dialog " src="/data/attachment/album/201804/03/174833kavn8w0ovk0a8g80.png" title="Kdialog: Suppressing the display of a dialog"></p>
<p>参见 《<a href="http://techbase.kde.org/Development/Tutorials/Shell_Scripting_with_KDE_Dialogs">KDE 对话框 Shell 脚本编程</a>》 教程获取更多信息。</p>
<h3>6、Dialog</h3>
<p><a href="https://bash.cyberciti.biz/guide/Bash_display_dialog_boxes">Dialog 是一个使用 Shell 脚本的应用</a>，显示用户界面组件的文本。它使用 curses 或者 ncurses 库。下面是一个示例代码：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
dialog<span class="w"> </span>--title<span class="w"> </span><span class="s2">&quot;Delete file&quot;</span><span class="w"> </span><span class="se">\</span>
--backtitle<span class="w"> </span><span class="s2">&quot;Linux Shell Script Tutorial Example&quot;</span><span class="w"> </span><span class="se">\</span>
--yesno<span class="w"> </span><span class="s2">&quot;Are you sure you want to permanently delete \&quot;/tmp/foo.txt\&quot;?&quot;</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">60</span>

<span class="c1"># Get exit status</span>
<span class="c1"># 0 means user hit [yes] button.</span>
<span class="c1"># 1 means user hit [no] button.</span>
<span class="c1"># 255 means user hit [Esc] key.</span>
<span class="nv">response</span><span class="o">=</span><span class="nv">$?</span>
<span class="k">case</span><span class="w"> </span><span class="nv">$response</span><span class="w"> </span><span class="k">in</span>
<span class="w">   </span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;File deleted.&quot;</span><span class="p">;;</span>
<span class="w">   </span><span class="m">1</span><span class="o">)</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;File not deleted.&quot;</span><span class="p">;;</span>
<span class="w">   </span><span class="m">255</span><span class="o">)</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[ESC] key pressed.&quot;</span><span class="p">;;</span>
<span class="k">esac</span>
</code></pre></div>

<p>参见 <code>dialog</code> 手册获取详细信息：<code>man dialog</code>。</p>
<h4>关于其他用户界面工具的注意事项</h4>
<p>UNIX、Linux 提供了大量其他工具来显示和控制命令行中的应用程序，shell 脚本可以使用一些 KDE、Gnome、X 组件集：</p>
<ul>
<li><code>gmessage</code> - 基于 GTK xmessage 的克隆</li>
<li><code>xmessage</code> - 在窗口中显示或询问消息（基于 X 的 /bin/echo）</li>
<li><code>whiptail</code> - 显示来自 shell 脚本的对话框</li>
<li><code>python-dialog</code> - 用于制作简单文本或控制台模式用户界面的 Python 模块</li>
</ul>
<h3>7、logger 命令</h3>
<p><code>logger</code> 命令将信息写到系统日志文件，如：<code>/var/log/messages</code>。它为系统日志模块 syslog 提供了一个 shell 命令行接口：</p>
<div class="highlight"><pre><span></span><code><span class="n">logger</span><span class="w"> </span><span class="s2">&quot;MySQL database backup failed.&quot;</span>
<span class="n">tail</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">messages</span>
<span class="n">logger</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">mysqld</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">daemon</span><span class="o">.</span><span class="n">error</span><span class="w"> </span><span class="s2">&quot;Database Server failed&quot;</span>
<span class="n">tail</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">syslog</span>
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code>Apr 20 00:11:45 vivek-desktop kernel: [38600.515354] CPU0: Temperature/speed normal
Apr 20 00:12:20 vivek-desktop mysqld: Database Server failed
</code></pre></div>

<p>参见 《<a href="https://www.cyberciti.biz/tips/howto-linux-unix-write-to-syslog.html">如何写消息到 syslog 或 日志文件</a>》 获得更多信息。此外，你也可以查看 logger 手册获取详细信息：<code>man logger</code></p>
<h3>8、setterm 命令</h3>
<p><code>setterm</code> 命令可设置不同的终端属性。下面的示例代码会强制屏幕在 15 分钟后变黑，监视器则 60 分钟后待机。</p>
<div class="highlight"><pre><span></span><code>setterm -blank 15 -powersave powerdown -powerdown 60
</code></pre></div>

<p>下面的例子将 xterm 窗口中的文本以下划线展示：</p>
<div class="highlight"><pre><span></span><code>setterm -underline on;
echo &quot;Add Your Important Message Here&quot;
setterm -underline off
</code></pre></div>

<p>另一个有用的选项是打开或关闭光标显示：</p>
<div class="highlight"><pre><span></span><code>setterm -cursor off
</code></pre></div>

<p>打开光标：</p>
<div class="highlight"><pre><span></span><code>setterm -cursor on
</code></pre></div>

<p>参见 setterm 命令手册获取详细信息：<code>man setterm</code></p>
<h3>9、smbclient：给 MS-Windows 工作站发送消息</h3>
<p><code>smbclient</code> 命令可以与 SMB/CIFS 服务器通讯。它可以向 MS-Windows 系统上选定或全部用户发送消息。</p>
<div class="highlight"><pre><span></span><code>smbclient -M WinXPPro &lt;&lt;eof
Message 1
Message 2
...
..
EOF
</code></pre></div>

<p>或</p>
<div class="highlight"><pre><span></span><code>echo<span class="w"> </span>&quot;<span class="cp">${</span><span class="n">Message</span><span class="cp">}</span>&quot;<span class="w"> </span>|<span class="w"> </span>smbclient<span class="w"> </span>-M<span class="w"> </span>salesguy2
</code></pre></div>

<p>参见 <code>smbclient</code> 手册或者阅读我们之前发布的文章：《<a href="https://www.cyberciti.biz/tips/freebsd-sending-a-message-to-windows-workstation.html">给 Windows 工作站发送消息</a>》：<code>man smbclient</code></p>
<h3>10、Bash 套接字编程</h3>
<p>在 bash 下，你可以打开一个套接字并通过它发送数据。你不必使用 <code>curl</code> 或者 <code>lynx</code> 命令抓取远程服务器的数据。bash 和两个特殊的设备文件可用于打开网络套接字。以下选自 bash 手册：</p>
<ol>
<li><code>/dev/tcp/host/port</code> - 如果 <code>host</code> 是一个有效的主机名或者网络地址，而且端口是一个整数或者服务名，bash 会尝试打开一个相应的 TCP 连接套接字。</li>
<li><code>/dev/udp/host/port</code> - 如果 <code>host</code> 是一个有效的主机名或者网络地址，而且端口是一个整数或者服务名，bash 会尝试打开一个相应的 UDP 连接套接字。</li>
</ol>
<p>你可以使用这项技术来确定本地或远程服务器端口是打开或者关闭状态，而无需使用 <code>nmap</code> 或者其它的端口扫描器。</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">find</span><span class="w"> </span><span class="nv">out</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">TCP</span><span class="w"> </span><span class="nv">port</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class="nv">open</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span>
<span class="ss">(</span><span class="nv">echo</span><span class="w"> </span><span class="o">&gt;/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">tcp</span><span class="o">/</span><span class="nv">localhost</span><span class="o">/</span><span class="mi">25</span><span class="ss">)</span><span class="w"> </span><span class="o">&amp;&gt;/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;TCP port 25 open&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;TCP port 25 close&quot;</span>
</code></pre></div>

<p>下面的代码片段，你可以利用 <a href="https://www.cyberciti.biz/faq/bash-for-loop/">bash 循环找出已打开的端口</a>：</p>
<div class="highlight"><pre><span></span><code><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;Scanning TCP ports...&quot;</span>
<span class="k">for</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span>{<span class="mi">1</span>..<span class="mi">1023</span>}
<span class="k">do</span>
<span class="w">  </span><span class="ss">(</span><span class="nv">echo</span><span class="w"> </span><span class="o">&gt;/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">tcp</span><span class="o">/</span><span class="nv">localhost</span><span class="o">/</span>$<span class="nv">p</span><span class="ss">)</span><span class="w"> </span><span class="o">&gt;/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">null</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">&quot;$p open&quot;</span>
<span class="nv">done</span>
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code>Scanning TCP ports...
22 open
53 open
80 open
139 open
445 open
631 open
</code></pre></div>

<p>下面的示例中，你的 bash 脚本将像 HTTP 客户端一样工作：</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">exec</span><span class="w"> </span><span class="m">3</span>&lt;&gt;<span class="w"> </span>/dev/tcp/<span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">www</span><span class="p">.cyberciti.biz</span><span class="si">}</span>/80

<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;GET / HTTP/1.0\r\n&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">3</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;Accept: text/html, text/plain\r\n&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">3</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;Accept-Language: en\r\n&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">3</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;User-Agent: nixCraft_BashScript v.%s\r\n&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BASH_VERSION</span><span class="si">}</span><span class="s2">&quot;</span><span class="w">   </span>&gt;<span class="p">&amp;</span><span class="m">3</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\r\n&quot;</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">3</span>

<span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>LINE<span class="w"> </span>&lt;<span class="p">&amp;</span><span class="m">3</span>
<span class="k">do</span>
<span class="w">   </span><span class="c1"># do something on $LINE</span>
<span class="w">   </span><span class="c1"># or send $LINE to grep or awk for grabbing data</span>
<span class="w">   </span><span class="c1"># or simply display back data with echo command</span>
<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$LINE</span>
<span class="k">done</span>
</code></pre></div>

<p>参见 bash 手册获取更多信息：<code>man bash</code></p>
<h3>关于 GUI 工具和 cron 任务的注意事项</h3>
<p>如果你 <a href="https://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/">使用 crontab</a> 来启动你的脚本，你需要使用 <code>export DISPLAY=[用户机器]:0</code> 命令请求本地显示或输出服务。举个例子，使用 <code>zenity</code> 工具调用 <code>/home/vivek/scripts/monitor.stock.sh</code>：</p>
<div class="highlight"><pre><span></span><code><span class="nv">@hourly</span><span class="w"> </span><span class="n">DISPLAY</span><span class="o">=</span><span class="err">:</span><span class="mf">0.0</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vivek</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">monitor</span><span class="p">.</span><span class="n">stock</span><span class="p">.</span><span class="n">sh</span>
</code></pre></div>

<p>你有喜欢的可以增加 shell 脚本趣味的 UNIX 工具么？请在下面的评论区分享它吧。</p>
<h3>关于作者</h3>
<p>本文作者是 nixCraft 创始人、一个老练的系统管理员、Linux 操作系统和 UNIX shell 编程培训师。他服务来自全球的客户和不同的行业，包括 IT 、教育、防务和空间探索、还有非营利组织。你可以在 <a href="https://twitter.com/nixcraft">Twitter</a>，<a href="https://facebook.com/nixcraft">Facebook</a>，<a href="https://plus.google.com/+CybercitiBiz">Google+</a> 上面关注他。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>