<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>怎样用 parted 管理硬盘分区</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Magesh Maruthamuthu 众所周知，对硬盘分区是 Linux 管理员一项最重要的管理任务之一，他们不能不知道这个。 在最糟糕的时候，你至少每周 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/04/zen-yang-yong-parted-guan-li-ying-pan-fen-qu.html" rel="bookmark"
           title="Permalink to 怎样用 parted 管理硬盘分区">怎样用 parted 管理硬盘分区</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-04-10T23:51:07+02:00">
                Published: Tue 10 April 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Magesh Maruthamuthu</p>
<p><img alt="" src="/data/attachment/album/201804/10/235054e0a6p121roekakpk.jpg"></p>
<p>众所周知，对硬盘分区是 Linux 管理员一项最重要的管理任务之一，他们不能不知道这个。</p>
<p>在最糟糕的时候，你至少每周会收到一次依赖小组的请求，而在更大的环境里会更加频繁 。</p>
<p>你可能会问为什么我们要用 <code>parted</code> 而不是 <code>fdisk</code>？ 它们有什么区别？好问题，我会告诉你这两者的区别。</p>
<ul>
<li><code>parted</code> 支持用户在大于 2TB 的硬盘上创建硬盘分区， 但 <code>fdisk</code> 命令不支持</li>
<li>对比 <code>fdisk</code> 来说，<code>parted</code> 是一个更高级的工具</li>
<li>支持更多的分区表类型，包括 GPT （LCTT 译注：全局唯一标识分区表）</li>
<li>它允许用户调整分区大小， 但当缩减分区空间的时候，它没有如我意料的工作，多数情况下我会得到错误消息。所以我会建议用户不要用 <code>parted</code> 来缩减分区大小。</li>
</ul>
<h3>什么是 parted</h3>
<p><code>parted</code> 是一个操作硬盘分区的程序。它支持多种分区表类型，包括 MS-DOS 和 GPT。</p>
<p>它允许用户创建、删除、调整、缩减、移动和复制分区，以及重新组织硬盘的使用，复制数据到新的硬盘上。<code>gparted</code> 是 <code>parted</code> 的图形界面前端。</p>
<h3>怎样安装 parted</h3>
<p>大部分发行版已经预安装了 <code>parted</code>。如果没有，用下列命令来安装 <code>parted</code>。</p>
<p>对于 Debian/Ubuntu 用户, 使用 <a href="https://www.2daygeek.com/apt-get-apt-cache-command-examples-manage-packages-debian-ubuntu-systems/">APT-GET 命令</a> 或者 <a href="https://www.2daygeek.com/apt-command-examples-manage-packages-debian-ubuntu-systems/">APT 命令</a> 来安装 <code>parted</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>parted
</code></pre></div>

<p>对于 RHEL/CentOS 用户，用 <a href="https://www.2daygeek.com/yum-command-examples-manage-packages-rhel-centos-systems/">YUM 命令</a> 来安装 <code>parted</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>parted
</code></pre></div>

<p>对于 Fedora 用户，用 <a href="https://www.2daygeek.com/dnf-command-examples-manage-packages-fedora-system/">DNF 命令</a> 来安装 <code>parted</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>parted
</code></pre></div>

<p>对于 Arch Linux 用户，用 <a href="https://www.2daygeek.com/pacman-command-examples-manage-packages-arch-linux-system/">Pacman 命令</a>来安装 <code>parted</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>pacman<span class="w"> </span>-S<span class="w"> </span>parted
</code></pre></div>

<p>对于 openSUSE 用户， 用 <a href="https://www.2daygeek.com/zypper-command-examples-manage-packages-opensuse-system/">Zypper 命令</a>来安装 <code>parted</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>zypper<span class="w"> </span><span class="k">in</span><span class="w"> </span>parted
</code></pre></div>

<h3>怎样启动 parted</h3>
<p>下面的 <code>parted</code> 命令会自动选择 <code>/dev/sda</code> ，因为这是系统的第一个硬盘。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted
GNU<span class="w"> </span>parted<span class="w"> </span><span class="m">3</span>.2
Using<span class="w"> </span>/dev/sda
Welcome<span class="w"> </span>to<span class="w"> </span>GNU<span class="w"> </span>parted!<span class="w"> </span>Type<span class="w"> </span><span class="s1">&#39;help&#39;</span><span class="w"> </span>to<span class="w"> </span>view<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>commands.
<span class="o">(</span>parted<span class="o">)</span>
</code></pre></div>

<p>同时我们也可以用下面的命令来重新选择对应的的硬盘。</p>
<div class="highlight"><pre><span></span><code>(parted) select /dev/sdb
Using /dev/sdb
(parted)
</code></pre></div>

<p>如果你想选择特定的硬盘, 用下列的格式来输入命令。 这次 ，我们将选择 <code>/dev/sdb</code>。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="p">[</span><span class="n">Device</span><span class="w"> </span><span class="n">Name</span><span class="p">]</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb
GNU<span class="w"> </span>parted<span class="w"> </span><span class="m">3</span>.2
Using<span class="w"> </span>/dev/sdb
Welcome<span class="w"> </span>to<span class="w"> </span>GNU<span class="w"> </span>parted!<span class="w"> </span>Type<span class="w"> </span><span class="s1">&#39;help&#39;</span><span class="w"> </span>to<span class="w"> </span>view<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>commands.
<span class="o">(</span>parted<span class="o">)</span>
</code></pre></div>

<h3>怎样用 parted 列出所有可用的硬盘</h3>
<p>如果你不知道你的电脑上有什么硬盘，只需要运行下列命令，该命令会显示所有可用硬盘的名字，以及其它的有用信息比如储存空间、型号、扇区大小、硬盘标志以及分区信息。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>-l
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sda:<span class="w"> </span><span class="m">32</span>.2GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>msdos
Disk<span class="w"> </span>Flags:

Number<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Size<span class="w"> </span>Type<span class="w"> </span>File<span class="w"> </span>system<span class="w"> </span>Flags
<span class="w"> </span><span class="m">1</span><span class="w"> </span>1049kB<span class="w"> </span><span class="m">32</span>.2GB<span class="w"> </span><span class="m">32</span>.2GB<span class="w"> </span>primary<span class="w"> </span>ext4<span class="w"> </span>boot


Error:<span class="w"> </span>/dev/sdb:<span class="w"> </span>unrecognised<span class="w"> </span>disk<span class="w"> </span>label
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">53</span>.7GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>unknown
Disk<span class="w"> </span>Flags:
</code></pre></div>

<p>上面的错误信息清晰地显示出硬盘 <code>/dev/sdb</code> 没有有效的<ruby> 磁盘标签 <rt>  disk label </rt></ruby>。 它不会自动得到磁盘标签，所以， 我们便要自己设置硬盘标签。</p>
<h3>怎样用 parted 创建硬盘分区</h3>
<p><code>parted</code> 允许用户创建主分区或者拓展分区。创建这两种类型的分区的步骤还是一样，但请确保你已经指定了需要的分区类型，比如 <code>primary</code> （主分区）或者 <code>extended</code> （扩展分区）。</p>
<p>为了演示这项操作 ，我们安装了一个新的 <code>50 GB</code> 的硬盘到到电脑上，挂载在 <code>/dev/sdb</code> 上。</p>
<p>有两种方法创建分区，第一种是更详细的方法，另一种只是一个命令。 在下面的例子中，我们将用更详细的方法添加一个主分区。提醒一下， 我们应该先设置磁盘标签，因为它不会自动设置任何标签。</p>
<p>在下面的例子中，我们将要创建一个 <code>10 GB</code> 的分区</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span>
<span class="n">GNU</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="mf">3.2</span>
<span class="k">Using</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span>
<span class="n">Welcome</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GNU</span><span class="w"> </span><span class="n">parted</span><span class="err">!</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="s1">&#39;help&#39;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">commands</span><span class="p">.</span>
<span class="p">(</span><span class="n">parted</span><span class="p">)</span><span class="w"> </span><span class="n">mklabel</span><span class="w"> </span><span class="n">msdos</span>
<span class="p">(</span><span class="n">parted</span><span class="p">)</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">GB</span>
<span class="p">(</span><span class="n">parted</span><span class="p">)</span><span class="w"> </span><span class="n">mkpart</span>
<span class="k">Partition</span><span class="w"> </span><span class="n">type</span><span class="vm">?</span><span class="w"> </span><span class="k">primary</span><span class="o">/</span><span class="n">extended</span><span class="vm">?</span><span class="w"> </span><span class="k">primary</span>
<span class="k">File</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="n">type</span><span class="vm">?</span><span class="w"> </span><span class="o">[</span><span class="n">ext2</span><span class="o">]</span><span class="vm">?</span><span class="w"> </span><span class="n">ext4</span>
<span class="k">Start</span><span class="vm">?</span><span class="w"> </span><span class="mf">0.00</span><span class="n">GB</span>
<span class="k">End</span><span class="vm">?</span><span class="w"> </span><span class="mf">10.00</span><span class="n">GB</span>
<span class="p">(</span><span class="n">parted</span><span class="p">)</span><span class="w"> </span><span class="k">print</span>
<span class="nl">Model</span><span class="p">:</span><span class="w"> </span><span class="n">ATA</span><span class="w"> </span><span class="n">VBOX</span><span class="w"> </span><span class="n">HARDDISK</span><span class="w"> </span><span class="p">(</span><span class="n">scsi</span><span class="p">)</span>
<span class="k">Disk</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="nl">sdb</span><span class="p">:</span><span class="w"> </span><span class="mf">53.7</span><span class="n">GB</span>
<span class="n">Sector</span><span class="w"> </span><span class="k">size</span><span class="w"> </span><span class="p">(</span><span class="n">logical</span><span class="o">/</span><span class="n">physical</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="mi">512</span><span class="n">B</span><span class="o">/</span><span class="mi">512</span><span class="n">B</span>
<span class="k">Partition</span><span class="w"> </span><span class="nc">Table</span><span class="err">:</span><span class="w"> </span><span class="n">msdos</span>
<span class="k">Disk</span><span class="w"> </span><span class="nl">Flags</span><span class="p">:</span>

<span class="n">Number</span><span class="w"> </span><span class="k">Start</span><span class="w"> </span><span class="k">End</span><span class="w"> </span><span class="k">Size</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="k">File</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="n">Flags</span>
<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mf">0.00</span><span class="n">GB</span><span class="w"> </span><span class="mf">10.0</span><span class="n">GB</span><span class="w"> </span><span class="mf">10.0</span><span class="n">GB</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="n">ext4</span><span class="w"> </span><span class="n">lba</span>

<span class="p">(</span><span class="n">parted</span><span class="p">)</span><span class="w"> </span><span class="n">quit</span>
<span class="nl">Information</span><span class="p">:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span><span class="p">.</span>
</code></pre></div>

<p>同时，我们也可以使用单条 <code>parted</code> 命令</p>
<p>在下面的例子中，我们将在硬盘上创建一个 <code>10 GB</code> 的分区。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="p">[</span><span class="n">Disk</span><span class="w"> </span><span class="n">Name</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">mkpart</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">Type</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Filesystem</span><span class="w"> </span><span class="n">Type</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">Start</span><span class="w"> </span><span class="n">Size</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">Size</span><span class="p">]</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb<span class="w"> </span>mkpart<span class="w"> </span>primary<span class="w"> </span>ext4<span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span><span class="m">20</span>.0GB
Information:<span class="w"> </span>You<span class="w"> </span>may<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span>/etc/fstab.
</code></pre></div>

<h3>怎样使用所有剩余空间创建分区</h3>
<p>你已经创建了除了 <code>/home</code> 之外等所有要求的分区，而且你想要用硬盘上所有剩余的空间来创建 <code>/home</code> 分区，要怎样做？可以使用下面的命令来创建分区。</p>
<p>下面的命令创建了一个 33.7 GB 的分区，从 <code>20 GB</code> 开始到 <code>53 GB</code> 结束。 <code>100%</code> 使用率允许用户用硬盘上所有剩余的空余空间。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="p">[</span><span class="n">Disk</span><span class="w"> </span><span class="n">Name</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">mkpart</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">Type</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Filesystem</span><span class="w"> </span><span class="n">Type</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">Start</span><span class="w"> </span><span class="n">Size</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">Size</span><span class="p">]</span>

<span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w"> </span><span class="n">mkpart</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">ext4</span><span class="w"> </span><span class="mf">20.0</span><span class="n">GB</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span>
<span class="nl">Information</span><span class="p">:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span><span class="p">.</span>
</code></pre></div>

<h3>怎样用 parted 列出所有的分区</h3>
<p>你也许注意到了，我们已经在上述步骤中创建了三个分区，如果你想要列出所有在硬盘上可用的分区，可以使用 <code>print</code> 命令。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb<span class="w"> </span>print
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">53</span>.7GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>msdos
Disk<span class="w"> </span>Flags:

Number<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Size<span class="w"> </span>Type<span class="w"> </span>File<span class="w"> </span>system<span class="w"> </span>Flags
<span class="w"> </span><span class="m">1</span><span class="w"> </span>1049kB<span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span><span class="m">53</span>.7GB<span class="w"> </span><span class="m">33</span>.7GB<span class="w"> </span>primary<span class="w"> </span>ext4
</code></pre></div>

<h3>怎样用 mkfs 格式化分区</h3>
<p>用户可以用 <code>mkfs</code> 命令格式化分区。下面的步骤会用 <code>mkfs</code> 来格式化分区。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>mkfs.ext4<span class="w"> </span>/dev/sdb1
mke2fs<span class="w"> </span><span class="m">1</span>.43.4<span class="w"> </span><span class="o">(</span><span class="m">31</span>-Jan-2017<span class="o">)</span>
Creating<span class="w"> </span>filesystem<span class="w"> </span>with<span class="w"> </span><span class="m">2621440</span><span class="w"> </span>4k<span class="w"> </span>blocks<span class="w"> </span>and<span class="w"> </span><span class="m">656640</span><span class="w"> </span>inodes
Filesystem<span class="w"> </span>UUID:<span class="w"> </span>415cf467-634c-4403-8c9f-47526bbaa381
Superblock<span class="w"> </span>backups<span class="w"> </span>stored<span class="w"> </span>on<span class="w"> </span>blocks:
<span class="w">    </span><span class="m">32768</span>,<span class="w"> </span><span class="m">98304</span>,<span class="w"> </span><span class="m">163840</span>,<span class="w"> </span><span class="m">229376</span>,<span class="w"> </span><span class="m">294912</span>,<span class="w"> </span><span class="m">819200</span>,<span class="w"> </span><span class="m">884736</span>,<span class="w"> </span><span class="m">1605632</span>

Allocating<span class="w"> </span>group<span class="w"> </span>tables:<span class="w"> </span><span class="k">done</span>
Writing<span class="w"> </span>inode<span class="w"> </span>tables:<span class="w"> </span><span class="k">done</span>
Creating<span class="w"> </span>journal<span class="w"> </span><span class="o">(</span><span class="m">16384</span><span class="w"> </span>blocks<span class="o">)</span>:<span class="w"> </span><span class="k">done</span>
Writing<span class="w"> </span>superblocks<span class="w"> </span>and<span class="w"> </span>filesystem<span class="w"> </span>accounting<span class="w"> </span>information:<span class="w"> </span><span class="k">done</span>
</code></pre></div>

<p>同样的。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>mkfs.ext4<span class="w"> </span>/dev/sdb2
$<span class="w"> </span>sudo<span class="w"> </span>mkfs.ext4<span class="w"> </span>/dev/sdb3
</code></pre></div>

<p>创建必要的文件夹然后将这些分区挂载在上面。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>/par1<span class="w"> </span>/par2<span class="w"> </span>/par3
</code></pre></div>

<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/sdb1<span class="w"> </span>/par1
$<span class="w"> </span>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/sdb2<span class="w"> </span>/par2
$<span class="w"> </span>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/sdb3<span class="w"> </span>/par3
</code></pre></div>

<p>运行下列命令来检查是否成功挂载上新创建的分区。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>df<span class="w"> </span>-h<span class="w"> </span>/dev/sdb<span class="o">[</span><span class="m">1</span>-3<span class="o">]</span>
Filesystem<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
/dev/sdb1<span class="w"> </span><span class="m">9</span>.2G<span class="w"> </span>37M<span class="w"> </span><span class="m">8</span>.6G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/par1
/dev/sdb2<span class="w"> </span><span class="m">9</span>.2G<span class="w"> </span>37M<span class="w"> </span><span class="m">8</span>.6G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/par2
/dev/sdb3<span class="w"> </span>31G<span class="w"> </span>49M<span class="w"> </span>30G<span class="w"> </span><span class="m">1</span>%<span class="w"> </span>/par3
</code></pre></div>

<h3>怎样检查硬盘空闲空间</h3>
<p>运行下列命令来检查硬盘上的空闲空间，这块硬盘上有 <code>25.7 GB</code> 的空闲空间。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb<span class="w"> </span>print<span class="w"> </span>free
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">53</span>.7GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>msdos
Disk<span class="w"> </span>Flags:

Number<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Size<span class="w"> </span>Type<span class="w"> </span>File<span class="w"> </span>system<span class="w"> </span>Flags
<span class="w"> </span><span class="m">32</span>.3kB<span class="w"> </span>1049kB<span class="w"> </span>1016kB<span class="w"> </span>Free<span class="w"> </span>Space
<span class="w"> </span><span class="m">1</span><span class="w"> </span>1049kB<span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span><span class="m">28</span>.0GB<span class="w"> </span>8001MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">28</span>.0GB<span class="w"> </span><span class="m">53</span>.7GB<span class="w"> </span><span class="m">25</span>.7GB<span class="w"> </span>Free<span class="w"> </span>Space
</code></pre></div>

<h3>怎样使用 parted 命令来重新调整分区大小</h3>
<p><code>parted</code> 允许用户重新调整分区大小。不过我已在文章的开头说了，不要缩小分区大小，不然会有许多错误。</p>
<p>运行下列命令来检查硬盘分区以及所有可用空间。 可以看到硬盘上有 <code>25.7GB</code> 的可用空间。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb<span class="w"> </span>print<span class="w"> </span>free
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">53</span>.7GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>msdos
Disk<span class="w"> </span>Flags:

Number<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Size<span class="w"> </span>Type<span class="w"> </span>File<span class="w"> </span>system<span class="w"> </span>Flags
<span class="w"> </span><span class="m">32</span>.3kB<span class="w"> </span>1049kB<span class="w"> </span>1016kB<span class="w"> </span>Free<span class="w"> </span>Space
<span class="w"> </span><span class="m">1</span><span class="w"> </span>1049kB<span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span><span class="m">28</span>.0GB<span class="w"> </span>8001MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">28</span>.0GB<span class="w"> </span><span class="m">53</span>.7GB<span class="w"> </span><span class="m">25</span>.7GB<span class="w"> </span>Free<span class="w"> </span>Space
</code></pre></div>

<p>运行下列命令来重新调整分区大小。 我们将要重新调整（增加）分区 3 的结束位置，从 <code>28GB</code> 到 <code>33GB</code>。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="p">[</span><span class="n">Disk</span><span class="w"> </span><span class="n">Name</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">resizepart</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">Number</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">New</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">Size</span><span class="p">]</span>

<span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w"> </span><span class="n">resizepart</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mf">33.0</span><span class="n">GB</span>
<span class="nl">Information</span><span class="p">:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span><span class="p">.</span>
</code></pre></div>

<p>运行下列命令来确认分区是否已经扩容。可以看到，分区 3 已经从 <code>8GB</code> 增加到 <code>13GB</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb<span class="w"> </span>print
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">53</span>.7GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>msdos
Disk<span class="w"> </span>Flags:

Number<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Size<span class="w"> </span>Type<span class="w"> </span>File<span class="w"> </span>system<span class="w"> </span>Flags
<span class="w"> </span><span class="m">1</span><span class="w"> </span>1049kB<span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span><span class="m">33</span>.0GB<span class="w"> </span><span class="m">13</span>.0GB<span class="w"> </span>primary<span class="w"> </span>ext4
</code></pre></div>

<p>重新调整文件系统大小。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>resize2fs<span class="w"> </span>/dev/sdb3
resize2fs<span class="w"> </span><span class="m">1</span>.43.4<span class="w"> </span><span class="o">(</span><span class="m">31</span>-Jan-2017<span class="o">)</span>
Resizing<span class="w"> </span>the<span class="w"> </span>filesystem<span class="w"> </span>on<span class="w"> </span>/dev/sdb3<span class="w"> </span>to<span class="w"> </span><span class="m">3173952</span><span class="w"> </span><span class="o">(</span>4k<span class="o">)</span><span class="w"> </span>blocks.
The<span class="w"> </span>filesystem<span class="w"> </span>on<span class="w"> </span>/dev/sdb3<span class="w"> </span>is<span class="w"> </span>now<span class="w"> </span><span class="m">3173952</span><span class="w"> </span><span class="o">(</span>4k<span class="o">)</span><span class="w"> </span>blocks<span class="w"> </span>long.
</code></pre></div>

<p>最后，确认分区是否已经扩容。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>df<span class="w"> </span>-h<span class="w"> </span>/dev/sdb<span class="o">[</span><span class="m">1</span>-3<span class="o">]</span>
Filesystem<span class="w"> </span>Size<span class="w"> </span>Used<span class="w"> </span>Avail<span class="w"> </span>Use%<span class="w"> </span>Mounted<span class="w"> </span>on
/dev/sdb1<span class="w"> </span><span class="m">9</span>.2G<span class="w"> </span><span class="m">5</span>.1G<span class="w"> </span><span class="m">3</span>.6G<span class="w"> </span><span class="m">59</span>%<span class="w"> </span>/par1
/dev/sdb2<span class="w"> </span><span class="m">9</span>.2G<span class="w"> </span><span class="m">2</span>.1G<span class="w"> </span><span class="m">6</span>.6G<span class="w"> </span><span class="m">24</span>%<span class="w"> </span>/par2
/dev/sdb3<span class="w"> </span>12G<span class="w"> </span><span class="m">1</span>.1G<span class="w"> </span>11G<span class="w"> </span><span class="m">10</span>%<span class="w"> </span>/par3
</code></pre></div>

<h3>怎样用 parted 删除分区</h3>
<p>我们用 <code>rm</code> 命令方便地删除未使用的分区（如果该分区不会再被用到了）。下列步骤中，我们将会删除分区 3 （<code>/dev/sdb3</code>）。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="p">[</span><span class="n">Disk</span><span class="w"> </span><span class="n">Name</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">rm</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">Number</span><span class="p">]</span>

<span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="mi">3</span>
<span class="nl">Warning</span><span class="p">:</span><span class="w"> </span><span class="n">Partition</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb3</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">used</span><span class="p">.</span><span class="w"> </span><span class="n">Are</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">continue</span><span class="o">?</span>
<span class="n">Yes</span><span class="o">/</span><span class="n">No</span><span class="o">?</span><span class="w"> </span><span class="n">Yes</span>
<span class="nl">Error</span><span class="p">:</span><span class="w"> </span><span class="n">Partition</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">written</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">inform</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">change</span><span class="p">,</span><span class="w"> </span><span class="n">probably</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">it</span><span class="o">/</span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">use</span><span class="p">.</span><span class="w"> </span><span class="n">As</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">partition</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">remain</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">use</span><span class="p">.</span>
<span class="n">You</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">reboot</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">further</span><span class="w"> </span><span class="n">changes</span><span class="p">.</span>
<span class="n">Ignore</span><span class="o">/</span><span class="n">Cancel</span><span class="o">?</span><span class="w"> </span><span class="n">Ignore</span>
<span class="nl">Information</span><span class="p">:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span><span class="p">.</span>
</code></pre></div>

<p>我们也可以用下列的命令检查。可以看到，分区 3 已经被成功移除。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb<span class="w"> </span>print
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">53</span>.7GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>msdos
Disk<span class="w"> </span>Flags:

Number<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Size<span class="w"> </span>Type<span class="w"> </span>File<span class="w"> </span>system<span class="w"> </span>Flags
<span class="w"> </span><span class="m">1</span><span class="w"> </span>1049kB<span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
</code></pre></div>

<h3>怎样用 parted 命令设置/更改分区标志</h3>
<p>我们可以用下列的命令来轻易更改分区的标志。 我们将对 <code>/dev/sdb2</code> 设置 <code>lvm</code> 标志。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="p">[</span><span class="n">Disk</span><span class="w"> </span><span class="n">Name</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">set</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Partition</span><span class="w"> </span><span class="n">Number</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Flags</span><span class="w"> </span><span class="n">Name</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">Flag</span><span class="w"> </span><span class="n">On</span><span class="o">/</span><span class="n">Off</span><span class="p">]</span>

<span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">lvm</span><span class="w"> </span><span class="n">on</span>
<span class="nl">Information</span><span class="p">:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span><span class="p">.</span>
</code></pre></div>

<p>我们可以列出分区来验证这次的更改。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sdb<span class="w"> </span>print
Model:<span class="w"> </span>ATA<span class="w"> </span>VBOX<span class="w"> </span>HARDDISK<span class="w"> </span><span class="o">(</span>scsi<span class="o">)</span>
Disk<span class="w"> </span>/dev/sdb:<span class="w"> </span><span class="m">53</span>.7GB
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span>512B/512B
Partition<span class="w"> </span>Table:<span class="w"> </span>msdos
Disk<span class="w"> </span>Flags:

Number<span class="w"> </span>Start<span class="w"> </span>End<span class="w"> </span>Size<span class="w"> </span>Type<span class="w"> </span>File<span class="w"> </span>system<span class="w"> </span>Flags
<span class="w"> </span><span class="m">1</span><span class="w"> </span>1049kB<span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span>.0GB<span class="w"> </span><span class="m">20</span>.0GB<span class="w"> </span>9999MB<span class="w"> </span>primary<span class="w"> </span>ext4<span class="w"> </span>lvm
</code></pre></div>

<p>如果你想知道可用的标志，只需要用如下的命令。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="o">(</span>parted<span class="o">)</span><span class="w"> </span><span class="nb">help</span><span class="w"> </span><span class="nb">set</span>
<span class="w"> </span><span class="nb">set</span><span class="w"> </span>NUMBER<span class="w"> </span>FLAG<span class="w"> </span>STATE<span class="w"> </span>change<span class="w"> </span>the<span class="w"> </span>FLAG<span class="w"> </span>on<span class="w"> </span>partition<span class="w"> </span>NUMBER

<span class="w">    </span>NUMBER<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>partition<span class="w"> </span>number<span class="w"> </span>used<span class="w"> </span>by<span class="w"> </span>Linux.<span class="w"> </span>On<span class="w"> </span>MS-DOS<span class="w"> </span>disk<span class="w"> </span>labels,<span class="w"> </span>the<span class="w"> </span>primary<span class="w"> </span>partitions<span class="w"> </span>number<span class="w"> </span>from<span class="w"> </span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span><span class="m">4</span>,<span class="w"> </span>logical<span class="w"> </span>partitions<span class="w"> </span>from<span class="w"> </span><span class="m">5</span><span class="w"> </span>onwards.
<span class="w"> </span>FLAG<span class="w"> </span>is<span class="w"> </span>one<span class="w"> </span>of:<span class="w"> </span>boot,<span class="w"> </span>root,<span class="w"> </span>swap,<span class="w"> </span>hidden,<span class="w"> </span>raid,<span class="w"> </span>lvm,<span class="w"> </span>lba,<span class="w"> </span>hp-service,<span class="w"> </span>palo,<span class="w"> </span>prep,<span class="w"> </span>msftres,<span class="w"> </span>bios_grub,<span class="w"> </span>atvrecv,<span class="w"> </span>diag,<span class="w"> </span>legacy_boot,<span class="w"> </span>msftdata,<span class="w"> </span>irst,<span class="w"> </span>esp
<span class="w"> </span>STATE<span class="w"> </span>is<span class="w"> </span>one<span class="w"> </span>of:<span class="w"> </span>on,<span class="w"> </span>off
</code></pre></div>

<p>如果你想知道 <code>parted</code> 的其它可用命令， 只需要去到 <code>help</code> 页面。</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">parted</span>
<span class="n">GNU</span><span class="w"> </span><span class="n">parted</span><span class="w"> </span><span class="mf">3.2</span>
<span class="k">Using</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda</span>
<span class="n">Welcome</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">GNU</span><span class="w"> </span><span class="n">parted</span><span class="err">!</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="s1">&#39;help&#39;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">commands</span><span class="p">.</span>
<span class="p">(</span><span class="n">parted</span><span class="p">)</span><span class="w"> </span><span class="n">help</span>
<span class="w"> </span><span class="n">align</span><span class="o">-</span><span class="k">check</span><span class="w"> </span><span class="n">TYPE</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">TYPE</span><span class="p">(</span><span class="nf">min</span><span class="o">|</span><span class="n">opt</span><span class="p">)</span><span class="w"> </span><span class="n">alignment</span>
<span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="o">[</span><span class="n">COMMAND</span><span class="o">]</span><span class="w"> </span><span class="k">print</span><span class="w"> </span><span class="k">general</span><span class="w"> </span><span class="n">help</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">COMMAND</span>
<span class="w"> </span><span class="n">mklabel</span><span class="p">,</span><span class="n">mktable</span><span class="w"> </span><span class="n">LABEL</span><span class="o">-</span><span class="n">TYPE</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">disklabel</span><span class="w"> </span><span class="p">(</span><span class="k">partition</span><span class="w"> </span><span class="nc">table</span><span class="p">)</span>
<span class="w"> </span><span class="n">mkpart</span><span class="w"> </span><span class="n">PART</span><span class="o">-</span><span class="n">TYPE</span><span class="w"> </span><span class="o">[</span><span class="n">FS-TYPE</span><span class="o">]</span><span class="w"> </span><span class="k">START</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">partition</span>
<span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">NUMBER</span><span class="w"> </span><span class="n">NAME</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="n">NUMBER</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NAME</span>
<span class="w"> </span><span class="k">print</span><span class="w"> </span><span class="o">[</span><span class="n">devices|free|list,all|NUMBER</span><span class="o">]</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="nc">table</span><span class="p">,</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="k">free</span><span class="w"> </span><span class="nf">space</span><span class="p">,</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="k">found</span><span class="w"> </span><span class="n">partitions</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="k">partition</span>
<span class="w"> </span><span class="n">quit</span><span class="w"> </span><span class="k">exit</span><span class="w"> </span><span class="n">program</span>
<span class="w"> </span><span class="n">rescue</span><span class="w"> </span><span class="k">START</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="n">rescue</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lost</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="n">near</span><span class="w"> </span><span class="k">START</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">END</span>
<span class="w"> </span><span class="n">resizepart</span><span class="w"> </span><span class="n">NUMBER</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="n">NUMBER</span>
<span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="n">NUMBER</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="n">NUMBER</span>
<span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">DEVICE</span><span class="w"> </span><span class="nf">choose</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">edit</span>
<span class="w"> </span><span class="n">disk_set</span><span class="w"> </span><span class="n">FLAG</span><span class="w"> </span><span class="k">STATE</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">FLAG</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">selected</span><span class="w"> </span><span class="n">device</span>
<span class="w"> </span><span class="n">disk_toggle</span><span class="w"> </span><span class="o">[</span><span class="n">FLAG</span><span class="o">]</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">FLAG</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">selected</span><span class="w"> </span><span class="n">device</span>
<span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">NUMBER</span><span class="w"> </span><span class="n">FLAG</span><span class="w"> </span><span class="k">STATE</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">FLAG</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="n">NUMBER</span>
<span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="o">[</span><span class="n">NUMBER [FLAG</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="n">toggle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">FLAG</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">partition</span><span class="w"> </span><span class="n">NUMBER</span>
<span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">UNIT</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">UNIT</span>
<span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">copyright</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">GNU</span><span class="w"> </span><span class="n">parted</span>
<span class="p">(</span><span class="n">parted</span><span class="p">)</span><span class="w"> </span><span class="n">quit</span>
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>