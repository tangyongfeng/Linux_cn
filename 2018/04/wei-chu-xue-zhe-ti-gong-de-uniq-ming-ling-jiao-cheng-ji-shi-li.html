<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>为初学者提供的 uniq 命令教程及示例</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Sk 如果你主要是在命令行上工作，并且每天处理大量的文本文件，那么你应该了解下 uniq 命令。该命令会帮助你轻松地从 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/04/wei-chu-xue-zhe-ti-gong-de-uniq-ming-ling-jiao-cheng-ji-shi-li.html" rel="bookmark"
           title="Permalink to 为初学者提供的 uniq 命令教程及示例">为初学者提供的 uniq 命令教程及示例</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-04-13T20:46:47+02:00">
                Published: Fri 13 April 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Sk</p>
<p><img alt="" src="/data/attachment/album/201804/13/204629q8eeab5ftiltxcmi.jpg"></p>
<p>如果你主要是在命令行上工作，并且每天处理大量的文本文件，那么你应该了解下 <code>uniq</code> 命令。该命令会帮助你轻松地从文件中找到重复的行。它不仅用于查找重复项，而且我们还可以使用它来删除重复项，显示重复项的出现次数，只显示重复的行，只显示唯一的行等。由于 <code>uniq</code> 命令是 GNU coreutils 包的一部分，所以它预装在大多数 Linux 发行版中，让我们不需要费心安装。来看一些实际的例子。</p>
<p>请注意，除非重复行是相邻的，否则 <code>uniq</code> 不会删除它们。因此，你可能需要先对它们进行排序，或将排序命令与 <code>uniq</code> 组合以获得结果。让我给你看一些例子。</p>
<p>首先，让我们创建一个带有一些重复行的文件：</p>
<div class="highlight"><pre><span></span><code>vi ostechnix.txt
</code></pre></div>

<div class="highlight"><pre><span></span><code>welcome to ostechnix
welcome to ostechnix
Linus is the creator of Linux.
Linux is secure by default
Linus is the creator of Linux.
Top 500 super computers are powered by Linux
</code></pre></div>

<p>正如你在上面的文件中看到的，我们有一些重复的行（第一行和第二行，第三行和第五行是重复的）。</p>
<h3>1、 使用 uniq 命令删除文件中的连续重复行</h3>
<p>如果你在不使用任何参数的情况下使用 <code>uniq</code> 命令，它将删除所有连续的重复行，只显示唯一的行。</p>
<div class="highlight"><pre><span></span><code>uniq ostechnix.txt
</code></pre></div>

<p>示例输出：</p>
<p><img alt="" src="/data/attachment/album/201804/13/204653e5yjb4b6u6b1j9if.png"></p>
<p>如你所见， <code>uniq</code> 命令删除了给定文件中的所有连续重复行。你可能还注意到，上面的输出仍然有第二行和第四行重复了。这是因为 <code>uniq</code> 命令只有在相邻的情况下才会删除重复的行，当然，我们也可以删除非连续的重复行。请看下面的第二个例子。</p>
<h3>2、 删除所有重复的行</h3>
<div class="highlight"><pre><span></span><code>sort ostechnix.txt | uniq
</code></pre></div>

<p>示例输出：</p>
<p><img alt="" src="/data/attachment/album/201804/13/204655vhmmjsp3zp11sfet.png"></p>
<p>看到了吗？没有重复的行。换句话说，上面的命令将显示在 <code>ostechnix.txt</code> 中只出现一次的行。我们使用 <code>sort</code> 命令与 <code>uniq</code> 命令结合，因为，就像我提到的，除非重复行是相邻的，否则 <code>uniq</code> 不会删除它们。</p>
<h3>3、 只显示文件中唯一的一行</h3>
<p>为了只显示文件中唯一的一行，可以这样做：</p>
<div class="highlight"><pre><span></span><code>sort ostechnix.txt | uniq -u
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code>Linux is secure by default
Top 500 super computers are powered by Linux
</code></pre></div>

<p>如你所见，在给定的文件中只有两行是唯一的。</p>
<h3>4、 只显示重复的行</h3>
<p>同样的，我们也可以显示文件中重复的行，就像下面这样：</p>
<div class="highlight"><pre><span></span><code>sort ostechnix.txt | uniq -d
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code>Linus is the creator of Linux.
welcome to ostechnix
</code></pre></div>

<p>这两行在 <code>ostechnix.txt</code> 文件中是重复的行。请注意 <code>-d</code>（小写 <code>d</code>） 将会只打印重复的行，每组显示一个。打印所有重复的行，使用 <code>-D</code>（大写 <code>D</code>），如下所示：</p>
<div class="highlight"><pre><span></span><code>sort ostechnix.txt | uniq -D
</code></pre></div>

<p>在下面的截图中看两个选项的区别：</p>
<p><img alt="" src="/data/attachment/album/201804/13/204657rpo115v6tp5bn1xq.png"></p>
<h3>5、 显示文件中每一行的出现次数</h3>
<p>由于某种原因，你可能想要检查给定文件中每一行重复出现的次数。要做到这一点，使用 <code>-c</code> 选项，如下所示：</p>
<div class="highlight"><pre><span></span><code>sort ostechnix.txt | uniq -c
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code> 2 Linus is the creator of Linux.
 1 Linux is secure by default
 1 Top 500 super computers are powered by Linux
 2 welcome to ostechnix
</code></pre></div>

<p>我们还可以按照每一行的出现次数进行排序，然后显示，如下所示：</p>
<div class="highlight"><pre><span></span><code>sort ostechnix.txt | uniq -c | sort -nr
</code></pre></div>

<p>示例输出：</p>
<div class="highlight"><pre><span></span><code> 2 welcome to ostechnix
 2 Linus is the creator of Linux.
 1 Top 500 super computers are powered by Linux
 1 Linux is secure by default
</code></pre></div>

<h3>6、 将比较限制为 N 个字符</h3>
<p>我们可以使用 <code>-w</code> 选项来限制对文件中特定数量字符的比较。例如，让我们比较文件中的前四个字符，并显示重复行，如下所示：</p>
<div class="highlight"><pre><span></span><code>uniq -d -w 4 ostechnix.txt
</code></pre></div>

<h3>7、 忽略比较指定的 N 个字符</h3>
<p>像对文件中行的前 N 个字符进行限制比较一样，我们也可以使用 <code>-s</code> 选项来忽略比较前 N 个字符。</p>
<p>下面的命令将忽略在文件中每行的前四个字符进行比较：</p>
<div class="highlight"><pre><span></span><code>uniq -d -s 4 ostechnix.txt
</code></pre></div>

<p>为了忽略比较前 N 个字段（LCTT 译注：即前几列）而不是字符，在上面的命令中使用 <code>-f</code> 选项。</p>
<p>欲了解更多详情，请参考帮助部分：</p>
<div class="highlight"><pre><span></span><code>uniq --help
</code></pre></div>

<p>也可以使用 <code>man</code> 命令查看：</p>
<div class="highlight"><pre><span></span><code>man uniq
</code></pre></div>

<p>今天就到这里！我希望你现在对 <code>uniq</code> 命令及其目的有一个基本的了解。如果你发现我们的指南有用，请在你的社交网络上分享，并继续支持我们。更多好东西要来了，请继续关注！</p>
<p>干杯！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>