<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在 RHEL 中使用订阅管理器启用软件仓库</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Kerneltalks 了解如何在 RHEL 中使用订阅管理器来启用软件仓库。 这篇文章还包括了将系统注册到 Red Hat 的步骤、添加订阅和发生错 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/06/ru-he-zai-rhel-zhong-shi-yong-ding-yue-guan-li-qi-qi-yong-ruan-jian-cang-ku.html" rel="bookmark"
           title="Permalink to 如何在 RHEL 中使用订阅管理器启用软件仓库">如何在 RHEL 中使用订阅管理器启用软件仓库</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-06-12T10:21:12+02:00">
                Published: Tue 12 June 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Kerneltalks</p>
<blockquote>
<p>了解如何在 RHEL 中使用订阅管理器来启用软件仓库。 这篇文章还包括了将系统注册到 Red Hat 的步骤、添加订阅和发生错误时的解决方案。</p>
</blockquote>
<p><img alt="Enable repository using subscription-manager" src="/data/attachment/album/201806/12/102117vbr929yzx2m8hmpf.png"></p>
<p>在本文中，我们将逐步介绍如何在刚安装的 RHEL 服务器中启用 Red Hat 软件仓库。</p>
<p>可以利用 <code>subscription-manager</code> 命令启用软件仓库，如下所示：</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">--</span><span class="n">enable</span><span class="w"> </span><span class="n">rhel</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">rhv</span><span class="o">-</span><span class="mi">4</span><span class="o">-</span><span class="n">agent</span><span class="o">-</span><span class="n">beta</span><span class="o">-</span><span class="n">debug</span><span class="o">-</span><span class="n">rpms</span>
<span class="nl">Error</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;rhel-6-server-rhv-4-agent-beta-debug-rpms&#39;</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="n">ID</span><span class="p">.</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="ss">&quot;subscription-manager repos --list&quot;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">repositories</span><span class="p">.</span>
</code></pre></div>

<p>当您的订阅没有配置好时，您会看到上述错误。让我们一步一步地通过 <code>subscription-manager</code> 来启用软件仓库。</p>
<h3>步骤 1：使用 Red Hat 注册您的系统</h3>
<p>这里假设您已经安装了新系统并且尚未在 Red Hat 上注册。如果您已经注册了该系统，那么您可以忽略此步骤。</p>
<p>您可以使用下面的命令来检查您的系统是否已在 Red Hat 注册了该订阅：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">subscription</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="nx">version</span>
<span class="nx">server</span><span class="w"> </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">This</span><span class="w"> </span><span class="nx">system</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">currently</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">registered</span><span class="p">.</span>
<span class="nx">subscription</span><span class="w"> </span><span class="nx">management</span><span class="w"> </span><span class="nx">server</span><span class="p">:</span><span class="w"> </span><span class="nx">Unknown</span>
<span class="nx">subscription</span><span class="w"> </span><span class="nx">management</span><span class="w"> </span><span class="nx">rules</span><span class="p">:</span><span class="w"> </span><span class="nx">Unknown</span>
<span class="nx">subscription</span><span class="o">-</span><span class="nx">manager</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">1.18.10</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="nx">el6</span>
<span class="nx">python</span><span class="o">-</span><span class="nx">rhsm</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">1.18.6</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="nx">el6</span>
</code></pre></div>

<p>在这里输出的第一行中，您可以看到该系统未注册。那么，让我们开始注册系统。您需要在 <code>subscription-manager</code> 命令中使用 <code>register</code> 选项。在这一步需要使用您的 Red Hat 帐户凭证。</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="err">@</span><span class="n">kerneltalks</span><span class="w"> </span><span class="c1"># subscription-manager register</span>
<span class="n">Registering</span><span class="w"> </span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="n">subscription</span><span class="o">.</span><span class="n">rhsm</span><span class="o">.</span><span class="n">redhat</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">443</span><span class="o">/</span><span class="n">subscription</span>
<span class="n">Username</span><span class="p">:</span><span class="w"> </span><span class="n">admin</span><span class="err">@</span><span class="n">kerneltalks</span><span class="o">.</span><span class="n">com</span>
<span class="n">Password</span><span class="p">:</span>
<span class="n">Network</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">server</span><span class="o">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">rhsm</span><span class="o">/</span><span class="n">rhsm</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span>
</code></pre></div>

<p>如果您遇到上述错误，那么表明您的服务器无法连接到 RedHat。检查您的网络连接，或者您能<a href="https://kerneltalks.com/howto/how-to-configure-nameserver-in-linux/">解决网站名称解析的问题</a>。有时候，即使你能够 ping 通订阅服务器，你也会看到这个错误。这可能是因为您的环境中有代理服务器。在这种情况下，您需要将其详细信息添加到文件 <code>/etc/rhsm/rhsm.conf</code> 中。以下详细的代理信息应根据你的环境填充：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> an http proxy server to use
 proxy_hostname =

<span class="gh">#</span> port for http proxy server
 proxy_port =

<span class="gh">#</span> user name for authenticating to an http proxy, if needed
 proxy_user =

<span class="gh">#</span> password for basic http proxy auth, if needed
 proxy_password =
</code></pre></div>

<p>一旦你完成了这些，通过使用下面的命令重新检查 <code>subscription-manager</code> 是否获得了新的代理信息：</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">config</span>
<span class="o">[</span><span class="n">server</span><span class="o">]</span>
<span class="w"> </span><span class="n">hostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">subscription.rhsm.redhat.com</span><span class="o">]</span>
<span class="w"> </span><span class="n">insecure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">0</span><span class="o">]</span>
<span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">443</span><span class="o">]</span>
<span class="w"> </span><span class="k">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">/subscription</span><span class="o">]</span>
<span class="w"> </span><span class="n">proxy_hostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">kerneltalksproxy.abc.com</span><span class="o">]</span>
<span class="w"> </span><span class="n">proxy_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">asdf</span><span class="o">]</span>
<span class="w"> </span><span class="n">proxy_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">3456</span><span class="o">]</span>
<span class="w"> </span><span class="n">proxy_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">user2</span><span class="o">]</span>
<span class="w"> </span><span class="n">server_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">180</span><span class="o">]</span>
<span class="w"> </span><span class="n">ssl_verify_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">3</span><span class="o">]</span>

<span class="o">[</span><span class="n">rhsm</span><span class="o">]</span>
<span class="w"> </span><span class="n">baseurl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">https://cdn.redhat.com</span><span class="o">]</span>
<span class="w"> </span><span class="n">ca_cert_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">/etc/rhsm/ca/</span><span class="o">]</span>
<span class="w"> </span><span class="n">consumercertdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">/etc/pki/consumer</span><span class="o">]</span>
<span class="w"> </span><span class="n">entitlementcertdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">/etc/pki/entitlement</span><span class="o">]</span>
<span class="w"> </span><span class="n">full_refresh_on_yum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">0</span><span class="o">]</span>
<span class="w"> </span><span class="n">manage_repos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">1</span><span class="o">]</span>
<span class="w"> </span><span class="n">pluginconfdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">/etc/rhsm/pluginconf.d</span><span class="o">]</span>
<span class="w"> </span><span class="n">plugindir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">/usr/share/rhsm-plugins</span><span class="o">]</span>
<span class="w"> </span><span class="n">productcertdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">/etc/pki/product</span><span class="o">]</span>
<span class="w"> </span><span class="n">repo_ca_cert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">rhsm</span><span class="o">/</span><span class="n">ca</span><span class="o">/</span><span class="n">redhat</span><span class="o">-</span><span class="n">uep</span><span class="p">.</span><span class="n">pem</span>
<span class="w"> </span><span class="n">report_package_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">1</span><span class="o">]</span>

<span class="o">[</span><span class="n">rhsmcertd</span><span class="o">]</span>
<span class="w"> </span><span class="n">autoattachinterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">1440</span><span class="o">]</span>
<span class="w"> </span><span class="n">certcheckinterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">240</span><span class="o">]</span>

<span class="o">[</span><span class="n">logging</span><span class="o">]</span>
<span class="w"> </span><span class="n">default_log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">INFO</span><span class="o">]</span>

<span class="err">[]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">use</span>
</code></pre></div>

<p>现在，请尝试重新注册您的系统。</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">register</span>
<span class="n">Registering</span><span class="w"> </span><span class="k">to</span><span class="err">:</span><span class="w"> </span><span class="n">subscription</span><span class="p">.</span><span class="n">rhsm</span><span class="p">.</span><span class="n">redhat</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="mi">443</span><span class="o">/</span><span class="n">subscription</span>
<span class="nl">Username</span><span class="p">:</span><span class="w"> </span><span class="k">admin</span><span class="nv">@kerneltalks</span><span class="p">.</span><span class="n">com</span>
<span class="nl">Password</span><span class="p">:</span>
<span class="n">You</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="n">accept</span><span class="w"> </span><span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">Terms</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">conditions</span><span class="p">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">visit</span><span class="w"> </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="n">redhat</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">wapps</span><span class="o">/</span><span class="n">tnc</span><span class="o">/</span><span class="n">termsack</span><span class="vm">?</span><span class="n">event</span><span class="err">[]</span><span class="o">=</span><span class="n">signIn</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Customer</span><span class="w"> </span><span class="n">Portal</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">terms</span><span class="p">.</span>
</code></pre></div>

<p>如果您是第一次将服务器添加到 Red Hat 帐户，您将看到上述错误。转到该 <a href="https://www.redhat.com/wapps/tnc/termsack?event%5B%5D=signIn">URL</a>并接受条款。回到终端，然后再试一次。</p>
<div class="highlight"><pre><span></span><code><span class="n">oot</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">register</span>
<span class="n">Registering</span><span class="w"> </span><span class="k">to</span><span class="err">:</span><span class="w"> </span><span class="n">subscription</span><span class="p">.</span><span class="n">rhsm</span><span class="p">.</span><span class="n">redhat</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="mi">443</span><span class="o">/</span><span class="n">subscription</span>
<span class="nl">Username</span><span class="p">:</span><span class="w"> </span><span class="k">admin</span><span class="nv">@kerneltalks</span><span class="p">.</span><span class="n">com</span>
<span class="nl">Password</span><span class="p">:</span>
<span class="n">The</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nl">ID</span><span class="p">:</span><span class="w"> </span><span class="n">xxxxb2</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xx8e199xxx</span>
</code></pre></div>

<p>Bingo！系统现在已在 Red Hat 上注册。你可以再次用 <code>version</code> 选项来验证它。</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="nx">subscription</span><span class="o">-</span><span class="nx">managerversionservertype</span><span class="p">:</span><span class="nx">RedHatSubscriptionManagementsubscriptionmanagementserver</span><span class="p">:</span><span class="m m-Double">2.0.43</span><span class="o">-</span><span class="mi">1</span><span class="nx">subscriptionmanagementrules</span><span class="p">:</span><span class="m m-Double">5.26</span><span class="nx">subscription</span><span class="o">-</span><span class="nx">manager</span><span class="p">:</span><span class="m m-Double">1.18.10</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="nx">el6python</span><span class="o">-</span><span class="nx">rhsm</span><span class="p">:</span><span class="m m-Double">1.18.6</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="nx">el6</span><span class="s">&quot; decode=&quot;</span><span class="kc">true</span><span class="err">&quot;</span><span class="w">  </span><span class="p">]</span><span class="nx">root</span><span class="err">@</span><span class="nx">kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nx">subscription</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="nx">version</span>
<span class="nx">server</span><span class="w"> </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">Red</span><span class="w"> </span><span class="nx">Hat</span><span class="w"> </span><span class="nx">Subscription</span><span class="w"> </span><span class="nx">Management</span>
<span class="nx">subscription</span><span class="w"> </span><span class="nx">management</span><span class="w"> </span><span class="nx">server</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">2.0.43</span><span class="o">-</span><span class="mi">1</span>
<span class="nx">subscription</span><span class="w"> </span><span class="nx">management</span><span class="w"> </span><span class="nx">rules</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">5.26</span>
<span class="nx">subscription</span><span class="o">-</span><span class="nx">manager</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">1.18.10</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="nx">el6</span>
<span class="nx">python</span><span class="o">-</span><span class="nx">rhsm</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">1.18.6</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="nx">el6</span>
</code></pre></div>

<h3>步骤 2：将订阅添加到您的服务器</h3>
<p>首先尝试列出软件仓库。您将无法列出任何内容，因为我们尚未在我们的服务器中添加任何订阅。</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">--</span><span class="n">list</span>
<span class="n">This</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">repositories</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">subscriptions</span><span class="p">.</span>
</code></pre></div>

<p>正如您所看到 <code>subscription-manager</code> 找不到任何软件仓库，您需要将订阅添加到您的服务器上。一旦订阅被添加，<code>subscription-manager</code> 将能够列出下列的软件仓库。</p>
<p>要添加订阅，请先使用以下命令检查服务器的所有可用订阅：</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">--</span><span class="n">available</span>
<span class="o">+-------------------------------------------+</span>
<span class="n">Available</span><span class="w"> </span><span class="n">Subscriptions</span>
<span class="o">+-------------------------------------------+</span>
<span class="n">Subscription</span><span class="w"> </span><span class="nl">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Enterprise</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Virtual</span><span class="w"> </span><span class="n">Datacenters</span><span class="p">,</span><span class="w"> </span><span class="n">Standard</span>
<span class="nl">Provides</span><span class="p">:</span><span class="w"> </span><span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Beta</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Software</span><span class="w"> </span><span class="n">Collections</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Enterprise</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="k">Atomic</span><span class="w"> </span><span class="k">Host</span><span class="w"> </span><span class="n">Beta</span>
<span class="n">Oracle</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Enterprise</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">Server</span>
<span class="n">dotNET</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Enterprise</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="k">Atomic</span><span class="w"> </span><span class="k">Host</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Software</span><span class="w"> </span><span class="n">Collections</span><span class="w"> </span><span class="n">Beta</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Developer</span><span class="w"> </span><span class="n">Tools</span><span class="w"> </span><span class="n">Beta</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Developer</span><span class="w"> </span><span class="n">Toolset</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Developer</span><span class="w"> </span><span class="n">Tools</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="nl">SKU</span><span class="p">:</span><span class="w"> </span><span class="n">RH00050</span>
<span class="nl">Contract</span><span class="p">:</span><span class="w"> </span><span class="n">xxxxxxxx</span>
<span class="n">Pool</span><span class="w"> </span><span class="nl">ID</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="n">a85f98c6011059f0160110a2ae6000f</span>
<span class="n">Provides</span><span class="w"> </span><span class="nl">Management</span><span class="p">:</span><span class="w"> </span><span class="n">Yes</span>
<span class="nl">Available</span><span class="p">:</span><span class="w"> </span><span class="n">Unlimited</span>
<span class="nl">Suggested</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="n">Service</span><span class="w"> </span><span class="k">Level</span><span class="err">:</span><span class="w"> </span><span class="n">Standard</span>
<span class="n">Service</span><span class="w"> </span><span class="nl">Type</span><span class="p">:</span><span class="w"> </span><span class="n">L1</span><span class="o">-</span><span class="n">L3</span>
<span class="n">Subscription</span><span class="w"> </span><span class="nl">Type</span><span class="p">:</span><span class="w"> </span><span class="n">Stackable</span><span class="w"> </span><span class="p">(</span><span class="k">Temporary</span><span class="p">)</span>
<span class="nl">Ends</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">2018</span>
<span class="k">System</span><span class="w"> </span><span class="nl">Type</span><span class="p">:</span><span class="w"> </span><span class="n">Virtual</span>
</code></pre></div>

<p>您将获得可用于您的服务器的此类订阅的软件仓库列表。您需要阅读它提供的内容并记下对您有用或需要的订阅的 <code>Pool ID</code>。</p>
<p>现在，使用 pool ID 将订阅添加到您的服务器。</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">subscription</span><span class="o">-</span><span class="nv">manager</span><span class="w"> </span><span class="nv">attach</span><span class="w"> </span><span class="o">--</span><span class="nv">pool</span><span class="o">=</span><span class="mi">8</span><span class="nv">a85f98c6011059f0160110a2ae6000f</span>
<span class="nv">Successfully</span><span class="w"> </span><span class="nv">attached</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subscription</span><span class="w"> </span><span class="k">for</span>:<span class="w"> </span><span class="nv">Red</span><span class="w"> </span><span class="nv">Hat</span><span class="w"> </span><span class="nv">Enterprise</span><span class="w"> </span><span class="nv">Linux</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Virtual</span><span class="w"> </span><span class="nv">Datacenters</span>,<span class="w"> </span><span class="nv">Standard</span>
</code></pre></div>

<p>如果您不确定选择哪一个，则可以使用下面的命令自动地添加最适合您的服务器的订阅：</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">attach</span><span class="w"> </span><span class="o">--</span><span class="n">auto</span>
<span class="n">Installed</span><span class="w"> </span><span class="n">Product</span><span class="w"> </span><span class="k">Current</span><span class="w"> </span><span class="nl">Status</span><span class="p">:</span>
<span class="n">Product</span><span class="w"> </span><span class="nl">Name</span><span class="p">:</span><span class="w"> </span><span class="n">Red</span><span class="w"> </span><span class="n">Hat</span><span class="w"> </span><span class="n">Enterprise</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">Server</span>
<span class="nl">Status</span><span class="p">:</span><span class="w"> </span><span class="n">Subscribed</span>
</code></pre></div>

<p>接下来是最后一步启用软件仓库。</p>
<h3>步骤 3：启用软件仓库</h3>
<p>现在您将能够启用软件仓库，该软件仓库在您的附加订阅下可用。</p>
<div class="highlight"><pre><span></span><code><span class="n">root</span><span class="nv">@kerneltalks</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">subscription</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">--</span><span class="n">enable</span><span class="w"> </span><span class="n">rhel</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">rhv</span><span class="o">-</span><span class="mi">4</span><span class="o">-</span><span class="n">agent</span><span class="o">-</span><span class="n">beta</span><span class="o">-</span><span class="n">debug</span><span class="o">-</span><span class="n">rpms</span>
<span class="n">Repository</span><span class="w"> </span><span class="s1">&#39;rhel-6-server-rhv-4-agent-beta-debug-rpms&#39;</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">enabled</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">system</span><span class="p">.</span>
</code></pre></div>

<p>到这里，您已经完成了。您可以<a href="https://kerneltalks.com/howto/how-to-list-yum-repositories-in-rhel-centos/">用 yum 命令列出软件仓库</a>并确认。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>