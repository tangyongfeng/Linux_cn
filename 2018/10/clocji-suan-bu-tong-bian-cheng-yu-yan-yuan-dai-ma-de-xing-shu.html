<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>cloc：计算不同编程语言源代码的行数</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Sk 作为一个开发人员，你可能需要不时地向你的领导或者同事分享你目前的工作与代码开发进展，抑或你的领导想对 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li class="active"><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/10/clocji-suan-bu-tong-bian-cheng-yu-yan-yuan-dai-ma-de-xing-shu.html" rel="bookmark"
           title="Permalink to cloc：计算不同编程语言源代码的行数">cloc：计算不同编程语言源代码的行数</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-10-15T12:18:12+02:00">
                Published: Mon 15 October 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/fen-xiang">分享</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Sk</p>
<p><img alt="" src="/data/attachment/album/201810/15/121813la77nf3fecw2pd7a.png"></p>
<p>作为一个开发人员，你可能需要不时地向你的领导或者同事分享你目前的工作与代码开发进展，抑或你的领导想对代码进行全方位的分析。这时，你就需要用到一些代码统计的工具，我知道其中一个是 <a href="https://www.ostechnix.com/ohcount-the-source-code-line-counter-and-analyzer/"><strong>Ohcount</strong></a>。今天，我遇到了另一个程序，<strong>cloc</strong>。你可以用 cloc 很容易地统计多种语言的源代码行数。它还可以计算空行数、代码行数、实际代码的行数，并通过整齐的表格进行结果输出。cloc 是自由开源的跨平台程序，使用 <strong>Perl</strong> 进行开发。</p>
<h3>特点</h3>
<p>cloc 有很多优势：</p>
<ul>
<li>安装方便而且易用，不需要额外的依赖项</li>
<li>可移植</li>
<li>支持多种的结果格式导出，包括：纯文本、SQL、JSON、XML、YAML、CSV</li>
<li>可以计算 git 的提交数</li>
<li>可递归计算文件夹内的代码行数</li>
<li>可计算压缩后的文件，如：tar、zip、Java 的 .ear 等类型</li>
<li>开源，跨平台</li>
</ul>
<h3>安装</h3>
<p>cloc 的安装包在大多数的类 Unix 操作系统的默认软件库内，所以你只需要使用默认的包管理器安装即可。</p>
<p>Arch Linux:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>pacman<span class="w"> </span>-S<span class="w"> </span>cloc
</code></pre></div>

<p>Debian/Ubuntu:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>cloc
</code></pre></div>

<p>CentOS/Red Hat/Scientific Linux:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>cloc
</code></pre></div>

<p>Fedora:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>cloc
</code></pre></div>

<p>FreeBSD:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>pkg<span class="w"> </span>install<span class="w"> </span>cloc
</code></pre></div>

<p>当然你也可以使用第三方的包管理器，比如 <a href="https://www.ostechnix.com/install-node-js-linux/"><strong>NPM</strong></a>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>-g<span class="w"> </span>cloc
</code></pre></div>

<h3>统计多种语言代码数据的使用举例</h3>
<p>首先来几个简单的例子，比如下面在我目前工作目录中的的 C 代码。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>hello.c
<span class="c1">#include &lt;stdio.h&gt;</span>
int<span class="w"> </span>main<span class="o">()</span>
<span class="o">{</span>
<span class="w">    </span>//<span class="w"> </span>printf<span class="o">()</span><span class="w"> </span>displays<span class="w"> </span>the<span class="w"> </span>string<span class="w"> </span>inside<span class="w"> </span>quotation
<span class="w">    </span>printf<span class="o">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="o">}</span>
</code></pre></div>

<p>想要计算行数，只需要简单运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cloc<span class="w"> </span>hello.c
</code></pre></div>

<p>输出：</p>
<p><img alt="" src="/data/attachment/album/201810/15/121814hfjzwmjrn6zi2iwh.png"></p>
<p>第一列是被分析文件的编程语言，上面我们可以看到这个文件是用 C 语言编写的。</p>
<p>第二列显示的是该种语言有多少文件，图中说明只有一个。</p>
<p>第三列显示空行的数量，图中显示是 0 行。</p>
<p>第四列显示注释的行数。</p>
<p>第五列显示该文件中实际的代码总行数。</p>
<p>这是一个有只有 6 行代码的源文件，我们看到统计的还算准确，那么如果用来统计一个行数较多的源文件呢？</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cloc<span class="w"> </span>file.tar.gz
</code></pre></div>

<p>输出：</p>
<p><img alt="" src="/data/attachment/album/201810/15/121815mc7ddd5cnkk467nu.png"></p>
<p>上述输出结果如果手动统计准确的代码行数非常困难，但是 cloc 只需要几秒，而且以易读的表格格式显示结果。你还可以在最后查看每个部分的总计，这在分析程序的源代码时非常方便。</p>
<p>除了源代码文件，cloc 还能递归计算各个目录及其子目录下的文件、压缩包、甚至 git commit 数目等。</p>
<p>文件夹中使用的例子：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cloc<span class="w"> </span>dir/
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201810/15/121816g9dwu9h3y9x9x3t9.png"></p>
<p>子文件夹中使用的例子*：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cloc<span class="w"> </span>dir/cloc/tests
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201810/15/121817yxgod3zgtc3z2k7b.png"></p>
<p>计算一个压缩包中源代码的行数：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cloc<span class="w"> </span>archive.zip
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201810/15/121819o8irvua2ekti7z8n.png"></p>
<p>你还可以计算一个 git 项目，也可以像下面这样针对某次提交时的状态统计：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/AlDanial/cloc.git

$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>cloc

$<span class="w"> </span>cloc<span class="w"> </span>157d706
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201810/15/121820nobznv8qhh6zhvhl.png"></p>
<p>cloc 可以自动识别一些语言，使用下面的命令查看 cloc 支持的语言：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cloc<span class="w"> </span>--show-lang
</code></pre></div>

<p>更新信息请查阅 cloc 的使用帮助。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cloc<span class="w"> </span>--help
</code></pre></div>

<p>开始使用吧！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>