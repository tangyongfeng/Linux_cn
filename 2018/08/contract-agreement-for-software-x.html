<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Contract Agreement for Software X</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Kiko Fernandez-Reyes 这篇指南介绍如何使用 Pandoc 将文档转换为多种不同的格式。 Pandoc 是一个命令行工具，用于将文件从一种标记语言转换 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/08/contract-agreement-for-software-x.html" rel="bookmark"
           title="Permalink to Contract Agreement for Software X">Contract Agreement for Software X</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-08-28T00:00:00+02:00">
                Published: Tue 28 August 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Kiko Fernandez-Reyes</p>
<blockquote>
<p>这篇指南介绍如何使用 Pandoc 将文档转换为多种不同的格式。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201811/14/114139ezvobh2yenkhobzy.jpg"></p>
<p>Pandoc 是一个命令行工具，用于将文件从一种标记语言转换为另一种标记语言。标记语言使用标签来标记文档的各个部分。常用的标记语言包括 Markdown、ReStructuredText、HTML、LaTex、ePub 和 Microsoft Word DOCX。</p>
<p>简单来说，<a href="https://pandoc.org/">Pandoc</a> 允许你将一些文件从一种标记语言转换为另一种标记语言。典型的例子包括将 Markdown 文件转换为演示文稿、LaTeX，PDF 甚至是 ePub。</p>
<p>本文将解释如何使用 Pandoc 从单一标记语言（在本文中为 Markdown）生成多种格式的文档，引导你完成从 Pandoc 安装，到展示如何创建多种类型的文档，再到提供有关如何编写易于移植到其他格式的文档的提示。</p>
<p>文中还将解释使用元信息文件对文档内容和元信息（例如，作者姓名、使用的模板、书目样式等）进行分离的意义。</p>
<h3>Pandoc 安装和要求</h3>
<p>Pandoc 默认安装在大多数 Linux 发行版中。本教程使用 pandoc-2.2.3.2 和 pandoc-citeproc-0.14.3。如果不打算生成 PDF，那么这两个包就足够了。但是，我建议也安装 texlive，这样就可以选择生成 PDF 了。</p>
<p>通过以下命令在 Linux 上安装这些程序：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install pandoc pandoc-citeproc texlive
</code></pre></div>

<p>您可以在 Pandoc 的网站上找到其他平台的 <a href="http://pandoc.org/installing.html">安装说明</a>。</p>
<p>我强烈建议安装 <a href="https://hackage.haskell.org/package/pandoc-crossref">pandoc-crossref</a>，这是一个“用于对图表，方程式，表格和交叉引用进行编号的过滤器”。最简单的安装方式是下载 <a href="https://github.com/lierdakil/pandoc-crossref/releases/tag/v0.3.2.1">预构建的可执行文件</a>，但也可以通过以下命令从 Haskell 的软件包管理器 cabal 安装它：</p>
<div class="highlight"><pre><span></span><code>cabal update
cabal install pandoc-crossref
</code></pre></div>

<p>如果需要额外的 Haskell <a href="https://github.com/lierdakil/pandoc-crossref#installation">安装信息</a>，请参考 pandoc-crossref 的 GitHub 仓库。</p>
<h3>几个例子</h3>
<p>我将通过解释如何生成三种类型的文档来演示 Pandoc 的工作原理：</p>
<ul>
<li>由包含数学公式的 LaTeX 文件创建的网页</li>
<li>由 Markdown 文件生成的 Reveal.js 幻灯片</li>
<li>混合 Markdown 和 LaTeX 的合同文件</li>
</ul>
<h4>创建一个包含数学公式的网站</h4>
<p>Pandoc 的优势之一是以不同的输出文件格式显示数学公式。例如，我们可以从包含一些数学符号（用 LaTeX 编写）的 LaTeX 文档（名为 <code>math.tex</code>）生成一个网页。</p>
<p><code>math.tex</code> 文档如下所示：</p>
<div class="highlight"><pre><span></span><code><span class="c">% Pandoc math demos</span>

$<span class="n">a</span>^<span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span>^<span class="mi">2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">c</span>^<span class="mi">2</span>$

$<span class="n">v</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">v_0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">\</span><span class="n">frac</span><span class="p">{</span><span class="mi">1</span><span class="p">}{</span><span class="mi">2</span><span class="p">}</span><span class="n">at</span>^<span class="mi">2</span>$

$<span class="o">\</span><span class="nb">gamma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">\</span><span class="n">frac</span><span class="p">{</span><span class="mi">1</span><span class="p">}{</span><span class="o">\</span><span class="nb">sqrt</span><span class="p">{</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v</span>^<span class="mi">2</span><span class="o">/</span><span class="n">c</span>^<span class="mi">2</span><span class="p">}}</span>$

$<span class="o">\</span><span class="n">exists</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">\</span><span class="n">forall</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">(</span><span class="n">Rxy</span><span class="w"> </span><span class="o">\</span><span class="n">equiv</span><span class="w"> </span><span class="n">Ryx</span><span class="p">)</span>$

$<span class="n">p</span><span class="w"> </span><span class="o">\</span><span class="n">wedge</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">\</span><span class="n">models</span><span class="w"> </span><span class="n">p</span>$

$<span class="o">\</span><span class="n">Box</span><span class="o">\</span><span class="n">diamond</span><span class="w"> </span><span class="n">p</span><span class="o">\</span><span class="n">equiv</span><span class="o">\</span><span class="n">diamond</span><span class="w"> </span><span class="n">p</span>$

$<span class="o">\</span><span class="n">int_</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>^<span class="p">{</span><span class="mi">1</span><span class="p">}</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">dx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">\</span><span class="n">left</span><span class="p">[</span><span class="w"> </span><span class="o">\</span><span class="n">frac</span><span class="p">{</span><span class="mi">1</span><span class="p">}{</span><span class="mi">2</span><span class="p">}</span><span class="n">x</span>^<span class="mi">2</span><span class="w"> </span><span class="o">\</span><span class="n">right</span><span class="p">]</span><span class="n">_</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>^<span class="p">{</span><span class="mi">1</span><span class="p">}</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">\</span><span class="n">frac</span><span class="p">{</span><span class="mi">1</span><span class="p">}{</span><span class="mi">2</span><span class="p">}</span>$

$<span class="n">e</span>^<span class="n">x</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">\</span><span class="n">sum_</span><span class="p">{</span><span class="n">n</span><span class="p">=</span><span class="mi">0</span><span class="p">}</span>^<span class="o">\</span><span class="n">infty</span><span class="w"> </span><span class="o">\</span><span class="n">frac</span><span class="p">{</span><span class="n">x</span>^<span class="n">n</span><span class="p">}{</span><span class="n">n</span>!<span class="p">}</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">\</span><span class="n">lim_</span><span class="p">{</span><span class="n">n</span><span class="o">\</span><span class="n">rightarrow</span><span class="o">\</span><span class="n">infty</span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>^<span class="n">n</span>$
</code></pre></div>

<p>通过输入以下命令将 LaTeX 文档转换为名为 <code>mathMathML.html</code> 的网站：</p>
<div class="highlight"><pre><span></span><code>pandoc math.tex -s --mathml  -o mathMathML.html
</code></pre></div>

<p>参数 <code>-s</code> 告诉 Pandoc 生成一个独立的网页（而不是网页片段，因此它将包括 HTML 中的 head 和 body 标签），<code>-mathml</code> 参数强制 Pandoc 将 LaTeX 中的数学公式转换成 MathML，从而可以由现代浏览器进行渲染。</p>
<p><img alt="" src="/data/attachment/album/201811/13/115210az5oevcc7nnj7rmr.png"></p>
<p>看一下 <a href="http://pandoc.org/demo/mathMathML.html">网页效果</a> 和 <a href="https://github.com/kikofernandez/pandoc-examples/tree/master/math">代码</a>，代码仓库中的 Makefile 使得运行更加简单。</p>
<h4>制作一个 Reveal.js 幻灯片</h4>
<p>使用 Pandoc 从 Markdown 文件生成简单的演示文稿很容易。幻灯片包含顶级幻灯片和下面的嵌套幻灯片。可以通过键盘控制演示文稿，从一个顶级幻灯片跳转到下一个顶级幻灯片，或者显示顶级幻灯片下面的嵌套幻灯片。 这种结构在基于 HTML 的演示文稿框架中很常见。</p>
<p>创建一个名为 <code>SLIDES</code> 的幻灯片文档（参见 <a href="https://github.com/kikofernandez/pandoc-examples/tree/master/slides">代码仓库</a>）。首先，在 <code>％</code> 后面添加幻灯片的元信息（例如，标题、作者和日期）：</p>
<div class="highlight"><pre><span></span><code><span class="c">% Case Study</span>
<span class="c">% Kiko Fernandez Reyes</span>
<span class="c">% Sept 27, 2017</span>
</code></pre></div>

<p>这些元信息同时也创建了第一张幻灯片。要添加更多幻灯片，使用 Markdown 的一级标题（在下面例子中的第5行，参考 <a href="https://daringfireball.net/projects/markdown/syntax#header">Markdown 的一级标题</a> ）生成顶级幻灯片。</p>
<p>例如，可以通过以下命令创建一个标题为 “Case Study”、顶级幻灯片名为 “Wine Management System” 的演示文稿：</p>
<div class="highlight"><pre><span></span><code><span class="c">% Case Study</span>
<span class="c">% Kiko Fernandez Reyes</span>
<span class="c">% Sept 27, 2017</span>

#<span class="w"> </span><span class="n">Wine</span><span class="w"> </span><span class="n">Management</span><span class="w"> </span><span class="n">System</span>
</code></pre></div>

<p>使用 Markdown 的二级标题将内容（比如包含一个新管理系统的说明和实现的幻灯片）放入刚刚创建的顶级幻灯片。下面添加另外两张幻灯片（在下面例子中的第 7 行和 14 行 ，参考 <a href="https://daringfireball.net/projects/markdown/syntax#header">Markdown 的二级标题</a> ）。</p>
<ul>
<li>第一个二级幻灯片的标题为 “Idea”，并显示瑞士国旗的图像</li>
<li>第二个二级幻灯片的标题为 “Implementation”</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">% Case Study</span>
<span class="c">% Kiko Fernandez Reyes</span>
<span class="c">% Sept 27, 2017</span>

#<span class="w"> </span><span class="n">Wine</span><span class="w"> </span><span class="n">Management</span><span class="w"> </span><span class="n">System</span>

##<span class="w"> </span><span class="o">&lt;</span><span class="n">img</span><span class="w"> </span><span class="n">src</span><span class="p">=</span><span class="s">&quot;img/SwissFlag.png&quot;</span><span class="w"> </span><span class="n">style</span><span class="p">=</span><span class="s">&quot;vertical-align:middle&quot;</span><span class="o">/&gt;</span><span class="w"> </span><span class="n">Idea</span>

##<span class="w"> </span><span class="n">Implementation</span>
</code></pre></div>

<p>我们现在有一个顶级幻灯片（<code>＃Wine Management System</code>），其中包含两张幻灯片（<code>## Idea</code> 和 <code>## Implementation</code>）。</p>
<p>通过创建一个由符号 <code>&gt;</code> 开头的 Markdown 列表，在这两张幻灯片中添加一些内容。在上面代码的基础上，在第一张幻灯片中添加两个项目（第 9-10 行），第二张幻灯片中添加五个项目（第 16-20 行）：</p>
<div class="highlight"><pre><span></span><code><span class="o">%</span><span class="w"> </span><span class="n">Case</span><span class="w"> </span><span class="n">Study</span>
<span class="o">%</span><span class="w"> </span><span class="n">Kiko</span><span class="w"> </span><span class="n">Fernandez</span><span class="w"> </span><span class="n">Reyes</span>
<span class="o">%</span><span class="w"> </span><span class="n">Sept</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="mi">2017</span>

<span class="c1"># Wine Management System</span>

<span class="c1">## &lt;img src=&quot;img/SwissFlag.png&quot; style=&quot;vertical-align:middle&quot;/&gt; Idea</span>

<span class="o">&gt;-</span><span class="w"> </span><span class="n">Swiss</span><span class="w"> </span><span class="n">love</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="o">**</span><span class="n">wine</span><span class="o">**</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">cheese</span>
<span class="o">&gt;-</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="n">simple</span><span class="o">*</span><span class="w"> </span><span class="n">wine</span><span class="w"> </span><span class="n">tracker</span><span class="w"> </span><span class="n">system</span>

<span class="o">!</span><span class="p">[](</span><span class="n">img</span><span class="o">/</span><span class="n">matterhorn</span><span class="o">.</span><span class="n">jpg</span><span class="p">)</span>

<span class="c1">## Implementation</span>

<span class="o">&gt;-</span><span class="w"> </span><span class="n">Bottles</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">RFID</span><span class="w"> </span><span class="n">tag</span>
<span class="o">&gt;-</span><span class="w"> </span><span class="n">RFID</span><span class="w"> </span><span class="n">reader</span><span class="w"> </span><span class="p">(</span><span class="n">emits</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="k">signal</span><span class="p">)</span>
<span class="o">&gt;-</span><span class="w"> </span><span class="o">**</span><span class="n">Raspberry</span><span class="w"> </span><span class="n">Pi</span><span class="o">**</span>
<span class="o">&gt;-</span><span class="w"> </span><span class="o">**</span><span class="n">Server</span><span class="w"> </span><span class="p">(</span><span class="n">online</span><span class="w"> </span><span class="n">shop</span><span class="p">)</span><span class="o">**</span>
<span class="o">&gt;-</span><span class="w"> </span><span class="n">Mobile</span><span class="w"> </span><span class="n">app</span>
</code></pre></div>

<p>上面的代码添加了马特洪峰的图像，也可以使用纯 Markdown 语法或添加 HTML 标签来改进幻灯片。</p>
<p>要生成幻灯片，Pandoc 需要引用 Reveal.js 库，因此它必须与 <code>SLIDES</code> 文件位于同一文件夹中。生成幻灯片的命令如下所示：</p>
<div class="highlight"><pre><span></span><code>pandoc -t revealjs -s --self-contained SLIDES \
-V theme=white -V slideNumber=true -o index.html
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201811/13/115212vcexdsaxsk0fe4ze.png"></p>
<p>上面的 Pandoc 命令使用了以下参数：</p>
<ul>
<li><code>-t revealjs</code> 表示将输出一个 revealjs 演示文稿</li>
<li><code>-s</code> 告诉 Pandoc 生成一个独立的文档</li>
<li><code>--self-contained</code> 生成没有外部依赖关系的 HTML 文件</li>
<li><code>-V</code> 设置以下变量：<ul>
<li><code>theme=white</code> 将幻灯片的主题设为白色</li>
<li><code>slideNumber=true</code> 显示幻灯片编号</li>
</ul>
</li>
<li><code>-o index.html</code> 在名为 <code>index.html</code> 的文件中生成幻灯片</li>
</ul>
<p>为了简化操作并避免键入如此长的命令，创建以下 Makefile：</p>
<div class="highlight"><pre><span></span><code><span class="n">all</span><span class="o">:</span><span class="w"> </span><span class="n">generate</span>

<span class="n">generate</span><span class="o">:</span>
<span class="w">    </span><span class="n">pandoc</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">revealjs</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="o">--</span><span class="n">self</span><span class="o">-</span><span class="n">contained</span><span class="w"> </span><span class="n">SLIDES</span><span class="w"> </span><span class="o">\</span>
<span class="w">    </span><span class="o">-</span><span class="n">V</span><span class="w"> </span><span class="n">theme</span><span class="o">=</span><span class="n">white</span><span class="w"> </span><span class="o">-</span><span class="n">V</span><span class="w"> </span><span class="n">slideNumber</span><span class="o">=</span><span class="kc">true</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="na">html</span>

<span class="n">clean</span><span class="o">:</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="na">html</span>
<span class="w">    </span><span class="n">rm</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="na">html</span>

<span class="o">.</span><span class="na">PHONY</span><span class="o">:</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">clean</span><span class="w"> </span><span class="n">generate</span>
</code></pre></div>

<p>可以在 <a href="https://github.com/kikofernandez/pandoc-examples/tree/master/slides">这个仓库</a> 中找到所有代码。</p>
<h4>制作一份多种格式的合同</h4>
<p>假设你正在准备一份文件，并且（这样的情况现在很常见）有些人想用 Microsoft Word 格式，其他人使用自由软件，想要 ODT 格式，而另外一些人则需要 PDF。你不必使用 OpenOffice 或 LibreOffice 来生成 DOCX 或 PDF 格式的文件，可以用 Markdown 创建一份文档（如果需要高级格式，可以使用一些 LaTeX 语法），并生成任何这些文件类型。</p>
<p>和以前一样，首先声明文档的元信息（标题、作者和日期）：</p>
<div class="highlight"><pre><span></span><code><span class="c">% Contract Agreement for Software X</span>
<span class="c">% Kiko Fernandez-Reyes</span>
<span class="c">% August 28th, 2018</span>
</code></pre></div>

<p>然后在 Markdown 中编写文档（如果需要高级格式，则添加 LaTeX）。例如，创建一个固定间隔的表格（在 LaTeX 中用 <code>\hspace{3cm}</code> 声明）以及客户端和承包商应填写的行（在 LaTeX 中用 <code>\hrulefill</code> 声明）。之后，添加一个用 Markdown 编写的表格。</p>
<p>创建的文档如下所示：</p>
<p><img alt="" src="/data/attachment/album/201811/13/115214jcfyw02rowc0iocw.png"></p>
<p>创建此文档的代码如下：</p>
<div class="highlight"><pre><span></span><code><span class="c">% Contract Agreement for Software X</span>
<span class="c">% Kiko Fernandez</span><span class="nb">-</span><span class="c">Reyes</span>
<span class="c">% August 28th</span><span class="nt">,</span><span class="c"> 2018</span>

<span class="nt">...</span>

<span class="c">### Work Order</span>

<span class="c">\begin{table}</span><span class="k">[</span><span class="c">h</span><span class="k">]</span>
<span class="c">\begin{tabular}{ccc}</span>
<span class="c">The Contractor &amp; \hspace{3cm} &amp; The Customer \\</span>
<span class="c">&amp; &amp; \\</span>
<span class="c">&amp; &amp; \\</span>
<span class="c">\hrulefill &amp; \hspace{3cm} &amp; \hrulefill \\</span>
<span class="c">%</span>
<span class="c">Name &amp; \hspace{3cm} &amp; Name \\</span>
<span class="c">&amp; &amp; \\</span>
<span class="c">&amp; &amp; \\</span>
<span class="c">\hrulefill &amp; \hspace{3cm} &amp; \hrulefill \\</span>
<span class="nt">...</span>
<span class="c">\end{tabular}</span>
<span class="c">\end{table}</span>

<span class="c">\vspace{1cm}</span>

<span class="nb">+--------------------------------------------</span><span class="c">|</span><span class="nb">----------</span><span class="c">|</span><span class="nb">-------------+</span>
<span class="c">| Type of Service                            | Cost     |     Total   |</span>
<span class="nb">+</span><span class="c">:===========================================</span><span class="nb">+</span><span class="c">=========:</span><span class="nb">+</span><span class="c">:===========:</span><span class="nb">+</span>
<span class="c">| Game Engine                                | 70</span><span class="nt">.</span><span class="c">0     | 70</span><span class="nt">.</span><span class="c">0        |</span>
<span class="c">|                                            |          |             |</span>
<span class="nb">+--------------------------------------------</span><span class="c">|</span><span class="nb">----------</span><span class="c">|</span><span class="nb">-------------+</span>
<span class="c">|                                            |          |             |</span>
<span class="nb">+--------------------------------------------</span><span class="c">|</span><span class="nb">----------</span><span class="c">|</span><span class="nb">-------------+</span>
<span class="c">| Extra: Comply with defined API functions   | 10</span><span class="nt">.</span><span class="c">0     | 10</span><span class="nt">.</span><span class="c">0        |</span>
<span class="c">|        and expected returned format        |          |             |</span>
<span class="nb">+--------------------------------------------</span><span class="c">|</span><span class="nb">----------</span><span class="c">|</span><span class="nb">-------------+</span>
<span class="c">|                                            |          |             |</span>
<span class="nb">+--------------------------------------------</span><span class="c">|</span><span class="nb">----------</span><span class="c">|</span><span class="nb">-------------+</span>
<span class="c">| **Total Cost**                             |          | **80</span><span class="nt">.</span><span class="c">0**    |</span>
<span class="nb">+--------------------------------------------</span><span class="c">|</span><span class="nb">----------</span><span class="c">|</span><span class="nb">-------------+</span>
</code></pre></div>

<p>要生成此文档所需的三种不同输出格式，编写如下的 Makefile：</p>
<div class="highlight"><pre><span></span><code><span class="nf">DOCS</span><span class="err">=</span><span class="no">contract-agreement.md</span>

<span class="nl">all:</span><span class="w"> </span><span class="nf">$</span><span class="p">(</span><span class="no">DOCS</span><span class="p">)</span>
<span class="w">    </span><span class="nf">pandoc</span><span class="w"> </span><span class="p">-</span><span class="no">s</span><span class="w"> </span><span class="no">$</span><span class="p">(</span><span class="no">DOCS</span><span class="p">)</span><span class="w"> </span><span class="p">-</span><span class="no">o</span><span class="w"> </span><span class="no">$</span><span class="p">(</span><span class="no">DOCS</span><span class="p">:</span><span class="no">md</span><span class="err">=</span><span class="no">pdf</span><span class="p">)</span>
<span class="w">    </span><span class="nf">pandoc</span><span class="w"> </span><span class="p">-</span><span class="no">s</span><span class="w"> </span><span class="no">$</span><span class="p">(</span><span class="no">DOCS</span><span class="p">)</span><span class="w"> </span><span class="p">-</span><span class="no">o</span><span class="w"> </span><span class="no">$</span><span class="p">(</span><span class="no">DOCS</span><span class="p">:</span><span class="no">md</span><span class="err">=</span><span class="no">docx</span><span class="p">)</span>
<span class="w">    </span><span class="nf">pandoc</span><span class="w"> </span><span class="p">-</span><span class="no">s</span><span class="w"> </span><span class="no">$</span><span class="p">(</span><span class="no">DOCS</span><span class="p">)</span><span class="w"> </span><span class="p">-</span><span class="no">o</span><span class="w"> </span><span class="no">$</span><span class="p">(</span><span class="no">DOCS</span><span class="p">:</span><span class="no">md</span><span class="err">=</span><span class="no">odt</span><span class="p">)</span>

<span class="nl">clean:</span>
<span class="w">    </span><span class="nf">rm</span><span class="w"> </span><span class="p">*.</span><span class="no">pdf</span><span class="w"> </span><span class="p">*.</span><span class="no">docx</span><span class="w"> </span><span class="p">*.</span><span class="no">odt</span>

<span class="nl">.PHONY:</span><span class="w"> </span><span class="nf">all</span><span class="w"> </span><span class="no">clean</span>
</code></pre></div>

<p>4 到 7 行是生成三种不同输出格式的具体命令：</p>
<p>如果有多个 Markdown 文件并想将它们合并到一个文档中，需要按照希望它们出现的顺序编写命令。例如，在撰写本文时，我创建了三个文档：一个介绍文档、三个示例和一些高级用法。以下命令告诉 Pandoc 按指定的顺序将这些文件合并在一起，并生成一个名为 document.pdf 的 PDF 文件。</p>
<div class="highlight"><pre><span></span><code>pandoc -s introduction.md examples.md advanced-uses.md -o document.pdf
</code></pre></div>

<h3>模板和元信息</h3>
<p>编写复杂的文档并非易事，你需要遵循一系列独立于内容的规则，例如使用特定的模板、编写摘要、嵌入特定字体，甚至可能要声明关键字。所有这些都与内容无关：简单地说，它就是元信息。</p>
<p>Pandoc 使用模板生成不同的输出格式。例如，有一个 LaTeX 的模板，还有一个 ePub 的模板，等等。这些模板的元信息中有未赋值的变量。使用以下命令找出 Pandoc 模板中可用的元信息：</p>
<div class="highlight"><pre><span></span><code>pandoc -D FORMAT
</code></pre></div>

<p>例如，LaTex 的模版是：</p>
<div class="highlight"><pre><span></span><code>pandoc -D latex
</code></pre></div>

<p>按照以下格式输出：</p>
<div class="highlight"><pre><span></span><code><span class="p">$</span><span class="k">if</span><span class="p">(</span><span class="nv">title</span><span class="p">)$</span>
\<span class="nv">title</span><span class="p">{$</span><span class="nv">title</span><span class="p">$$</span><span class="k">if</span><span class="p">(</span><span class="nv">thanks</span><span class="p">)$</span>\<span class="nv">thanks</span><span class="p">{$</span><span class="nv">thanks</span><span class="p">$}$</span><span class="nv">endif</span><span class="p">$}</span>
<span class="p">$</span><span class="nv">endif</span><span class="p">$</span>
<span class="p">$</span><span class="k">if</span><span class="p">(</span><span class="nv">subtitle</span><span class="p">)$</span>
\<span class="nv">providecommand</span><span class="p">{</span>\<span class="nv">subtitle</span><span class="p">}[</span><span class="mi">1</span><span class="p">]{}</span>
\<span class="nv">subtitle</span><span class="p">{$</span><span class="nv">subtitle</span><span class="p">$}</span>
<span class="p">$</span><span class="nv">endif</span><span class="p">$</span>
<span class="p">$</span><span class="k">if</span><span class="p">(</span><span class="nv">author</span><span class="p">)$</span>
\<span class="nv">author</span><span class="p">{$</span><span class="k">for</span><span class="p">(</span><span class="nv">author</span><span class="p">)$$</span><span class="nv">author</span><span class="p">$$</span><span class="nv">sep</span><span class="p">$</span><span class="w"> </span>\<span class="ow">and</span><span class="w"> </span><span class="p">$</span><span class="nv">endfor</span><span class="p">$}</span>
<span class="p">$</span><span class="nv">endif</span><span class="p">$</span>
<span class="p">$</span><span class="k">if</span><span class="p">(</span><span class="nv">institute</span><span class="p">)$</span>
\<span class="nv">providecommand</span><span class="p">{</span>\<span class="nv">institute</span><span class="p">}[</span><span class="mi">1</span><span class="p">]{}</span>
\<span class="nv">institute</span><span class="p">{$</span><span class="k">for</span><span class="p">(</span><span class="nv">institute</span><span class="p">)$$</span><span class="nv">institute</span><span class="p">$$</span><span class="nv">sep</span><span class="p">$</span><span class="w"> </span>\<span class="ow">and</span><span class="w"> </span><span class="p">$</span><span class="nv">endfor</span><span class="p">$}</span>
<span class="p">$</span><span class="nv">endif</span><span class="p">$</span>
\<span class="nv">date</span><span class="p">{$</span><span class="nv">date</span><span class="p">$}</span>
<span class="p">$</span><span class="k">if</span><span class="p">(</span><span class="nv">beamer</span><span class="p">)$</span>
<span class="p">$</span><span class="k">if</span><span class="p">(</span><span class="nv">titlegraphic</span><span class="p">)$</span>
\<span class="nv">titlegraphic</span><span class="p">{</span>\<span class="nv">includegraphics</span><span class="p">{$</span><span class="nv">titlegraphic</span><span class="p">$}}</span>
<span class="p">$</span><span class="nv">endif</span><span class="p">$</span>
<span class="p">$</span><span class="k">if</span><span class="p">(</span><span class="nv">logo</span><span class="p">)$</span>
\<span class="nv">logo</span><span class="p">{</span>\<span class="nv">includegraphics</span><span class="p">{$</span><span class="nv">logo</span><span class="p">$}}</span>
<span class="p">$</span><span class="nv">endif</span><span class="p">$</span>
<span class="p">$</span><span class="nv">endif</span><span class="p">$</span>

\<span class="nv">begin</span><span class="p">{</span><span class="k">do</span><span class="nv">cument</span><span class="p">}</span>
</code></pre></div>

<p>如你所见，输出的内容中有标题、致谢、作者、副标题和机构模板变量（还有许多其他可用的变量）。可以使用 YAML 元区块轻松设置这些内容。 在下面例子的第 1-5 行中，我们声明了一个 YAML 元区块并设置了一些变量（使用上面合同协议的例子）：</p>
<div class="highlight"><pre><span></span><code><span class="ss">(</span><span class="k">continue</span><span class="w"> </span><span class="nv">writing</span><span class="w"> </span><span class="nv">document</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">example</span><span class="ss">)</span>
</code></pre></div>

<p>这样做非常奏效，相当于以前的代码：</p>
<div class="highlight"><pre><span></span><code><span class="c">% Contract Agreement for Software X</span>
<span class="c">% Kiko Fernandez-Reyes</span>
<span class="c">% August 28th, 2018</span>
</code></pre></div>

<p>然而，这样做将元信息与内容联系起来，也即 Pandoc 将始终使用此信息以新格式输出文件。如果你将要生成多种文件格式，最好要小心一点。例如，如果你需要以 ePub 和 HTML 的格式生成合同，并且 ePub 和 HTML 需要不同的样式规则，该怎么办？</p>
<p>考虑一下这些情况：</p>
<ul>
<li>如果你只是尝试嵌入 YAML 变量 <code>css:style-epub.css</code>，那么将从 HTML 版本中移除该变量。这不起作用。</li>
<li>复制文档显然也不是一个好的解决方案，因为一个版本的更改不会与另一个版本同步。</li>
<li>你也可以像下面这样将变量添加到 Pandoc 命令中：</li>
</ul>
<div class="highlight"><pre><span></span><code>pandoc -s -V css=style-epub.css document.md document.epub
pandoc -s -V css=style-html.css document.md document.html
</code></pre></div>

<p>我的观点是，这样做很容易从命令行忽略这些变量，特别是当你需要设置数十个变量时（这可能出现在编写复杂文档的情况中）。现在，如果将它们放在同一文件中（<code>meta.yaml</code> 文件），则只需更新或创建新的元信息文件即可生成所需的输出格式。然后你会编写这样的命令：</p>
<div class="highlight"><pre><span></span><code>pandoc -s meta-pub.yaml document.md document.epub
pandoc -s meta-html.yaml document.md document.html
</code></pre></div>

<p>这是一个更简洁的版本，你可以从单个文件更新所有元信息，而无需更新文档的内容。</p>
<h3>结语</h3>
<p>通过以上的基本示例，我展示了 Pandoc 在将 Markdown 文档转换为其他格式方面是多么出色。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>