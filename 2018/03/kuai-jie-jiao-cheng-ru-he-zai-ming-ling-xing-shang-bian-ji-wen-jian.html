<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>快捷教程：如何在命令行上编辑文件</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Falko Timme, Himanshu Arora 此次教程中，我们将向您展示三种命令行编辑文件的方式。本文一共覆盖了三种命令行编辑器，vi（或 vim）、nano 和 emacs …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/03/kuai-jie-jiao-cheng-ru-he-zai-ming-ling-xing-shang-bian-ji-wen-jian.html" rel="bookmark"
           title="Permalink to 快捷教程：如何在命令行上编辑文件">快捷教程：如何在命令行上编辑文件</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-29T12:59:54+02:00">
                Published: Thu 29 March 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Falko Timme, Himanshu Arora</p>
<p><img alt="" src="/data/attachment/album/201803/29/125951j1hzg8sd36hosws4.jpg"></p>
<p>此次教程中，我们将向您展示三种命令行编辑文件的方式。本文一共覆盖了三种命令行编辑器，vi（或 vim）、nano 和 emacs。</p>
<h3>在命令行上使用 Vi 或 Vim 编辑文件</h3>
<p>您可以使用 <code>vi</code> 编辑文件。运行如下命令，打开文件：</p>
<div class="highlight"><pre><span></span><code>vi /path/to/file
</code></pre></div>

<p>现在，您可以看见文件中的内容了（如果文件存在。请注意，如果此文件不存在，该命令会创建文件）。</p>
<p><code>vi</code> 最重要的命令莫过于此：</p>
<p>键入 <code>i</code> 进入<ruby> 编辑 <rt>  Insert </rt></ruby>模式。如此，您可以编辑文本。</p>
<p>退出编辑模式请键入 <code>ESC</code>。</p>
<p>正处于光标之下的字符，使用 <code>x</code> 键删除（您千万不要在编辑模式这样做，如果您这样做了，将不会删除光标下的字符，而是会在光标下插入 <code>x</code> 字符）。因此，当您仅仅使用 <code>vi</code> 打开文本（LCTT 译注：此时默认进入指令模式），此时您可以使用 <code>x</code> 键立即删除字符。在编辑模式下，您需要键入 <code>ESC</code> 退出编辑模式。</p>
<p>如果您做了修改，想要保存文件，请键入 <code>:x</code>（同样，您不能在编辑模式执行此操作。请按 <code>ESC</code> 退出编辑模式，完成此操作）。</p>
<p>如果您并没有做修改，键入 <code>:q</code> 退出文本（您同样不能在编辑模式执行此操作）。</p>
<p>如果您做了修改，但却想不保存文本而之际退出，请键入 <code>:q!</code> （同样不能在编辑模式执行此作）。</p>
<p>请注意在上述所有操作中，您都可以使用方向键操控光标在文本中的位置。</p>
<p>以上所有都是 <code>vi</code> 编辑器的内容。请注意，<code>vim</code> 编辑器或多或少也会支持这些操作，如果您想深层次了解 <code>vim</code>，请看 <a href="https://www.howtoforge.com/vim-basics">这里</a>。</p>
<h3>使用 Nano 命令行编辑器编辑文件</h3>
<p>接下来是 Nano 编辑器。您可以执行 <code>nano</code> 命令调用它：</p>
<div class="highlight"><pre><span></span><code>nano
</code></pre></div>

<p>这里是 <code>nano</code> 的用户界面：</p>
<p><img alt="Nano 命令行编辑器" src="/data/attachment/album/201803/29/125956w2cosbvuahxlvdvb.png"></p>
<p>您同样可以使用它启动文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">nano</span><span class="w"> </span><span class="o">[</span><span class="n">filename</span><span class="o">]</span>
</code></pre></div>

<p>例如：</p>
<div class="highlight"><pre><span></span><code>nano test.txt
</code></pre></div>

<p><img alt="在 nano 中打开文件" src="/data/attachment/album/201803/29/125957jux9prajr4fiaffr.png"></p>
<p>如您所见的用户界面，大致被分成四个部分。编辑器顶部显示编辑器版本、正在编辑的文件和编辑状态。然后是实际编辑区域，在这里，您能看见文件的内容。编辑器下方高亮区展示着重要的信息，最后两行显示能执行基础任务地快捷键，切实地帮助初学者。</p>
<p>这里是您前期应当了解的快捷键快表。</p>
<p>使用方向键浏览文本，退格键删除文本，<code>Ctrl+O</code> 保存文件修改。当您尝试保存时，<code>nano</code> 会征询您的确认（请参阅截图中主编辑器下方区域）：</p>
<p><img alt="在 nano 中保存文件" src="/data/attachment/album/201803/29/125959galu5oo3jvuf24lu.png"></p>
<p>注意，在这个阶段，您有一个选项，可以保存不同的系统格式。键入 <code>Alt+D</code> 选择 DOS 格式，<code>Atl+M</code> 选择 Mac 格式。</p>
<p><img alt="以 DOS 格式保存文件" src="/data/attachment/album/201803/29/130000zaowbhv55ocb5c5a.png"></p>
<p>敲回车保存更改。</p>
<p><img alt="文件已经被保存" src="/data/attachment/album/201803/29/130001nzggxzbcbnwx0nbx.png"></p>
<p>继续，文本剪切使用 <code>Ctrl+K</code>，文本复制使用 <code>Ctrl+U</code>。这些快捷键同样可以用来粘贴剪切单个单词，但您需要先选择好单词，通常，您可以通过键入 <code>Alt+A</code>（光标在第一个单词下） 然后使用方向键选择完整的单词。</p>
<p>现在来进行搜索操作。使用 <code>Ctrl+W</code> 可以执行一个简单的搜索，同时搜索和替换您可以使用 <code>Ctrl+\\</code>。</p>
<p><img alt="使用 nano 在文件中搜索" src="/data/attachment/album/201803/29/130002i6fa33k25u9um906.png"></p>
<p>这些就是 <code>nano</code> 的一些基础功，它能给您带来一些不错的开始，如果您是初次使用 <code>nano</code> 编辑器。更多内容，请阅读我们的完整内容，点击 <a href="https://www.howtoforge.com/linux-nano-command/">这里</a>。</p>
<h3>使用 Emacs 命令行编辑器编辑文件</h3>
<p>接下来登场的是 Emacs。如果系统未安装此软件，您可以使用下面的命令在您的系统中安装它：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install emacs
</code></pre></div>

<p>和 <code>nano</code> 一致，您可以使用下面的方式在 <code>emacs</code> 中直接打开文件：</p>
<div class="highlight"><pre><span></span><code><span class="n">emacs</span><span class="w"> </span><span class="o">-</span><span class="n">nw</span><span class="w"> </span><span class="o">[</span><span class="n">filename</span><span class="o">]</span>
</code></pre></div>

<p>注意：<code>-nw</code> 选项确保 <code>emacs</code> 在本窗口启动，而不是打开一个新窗口，默认情况下，它会打开一个新窗口。</p>
<p>一个实例：</p>
<div class="highlight"><pre><span></span><code>emacs -nw test.txt
</code></pre></div>

<p>下面是编辑器的用户界面：</p>
<p><img alt="在 emacs 中打开文件" src="/data/attachment/album/201803/29/130003jm6mri6xvjmsq666.png"></p>
<p>和 <code>nano</code> 一样，<code>emacs</code> 的界面同样被分割成了几个部分。第一部分是最上方的菜单区域，和您在图形界面下的应用程序一致。接下来是显示文本（您打开的文件文本）内容的主编辑区域。</p>
<p>编辑区域下方坐落着另一个高亮菜单条，显示了文件名，编辑模式（如截图内的 ‘Text’）和状态（<code>**</code> 为已修改，<code>-</code> 为未修改，<code>%%</code> 为只读）。最后是提供输入指令的区域，同时也能查看输出。</p>
<p>现在开始基础操作，当您做了修改、想要保存时，在 <code>Ctrl+x</code> 之后键入 <code>Ctrl+s</code>。最后，在面板最后一行会向您显示一些信息：‘Wrote ........’。这里有一个例子：</p>
<p><img alt="emascs 中保存文件" src="/data/attachment/album/201803/29/130005mvsvzd5x5fxa3srz.png"></p>
<p>现在，如果您放弃修改并且退出时，在 <code>Ctrl+x</code> 之后键入<code>Ctrl+c</code>。编辑器将会立即询问，如下图：</p>
<p><img alt="emacs 中抛弃修改" src="/data/attachment/album/201803/29/130007tmlwz22qq2ywx38p.png"></p>
<p>输入 <code>n</code> 之后键入 <code>yes</code>，之后编辑器将会不保存而直接退出。</p>
<p>请注意，Emacs 中 <code>C</code> 代表 <code>Ctrl</code>，<code>M</code> 代表 <code>Alt</code>。比如，当你看见 <code>C-x</code>，这意味着按下 <code>Ctrl+x</code>。</p>
<p>至于其他基本编辑器操作，以删除为例，大多数人都会，使用 <code>Backspace</code>/<code>Delete</code> 键。然而，这里的一些删除快捷键能够提高用户体验。比如，使用 <code>Ctrl+k</code> 删除一整行，<code>Alt+d</code> 删除一个单词，<code>Alt+k</code> 删除一个整句。</p>
<p>在键入 <code>Ctrl+k</code> 之后键入 <code>u</code> 将撤销操作，输入 <code>Ctrl+g</code> 之后输入 <code>Ctrl+_</code> 恢复撤销的操作。使用 <code>Ctrl+s</code> 向前搜索，<code>Ctrl+r</code> 反向搜索。</p>
<p><img alt="使用 emacs 在文件中搜索" src="/data/attachment/album/201803/29/130008kq9mmiiroh3i5vo8.png"></p>
<p>继续，使用 <code>Alt+Shift+%</code> 执行替换操作。您将被询问要替换单词。回复并回车。之后编辑器将会询问您是否替换。例如，下方截图展示了 <code>emacs</code> 询问使用者关于单词 ‘This’ 的替换操作。</p>
<p><img alt="使用 emacs 替换单词" src="/data/attachment/album/201803/29/130009igxu9g994xmn1d12.png"></p>
<p>输入替换文本并回车。每一个替换操作 <code>emacs</code> 都会等待询问，下面是首次询问：</p>
<p><img alt="确定文本替换" src="/data/attachment/album/201803/29/130010fozfz11kcoktt8fq.png"></p>
<p>键入 <code>y</code> 之后，单词将会被替换。</p>
<p><img alt="键入 y 确定操作" src="/data/attachment/album/201803/29/130011i3u7p87l45llzcvm.png"></p>
<p>这些就是几乎所有的基础操作，您在开始使用 <code>emacs</code> 时需要了解掌握的。对了，我们忘记讨论如何访问顶部菜单，其实这些可以通过使用 <code>F10</code> 访问它们。</p>
<p><img alt="基础编辑器操作" src="/data/attachment/album/201803/29/130012gqfd9mxmnddsgd9u.png"></p>
<p>按 <code>Esc</code> 键三次，退出这些菜单。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>