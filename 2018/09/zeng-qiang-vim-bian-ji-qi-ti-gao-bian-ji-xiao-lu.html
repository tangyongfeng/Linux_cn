<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>增强 Vim 编辑器，提高编辑效率</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Girish Managoli 这 20 多个有用的命令可以增强你使用 Vim 的体验。 编者注：标题和文章最初称呼的 vi 编辑器，现已更新为编辑器的正 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/09/zeng-qiang-vim-bian-ji-qi-ti-gao-bian-ji-xiao-lu.html" rel="bookmark"
           title="Permalink to 增强 Vim 编辑器，提高编辑效率">增强 Vim 编辑器，提高编辑效率</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-09-22T14:08:00+02:00">
                Published: Sat 22 September 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Girish Managoli</p>
<blockquote>
<p>这 20 多个有用的命令可以增强你使用 Vim 的体验。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/201809/22/140748n5hmv7hvt95ch0vh.png"></p>
<p><em>编者注：标题和文章最初称呼的 <code>vi</code> 编辑器，现已更新为编辑器的正确名称：<code>Vim</code>。</em></p>
<p><code>Vim</code> 作为一款功能强大、选项丰富的编辑器，为许多用户所热爱。本文介绍了一些在 <code>Vim</code> 中默认未启用但实际非常有用的选项。虽然可以在每个 <code>Vim</code> 会话中单独启用，但为了创建一个开箱即用的高效编辑环境，还是建议在 <code>Vim</code> 的配置文件中配置这些命令。</p>
<h3>开始前的准备</h3>
<p>这里所说的选项或配置均位于用户主目录中的 <code>Vim</code> 启动配置文件 <code>.vimrc</code>。 按照下面的说明在 <code>.vimrc</code> 中设置选项：</p>
<p>（注意：<code>vimrc</code> 文件也用于 <code>Linux</code> 中的全局配置，如 <code>/etc/vimrc</code> 或 <code>/etc/vim/vimrc</code>。本文所说的 <code>.vimrc</code> 均是指位于用户主目录中的 <code>.vimrc</code> 文件。）</p>
<p>Linux 系统中：</p>
<ul>
<li>用 <code>Vim</code> 打开 <code>.vimrc</code> 文件： <code>vim ~/.vimrc</code></li>
<li>复制本文最后的 <code>选项列表</code> 粘贴到 <code>.vimrc</code> 文件</li>
<li>保存并关闭 (<code>:wq</code>)</li>
</ul>
<p>（LCTT 译注：此处不建议使用 <code>Vim</code> 编辑 <code>.vimrc</code> 文件，因为很可能无法粘贴成功，可以选择 <code>gedit</code> 编辑器编辑 <code>.vimrc</code> 文件。）</p>
<p>Windows 系统中：</p>
<ul>
<li>首先，<a href="https://www.vim.org/download.php#pc">安装 gvim</a></li>
<li>打开 <code>gvim</code></li>
<li>单击 “编辑” -&gt; “启动设置”，打开 <code>_vimrc</code> 文件</li>
<li>复制本文最后的 “选项列表” 粘贴到 <code>_vimrc</code> 文件</li>
<li>单击 “文件” -&gt; “保存”</li>
</ul>
<p>（LCTT 译注：此处应注意不要使用 <code>Windows</code> 自带的记事本编辑该 <code>_vimrc</code> 文件，否则可能会因为行结束符不同而导致问题。）</p>
<p>下面，我们将深入研究提高 <code>Vim</code> 编辑效率的选项。主要分为以下几类：</p>
<ol>
<li>缩进 &amp; 制表符</li>
<li>显示 &amp; 格式化</li>
<li>搜索</li>
<li>浏览 &amp; 滚动</li>
<li>拼写</li>
<li>其他选项</li>
</ol>
<h3>1. 缩进 &amp; 制表符</h3>
<p>使 <code>Vim</code> 在创建新行的时候使用与上一行同样的缩进：</p>
<div class="highlight"><pre><span></span><code>set autoindent
</code></pre></div>

<p>创建新行时使用智能缩进，主要用于 <code>C</code> 语言一类的程序。通常，打开 <code>smartindent</code> 时也应该打开 <code>autoindent</code>：</p>
<div class="highlight"><pre><span></span><code>set smartindent
</code></pre></div>

<p>注意：<code>Vim</code> 具有语言感知功能，且其默认设置可以基于文件中的编程语言来改变配置以提高效率。有许多默认的配置选项，包括 <code>axs cindent</code>，<code>cinoptions</code>，<code>indentexpr</code> 等，没有在这里说明。 <code>syn</code> 是一个非常有用的命令，用于设置文件的语法以更改显示模式。</p>
<p>（LCTT 译注：这里的 <code>syn</code> 是指 <code>syntax</code>，可用于设置文件所用的编程语言，开启对应的语法高亮，以及执行自动事件 (<code>autocmd</code>)。）</p>
<p>设置文件里的制表符 <code>(TAB)</code> 的宽度（以空格的数量表示）：</p>
<div class="highlight"><pre><span></span><code>set tabstop=4
</code></pre></div>

<p>设置移位操作 <code>&gt;&gt;</code> 或 <code>&lt;&lt;</code> 的缩进长度（以空格的数量表示）：</p>
<div class="highlight"><pre><span></span><code>set shiftwidth=4
</code></pre></div>

<p>如果你更喜欢在编辑文件时使用空格而不是制表符，设置以下选项可以使 <code>Vim</code> 在你按下 <code>Tab</code> 键时用空格代替制表符。</p>
<div class="highlight"><pre><span></span><code>set expandtab
</code></pre></div>

<p>注意：这可能会导致依赖于制表符的 <code>Python</code> 等编程语言出现问题。这时，你可以根据文件类型设置该选项（请参考 <code>autocmd</code>）。</p>
<h3>2. 显示 &amp; 格式化</h3>
<p>要在每行的前面显示行号：</p>
<div class="highlight"><pre><span></span><code>set number
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201809/22/140832b37uezix6ugwujjz.png"></p>
<p>要在文本行超过一定长度时自动换行：</p>
<div class="highlight"><pre><span></span><code>set textwidth=80
</code></pre></div>

<p>要根据从窗口右侧向左数的列数来自动换行：</p>
<div class="highlight"><pre><span></span><code>set wrapmargin=2
</code></pre></div>

<p>（LCTT 译注：如果 <code>textwidth</code> 选项不等于零，本选项无效。)</p>
<p>当光标遍历文件时经过括号时，高亮标识匹配的括号：</p>
<div class="highlight"><pre><span></span><code>set showmatch
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201809/22/140851tg0a5rliy0pr4y54.jpg"></p>
<h3>3. 搜索</h3>
<p>高亮搜索内容的所有匹配位置：</p>
<div class="highlight"><pre><span></span><code>set hlsearch
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201809/22/140856ebx7mp2wxelm0lls.png"></p>
<p>搜索过程中动态显示匹配内容：</p>
<div class="highlight"><pre><span></span><code>set incsearch
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201809/22/140859r5mqq41gd0w1aqmg.png"></p>
<p>搜索时忽略大小写：</p>
<div class="highlight"><pre><span></span><code>set ignorecase
</code></pre></div>

<p>在打开 <code>ignorecase</code> 选项的条件下，搜索内容包含部分大写字符时，要使搜索大小写敏感：</p>
<div class="highlight"><pre><span></span><code>set smartcase
</code></pre></div>

<p>例如，如果文件内容是：</p>
<div class="highlight"><pre><span></span><code>test
Test
</code></pre></div>

<p>当打开 <code>ignorecase</code> 和 <code>smartcase</code> 选项时，搜索 <code>test</code> 时的突出显示：</p>
<blockquote>
<p>test<br>
 Test</p>
</blockquote>
<p>搜索 <code>Test</code> 时的突出显示：</p>
<blockquote>
<p>test<br>
 Test</p>
</blockquote>
<h3>4. 浏览 &amp; 滚动</h3>
<p>为获得更好的视觉体验，你可能希望将光标放在窗口中间而不是第一行，以下选项使光标距窗口上下保留 5 行。</p>
<div class="highlight"><pre><span></span><code>set scrolloff=5
</code></pre></div>

<p>一个例子：</p>
<p>第一张图中 <code>scrolloff=0</code>，第二张图中 <code>scrolloff=5</code>。</p>
<p><img alt="" src="/data/attachment/album/201809/22/140917nu6kufiywb935z9y.jpg"></p>
<p>提示：如果你没有设置选项 <code>nowrap</code>，那么设置 <code>sidescrolloff</code> 将非常有用。</p>
<p>在 <code>Vim</code> 窗口底部显示一个永久状态栏，可以显示文件名、行号和列号等内容：</p>
<div class="highlight"><pre><span></span><code>set laststatus=2
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201809/22/140921z5qrqtrjy0tzbq0q.png"></p>
<h3>5. 拼写</h3>
<p><code>Vim</code> 有一个内置的拼写检查器，对于文本编辑和编码非常有用。<code>Vim</code> 可以识别文件类型并仅对代码中的注释进行拼写检查。使用下面的选项打开英语拼写检查：</p>
<div class="highlight"><pre><span></span><code>set spell spelllang=en_us
</code></pre></div>

<p>（LCTT 译注：中文、日文或其它东亚语字符通常会在打开拼写检查时被标为拼写错误，因为拼写检查不支持这些语种，可以在 <code>spelllang</code> 选项中加入 <code>cjk</code> 来忽略这些错误标注。）</p>
<h3>6. 其他选项</h3>
<p>禁止创建备份文件：启用此选项后，<code>Vim</code> 将在覆盖文件前创建一个备份，文件成功写入后保留该备份。如果不想保留该备份文件，可以按下面的方式关闭：</p>
<div class="highlight"><pre><span></span><code>set nobackup
</code></pre></div>

<p>禁止创建交换文件：启用此选项后，<code>Vim</code> 将在编辑该文件时创建一个交换文件。 交换文件用于在崩溃或发生使用冲突时恢复文件。交换文件是以 <code>.</code> 开头并以 <code>.swp</code> 结尾的隐藏文件。</p>
<div class="highlight"><pre><span></span><code>set noswapfile
</code></pre></div>

<p>如果需要在同一个 <code>Vim</code> 窗口中编辑多个文件并进行切换。默认情况下，工作目录是打开的第一个文件的目录。而将工作目录自动切换到正在编辑的文件的目录是非常有用的。要自动切换工作目录：</p>
<div class="highlight"><pre><span></span><code>set autochdir
</code></pre></div>

<p><code>Vim</code> 自动维护编辑的历史记录，允许撤消更改。默认情况下，该历史记录仅在文件关闭之前有效。<code>Vim</code> 包含一个增强功能，使得即使在文件关闭后也可以维护撤消历史记录，这意味着即使在保存、关闭和重新打开文件后，也可以撤消之前的更改。历史记录文件是使用 <code>.un~</code> 扩展名保存的隐藏文件。</p>
<div class="highlight"><pre><span></span><code>set undofile
</code></pre></div>

<p>错误信息响铃，只对错误信息起作用：</p>
<div class="highlight"><pre><span></span><code>set errorbells
</code></pre></div>

<p>如果你愿意，还可以设置错误视觉提示：</p>
<div class="highlight"><pre><span></span><code>set visualbell
</code></pre></div>

<h3>惊喜</h3>
<p><code>Vim</code> 提供长格式和短格式命令，两种格式都可用于设置或取消选项配置。</p>
<p><code>autoindent</code> 选项的长格式是：</p>
<div class="highlight"><pre><span></span><code>set autoindent
</code></pre></div>

<p><code>autoindent</code> 选项的短格式是：</p>
<div class="highlight"><pre><span></span><code>set ai
</code></pre></div>

<p>要在不更改选项当前值的情况下查看其当前设置，可以在 <code>Vim</code> 的命令行上使用在末尾加上 <code>?</code> 的命令：</p>
<div class="highlight"><pre><span></span><code>set autoindent?
</code></pre></div>

<p>在大多数选项前加上 <code>no</code> 前缀可以取消或关闭选项：</p>
<div class="highlight"><pre><span></span><code>set noautoindent
</code></pre></div>

<p>可以为单独的文件配置选项，而不必修改全局配置文件。需要的话，请打开文件并输入 <code>:</code>，然后键入 <code>set</code>命令。这样的话，配置仅对当前的文件编辑会话有效。</p>
<p><img alt="" src="/data/attachment/album/201809/22/140925o8xn7bhbbj9m8xgx.png"></p>
<p>使用命令行获取帮助：</p>
<div class="highlight"><pre><span></span><code>:help autoindent
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201809/22/140938f87i0i847v07r4cy.jpg"></p>
<p>注意：此处列出的命令仅对 Linux 上的 Vim 7.4 版本和 Windows 上的 Vim 8.0 版本进行了测试。</p>
<p>这些有用的命令肯定会增强您的 <code>Vim</code> 使用体验。你会推荐哪些其他有用的命令?</p>
<h3>选项列表</h3>
<p>复制该选项列表粘贴到 <code>.vimrc</code> 文件中：</p>
<div class="highlight"><pre><span></span><code>&quot; Indentation &amp; Tabs
set autoindent
set smartindent
set tabstop=4
set shiftwidth=4
set expandtab
set smarttab
&quot; Display &amp; format
set number
set textwidth=80
set wrapmargin=2
set showmatch
&quot; Search
set hlsearch
set incsearch
set ignorecase
set smartcase
&quot; Browse &amp; Scroll
set scrolloff=5
set laststatus=2
&quot; Spell
set spell spelllang=en_us
&quot; Miscellaneous
set nobackup
set noswapfile
set autochdir
set undofile
set visualbell
set errorbells
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>