<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在 Ubuntu 16.04 LTS 上用 Tomb 加密文件</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Dan Fries 如今，大多数人都认为文件加密是必要的，甚至在 Linux 系统上也是如此。 如果你和我一样, 最初被 Ubuntu 所吸引是因为 Linux 系 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2018/02/ru-he-zai-ubuntu-1604-lts-shang-yong-tomb-jia-mi-wen-jian.html" rel="bookmark"
           title="Permalink to 如何在 Ubuntu 16.04 LTS 上用 Tomb 加密文件">如何在 Ubuntu 16.04 LTS 上用 Tomb 加密文件</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-18T23:43:00+01:00">
                Published: Sun 18 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Dan Fries</p>
<p><img alt="" src="/data/attachment/album/201802/18/234345rz1g9a15v97go1fg.png"></p>
<p>如今，大多数人都认为文件加密是必要的，甚至在 Linux 系统上也是如此。 如果你和我一样, 最初被 Ubuntu 所吸引是因为 Linux 系统强化的安全性，恐怕我有个坏消息要告诉你：Linux 已经成为它自身“成功”的受害者。 近年来，用户数量的大幅度增加导致了这类系统的攻击和盗窃活动呈指数级增长。</p>
<p>曾经有一个非常简单的解决方案来在像 Ubuntu 这样的 Linux 系统上加密文件：它叫做 <a href="https://www.fossmint.com/secure-encrypt-files-folders-with-truecrypt-in-linux/">Truecrypt</a>。 直到 2015 年，它提供了不同程度的军事级别的加密，并且在大多数 Linux 系统中运行良好。不幸的是, 它已经停止开发了, 因此变得相当不安全。</p>
<h3>替代品</h3>
<p>幸运的是，除了 Truecrypt，还有一些选择。 Truecrypt 的直接继承者是 <a href="https://www.fossmint.com/veracrypt-is-a-secure-alternative-encryption-tool-to-truecrypt-for-linux/">Veracrypt</a> ，它由一群开发者从 Truecrypt 获取源代码并保持更新的。</p>
<p>该项目已经发展成为令人印象深刻的独立系统，但现在渐已老迈。旧系统，尤其是那些处理安全问题的系统，只能更新多次而才不会引入漏洞。</p>
<p>出于这个原因，在其他许多方面，应该寻找一个更外围一些的加密软件。我选择的是 Tomb。</p>
<h3>为什么是 Tomb</h3>
<p>在某些方面，Tomb 与其他加密软件非常相似。它将加密文件存储在专用的“Tomb 文件夹”中，可以让你快速查看您已加密的文件。</p>
<p>它还使用与 Veracrypt 类似的 <a href="https://www.dyne.org/software/tomb/">AES-256</a> 加密标准。这个标准适用于 NSA 、微软和 Apple，并被认为是最安全的加密算法之一。如果你不熟悉加密技术，则应该阅读一点<a href="https://thebestvpn.com/advanced-encryption-standard-aes/">技术背景知识</a>，但如果你只想快速、安全地加密，请不要担心， Tomb 将不负所望。</p>
<p>Tomb 也有一些很大的不同之处。首先，它是专门为 GNU/Linux 系统开发的，可以解决一些更广泛的加密软件的兼容性问题。</p>
<p>第二，尽管 Tomb 是开源的，但它使用的是静态链接库，以至于其源代码难以审计。 这意味着一些操作系统发行版开发者并不认为它是自由的，但是当涉及到安全软件时，这实际上是一件好事：这意味着与完全“自由”软件相比, Tomb 被黑客攻击的可能性更小。</p>
<p>最后，它有几个先进的功能，如<ruby> 隐写术 <rt>  steganography </rt></ruby>，这使你可以将你的关键文件隐藏在其他文件中。 尽管 Tomb 主要是一个命令行工具，它也带有 GUI 界面—— gtomb，它允许初学者用图形化的方式使用它。</p>
<p>这是推销么? 好吧，在我告诉你如何使用 Tomb 之前，值得注意的是，没有一个加密软件能提供完全的保护。 Tomb 不会让你的计算机隐藏于你 ISP，也不会保护存储在云中的文件。如果你想对云存储进行完全加密，您需要使用 Tor 浏览器和零日志 VPN 登录到你喜欢的存储服务中。 这里有很多选项，但是 <a href="https://privacyaustralia.org/trust-zone-vpn-review/">Trust Zone</a> 是一个很好的浏览器，而 <a href="https://www.howtoforge.com/tutorial/how-to-properly-set-up-tinc-vpn-on-ubuntu-linux/">Tinc</a> 是一个很好的 VPN 工具。</p>
<p>说了这么多，如果你正在寻找 Ubuntu 16.04 上的快速、简单、安全的加密，Tomb 无疑是一条可行的路。让我们开始吧。</p>
<h3>在 Ubuntu 16.04 上安装 Tomb</h3>
<p>因为 Tomb 是专门为 Linux 设计的, 所以安装非常简单。</p>
<p>几年前，SparkyLinux （它本身就是一个非常好的 Debian 衍生产品）的开发者们将 “Tomb” 添加到他们的官方存储库中。 你可以通过在 Ubuntu 系统上添加这些存储库来安装它。</p>
<p>要做到这一点， 打开一个终端并添加一个存储库文件：</p>
<div class="highlight"><pre><span></span><code>sudo vi /etc/apt/sources.list.d/sparky-repo.list
</code></pre></div>

<p>然后在文件中添加以下行：</p>
<div class="highlight"><pre><span></span><code><span class="k">deb</span><span class="w"> </span><span class="s">https://sparkylinux.org/repo</span><span class="w"> </span><span class="kp">stable</span><span class="w"> </span><span class="kp">main</span>
<span class="k">deb-src</span><span class="w"> </span><span class="s">https://sparkylinux.org/repo</span><span class="w"> </span><span class="kp">stable</span><span class="w"> </span><span class="kp">main</span>
<span class="k">deb</span><span class="w"> </span><span class="s">https://sparkylinux.org/repo</span><span class="w"> </span><span class="kp">testing</span><span class="w"> </span><span class="kp">main</span>
<span class="k">deb-src</span><span class="w"> </span><span class="s">https://sparkylinux.org/repo</span><span class="w"> </span><span class="kp">testing</span><span class="w"> </span><span class="kp">main</span>
</code></pre></div>

<p>保存并关闭该文件。</p>
<p>你现在需要安装 Sparky 公钥，使用下列步骤：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install sparky-keyring
</code></pre></div>

<p>或者：</p>
<div class="highlight"><pre><span></span><code>wget -O - https://sparkylinux.org/repo/sparkylinux.gpg.key | sudo apt-key add -
</code></pre></div>

<p>然后你需要使用标准的命令来更新你的存储库：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get update
</code></pre></div>

<p>然后简单地使用 <code>apt</code> 安装 Tomb：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install tomb
</code></pre></div>

<p>如果你想要带有 GUI 的 Tomb，安装同样简单。只需使用 <code>apt</code> 来安装 gtomb：</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install gtomb
</code></pre></div>

<p>就是这样，你现在应该安装好了一个可以工作的 Tomb。 让我们看看如何使用它。</p>
<h3>使用 Tomb</h3>
<h4>通过命令行使用 Tomb</h4>
<p>Tomb 主要是一个命令行工具，所以我将首先介绍这个用法。 如果你不喜欢使用终端，你可以跳过这节并查看下一部分。</p>
<p>实际上，不用说了。 如果你以前从来没有使用过命令行，那么 Tomb 是一个很好的开始，因为它使用简单的命令，只要你小心，那么你很少有机会把事情搞砸。</p>
<p>Tomb 实际上使用了一组以墓地为主题的非常有趣的命令集。 每个加密文件夹都被称为“tomb”（墓碑） ，而且（我很快就会讲到) ，它们可以使用类似的哥特式命令。</p>
<p>首先，让我们创造（挖）一个新的 tomb。你可以指定你的新 tomb 的名称和大小，所以让我们使用 “Tomb1”这个名称并指定大小为 100 MB。</p>
<p>你需要 root 权限，所以打开终端并键入（或复制） ：</p>
<div class="highlight"><pre><span></span><code>sudo tomb dig -s 100 Tomb1.tomb
</code></pre></div>

<p>你应该会得到类似这样的输出：</p>
<div class="highlight"><pre><span></span><code>tomb . Commanded to dig tomb Tomb1.tomb
tomb (*) Creating a new tomb in Tomb1.tomb
tomb . Generating Tomb1.tomb of 100MiB
100 blocks (100Mb) written.
100+0 records in
100+0 records out
-rw------- 1 Tomb1 Tomb1 100M Jul 4 18:53 Tomb1.tomb
tomb (*) Done digging  Tomb1
tomb . Your tomb is not yet ready, you need to forge a key and lock it:
tomb . tomb forge Tomb1.tomb.key
tomb . tomb lock Tomb1.tomb -k Tomb1.tomb.key
</code></pre></div>

<p>正如输出的帮助说明，你现在需要创建（打造）一个密钥文件来锁定你的 tomb：</p>
<div class="highlight"><pre><span></span><code>sudo tomb forge Tomb1.tomb.key
</code></pre></div>

<p>如果在此时出现提及“活动交换分区”的错误，则需要停用所有活动交换分区:</p>
<div class="highlight"><pre><span></span><code>sudo swapoff -a
</code></pre></div>

<p>然后再运行上面的 keyfile 命令。</p>
<p>生成密钥文件可能需要几分钟时间，这具体取决于系统的速度。然而，在完成后系统会要求你输入新密码以确保密钥的安全：</p>
<p><a href="https://www.howtoforge.com/images/how_to_setup_and_install_tomb_on_ubuntu_1604/big/tomb1.png"><img alt="" src="/data/attachment/album/201802/18/234347zkqq58hi4hzsq13g.png"></a></p>
<p>输入两次，然后你的新密钥文件就会被制作出来。</p>
<p>你现在需要用你的新密钥来锁定你的 tomb。你可以这样做：</p>
<div class="highlight"><pre><span></span><code>sudo tomb lock Tomb1.tomb -k Tomb1.tomb.key
</code></pre></div>

<p>你将被要求输入你的密码。 这样做, 你应该会得到如下的输出：</p>
<div class="highlight"><pre><span></span><code><span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Commanded</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="n">tomb</span><span class="w"> </span><span class="n">Tomb1</span><span class="p">.</span><span class="n">tomb</span>

<span class="o">[</span><span class="n">sudo</span><span class="o">]</span><span class="w"> </span><span class="n">Enter</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">Tomb1</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">gain</span><span class="w"> </span><span class="n">superuser</span><span class="w"> </span><span class="k">privileges</span>

<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Checking</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tomb</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="p">(</span><span class="n">we</span><span class="w"> </span><span class="n">never</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">somebody</span><span class="w"> </span><span class="k">else</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">bones</span><span class="p">).</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Fine</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">tomb</span><span class="w"> </span><span class="n">seems</span><span class="w"> </span><span class="n">empty</span><span class="p">.</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">valid</span><span class="p">.</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Locking</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="nl">cipher</span><span class="p">:</span><span class="w"> </span><span class="n">aes</span><span class="o">-</span><span class="n">xts</span><span class="o">-</span><span class="nl">plain64</span><span class="p">:</span><span class="n">sha256</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">Tomb1</span><span class="p">.</span><span class="n">tomb</span><span class="p">.</span><span class="k">key</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Password</span><span class="w"> </span><span class="n">OK</span><span class="p">.</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">Locking</span><span class="w"> </span><span class="n">Tomb1</span><span class="p">.</span><span class="n">tomb</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">Tomb1</span><span class="p">.</span><span class="n">tomb</span><span class="p">.</span><span class="k">key</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Formatting</span><span class="w"> </span><span class="n">Luks</span><span class="w"> </span><span class="n">mapped</span><span class="w"> </span><span class="n">device</span><span class="p">.</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Formatting</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">Tomb</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">Ext3</span><span class="o">/</span><span class="n">Ext4</span><span class="w"> </span><span class="n">filesystem</span><span class="p">.</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">Done</span><span class="w"> </span><span class="n">locking</span><span class="w"> </span><span class="n">Tomb1</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">Luks</span><span class="w"> </span><span class="n">dm</span><span class="o">-</span><span class="n">crypt</span><span class="w"> </span><span class="n">aes</span><span class="o">-</span><span class="n">xts</span><span class="o">-</span><span class="nl">plain64</span><span class="p">:</span><span class="n">sha256</span>
<span class="n">tomb</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">Your</span><span class="w"> </span><span class="n">tomb</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">Tomb1</span><span class="p">.</span><span class="n">tomb</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">secured</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">Tomb1</span><span class="p">.</span><span class="n">tomb</span><span class="p">.</span><span class="k">key</span>
</code></pre></div>

<p>现在一切都安排好了，你可以开始使用你的新 tomb 了。</p>
<p>这里有一个注意事项：因为我只是在告诉你该怎么做，所以我把我的密钥文件和 tomb 存放在同一个目录中（在这里是 <code>$HOME</code>）。 你不应该这样做——把你的密钥存放在别的地方，最好是在除了你之外没有人能找到的地方。</p>
<p>然而，你需要记住你把它放在哪里，因为你需要用它来打开你的 tomb。 要做到这一点, 请输入：</p>
<div class="highlight"><pre><span></span><code>sudo tomb open Tomb1.tomb -k path/to/your/Tomb1.tomb.key
</code></pre></div>

<p>输入你的密码，然后你就可以进去了。 tomb 会输出一些类似以下的内容:</p>
<div class="highlight"><pre><span></span><code>tomb (*) Success unlocking tomb Tomb1
tomb . Checking filesystem via /dev/loop0
fsck from util-linux 2.27.1
Tomb1: clean, 11/25168 files, 8831/100352 blocks
tomb (*) Success opening Tomb1.tomb on /media/Tomb1
</code></pre></div>

<p>然后你应该看到你的新 tomb 挂载在了 finder 窗口。</p>
<p>你现在可以从 tomb 中保存和打开文件，但是请注意，你需要 root权限才能这样做。</p>
<p>在你使用完之后需要用以下方法卸载你的 tomb：</p>
<div class="highlight"><pre><span></span><code>sudo tomb close
</code></pre></div>

<p>或者，如果你想强制关闭所有的打开的 tomb, 你可以使用：</p>
<div class="highlight"><pre><span></span><code>sudo tomb slam all
</code></pre></div>

<h4>使用带 GUI 的 Tomb</h4>
<p>如果你不喜欢使用命令行，或者只是想要一个图形界面，你可以使用 gtomb。与许多图形用户界面包装器不同， gtomb 使用起来很容易。</p>
<p>让我们来看看如何使用 gtomb 建立一个新的 tomb。 首先，从菜单中启动 gtomb。 它可能会是这 样的：</p>
<p><a href="https://www.howtoforge.com/images/how_to_setup_and_install_tomb_on_ubuntu_1604/big/tomb2.png"><img alt="" src="/data/attachment/album/201802/18/234350m92dlwxsmr8srw0r.png"></a></p>
<p>所有的事情都是一目了然的，但为了完整起见，我将详细介绍如何建立你的第一个 tomb。</p>
<p>首先，点击第一个选项“dig”。 点击确定，然后选择一个位置。</p>
<p>接下来，输入你的 tomb 的大小：</p>
<p><a href="https://www.howtoforge.com/images/how_to_setup_and_install_tomb_on_ubuntu_1604/big/tomb3.png"><img alt="" src="/data/attachment/album/201802/18/234352wabaab6azagnfadk.png"></a></p>
<p>你现在有了一个新的 tomb，但是你需要在使用它之前做一把钥匙。 要做到这一点, 请在主菜单中 单击“forge”：</p>
<p><a href="https://www.howtoforge.com/images/how_to_setup_and_install_tomb_on_ubuntu_1604/big/tomb4.png"><img alt="" src="/data/attachment/album/201802/18/234356f24geojn5dvtj5ro.png"></a></p>
<p>Tomb 会要求你输入两次密码，那就这样做。</p>
<p>然后通过点击来使用密钥锁定你的 tomb，你已经猜到了，“lock”。 要打开它, 请单击“open”并再次输入您的密码。</p>
<p>从上面的截图中你可以看到，使用 gtomb 是非常容易的，你不应该遇到任何问题。 大多数常见的任务都可以通过点击来完成，对于任何更复杂的事情，你可以使用命令行。</p>
<h3>最后的想法</h3>
<p>就是这样！你现在应该准备好你的第一个 tomb 了，并存储任何你想在 tomb 中保密和安全的信息，这些信息会更加安全。</p>
<p>你可以同时使用多个 tomb，并将它们中的文件绑定到你的 <code>$HOME</code> 目录，这样你的程序就不会感到困惑。</p>
<p>我希望这本指南能帮助你开始。 就像使用一个标准的文件夹一样使用你的 Tomb，但是对于更复杂的命令，你总是可以查看 <a href="https://www.dyne.org/software/tomb/">Tomb 官方指南</a>。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>