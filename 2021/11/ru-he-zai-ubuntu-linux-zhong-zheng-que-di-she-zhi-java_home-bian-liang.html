<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在 Ubuntu Linux 中正确地设置 JAVA_HOME 变量</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Abhishek Prakash 如果你 在 Ubuntu 上运行 Java 程序 ，使用 Eclipse、Maven 或 Netbeans 等等，你将需要将 JAVA_HOME 环境变量设置为正确的路径。否则，你的系统将会向你 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/11/ru-he-zai-ubuntu-linux-zhong-zheng-que-di-she-zhi-java_home-bian-liang.html" rel="bookmark"
           title="Permalink to 如何在 Ubuntu Linux 中正确地设置 JAVA_HOME 变量">如何在 Ubuntu Linux 中正确地设置 JAVA_HOME 变量</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-11-05T12:20:28+01:00">
                Published: Fri 05 November 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Abhishek Prakash</p>
<p><img alt="" src="/data/attachment/album/202111/05/122020qr5pys4p851sf1zs.jpg"></p>
<p>如果你 <a href="https://itsfoss.com/run-java-program-ubuntu/">在 Ubuntu 上运行 Java 程序</a> ，使用 Eclipse、<a href="https://maven.apache.org/">Maven</a> 或 Netbeans 等等，你将需要将 <code>JAVA_HOME</code> 环境变量设置为正确的路径。否则，你的系统将会向你控诉 “java_home 环境变量没有设置”。</p>
<p>在这篇初学者教程中，我将向你展示在 Ubuntu 上正确地设置 <code>JAVA_HOME</code> 变量的步骤。这些步骤应该也适用于大多数的其它的 Linux 发行版。</p>
<p>设置过程包含这些步骤：</p>
<ul>
<li>确保已安装 Java 开发工具包（JDK）。</li>
<li>查找 JDK 可执行文件的正确的位置。</li>
<li>设置 <code>JAVA_HOME</code> 环境变量，并永久更改它。</li>
</ul>
<h3>步骤 1: 核查 JDK 是否已经安装</h3>
<p>核查 Java 开发工具包（JDK）是否已经安装在你的 Linux 系统上的最简单的方法是运行这个命令：</p>
<div class="highlight"><pre><span></span><code>javac --version
</code></pre></div>

<p>上面的命令将核查 Java 编译器的版本。如果已经安装了 Java 编译器，它将显示 Java 版本：</p>
<p><img alt="Java Compiler is installed" src="/data/attachment/album/202111/05/122030h1rrrrgu1e1iwwyu.png"></p>
<p>如果上面的命令显示像这样未找到 <code>javac</code> 命令的错误信息，你得先安装 JDK ：</p>
<p><img alt="Java Compiler is not installed" src="/data/attachment/album/202111/05/122032eml7apli9zfh0sbh.png"></p>
<p>如果在你的系统上并没有安装 Java 编译器，使用这条命令来安装 Java 开发工具包 （JDK）：</p>
<div class="highlight"><pre><span></span><code>sudo apt install default-jdk
</code></pre></div>

<p>这将在你当前的 Ubuntu 版本中安装默认的 Java 版本。如果你需要一些其它版本的 Java 版本，那么你必须 <a href="https://itsfoss.com/install-java-ubuntu/">在 Ubuntu 中安装 Java 时</a> 具体指出它的版本。</p>
<p>在你确保 Java 编译器存在于你的系统之中后，接下来就到了查找其位置的时候了。</p>
<h3>步骤 2: 获取 JDK 可执行文件（Java 编译器）的位置</h3>
<p>可执行文件通常位于 <code>/usr/lib/jvm</code> 目录之中。但我不会让你来玩一个猜谜游戏，让我们来找出 Java 可执行文件的路径。</p>
<p><a href="https://linuxhandbook.com/which-command/">使用 which 命令</a> 来获取 Java 编译器可执行文件的位置：</p>
<div class="highlight"><pre><span></span><code>which javac
</code></pre></div>

<p>在这里的问题是，它给出的位置实际上是一个 <a href="https://linuxhandbook.com/symbolic-link-linux/">符号链接</a> 。你将需要按照下图执行几次：</p>
<p><img alt="" src="/data/attachment/album/202111/05/122033acijqffqnqdz70j8.png"></p>
<p>最简单的方法是直接使用下面这条命令跟随符号链接来以获取实际的可执行文件：</p>
<div class="highlight"><pre><span></span><code>readlink -f `which java`
</code></pre></div>

<p><code>readlink</code> 命令会跟随一个符号链接。我在 <code>which java</code> 的外侧使用 <code>readlink</code> 将会使用 <code>which java</code> 的输出来替换要检查的符号链接，这被称之为命令替换。因此，在这个实例中，上面的命令大体上相当于 <code>readlink -f /usr/bin/java</code> 。</p>
<p>在我的示例中，可执行文件的位置是 <code>/usr/lib/jvm/java-11-openjdk-amd64/bin/java</code> 。对你来说可能会不一样。在你的系统中，复制上述命令所获取的正确的路径。你知道，你可以 <a href="https://itsfoss.com/copy-paste-linux-terminal/">在 Ubuntu 的终端中复制和粘贴</a> 。</p>
<h3>步骤 3: 设置 JAVA_HOME 变量</h3>
<p>现在，你已经获取了位置，使用它来设置 <code>JAVA_HOME</code> 环境变量：</p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="n">JAVA_HOME</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="n">amd64</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">java</span>
</code></pre></div>

<p>核查 <code>JAVA_HOME</code> 目录的值：</p>
<div class="highlight"><pre><span></span><code>echo $JAVA_HOME
</code></pre></div>

<p><img alt="" src="/data/attachment/album/202111/05/122035biq3fdoffdafzo6r.png"></p>
<p>尝试在同一个终端中运行你的 Java 程序或工程，并查看它是否工作。</p>
<p>这尚未结束。你刚刚声明的 <code>JAVA_HOME</code> 环境变量是临时的。如果你关闭这个终端或开始一个新的会话，它将会再次变成空的。</p>
<p>为了“永久地”设置 <code>JAVA_HOME</code> 变量，你应该将其添加到你的家目录中的 <code>.bashrc</code> 文件中。</p>
<p>你可以 <a href="https://itsfoss.com/nano-editor-guide/">在 Linux 终端中使用 Nano 编辑器来编辑文件</a>。 如果你不想使用它，并想采取一种简单的复制和粘贴的方法，使用下面的命令：</p>
<p>首先备份你的 <code>.bashrc</code> 文件（以防万一你把它弄坏了，你还可以将其再恢复回来）：</p>
<div class="highlight"><pre><span></span><code>cp ~/.bashrc ~/.bashrc.bak
</code></pre></div>

<p>接下来，<a href="https://linuxhandbook.com/echo-command/">使用 echo 命令来追加</a> 在这一节开头使用的 <code>export</code> 命令。<strong>你应该适当地更改下面的命令，以便其正确地使用你的系统所显示的路径</strong>。</p>
<div class="highlight"><pre><span></span><code><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/bin/java&quot;</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">~/.</span><span class="n">bashrc</span>
</code></pre></div>

<p>验证它已经被正确地添加到文件的结尾处：</p>
<div class="highlight"><pre><span></span><code>tail -3 ~/.bashrc
</code></pre></div>

<p>上面的 <a href="https://linuxhandbook.com/tail-command/">tail 命令</a> 将显示所具体指定文件的最后 3 行。</p>
<p>这里是上面的三个命令的全部的输出：</p>
<p><img alt="" src="/data/attachment/album/202111/05/122036bfook1kj4zkj6848.png"></p>
<p>现在，即使你退出会话或重新启动系统，<code>JAVA_HOME</code> 环境变量都仍将设置为你所具体指定的值。这就是你所想要的，对吧？</p>
<p>注意，如果你将来更改默认的 Java 版本，你将需要更改 <code>JAVA_HOME</code> 环境变量的值并将其指向正确的可执行文件的路径。</p>
<p>我希望这篇教程不仅会帮助你设置 <code>JAVA_HOME</code> 环境变量，也会教会你如何完成这项工作。</p>
<p>如果你仍然面临难题或者有一些疑问或建议，请在评论区告诉我。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>