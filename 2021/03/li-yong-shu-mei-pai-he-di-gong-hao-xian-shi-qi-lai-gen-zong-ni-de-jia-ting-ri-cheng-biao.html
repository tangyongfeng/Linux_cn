<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>利用树莓派和低功耗显示器来跟踪你的家庭日程表</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Javier Pena 通过利用开源工具和电子墨水屏，让每个人都清楚家庭的日程安排。 有些家庭的日程安排很复杂：孩子们有上学活 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li class="active"><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/03/li-yong-shu-mei-pai-he-di-gong-hao-xian-shi-qi-lai-gen-zong-ni-de-jia-ting-ri-cheng-biao.html" rel="bookmark"
           title="Permalink to 利用树莓派和低功耗显示器来跟踪你的家庭日程表">利用树莓派和低功耗显示器来跟踪你的家庭日程表</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-03-21T09:15:24+01:00">
                Published: Sun 21 March 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/shu-mei-pai">树莓派</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Javier Pena</p>
<blockquote>
<p>通过利用开源工具和电子墨水屏，让每个人都清楚家庭的日程安排。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202103/21/091512dkbgb3vzgjrz2935.jpg" title="Calendar with coffee and breakfast"></p>
<p>有些家庭的日程安排很复杂：孩子们有上学活动和放学后的活动，你想要记住的重要事情，每个人都有多个约会等等。虽然你可以使用手机和应用程序来关注所有事情，但在家中放置一个大型低功耗显示器以显示家人的日程不是更好吗？电子墨水日程表刚好满足！</p>
<p><img alt="E Ink calendar" src="/data/attachment/album/202103/21/091525ksnt71mvc585fu5k.jpg" title="E Ink calendar"></p>
<h3>硬件</h3>
<p>这个项目是作为假日项目开始，因此我试着尽可能多的旧物利用。其中包括一台已经闲置了太长时间树莓派 2。由于我没有电子墨水屏，因此我需要购买一个。幸运的是，我找到了一家供应商，该供应商为支持树莓派的屏幕提供了 <a href="https://github.com/waveshare/e-Paper">开源驱动程序和示例</a>，该屏幕使用 <a href="https://opensource.com/article/19/3/gpio-pins-raspberry-pi">GPIO</a> 端口连接。</p>
<p>我的家人还想在不同的日程表之间切换，因此需要某种形式的输入。我没有添加 USB 键盘，而是选择了一种更简单的解决方案，并购买了一个类似于在 <a href="https://www.instructables.com/1x4-Membrane-Keypad-w-Arduino/">这篇文章</a> 中所描述 1x4 大小的键盘。这使我可以将键盘连接到树莓派中的某些 GPIO 端口。</p>
<p>最后，我需要一个相框来容纳整个设置。虽然背面看起来有些凌乱，但它能完成工作。</p>
<p><img alt="Calendar internals" src="/data/attachment/album/202103/21/091526rojamnnbfa52ce8f.jpg" title="Calendar internals"></p>
<h3>软件</h3>
<p>我从 <a href="https://github.com/zli117/EInk-Calendar">一个类似的项目</a> 中获得了灵感，并开始为我的项目编写 Python 代码。我需要从两个地方获取数据：</p>
<ul>
<li>天气信息：从 <a href="https://openweathermap.org">OpenWeather API</a> 获取</li>
<li>时间信息：我打算使用 <a href="https://en.wikipedia.org/wiki/CalDAV">CalDav 标准</a> 连接到一个在我家服务器上运行的日程表</li>
</ul>
<p>由于必须等待一些零件的送达，因此我使用了模块化的方法来进行输入和显示，这样我可以在没有硬件的情况下调试大多数代码。日程表应用程序需要驱动程序，于是我编写了一个 <a href="https://github.com/pygame/pygame">Pygame</a> 驱动程序以便能在台式机上运行它。</p>
<p>编写代码最好的部分是能够重用现有的开源项目，所以访问不同的 API 很容易。我可以专注于设计用户界面，其中包括每个人的周历和每个人的日历，以及允许使用小键盘来选择日程。并且我花时间又添加了一些额外的功能，例如特殊日子的自定义屏幕保护程序。</p>
<p><img alt="E Ink calendar screensaver" src="/data/attachment/album/202103/21/091527ajgp7xgx7s1quhx8.jpg" title="E Ink calendar screensaver"></p>
<p>最后的集成步骤将确保我的日程表应用程序将在启动时运行，并且能够容错。我使用了一个基本的 <a href="https://www.raspberrypi.org/software/">树莓派系统</a> 镜像，并将该应用程序配置到 systemd 服务，以便它可以在出现故障和系统重新启动依旧运行。</p>
<p>做完所有工作，我把代码上传到了 <a href="https://github.com/javierpena/eink-calendar">GitHub</a>。因此，如果你要创建类似的日历，可以随时查看并重构它！</p>
<h3>结论</h3>
<p>日程表已成为我们厨房中的日常工具。它可以帮助我们记住我们的日常活动，甚至我们的孩子在上学前，都可以使用它来查看日程的安排。</p>
<p>对我而言，这个项目让我感受到开源的力量。如果没有开源的驱动程序、库以及开放 API，我们依旧还在用纸和笔来安排日程。很疯狂，不是吗？</p>
<p>需要确保你的日程不冲突吗？学习如何使用这些免费的开源项目来做到这点。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>