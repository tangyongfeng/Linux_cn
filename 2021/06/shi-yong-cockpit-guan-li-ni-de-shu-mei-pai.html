<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>使用 Cockpit 管理你的树莓派</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Alan Formy-duval 用 Cockpit 建立你的树莓派的控制中心。 去年，我写了关于使用 Cockpit 管理我的 Linux 服务器的文章。它是一个基于 Web 的工具，为管 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li class="active"><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/06/shi-yong-cockpit-guan-li-ni-de-shu-mei-pai.html" rel="bookmark"
           title="Permalink to 使用 Cockpit 管理你的树莓派">使用 Cockpit 管理你的树莓派</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-06-15T14:41:00+02:00">
                Published: Tue 15 June 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/shu-mei-pai">树莓派</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Alan Formy-duval</p>
<blockquote>
<p>用 Cockpit 建立你的树莓派的控制中心。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202106/15/144053hmswm01w6qus011n.jpg" title="Neon colorized Raspberry Pi cluster with LEGOs"></p>
<p>去年，我写了关于使用 <a href="https://opensource.com/article/20/11/cockpit-server-management">Cockpit 管理我的 Linux 服务器的文章</a>。它是一个基于 Web 的工具，为管理多个服务器及其相关的服务和应用提供了一个简洁、强大的界面。它还简化了日常的管理任务。</p>
<p>在这篇文章中，我将会介绍如何在树莓派基金会提供的标准操作系统树莓派 OS 上安装用于 Linux 服务器的 Cockpit Web 控制台。我还会简要介绍它的特性。</p>
<h3>在树莓派 OS 上安装 Cockpit</h3>
<p>在 <code>sudo</code> 权限下使用一个账户通过 SSH 登录你的树莓派系统。如果你还没有建立一个账户：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ssh<span class="w"> </span>pibox
alan@pibox<span class="err">&#39;</span>s<span class="w"> </span>password:
Linux<span class="w"> </span>pibox.someplace.org<span class="w"> </span><span class="m">5</span>.10.17-v7+<span class="w"> </span><span class="c1">#1403 SMP Mon Feb 22 11:29:51 GMT 2021 armv7l</span>

The<span class="w"> </span>programs<span class="w"> </span>included<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>Debian<span class="w"> </span>GNU/Linux<span class="w"> </span>system<span class="w"> </span>are<span class="w"> </span>free<span class="w"> </span>software<span class="p">;</span>
the<span class="w"> </span>exact<span class="w"> </span>distribution<span class="w"> </span>terms<span class="w"> </span><span class="k">for</span><span class="w"> </span>each<span class="w"> </span>program<span class="w"> </span>are<span class="w"> </span>described<span class="w"> </span><span class="k">in</span><span class="w"> </span>the
individual<span class="w"> </span>files<span class="w"> </span><span class="k">in</span><span class="w"> </span>/usr/share/doc/*/copyright.

Debian<span class="w"> </span>GNU/Linux<span class="w"> </span>comes<span class="w"> </span>with<span class="w"> </span>ABSOLUTELY<span class="w"> </span>NO<span class="w"> </span>WARRANTY,<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>extent
permitted<span class="w"> </span>by<span class="w"> </span>applicable<span class="w"> </span>law.
Last<span class="w"> </span>login:<span class="w"> </span>Tue<span class="w"> </span>May<span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">09</span>:55:57<span class="w"> </span><span class="m">2021</span><span class="w"> </span>from<span class="w"> </span><span class="m">172</span>.1.4.5
alan@pibox:~<span class="w"> </span>$
</code></pre></div>

<p>在树莓派 OS 上安装 Cockpit Web 控制台和在 Linux 服务器上一样简单：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>cockpit
</code></pre></div>

<p>Cockpit 只需要 60.4 KB 的磁盘空间。加上它的几个包依赖项，总使用量是 115MB。</p>
<p>安装过程将负责设置和启动服务。你可以使用 <code>systemctl</code> 命令来验证状态：</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">cockpit</span><span class="o">.</span><span class="n">socket</span>
<span class="err">●</span><span class="w"> </span><span class="n">cockpit</span><span class="o">.</span><span class="n">socket</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Cockpit</span><span class="w"> </span><span class="n">Web</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">Socket</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">cockpit</span><span class="o">.</span><span class="n">socket</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">;</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">enabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">listening</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">04</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">43</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">35</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w">     </span><span class="n">Docs</span><span class="p">:</span><span class="w"> </span><span class="n">man</span><span class="p">:</span><span class="n">cockpit</span><span class="o">-</span><span class="n">ws</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="w">   </span><span class="n">Listen</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">9090</span><span class="w"> </span><span class="p">(</span><span class="n">Stream</span><span class="p">)</span>
<span class="w">  </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="mi">6563</span><span class="w"> </span><span class="n">ExecStartPost</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">cockpit</span><span class="o">/</span><span class="n">motd</span><span class="o">/</span><span class="n">update</span><span class="o">-</span><span class="n">motd</span><span class="w">  </span><span class="n">localhost</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>
<span class="w">  </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="mi">6570</span><span class="w"> </span><span class="n">ExecStartPost</span><span class="o">=/</span><span class="n">bin</span><span class="o">/</span><span class="n">ln</span><span class="w"> </span><span class="o">-</span><span class="n">snf</span><span class="w"> </span><span class="n">active</span><span class="o">.</span><span class="n">motd</span><span class="w"> </span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">cockpit</span><span class="o">/</span><span class="n">motd</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>
<span class="w">    </span><span class="n">Tasks</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2181</span><span class="p">)</span>
<span class="w">   </span><span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">cockpit</span><span class="o">.</span><span class="n">socket</span>
</code></pre></div>

<h3>使用 Cockpit</h3>
<h4>连接</h4>
<p>默认的监听端口号是 9090。打开你最喜欢的 Web 浏览器并输入地址，例如： <code>https://pibox:9090</code>。</p>
<p><img alt="Cockpit home page" src="/data/attachment/album/202106/15/144101fc5jx2jjbx9b1j11.png" title="Cockpit home page"></p>
<p>你现在可以使用你的普通账户登录。同样，这个账户上需要有使用 <code>sudo</code> 的权限 —— 很可能就是你用来 SSH 和运行 Apt 的那个账户。一定要勾选“为特权任务重用我的密码”。</p>
<h4>管理你的树莓派</h4>
<p>Cockpit 的初始屏幕以 “System” 页开始，提供当前 CPU 和内存使用的详细信息和图表。</p>
<p><img alt="Initial Cockpit screen" src="/data/attachment/album/202106/15/144102ii3033f3i7ffi45t.png" title="Initial Cockpit screen"></p>
<p>你可以从这个屏幕看到硬件细节。</p>
<p><img alt="Cockpit hardware details" src="/data/attachment/album/202106/15/144102vb260wm11uhgm81t.png" title="Cockpit hardware details"></p>
<p>通过点击每一项来展开左边的列（例如，日志、存储、服务等）。这些是标准的 Cockpit 部分，不言自明。让我快速描述一下每个部分。</p>
<h4>日志</h4>
<p>这部分展示了日志。它们可以根据日期和严重程度来过滤。</p>
<h4>存储</h4>
<p>存储部分展示了已经安装的物理驱动器和 RAID 设备。例如大小、序列号等细节都被展示了出来。还展示了读/写活动和实际空间使用的图表。存储的具体日志显示在底部。</p>
<h4>网络</h4>
<p>这部分展示了发送和接收活动、IP 地址以及网络特定的日志。你还可以使用相应的按钮添加更多的网络设备，如绑定、网桥和 VLAN。</p>
<h4>账户</h4>
<p>这里展示了已有的账户。点击每个账户来管理，或使用创建新账户按钮来添加用户。账户也可以被删除。</p>
<h4>服务</h4>
<p>这部分可以让管理员查看系统所有服务的状态。点击任何服务都会转到一个包含启动、重启和禁用的标准任务的屏幕。</p>
<h4>应用程序</h4>
<p>通常，这个屏幕提供了各种用于管理功能的应用程序，例如 389 目录服务器或创建 Podman 容器。但在我的树莓派 OS 上，这个屏幕只显示“没有安装或可用的应用程序”。在写这篇文章的时候，这个或许还没有实现。虽然，你可能会怀疑这类型的程序对于树莓派硬件来说是否太过沉重。</p>
<h4>软件更新</h4>
<p>对任何系统管理员来说，保持软件最新是最重要的任务之一。Cockpit 的软件更新部分可以检查并进行更新。</p>
<p><img alt="Software updates in Cockpit" src="/data/attachment/album/202106/15/144102acghys7s9cg5sgus.png" title="Software updates in Cockpit"></p>
<h4>终端</h4>
<p>Cockpit 最方便的特点之一是终端。你可以使用它，而不是打开一个单独的终端模拟器并使用 SSH。我使用终端来安装 <a href="https://opensource.com/article/20/1/screenfetch-neofetch">ScreenFetch</a>：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>screenfetch
</code></pre></div>

<p>使用 ScreenFetch 生成了这张截图：</p>
<p><img alt="Terminal in Cockpit" src="/data/attachment/album/202106/15/144103ctlpg2pwpzpwtwx2.png" title="Terminal in Cockpit"></p>
<h3>使用 Cockpit 的中心控制</h3>
<p>Cockpit 在树莓派上的表现就像它在其他 Linux 系统上一样。你可以将它添加到仪表盘上进行集中控制。它允许企业在 Cockpit 作为管理仪表盘解决方案的任何地方，将基于树莓派的服务和系统整合到他们的整体 Linux 基础设施中。因为树莓派经常在高密度机架数据中心以<ruby> 无外接控制 <rt>  headless </rt></ruby>方式运行，而这些数据中心通常会缺乏 KVM 访问方式，这是非常方便的。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>