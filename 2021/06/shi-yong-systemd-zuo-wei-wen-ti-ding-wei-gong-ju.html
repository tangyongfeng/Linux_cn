<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>使用 systemd 作为问题定位工具</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: David Both 虽然 systemd 并非真正的故障定位工具，但其输出中的信息为解决问题指明了方向。 没有人会认为 systemd 是一个故障定位工 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li class="active"><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/06/shi-yong-systemd-zuo-wei-wen-ti-ding-wei-gong-ju.html" rel="bookmark"
           title="Permalink to 使用 systemd 作为问题定位工具">使用 systemd 作为问题定位工具</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-06-02T21:43:51+02:00">
                Published: Wed 02 June 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xi-tong-yun-wei">系统运维</a>.</p>

</footer><!-- /.post-info -->      <p>Author: David Both</p>
<blockquote>
<p>虽然 systemd 并非真正的故障定位工具，但其输出中的信息为解决问题指明了方向。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202106/02/214321uqzzrqza9mlt9iam.jpg" title="Magnifying glass on code"></p>
<p>没有人会认为 systemd 是一个故障定位工具，但当我的 web 服务器遇到问题时，我对 systemd 和它的一些功能的不断了解帮助我找到并规避了问题。</p>
<p>我遇到的问题是这样，我的服务器 yorktown 为我的家庭办公网络提供名称服务 、DHCP、NTP、HTTPD 和 SendMail 邮件服务，它在正常启动时未能启动 Apache HTTPD 守护程序。在我意识到它没有运行之后，我不得不手动启动它。这个问题已经持续了一段时间，我最近才开始尝试去解决它。</p>
<p>你们中的一些人会说，systemd 本身就是这个问题的原因，根据我现在了解的情况，我同意你们的看法。然而，我在使用 SystemV 时也遇到了类似的问题。（在本系列文章的 <a href="https://opensource.com/article/20/4/systemd">第一篇</a> 中，我探讨了围绕 systemd 作为旧有 SystemV 启动程序和启动脚本的替代品所产生的争议。如果你有兴趣了解更多关于 systemd 的信息，也可以阅读 <a href="https://opensource.com/article/20/4/systemd-startup">第二篇</a> 和 <a href="https://opensource.com/article/20/4/understanding-and-using-systemd-units">第三篇</a> 文章。）没有完美的软件，systemd 和 SystemV 也不例外，但 systemd 为解决问题提供的信息远远多于 SystemV。</p>
<h3>确定问题所在</h3>
<p>找到这个问题根源的第一步是确定 httpd 服务的状态：</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">yorktown</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># systemctl status httpd</span>
<span class="err">●</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">;</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">disabled</span><span class="p">)</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="p">(</span><span class="n">Result</span><span class="p">:</span><span class="w"> </span><span class="n">exit</span><span class="o">-</span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Thu</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">15</span><span class="nb">min</span><span class="w"> </span><span class="n">ago</span>
<span class="w">     </span><span class="n">Docs</span><span class="p">:</span><span class="w"> </span><span class="n">man</span><span class="p">:</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="w">  </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="mi">1101</span><span class="w"> </span><span class="n">ExecStart</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">$</span><span class="n">OPTIONS</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="n">FAILURE</span><span class="p">)</span>
<span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">1101</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="n">FAILURE</span><span class="p">)</span>
<span class="w">   </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Reading configuration...&quot;</span>
<span class="w">      </span><span class="n">CPU</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="n">ms</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">35</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">...</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">httpd</span><span class="p">[</span><span class="mi">1101</span><span class="p">]:</span><span class="w"> </span><span class="p">(</span><span class="mi">99</span><span class="p">)</span><span class="n">Cannot</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">address</span><span class="p">:</span><span class="w"> </span><span class="n">AH00072</span><span class="p">:</span><span class="w"> </span><span class="n">make_sock</span><span class="p">:</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.52</span><span class="p">:</span><span class="mi">80</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">httpd</span><span class="p">[</span><span class="mi">1101</span><span class="p">]:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">listening</span><span class="w"> </span><span class="n">sockets</span><span class="w"> </span><span class="n">available</span><span class="p">,</span><span class="w"> </span><span class="n">shutting</span><span class="w"> </span><span class="n">down</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">httpd</span><span class="p">[</span><span class="mi">1101</span><span class="p">]:</span><span class="w"> </span><span class="n">AH00015</span><span class="p">:</span><span class="w"> </span><span class="n">Unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="n">logs</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="n">FAILURE</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">:</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="s1">&#39;exit-code&#39;</span><span class="o">.</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">.</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">yorktown</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</code></pre></div>

<p>这种状态信息是 systemd 的功能之一，我觉得比 SystemV 提供的任何功能都要有用。这里的大量有用信息使我很容易得出逻辑性的结论，让我找到正确的方向。我从旧的 <code>chkconfig</code> 命令中得到的是服务是否在运行，以及如果它在运行的话，进程 ID（PID）是多少。这可没多大帮助。</p>
<p>该状态报告中的关键条目显示，HTTPD 不能与 IP 地址绑定，这意味着它不能接受传入的请求。这表明网络启动速度不够快，因为 IP 地址还没有设置好，所以 HTTPD 服务还没有准备好与 IP 地址绑定。这是不应该发生的，所以我查看了我的网络服务的 systemd 启动配置文件；在正确的 <code>after</code> 和 <code>requires</code> 语句下，所有这些似乎都没问题。下面是我服务器上的 <code>/lib/systemd/system/httpd.service</code> 文件：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">Modifying</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="ow">in</span><span class="o">-</span><span class="n">place</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">recommended</span><span class="p">,</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">overwritten</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">upgrades</span><span class="p">.</span><span class="w">  </span><span class="k">To</span><span class="w"> </span><span class="n">customize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span><span class="n">behaviour</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="ss">&quot;systemctl edit httpd&quot;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">unit</span><span class="p">.</span>

<span class="err">#</span><span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">(</span><span class="n">such</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">-</span><span class="n">D</span><span class="w"> </span><span class="n">definitions</span><span class="p">)</span><span class="w"> </span><span class="k">to</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">httpd</span><span class="w"> </span><span class="nc">binary</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">startup</span><span class="p">,</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="p">(</span><span class="k">as</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="k">by</span><span class="w">                             </span>
<span class="err">#</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">edit</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nl">following</span><span class="p">:</span><span class="w">                                           </span>

<span class="err">#</span><span class="w">    </span><span class="o">[</span><span class="n">Service</span><span class="o">]</span>
<span class="err">#</span><span class="w">    </span><span class="n">Environment</span><span class="o">=</span><span class="n">OPTIONS</span><span class="o">=-</span><span class="n">DMY_DEFINE</span><span class="w">             </span>

<span class="o">[</span><span class="n">Unit</span><span class="o">]</span><span class="w">                                               </span>
<span class="n">Description</span><span class="o">=</span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="n">Wants</span><span class="o">=</span><span class="n">httpd</span><span class="o">-</span><span class="n">init</span><span class="p">.</span><span class="n">service</span>
<span class="k">After</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="n">remote</span><span class="o">-</span><span class="n">fs</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="n">nss</span><span class="o">-</span><span class="n">lookup</span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="n">httpd</span><span class="o">-</span><span class="n">init</span><span class="p">.</span><span class="n">service</span>
<span class="n">Documentation</span><span class="o">=</span><span class="nl">man</span><span class="p">:</span><span class="n">httpd</span><span class="p">.</span><span class="n">service</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="o">[</span><span class="n">Service</span><span class="o">]</span>
<span class="n">Type</span><span class="o">=</span><span class="n">notify</span>
<span class="n">Environment</span><span class="o">=</span><span class="n">LANG</span><span class="o">=</span><span class="n">C</span>

<span class="n">ExecStart</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="err">$</span><span class="n">OPTIONS</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="n">ExecReload</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="err">$</span><span class="n">OPTIONS</span><span class="w"> </span><span class="o">-</span><span class="n">k</span><span class="w"> </span><span class="n">graceful</span>
<span class="err">#</span><span class="w"> </span><span class="n">Send</span><span class="w"> </span><span class="n">SIGWINCH</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">graceful</span><span class="w"> </span><span class="n">stop</span>
<span class="n">KillSignal</span><span class="o">=</span><span class="n">SIGWINCH</span>
<span class="n">KillMode</span><span class="o">=</span><span class="n">mixed</span>
<span class="n">PrivateTmp</span><span class="o">=</span><span class="k">true</span>

<span class="o">[</span><span class="n">Install</span><span class="o">]</span>
<span class="n">WantedBy</span><span class="o">=</span><span class="n">multi</span><span class="o">-</span><span class="k">user</span><span class="p">.</span><span class="n">target</span>
</code></pre></div>

<p><code>httpd.service</code> 单元文件明确规定，它应该在 <code>network.target</code> 和 <code>httpd-init.service</code>（以及其他）之后加载。我试着用 <code>systemctl list-units</code> 命令找到所有这些服务，并在结果数据流中搜索它们。所有这些服务都存在，应该可以确保在设置网络 IP 地址之前，httpd 服务没有加载。</p>
<h3>第一个解决方案</h3>
<p>在互联网上搜索了一下，证实其他人在 httpd 和其他服务也遇到了类似的问题。这似乎是由于其中一个所需的服务向 systemd 表示它已经完成了启动，但实际上它却启动了一个尚未完成的子进程。通过更多搜索，我想到了一个规避方法。</p>
<p>我搞不清楚为什么花了这么久才把 IP 地址分配给网卡。所以我想，如果我可以将 HTTPD 服务的启动推迟合理的一段时间，那么 IP 地址就会在那个时候分配。</p>
<p>幸运的是，上面的 <code>/lib/systemd/system/httpd.service</code> 文件提供了一些方向。虽然它说不要修改它，但是它还是指出了如何操作：使用 <code>systemctl edit httpd</code> 命令，它会自动创建一个新文件（<code>/etc/systemd/system/httpd.service.d/override.conf</code>）并打开 <a href="https://www.nano-editor.org/">GNU Nano</a> 编辑器（如果你对 Nano 不熟悉，一定要看一下 Nano 界面底部的提示）。</p>
<p>在新文件中加入以下代码并保存：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@yorktown ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="k">system</span><span class="o">/</span><span class="n">httpd</span><span class="p">.</span><span class="n">service</span><span class="p">.</span><span class="n">d</span><span class="o">/</span>
<span class="o">[</span><span class="n">root@yorktown httpd.service.d</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">ll</span>
<span class="n">total</span><span class="w"> </span><span class="mi">4</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">243</span><span class="w"> </span><span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">11</span><span class="err">:</span><span class="mi">43</span><span class="w"> </span><span class="n">override</span><span class="p">.</span><span class="n">conf</span>
<span class="o">[</span><span class="n">root@yorktown httpd.service.d</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">override</span><span class="p">.</span><span class="n">conf</span>
<span class="err">#</span><span class="w"> </span><span class="n">Trying</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">delay</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">startup</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">httpd</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="k">is</span>
<span class="err">#</span><span class="w"> </span><span class="n">fully</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">httpd</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">correct</span>
<span class="err">#</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">address</span>
<span class="err">#</span>
<span class="err">#</span><span class="w"> </span><span class="k">By</span><span class="w"> </span><span class="n">David</span><span class="w"> </span><span class="k">Both</span><span class="p">,</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">16</span>

<span class="o">[</span><span class="n">Service</span><span class="o">]</span>
<span class="n">ExecStartPre</span><span class="o">=/</span><span class="n">bin</span><span class="o">/</span><span class="n">sleep</span><span class="w"> </span><span class="mi">30</span>
</code></pre></div>

<p>这个覆盖文件的 <code>[Service]</code> 段有一行代码，将 HTTPD 服务的启动时间推迟了 30 秒。下面的状态命令显示了等待时间里的服务状态：</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">yorktown</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># systemctl status httpd</span>
<span class="err">●</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">;</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">disabled</span><span class="p">)</span>
<span class="w">  </span><span class="n">Drop</span><span class="o">-</span><span class="n">In</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span>
<span class="w">           </span><span class="err">└─</span><span class="n">override</span><span class="o">.</span><span class="n">conf</span>
<span class="w">           </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span>
<span class="w">           </span><span class="err">└─</span><span class="n">php</span><span class="o">-</span><span class="n">fpm</span><span class="o">.</span><span class="n">conf</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">activating</span><span class="w"> </span><span class="p">(</span><span class="n">start</span><span class="o">-</span><span class="n">pre</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Thu</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">16</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">29</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">28</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w">     </span><span class="n">Docs</span><span class="p">:</span><span class="w"> </span><span class="n">man</span><span class="p">:</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">Cntrl</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">1102</span><span class="w"> </span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>
<span class="w">    </span><span class="n">Tasks</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">38363</span><span class="p">)</span>
<span class="w">   </span><span class="n">Memory</span><span class="p">:</span><span class="w"> </span><span class="mf">260.0</span><span class="n">K</span>
<span class="w">      </span><span class="n">CPU</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="n">ms</span>
<span class="w">   </span><span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
<span class="w">           </span><span class="err">└─</span><span class="mi">1102</span><span class="w"> </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sleep</span><span class="w"> </span><span class="mi">30</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">29</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">...</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Started</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">.</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">yorktown</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</code></pre></div>

<p>这个命令显示了 30 秒延迟过后 HTTPD 服务的状态。该服务已经启动并正常运行。</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">yorktown</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># systemctl status httpd</span>
<span class="err">●</span><span class="w"> </span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="w">   </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">;</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">disabled</span><span class="p">)</span>
<span class="w">  </span><span class="n">Drop</span><span class="o">-</span><span class="n">In</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span>
<span class="w">           </span><span class="err">└─</span><span class="n">override</span><span class="o">.</span><span class="n">conf</span>
<span class="w">           </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span>
<span class="w">           </span><span class="err">└─</span><span class="n">php</span><span class="o">-</span><span class="n">fpm</span><span class="o">.</span><span class="n">conf</span>
<span class="w">   </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Thu</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">16</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">1</span><span class="nb">min</span><span class="w"> </span><span class="mi">18</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w">     </span><span class="n">Docs</span><span class="p">:</span><span class="w"> </span><span class="n">man</span><span class="p">:</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="w">  </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="mi">1102</span><span class="w"> </span><span class="n">ExecStartPre</span><span class="o">=/</span><span class="n">bin</span><span class="o">/</span><span class="n">sleep</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>
<span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">1567</span><span class="w"> </span><span class="p">(</span><span class="n">httpd</span><span class="p">)</span>
<span class="w">   </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Total requests: 0; Idle/Busy workers 100/0;Requests/sec: 0; Bytes served/sec:   0 B/sec&quot;</span>
<span class="w">    </span><span class="n">Tasks</span><span class="p">:</span><span class="w"> </span><span class="mi">213</span><span class="w"> </span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">38363</span><span class="p">)</span>
<span class="w">   </span><span class="n">Memory</span><span class="p">:</span><span class="w"> </span><span class="mf">21.8</span><span class="n">M</span>
<span class="w">      </span><span class="n">CPU</span><span class="p">:</span><span class="w"> </span><span class="mi">82</span><span class="n">ms</span>
<span class="w">   </span><span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">httpd</span><span class="o">.</span><span class="n">service</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">1567</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">1569</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">1570</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">├─</span><span class="mi">1571</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="w">           </span><span class="err">└─</span><span class="mi">1572</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>

<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">29</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">...</span>
<span class="n">Apr</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="n">yorktown</span><span class="o">.</span><span class="n">both</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Started</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">.</span>
</code></pre></div>

<p>我本来可以实验下更短的延迟时间是否也能奏效，但是我的系统并不用那么严格，所以我觉得不这样做。目前系统的工作状态很可靠，所以我很高兴。</p>
<p>因为我收集了所有这些信息，我将其作为 Bug<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1825554">1825554</a> 报告给红帽 Bugzilla。我相信报告 Bug 比抱怨 Bug 更有有用。</p>
<h3>更好的解决方案</h3>
<p>把这个问题作为 bug 上报几天后，我收到了回复，表示 systemd 只是一个管理工具，如果 httpd 需要在满足某些要求之后被拉起，需要在单元文件中表达出来。这个回复指引我去查阅 <code>httpd.service</code> 的手册页。我希望我能早点发现这个，因为它是比我自己想出的更优秀的解决方案。这种方案明确的针对了前置目标单元，而不仅仅是随机延迟。</p>
<p>来自 <a href="https://www.mankier.com/8/httpd.service#Description-Starting_the_service_at_boot_time">httpd.service 手册页</a>:</p>
<blockquote>
<p><strong>在启动时开启服务</strong></p>
<p><code>httpd.service</code> 和 <code>httpd.socket</code> 单元默认是 <em>禁用</em> 的。为了在启动阶段开启 httpd 服务，执行：<code>systemctl enable httpd.service</code>。在默认配置中，httpd 守护进程会接受任何配置好的 IPv4 或 IPv6 地址的 80 口上的连接（如果安装了 mod_ssl，就会接受 443 端口上的 TLS 连接）。</p>
<p>如果 httpd 被配置成依赖任一特定的 IP 地址（比如使用 <code>Listen</code> 指令），该地址可能只在启动阶段可用，又或者 httpd 依赖其他服务（比如数据库守护进程），那么必须配置该服务，以确保正确的启动顺序。</p>
<p>例如，为了确保 httpd 在所有配置的网络接口配置完成之后再运行，可以创建一个带有以下代码段的 drop-in 文件（如上述）：</p>
<p>```
[Unit]
After=network-online.target
Wants=network-online.target</p>
<p>```</p>
</blockquote>
<p>我仍然觉得这是个 bug，因为在 <code>httpd.conf</code> 配置文件中使用 Listen 指令是很常见的，至少在我的经验中。我一直在使用 Listen 指令，即使在只有一个 IP 地址的主机上，在多个网卡和 IP 地址的机器上这显然也是有必要的。在 <code>/usr/lib/systemd/system/httpd.service</code> 默认配置文件中加入上述几行，对不使用 <code>Listen</code> 指令的不会造成问题，对使用 <code>Listen</code> 指令的则会规避这个问题。</p>
<p>同时，我将使用建议的方法。</p>
<h3>下一步</h3>
<p>本文描述了一个我在服务器上启动 Apache HTTPD 服务时遇到的一个问题。它指引你了解我在解决这个问题上的思路，并说明了我是如何使用 systemd 来协助解决问题。我也介绍了我用 systemd 实现的规避方法，以及我按照我的 bug 报告得到的更好的解决方案。</p>
<p>如我在开头处提到的那样，这有很大可能是一个 systemd 的问题，特别是 httpd 启动的配置问题。尽管如此，systemd 还是提供了工具让我找到了问题的可能来源，并制定和实现了规避方案。两种方案都没有真正令我满意地解决问题。目前，这个问题根源依旧存在，必须要解决。如果只是在 <code>/usr/lib/systemd/system/httpd.service</code> 文件中添加推荐的代码，那对我来说是可行的。</p>
<p>在这个过程中我发现了一件事，我需要了解更多关于定义服务启动顺序的知识。我会在下一篇文章中探索这个领域，即本系列的第五篇。</p>
<h3>资源</h3>
<p>网上有大量的关于 systemd 的参考资料，但是大部分都有点简略、晦涩甚至有误导性。除了本文中提到的资料，下列的网页提供了跟多可靠且详细的 systemd 入门信息。</p>
<ul>
<li>Fedora 项目有一篇切实好用的 <a href="https://docs.fedoraproject.org/en-US/quick-docs/understanding-and-administering-systemd/index.html">systemd 入门</a>，它囊括了几乎所有你需要知道的关于如何使用 systemd 配置、管理和维护 Fedora 计算机的信息。</li>
<li>Fedora 项目也有一个不错的 <a href="https://fedoraproject.org/wiki/SysVinit_to_Systemd_Cheatsheet">备忘录</a>，交叉引用了过去 SystemV 命令和 systemd 命令做对比。</li>
<li>关于 systemd 的技术细节和创建这个项目的原因，请查看 <a href="http://Freedesktop.org">Freedesktop.org</a> 上的 <a href="http://www.freedesktop.org/wiki/Software/systemd">systemd 描述</a>。</li>
<li><a href="http://Linux.com">Linux.com</a> 的“更多 systemd 的乐趣”栏目提供了更多高级的 systemd <a href="https://www.linux.com/training-tutorials/more-systemd-fun-blame-game-and-stopping-services-prejudice/">信息和技巧</a>。</li>
</ul>
<p>此外，还有一系列深度的技术文章，是由 systemd 的设计者和主要开发者 Lennart Poettering 为 Linux 系统管理员撰写的。这些文章写于 2010 年 4 月至 2011 年 9 月间，但它们现在和当时一样具有现实意义。关于 systemd 及其生态的许多其他好文章都是基于这些文章：</p>
<ul>
<li><a href="http://0pointer.de/blog/projects/systemd.html">Rethinking PID 1</a></li>
<li><a href="http://0pointer.de/blog/projects/systemd-for-admins-1.html">systemd for Administrators，Part I</a></li>
<li><a href="http://0pointer.de/blog/projects/systemd-for-admins-2.html">systemd for Administrators，Part II</a></li>
<li><a href="http://0pointer.de/blog/projects/systemd-for-admins-3.html">systemd for Administrators，Part III</a></li>
<li><a href="http://0pointer.de/blog/projects/systemd-for-admins-4.html">systemd for Administrators，Part IV</a></li>
<li><a href="http://0pointer.de/blog/projects/three-levels-of-off.html">systemd for Administrators，Part V</a></li>
<li><a href="http://0pointer.de/blog/projects/changing-roots">systemd for Administrators，Part VI</a></li>
<li><a href="http://0pointer.de/blog/projects/blame-game.html">systemd for Administrators，Part VII</a></li>
<li><a href="http://0pointer.de/blog/projects/the-new-configuration-files.html">systemd for Administrators，Part VIII</a></li>
<li><a href="http://0pointer.de/blog/projects/on-etc-sysinit.html">systemd for Administrators，Part IX</a></li>
<li><a href="http://0pointer.de/blog/projects/instances.html">systemd for Administrators，Part X</a></li>
<li><a href="http://0pointer.de/blog/projects/inetd.html">systemd for Administrators，Part XI</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>