<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>使用 Linux 自动化工具提高生产率</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Matt Bargenquast 用 AutoKey 配置你的键盘，纠正常见的错别字，输入常用的短语等等。 AutoKey 是一个开源的 Linux 桌面自动化工具，一旦它成为你工 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/04/shi-yong-linux-zi-dong-hua-gong-ju-ti-gao-sheng-chan-lu.html" rel="bookmark"
           title="Permalink to 使用 Linux 自动化工具提高生产率">使用 Linux 自动化工具提高生产率</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-04-30T11:12:00+02:00">
                Published: Fri 30 April 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Matt Bargenquast</p>
<blockquote>
<p>用 AutoKey 配置你的键盘，纠正常见的错别字，输入常用的短语等等。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202104/30/111130s7ffji6cmb7rkcfx.jpg" title="Linux keys on the keyboard for a desktop computer"></p>
<p><a href="https://github.com/autokey/autokey">AutoKey</a> 是一个开源的 Linux 桌面自动化工具，一旦它成为你工作流程的一部分，你就会想，如何没有它，那该怎么办。它可以成为一种提高生产率的变革性工具，或者仅仅是减少与打字有关的身体压力的一种方式。</p>
<p>本文将研究如何安装和开始使用 AutoKey ，介绍一些可以立即在工作流程中使用的简单方法，并探讨 AutoKey 高级用户可能会感兴趣的一些高级功能。</p>
<h3>安装并设置 AutoKey</h3>
<p>AutoKey 在许多 Linux 发行版中都是现成的软件包。该项目的 <a href="https://github.com/autokey/autokey/wiki/Installing">安装指南</a> 包含许多平台的说明，也包括了从源代码进行构建的指导。本文使用 Fedora 作为操作平台。</p>
<p>AutoKey 有两个变体：为像 GNOME 等基于 <a href="https://www.gtk.org/">GTK</a> 环境而设计的 autokey-gtk 和基于 <a href="https://www.qt.io/">QT</a> 的 autokey-qt。</p>
<p>你可以从命令行安装任一变体：</p>
<div class="highlight"><pre><span></span><code>sudo dnf install autokey-gtk
</code></pre></div>

<p>安装完成后，使用 <code>autokey-gtk</code>（或 <code>autokey-qt</code>）运行它。</p>
<h3>探究界面</h3>
<p>在将 AutoKey 设置为在后台运行并自动执行操作之前，你首先需要对其进行配置。调出用户界面（UI）配置：</p>
<div class="highlight"><pre><span></span><code>autokey-gtk -c
</code></pre></div>

<p>AutoKey 提供了一些预设配置的示例。你可能希望在熟悉 UI 时将他们留作备用，但是可以根据需要删除它们。</p>
<p><img alt="AutoKey 用户界面" src="/data/attachment/album/202104/30/111205r73r3nn3wxar33nx.png" title="AutoKey UI"></p>
<p>左侧窗格包含一个文件夹式的短语和脚本的层次结构。“<ruby> 短语 <rt>  Phrases </rt></ruby>” 代表要让 AutoKey 输入的文本。“<ruby> 脚本 <rt>  Scripts </rt></ruby>” 是动态的、程序化的等效项，可以使用 Python 编写，并且获得与键盘击键发送到活动窗口基本相同的结果。</p>
<p>右侧窗格构建和配置短语和脚本。</p>
<p>对配置满意后，你可能希望在登录时自动运行 AutoKey，这样就不必每次都启动它。你可以通过在 “<ruby> 首选项 <rt>  Preferences </rt></ruby>”菜单（“<ruby> 编辑 -&gt; 首选项 <rt>  Edit -&gt; Preferences” </rt></ruby>”）中勾选 “<ruby> 登录时自动启动 AutoKey <rt>  Automatically start AutoKey at login </rt></ruby>”进行配置。</p>
<p><img alt="登录时自动启动 AutoKey" src="/data/attachment/album/202104/30/111205wpjo49ophu724tt2.png" title="Automatically start AutoKey at login"></p>
<h3>使用 AutoKey 纠正常见的打字排版错误</h3>
<p>修复常见的打字排版错误对于 AutoKey 来说是一个容易解决的问题。例如，我始终键入 “gerp” 来代替 “grep”。这里是如何配置 AutoKey 为你解决这些类型问题。</p>
<p>创建一个新的子文件夹，可以在其中将所有“打字排版错误校正”配置分组。在左侧窗格中选择 “My Phrases” ，然后选择 “<ruby> 文件 -&gt; 新建 -&gt; 子文件夹 <rt>  File -&gt; New -&gt; Subfolder </rt></ruby>”。将子文件夹命名为 “Typos”。</p>
<p>在 “<ruby> 文件 -&gt; 新建 -&gt; 短语 <rt>  File -&gt; New -&gt; Phrase </rt></ruby>” 中创建一个新短语。并将其称为 “grep”。</p>
<p>通过高亮选择短语 “grep”，然后在 <ruby> 输入短语内容 <rt>  Enter phrase contents </rt></ruby>部分（替换默认的 “Enter phrase contents” 文本）中输入 “grep” ，配置 AutoKey 插入正确的关键词。</p>
<p>接下来，通过定义缩写来设置 AutoKey 如何触发此短语。点击用户界面底部紧邻 “<ruby> 缩写 <rt>  Abbreviations </rt></ruby>” 的 “<ruby> 设置 <rt>  Set </rt></ruby>”按钮。</p>
<p>在弹出的对话框中，单击 “<ruby> 添加 <rt>  Add </rt></ruby>” 按钮，然后将 “gerp” 添加为新的缩写。勾选 “<ruby> 删除键入的缩写 <rt>  Remove typed abbreviation </rt></ruby>”；此选项让 AutoKey 将任何键入 “gerp” 一词的替换为 “grep”。请不要勾选“<ruby> 在键入单词的一部分时触发 <rt>  Trigger when typed as part of a word </rt></ruby>”，这样，如果你键入包含 “grep”的单词（例如 “fingerprint”），就不会尝试将其转换为 “fingreprint”。仅当将 “grep” 作为独立的单词键入时，此功能才有效。</p>
<p><img alt="在 AutoKey 中设置缩写" src="/data/attachment/album/202104/30/111206en1zhspvlnbjghlh.png" title="Set abbreviation in AutoKey"></p>
<h3>限制对特定应用程序的更正</h3>
<p>你可能希望仅在某些应用程序（例如终端窗口）中打字排版错误时才应用校正。你可以通过设置 <ruby> 窗口过滤器 <rt>  Window Filter </rt></ruby>进行配置。单击 “<ruby> 设置 <rt>  Set </rt></ruby>” 按钮来定义。</p>
<p>设置<ruby> 窗口过滤器 <rt>  Window Filter </rt></ruby>的最简单方法是让 AutoKey 为你检测窗口类型：</p>
<ol>
<li>启动一个新的终端窗口。</li>
<li>返回 AutoKey，单击 “<ruby> 检测窗口属性 <rt>  Detect Window Properties </rt></ruby>”按钮。</li>
<li>单击终端窗口。</li>
</ol>
<p>这将自动填充窗口过滤器，可能的窗口类值为 <code>gnome-terminal-server.Gnome-terminal</code>。这足够了，因此单击 “OK”。</p>
<p><img alt="AutoKey 窗口过滤器" src="/data/attachment/album/202104/30/111206emyyozpeyy59coyc.png" title="AutoKey Window Filter"></p>
<h3>保存并测试</h3>
<p>对新配置满意后，请确保将其保存。 单击 “<ruby> 文件 <rt>  File </rt></ruby>” ，然后选择 “<ruby> 保存 <rp>  （ </rp> <rt>  Save </rt> <rp>  ） </rp></ruby>” 以使更改生效。</p>
<p>现在进行重要的测试！在你的终端窗口中，键入 “gerp” 紧跟一个空格，它将自动更正为 “grep”。要验证窗口过滤器是否正在运行，请尝试在浏览器 URL 栏或其他应用程序中键入单词 “gerp”。它并没有变化。</p>
<p>你可能会认为，使用 <a href="https://opensource.com/article/19/7/bash-aliases">shell 别名</a> 可以轻松解决此问题，我完全赞成！与别名不同，只要是面向命令行，无论你使用什么应用程序，AutoKey 都可以按规则纠正错误。</p>
<p>例如，我在浏览器，集成开发环境和终端中输入的另一个常见打字错误 “openshfit” 替代为 “openshift”。别名不能完全解决此问题，而 AutoKey 可以在任何情况下纠正它。</p>
<h3>键入常用短语</h3>
<p>你可以通过许多其他方法来调用 AutoKey 的短语来帮助你。例如，作为从事 OpenShift 的站点可靠性工程师（SRE），我经常在命令行上输入 Kubernetes 命名空间名称：</p>
<div class="highlight"><pre><span></span><code>oc get pods -n openshift-managed-upgrade-operator
</code></pre></div>

<p>这些名称空间是静态的，因此它们是键入特定命令时 AutoKey 可以为我插入的理想短语。</p>
<p>为此，我创建了一个名为 “Namespaces” 的短语子文件夹，并为我经常键入的每个命名空间添加了一个短语条目。</p>
<h3>分配热键</h3>
<p>接下来，也是最关键的一点，我为子文件夹分配了一个 “<ruby> 热键 <rt>  hotkey </rt></ruby>”。每当我按下该热键时，它都会打开一个菜单，我可以在其中选择（要么使用 “方向键”+回车键要么使用数字）要插入的短语。这减少了我仅需几次击键就可以输入这些命令的击键次数。</p>
<p>“My Phrases” 文件夹中 AutoKey 的预配置示例使用 <code>Ctrl+F7</code> 热键进行配置。如果你将示例保留在 AutoKey 的默认配置中，请尝试一下。你应该在此处看到所有可用短语的菜单。使用数字或箭头键选择所需的项目。</p>
<h3>高级自动键入</h3>
<p>AutoKey 的 <a href="https://autokey.github.io/index.html">脚本引擎</a> 允许用户运行可以通过相同的缩写和热键系统调用的 Python 脚本。这些脚本可以通过支持的 API 的函数来完成诸如切换窗口、发送按键或执行鼠标单击之类的操作。</p>
<p>AutoKey 用户非常欢迎这项功能，发布了自定义脚本供其他用户采用。例如，<a href="https://github.com/luziferius/autokey_scripts">NumpadIME 脚本</a> 将数字键盘转换为旧的手机样式的文本输入方法，<a href="https://github.com/AlienKevin/Emojis-AutoKey">Emojis-AutoKey</a> 可以通过将诸如: <code>:smile:</code> 之类的短语转换为它们等价的表情符号来轻松插入。</p>
<p>这是我设置的一个小脚本，该脚本进入 Tmux 的复制模式，以将前一行中的第一个单词复制到粘贴缓冲区中：</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="c1"># 发送 Tmux 命令前缀（b 更改为 s）</span>
<span class="n">keyboard</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;&lt;ctr&gt;+s&quot;</span><span class="p">)</span>
<span class="c1"># Enter copy mode</span>
<span class="n">keyboard</span><span class="o">.</span><span class="n">send_key</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c1"># Move cursor up one line</span>
<span class="n">keyboard</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c1"># Move cursor to start of line</span>
<span class="n">keyboard</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c1"># Start mark</span>
<span class="n">keyboard</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c1"># Move cursor to end of word</span>
<span class="n">keyboard</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c1"># Add to copy buffer</span>
<span class="n">keyboard</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s2">&quot;&lt;ctrl&gt;+m&quot;</span><span class="p">)</span>
</code></pre></div>

<p>之所以有 <code>sleep</code> 函数，是因为 Tmux 有时无法跟上 AutoKey 发送击键的速度，并且它们对整体执行时间的影响可忽略不计。</p>
<h3>使用 AutoKey 自动化</h3>
<p>我希望你喜欢这篇使用 AutoKey 进行键盘自动化的探索，它为你提供了有关如何改善工作流程的一些好主意。如果你在使用 AutoKey 时有什么有用的或新颖的方法，一定要在下面的评论中分享。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>