<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>如何在 Ubuntu 服务器上安装桌面环境（GUI）</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Chris Patrick Carias Stas 你想在你的 Ubuntu 服务器上安装 GUI 吗？大部分情况下你是可以安装的，在本教程中我会详细介绍安装的步骤。 在正 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li class="active"><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/05/ru-he-zai-ubuntu-fu-wu-qi-shang-an-zhuang-zhuo-mian-huan-jing-gui.html" rel="bookmark"
           title="Permalink to 如何在 Ubuntu 服务器上安装桌面环境（GUI）">如何在 Ubuntu 服务器上安装桌面环境（GUI）</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-05-20T11:00:33+02:00">
                Published: Thu 20 May 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xi-tong-yun-wei">系统运维</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Chris Patrick Carias Stas</p>
<p><img alt="" src="/data/attachment/album/202105/20/110026zm3mmam0iztaaczz.jpg"></p>
<p>你想在你的 Ubuntu 服务器上安装 GUI 吗？大部分情况下你是可以安装的，在本教程中我会详细介绍安装的步骤。</p>
<p>在正式开始之前，我来告诉你为什么服务器版的 Ubuntu 不带 GUI，以及在什么情况下你可以在服务器上安装 GUI。</p>
<h3>为什么 Ubuntu 服务器没有 GUI？</h3>
<p>你对比过 Ubuntu 的桌面版和服务器版会发现，两者的主要区别是服务器版缺少 GUI（比如 <a href="https://itsfoss.com/what-is-desktop-environment/">桌面环境</a>）。Ubuntu 服务器基本上就是桌面版去掉图形模块后的降级版本。</p>
<p>这是刻意为之的。Linux 服务器需要占用系统资源来运行服务。图形化桌面环境会消耗大量的系统资源，因此服务器操作系统默认不包含桌面环境。</p>
<p>你可以在只有 512 MB RAM 的机器上使用 Ubuntu 服务器，但是 Ubuntu 桌面需要至少 2 GB 的 RAM 才能提供正常的功能。在服务器运行桌面环境被认为是浪费资源。</p>
<p>作为一个服务器使用者（或系统管理员），你应该通过命令行来使用和管理你的系统。为了达到这个水平，你需要掌握丰富的 Linux 命令相关的知识。</p>
<p><img alt="Typically, you have to manage a server from the command line" src="/data/attachment/album/202105/20/110033myd4jtxyu7oukx34.png"></p>
<h3>你是否真正需要在你的服务器上安装 GUI？</h3>
<p>有些用户可能不太习惯在终端下使用命令行来完成工作。毕竟大部分用户是有条件通过图形界面操作计算机的。</p>
<p>你可能会在你的服务器上安装桌面环境并使用图形界面。大部分人不会这么干，但这是可行的。</p>
<p>但是这只有在你可以直接操作服务器时才行得通。假设你是在物理机器上运行它，比如服务器、台式机或笔记本电脑，抑或类似树莓派的设备。如果你可以直接操作宿主机系统，那么你还可以在运行在虚拟机上的服务器上安装。</p>
<p>如果你是通过 <a href="https://linuxhandbook.com/free-linux-cloud-servers/">云服务器提供商如 Linode、DigitalOcean 或 AWS</a> 部署的服务器，那么安装 GUI 就行不通了。如果你想通过图形界面来管理你的远程服务器，你可以使用 Webmin 或 <a href="https://linuxhandbook.com/cockpit/">Cockpit</a> 等工具。你可以在 Web 浏览器中通过这些工具使用和管理你的服务器。相比于成熟的桌面环境，它能大大降低资源消耗。</p>
<p><img alt="Tools like Cockpit allow managing Linux servers graphically" src="/data/attachment/album/202105/20/110033no8z3dyayakg7od7.png"></p>
<h3>如何在 Ubuntu 服务器上安装 GUI？</h3>
<p>当你了解了基础知识后，我们一起来看看在 Ubuntu 服务器上安装桌面环境的步骤。</p>
<p>你需要做以下准备：</p>
<ul>
<li>已经配置好 Ubuntu 服务器，且 RAM 至少 2 GB</li>
<li>管理员权限（你需要用 <code>sudo</code> 执行命令）</li>
<li>网络连接正常（你需要下载和安装新包）</li>
</ul>
<p>我是在虚拟机上安装的 Ubuntu 服务器，并且我可以直接操作宿主机器。我使用同样的方法<a href="https://itsfoss.com/install-ubuntu-server-raspberry-pi/">在树莓派上安装了 Ubuntu 服务器</a>。</p>
<blockquote>
<p>注意！</p>
<p>如果你是出于学习和调研等实验性的目的，那么你可以进行这些操作。请不要在生产环境的服务器上添加 GUI。后续删除 GUI 时可能会导致依赖问题，有些情况会破坏系统。</p>
</blockquote>
<h4>准备系统</h4>
<p>首先，因为你将要做一些系统级的修改，因此先进行更新和升级以确保我们系统的包是最新的：</p>
<div class="highlight"><pre><span></span><code>sudo apt update &amp;&amp; sudo apt upgrade
</code></pre></div>

<h4>安装桌面环境</h4>
<p>更新结束后，你就可以安装桌面环境了。</p>
<p>有两种方法：</p>
<ul>
<li>使用 <a href="https://itsfoss.com/apt-command-guide/">apt</a> 来安装包</li>
<li>使用一个名为 <a href="https://manpages.ubuntu.com/manpages/bionic/man8/tasksel.8.html">tasksel</a> 的 Debian 工具，这个工具可以通过一条龙处理（任务）方式来安装多个包</li>
</ul>
<p>任何一种方法都可以用完整包的方式来安装完整的桌面环境，就跟你从头安装桌面版本一样。我的意思是你可以得到跟桌面版本一样的所有的默认应用程序和工具。</p>
<p>如果你想使用 <code>tasksel</code>，需要先用下面的命令安装它：</p>
<div class="highlight"><pre><span></span><code>sudo apt install tasksel
</code></pre></div>

<p>执行结束后，你就可以用 <code>tasksel</code> 来安装桌面环境（也叫 DE）了。</p>
<p>你可能知道有 <a href="https://itsfoss.com/best-linux-desktop-environments/">很多可用的桌面环境</a>。你可以选择自己喜欢的一个。有些桌面环境对系统资源占用得多（像 GNOME），有些占用得少（像 Xfce、MATE 等等）。</p>
<p>你可以自己决定使用哪个 DE。我会安装 <a href="https://www.gnome.org/">GNOME 桌面</a>，因为它是 Ubuntu 默认的桌面。之后我也会介绍其他桌面的安装。</p>
<p>如果你使用的是 <code>tasksel</code>，执行下面这条命令：</p>
<div class="highlight"><pre><span></span><code>sudo tasksel install ubuntu-desktop
</code></pre></div>

<p>如果你使用 <code>apt</code>，执行下面这条命令：</p>
<div class="highlight"><pre><span></span><code>sudo apt install ubuntu-desktop
</code></pre></div>

<p>这个过程可能会持续几分钟到一个小时，执行速度取决于你的网速和硬件。</p>
<p>我想提醒下，上面两个命令执行后都会安装完整的 GNOME 桌面环境。在本文中我两个命令都会执行，两个命令的结果是一样的。</p>
<h4>安装和配置显示管理器</h4>
<p>安装完成后，你需要一个名为 <a href="https://itsfoss.com/display-manager/">显示管理器</a> 或“登录管理器”的组件。这个工具的功能是在管理用户对话和鉴权时启动 <a href="https://itsfoss.com/display-server/">显示服务器</a> 并加载桌面。</p>
<p>GNOME 桌面默认使用 GDM3 作为显示管理器，但从资源角度考虑它有点重。你可以使用更轻量级和资源友好的管理器。这里我们使用一个平台无关的显示管理器 <a href="https://wiki.debian.org/LightDM">lightdm</a>。使用 <code>apt</code> 安装它：</p>
<div class="highlight"><pre><span></span><code>sudo apt install lightdm
</code></pre></div>

<p>安装 lightdm 时系统会让我们选择默认的显示管理器，因为即使你可以安装多个管理器，也只能运行一个。</p>
<p><img alt="Use the arrow key to select an option and then use the tab key to select  and press enter" src="/data/attachment/album/202105/20/110034cboov3kmo5gd6dby.png"></p>
<p>选择列表中的 “lightdm” 并点击 “<Ok>”。这应该用不了几分钟。完成后你可以用下面的命令启动显示管理器并加载 GUI：</p>
<div class="highlight"><pre><span></span><code>sudo service lightdm start
</code></pre></div>

<p>你可以使用下面的命令来检查当前的显示管理器：</p>
<div class="highlight"><pre><span></span><code>cat /etc/X11/default-display-manager
</code></pre></div>

<p>运行后得到的结果类似这样：</p>
<p><img alt="Checking the default Display Manager" src="/data/attachment/album/202105/20/110034wg8rrevvv8rzeew4.png"></p>
<p>如果一切顺利，你现在会来到欢迎界面。</p>
<p><img alt="Greetings screen of GNOME Desktop with LightDM on an Ubuntu server" src="/data/attachment/album/202105/20/110035fmszs8z4rt2ebrke.png"></p>
<p>输入你的凭证，你的桌面就运行起来了。</p>
<p><img alt="GNOME Desktop fully loaded on Ubutnu server" src="/data/attachment/album/202105/20/110036i1jjbdj4sn64zjj3.png"></p>
<p>如果你想关闭 GUI，那么打开一个终端并输入：</p>
<div class="highlight"><pre><span></span><code>sudo service lightdm stop
</code></pre></div>

<h4>安装其他的桌面环境（可选）</h4>
<p>前面我说过我们可以选择不同的桌面。我们一起来看看一些其他的选项：</p>
<h5>MATE</h5>
<p><a href="https://mate-desktop.org/">MATE</a> 是基于 GNOME2 源码的轻量级桌面，它完全开源，是一个不错的选项。</p>
<p>用下面的命令来安装 MATE：</p>
<div class="highlight"><pre><span></span><code>sudo tasksel install ubuntu-mate-core
</code></pre></div>

<p>或</p>
<div class="highlight"><pre><span></span><code>sudo apt install ubuntu-mate-core
</code></pre></div>

<h5>Lubuntu / LXDE/LXQT</h5>
<p>如果你的系统资源有限或者电脑很旧，那么我推荐另一个轻量级的 <a href="https://lubuntu.net/">Lubuntu</a>。使用下面的命令安装它：</p>
<div class="highlight"><pre><span></span><code>sudo tasksel install lubuntu-core
</code></pre></div>

<p>或</p>
<div class="highlight"><pre><span></span><code>sudo apt install lubuntu-core
</code></pre></div>

<h5>Xubuntu / Xfce</h5>
<p><a href="https://xubuntu.org/">Xubuntu</a> 是基于 <a href="https://www.xfce.org/">Xfce</a> 的 Ubuntu 衍生版，轻量、简单、稳定但可高度定制。如果你想使用它，执行下面的命令：</p>
<div class="highlight"><pre><span></span><code>sudo tasksel install xubuntu-core
</code></pre></div>

<p>或</p>
<div class="highlight"><pre><span></span><code>sudo apt install xubuntu-core
</code></pre></div>

<p>还有一些桌面没有列出来，像 <a href="https://itsfoss.com/install-kde-on-ubuntu/">KDE</a>，<a href="https://itsfoss.com/install-cinnamon-on-ubuntu/">Cinnamon</a> 和 <a href="https://itsfoss.com/install-budgie-ubuntu/">Budgie</a>，不代表它们不好，它们也都是非常卓越的，你可以自己尝试安装它们。</p>
<h3>如何从 Ubuntu 服务器上删除 GUI？</h3>
<p>如果你觉得桌面环境占用了太多的计算资源，你可以把之前安装的包删除掉。</p>
<p>请注意在某些情况下删除 GUI 可能会带来依赖问题，因此请备份好重要数据或创建一个系统快照。</p>
<ul>
<li><a href="https://itsfoss.com/uninstall-programs-ubuntu/">如何从 Ubuntu 上删除包</a></li>
</ul>
<div class="highlight"><pre><span></span><code>sudo apt remove ubuntu-desktop
sudo apt remove lightdm
sudo apt autoremove
sudo service lightdm stop
</code></pre></div>

<p>现在重启你的系统。你应该回到了正常的命令行登录。</p>
<h3>结语</h3>
<p>在大多数场景下是可以安装桌面 GUI 的。如果你不适应命令行，那么请使用类似 <a href="https://yunohost.org/">YunoHost</a> 的发行版的服务器，YunoHost 基于 Debian 系统，你可以通过 GUI 来管理服务器。</p>
<p>上面说了，如果你是从头安装系统，那么我建议你使用桌面版本以避免后续的步骤。</p>
<p>如果你有任何问题，请在评论区留言。你会在服务器上使用 GUI 吗？参照本文后你遇到了什么问题吗？</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>