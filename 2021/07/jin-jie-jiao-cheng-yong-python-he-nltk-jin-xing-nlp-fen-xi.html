<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>进阶教程：用 Python 和 NLTK 进行 NLP 分析</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Girish Managoli 进一步学习自然语言处理的基本概念 在 之前的文章 里，我介绍了 自然语言处理 natural language processing （NLP）和宾夕法尼亚大学研发 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/07/jin-jie-jiao-cheng-yong-python-he-nltk-jin-xing-nlp-fen-xi.html" rel="bookmark"
           title="Permalink to 进阶教程：用 Python 和 NLTK 进行 NLP 分析">进阶教程：用 Python 和 NLTK 进行 NLP 分析</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-07-21T11:56:00+02:00">
                Published: Wed 21 July 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Girish Managoli</p>
<blockquote>
<p>进一步学习自然语言处理的基本概念</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202107/21/115633k8l9nkqowqkowpwm.jpg" title="Brain on a computer screen"></p>
<p>在 <a href="https://opensource.com/article/20/8/intro-python-nltk">之前的文章</a> 里，我介绍了<ruby> 自然语言处理 <rt>  natural language processing </rt></ruby>（NLP）和宾夕法尼亚大学研发的<ruby> 自然语言处理工具包 <rt>  Natural Language Toolkit </rt></ruby> (<a href="http://www.nltk.org/">NLTK</a>)。我演示了用 Python 解析文本和定义<ruby> 停顿词 <rt>  stopword </rt></ruby>的方法，并介绍了<ruby> 语料库 <rt>  corpus </rt></ruby>的概念。语料库是由文本构成的数据集，通过提供现成的文本数据来辅助文本处理。在这篇文章里，我将继续用各种语料库对文本进行对比和分析。</p>
<p>这篇文章主要包括以下部分：</p>
<ul>
<li><ruby> 词网 <rt>  WordNet </rt></ruby>和<ruby> 同义词集 <rt>  synset </rt></ruby></li>
<li><ruby> 相似度比较 <rt>  Similarity comparison </rt></ruby></li>
<li><ruby> 树 <rt>  Tree </rt></ruby>和<ruby> 树库 <rt>  treebank </rt></ruby></li>
<li><ruby> 命名实体识别 <rt>  Named entity recognition </rt></ruby></li>
</ul>
<h3>词网和同义词集</h3>
<p><ruby> <a href="https://en.wikipedia.org/wiki/WordNet">  词网 </a> <rt>  WordNet </rt></ruby> 是 NLTK 里的一个大型词汇数据库语料库。词网包含各单词的诸多<ruby> 认知同义词 <rt>  cognitive synonyms </rt></ruby>（认知同义词常被称作“<ruby> 同义词集 <rt>  synset </rt></ruby>”）。在词网里，名词、动词、形容词和副词，各自被组织成一个同义词的网络。</p>
<p>词网是一个很有用的文本分析工具。它有面向多种语言的版本（汉语、英语、日语、俄语和西班牙语等），也使用多种许可证（从开源许可证到商业许可证都有）。初代版本的词网由普林斯顿大学研发，面向英语，使用<ruby> 类 MIT 许可证 <rt>  MIT-like license </rt></ruby>。</p>
<p>因为一个词可能有多个意义或多个词性，所以可能与多个同义词集相关联。每个同义词集通常提供下列属性：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>定义</strong></th>
<th><strong>例子</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><ruby> 名称 <rt>  Name </rt></ruby></td>
<td>此同义词集的名称</td>
<td>单词 <code>code</code> 有 5 个同义词集，名称分别是 <code>code.n.01</code>、 <code>code.n.02</code>、 <code>code.n.03</code>、<code>code.v.01</code> 和 <code>code.v.02</code></td>
</tr>
<tr>
<td><ruby> 词性 <rt>  POS </rt></ruby></td>
<td>此同义词集的词性</td>
<td>单词 <code>code</code> 有 3 个名词词性的同义词集和 2 个动词词性的同义词集</td>
</tr>
<tr>
<td><ruby> 定义 <rt>  Definition </rt></ruby></td>
<td>该词作对应词性时的定义</td>
<td>动词 <code>code</code> 的一个定义是：（计算机科学）数据或计算机程序指令的<ruby> 象征性排列 <rt>  symbolic arrangement </rt></ruby></td>
</tr>
<tr>
<td><ruby> 例子 <rt>  Example </rt></ruby></td>
<td>使用该词的例子</td>
<td><code>code</code> 一词的例子：We should encode the message for security reasons</td>
</tr>
<tr>
<td><ruby> 词元 <rt>  Lemma </rt></ruby></td>
<td>与该词相关联的其他同义词集（包括那些不一定严格地是该词的同义词，但可以大体看作同义词的）；词元直接与其他词元相关联，而不是直接与<ruby> 单词 <rt>  word </rt></ruby>相关联</td>
<td><code>code.v.02</code> 的词元是 <code>code.v.02.encipher</code>、<code>code.v.02.cipher</code>、<code>code.v.02.cypher</code>、<code>code.v.02.encrypt</code>、<code>code.v.02.inscribe</code> 和 <code>code.v.02.write_in_code</code></td>
</tr>
<tr>
<td><ruby> 反义词 <rt>  Antonym </rt></ruby></td>
<td>意思相反的词</td>
<td>词元 <code>encode.v.01.encode</code> 的反义词是 <code>decode.v.01.decode</code></td>
</tr>
<tr>
<td><ruby> 上义词 <rt>  Hypernym </rt></ruby></td>
<td>该词所属的一个范畴更大的词</td>
<td><code>code.v.01</code> 的一个上义词是 <code>tag.v.01</code></td>
</tr>
<tr>
<td><ruby> 分项词 <rt>  Meronym </rt></ruby></td>
<td>属于该词组成部分的词</td>
<td><code>computer</code> 的一个分项词是 <code>chip</code></td>
</tr>
<tr>
<td><ruby> 总项词 <rt>  Holonym </rt></ruby></td>
<td>该词作为组成部分所属的词</td>
<td><code>window</code> 的一个总项词是 <code>computer screen</code></td>
</tr>
</tbody>
</table>
<p>同义词集还有一些其他属性，在 <code>&lt;你的 Python 安装路径&gt;/Lib/site-packages</code> 下的 <code>nltk/corpus/reader/wordnet.py</code>，你可以找到它们。</p>
<p>下面的代码或许可以帮助理解。</p>
<p>这个函数：</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">wordnet</span>

<span class="k">def</span> <span class="nf">synset_info</span><span class="p">(</span><span class="n">synset</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;POS:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Definition:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">definition</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Examples:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">examples</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Lemmas:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">lemmas</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Antonyms:&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">lemma</span><span class="o">.</span><span class="n">antonyms</span><span class="p">()</span> <span class="k">for</span> <span class="n">lemma</span> <span class="ow">in</span> <span class="n">synset</span><span class="o">.</span><span class="n">lemmas</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lemma</span><span class="o">.</span><span class="n">antonyms</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hypernyms:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">hypernyms</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Instance Hypernyms:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">instance_hypernyms</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Part Holonyms:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">part_holonyms</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Part Meronyms:&quot;</span><span class="p">,</span> <span class="n">synset</span><span class="o">.</span><span class="n">part_meronyms</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">()</span>


<span class="n">synsets</span> <span class="o">=</span> <span class="n">wordnet</span><span class="o">.</span><span class="n">synsets</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">synsets</span><span class="p">),</span> <span class="s2">&quot;synsets:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">synset</span> <span class="ow">in</span> <span class="n">synsets</span><span class="p">:</span>
    <span class="n">synset_info</span><span class="p">(</span><span class="n">synset</span><span class="p">)</span>
</code></pre></div>

<p>将会显示：</p>
<div class="highlight"><pre><span></span><code><span class="mf">5</span><span class="w"> </span><span class="n">synsets</span><span class="p">:</span>
<span class="n">Name</span><span class="w"> </span><span class="n">code</span><span class="mf">.</span><span class="n">n</span><span class="mf">.01</span>
<span class="nb">POS</span><span class="p">:</span><span class="w"> </span><span class="n">n</span>
<span class="kd">Def</span><span class="n">inition</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">principles</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">laws</span><span class="w"> </span><span class="p">(</span><span class="n">especially</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="kr">on</span><span class="n">es</span><span class="p">)</span>
<span class="n">Examples</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Lemmas</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">n</span><span class="mf">.01.</span><span class="n">code</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">n</span><span class="mf">.01.</span><span class="n">codification</span><span class="err">&#39;</span><span class="p">)</span><span class="err">]</span>
<span class="n">Antonyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Hypernyms</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Synset</span><span class="p">(</span><span class="err">&#39;</span><span class="n">written_communication</span><span class="mf">.</span><span class="n">n</span><span class="mf">.01</span><span class="err">&#39;</span><span class="p">)</span><span class="err">]</span>
<span class="n">Instance</span><span class="w"> </span><span class="n">Hpernyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Part</span><span class="w"> </span><span class="n">Holonyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Part</span><span class="w"> </span><span class="n">Meronyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>

<span class="mf">...</span>

<span class="n">Name</span><span class="w"> </span><span class="n">code</span><span class="mf">.</span><span class="n">n</span><span class="mf">.03</span>
<span class="nb">POS</span><span class="p">:</span><span class="w"> </span><span class="n">n</span>
<span class="kd">Def</span><span class="n">inition</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">computer</span><span class="w"> </span><span class="n">science</span><span class="p">)</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">symbolic</span><span class="w"> </span><span class="n">arrangement</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="kd">data</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">computer</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">instructions</span>
<span class="n">Examples</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Lemmas</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">n</span><span class="mf">.03.</span><span class="n">code</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">n</span><span class="mf">.03.</span><span class="n">computer_code</span><span class="err">&#39;</span><span class="p">)</span><span class="err">]</span>
<span class="n">Antonyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Hypernyms</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Synset</span><span class="p">(</span><span class="err">&#39;</span><span class="n">coding_system</span><span class="mf">.</span><span class="n">n</span><span class="mf">.01</span><span class="err">&#39;</span><span class="p">)</span><span class="err">]</span>
<span class="n">Instance</span><span class="w"> </span><span class="n">Hpernyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Part</span><span class="w"> </span><span class="n">Holonyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Part</span><span class="w"> </span><span class="n">Meronyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>

<span class="mf">...</span>

<span class="n">Name</span><span class="w"> </span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02</span>
<span class="nb">POS</span><span class="p">:</span><span class="w"> </span><span class="n">v</span>
<span class="kd">Def</span><span class="n">inition</span><span class="p">:</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="ow">or</span><span class="n">dinary</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="nb">int</span><span class="n">o</span><span class="w"> </span><span class="n">code</span>
<span class="n">Examples</span><span class="p">:</span><span class="w"> </span><span class="err">[&#39;</span><span class="n">We</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">encode</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">reasons</span><span class="err">&#39;]</span>
<span class="n">Lemmas</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02.</span><span class="n">code</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02.</span><span class="n">encipher</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02.</span><span class="n">cipher</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02.</span><span class="n">cypher</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02.</span><span class="n">encrypt</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02.</span><span class="n">inscribe</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="n">Lemma</span><span class="p">(</span><span class="err">&#39;</span><span class="n">code</span><span class="mf">.</span><span class="n">v</span><span class="mf">.02.</span><span class="n">write_in_code</span><span class="err">&#39;</span><span class="p">)</span><span class="err">]</span>
<span class="n">Antonyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Hypernyms</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">Synset</span><span class="p">(</span><span class="err">&#39;</span><span class="n">encode</span><span class="mf">.</span><span class="n">v</span><span class="mf">.01</span><span class="err">&#39;</span><span class="p">)</span><span class="err">]</span>
<span class="n">Instance</span><span class="w"> </span><span class="n">Hpernyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Part</span><span class="w"> </span><span class="n">Holonyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
<span class="n">Part</span><span class="w"> </span><span class="n">Meronyms</span><span class="p">:</span><span class="w"> </span><span class="err">[]</span>
</code></pre></div>

<p><ruby> 同义词集 <rt>  synset </rt></ruby>和<ruby> 词元 <rt>  lemma </rt></ruby>在词网里是按照树状结构组织起来的，下面的代码会给出直观的展现：</p>
<div class="highlight"><pre><span></span><code><span class="nv">def</span><span class="w"> </span><span class="nv">hypernyms</span><span class="ss">(</span><span class="nv">synset</span><span class="ss">)</span>:
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">synset</span>.<span class="nv">hypernyms</span><span class="ss">()</span>

<span class="nv">synsets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">wordnet</span>.<span class="nv">synsets</span><span class="ss">(</span><span class="s1">&#39;soccer&#39;</span><span class="ss">)</span>
<span class="k">for</span><span class="w"> </span><span class="nv">synset</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">synsets</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="nv">synset</span>.<span class="nv">name</span><span class="ss">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; tree:&quot;</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">pprint</span><span class="ss">(</span><span class="nv">synset</span>.<span class="nv">tree</span><span class="ss">(</span><span class="nv">rel</span><span class="o">=</span><span class="nv">hypernyms</span><span class="ss">))</span>
<span class="w">    </span><span class="nv">print</span><span class="ss">()</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>code.n.01 tree:
[Synset(&#39;code.n.01&#39;),
 [Synset(&#39;written_communication.n.01&#39;),
   ...

code.n.02 tree:
[Synset(&#39;code.n.02&#39;),
 [Synset(&#39;coding_system.n.01&#39;),
   ...

code.n.03 tree:
[Synset(&#39;code.n.03&#39;),
   ...

code.v.01 tree:
[Synset(&#39;code.v.01&#39;),
 [Synset(&#39;tag.v.01&#39;),
   ...

code.v.02 tree:
[Synset(&#39;code.v.02&#39;),
 [Synset(&#39;encode.v.01&#39;),
   ...
</code></pre></div>

<p>词网并没有涵盖所有的单词和其信息（现今英语有约 17,0000 个单词，最新版的 词网 涵盖了约 15,5000 个），但它开了个好头。掌握了“词网”的各个概念后，如果你觉得它词汇少，不能满足你的需要，可以转而使用其他工具。或者，你也可以打造自己的“词网”！</p>
<h4>自主尝试</h4>
<p>使用 Python 库，下载维基百科的 “<a href="https://en.wikipedia.org/wiki/Open_source">open source</a>” 页面，并列出该页面所有单词的<ruby> 同义词集 <rt>  synset </rt></ruby>和<ruby> 词元 <rt>  lemma </rt></ruby>。</p>
<h3>相似度比较</h3>
<p>相似度比较的目的是识别出两篇文本的相似度，在搜索引擎、聊天机器人等方面有很多应用。</p>
<p>比如，相似度比较可以识别 <code>football</code> 和 <code>soccer</code> 是否有相似性。</p>
<div class="highlight"><pre><span></span><code>syn1 = wordnet.synsets(&#39;football&#39;)
syn2 = wordnet.synsets(&#39;soccer&#39;)

<span class="gh">#</span> 一个单词可能有多个 同义词集，需要把 word1 的每个同义词集和 word2 的每个同义词集分别比较
for s1 in syn1:
    for s2 in syn2:
        print(&quot;Path similarity of: &quot;)
        print(s1, &#39;(&#39;, s1.pos(), &#39;)&#39;, &#39;[&#39;, s1.definition(), &#39;]&#39;)
        print(s2, &#39;(&#39;, s2.pos(), &#39;)&#39;, &#39;[&#39;, s2.definition(), &#39;]&#39;)
        print(&quot;   is&quot;, s1.path_similarity(s2))
        print()
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">Path</span><span class="w"> </span><span class="n">similarity</span><span class="w"> </span><span class="n">of</span><span class="p">:</span>
<span class="n">Synset</span><span class="p">(</span><span class="s1">&#39;football.n.01&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">games</span><span class="w"> </span><span class="n">played</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="p">(</span><span class="nb">round</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">oval</span><span class="p">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">teams</span><span class="w"> </span><span class="n">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">kick</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">carry</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">propel</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">other</span><span class="s1">&#39;s goal ]</span>
<span class="n">Synset</span><span class="p">(</span><span class="s1">&#39;soccer.n.01&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">football</span><span class="w"> </span><span class="n">game</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">teams</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="n">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">kick</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">opponents</span><span class="s1">&#39; goal ]</span>
<span class="w">   </span><span class="k">is</span><span class="w"> </span><span class="mf">0.5</span>

<span class="n">Path</span><span class="w"> </span><span class="n">similarity</span><span class="w"> </span><span class="n">of</span><span class="p">:</span>
<span class="n">Synset</span><span class="p">(</span><span class="s1">&#39;football.n.02&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">inflated</span><span class="w"> </span><span class="n">oblong</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">playing</span><span class="w"> </span><span class="n">American</span><span class="w"> </span><span class="n">football</span><span class="w"> </span><span class="p">]</span>
<span class="n">Synset</span><span class="p">(</span><span class="s1">&#39;soccer.n.01&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">football</span><span class="w"> </span><span class="n">game</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">teams</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="n">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">kick</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">ball</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">opponents</span><span class="s1">&#39; goal ]</span>
<span class="w">   </span><span class="k">is</span><span class="w"> </span><span class="mf">0.05</span>
</code></pre></div>

<p>两个词各个同义词集之间<ruby> 路径相似度 <rt>  path similarity </rt></ruby>最大的是 0.5，表明它们关联性很大（<a href="https://www.nltk.org/howto/wordnet.html"><ruby> 路径相似度 <rt>  path similarity </rt></ruby></a>指两个词的意义在<ruby> 上下义关系的词汇分类结构 <rt>  hypernym/hypnoym taxonomy </rt></ruby>中的最短距离）。</p>
<p>那么 <code>code</code> 和 <code>bug</code> 呢？这两个计算机领域的词的相似度是：</p>
<div class="highlight"><pre><span></span><code><span class="nv">Path</span><span class="w"> </span><span class="nv">similarity</span><span class="w"> </span><span class="nv">of</span>:
<span class="nv">Synset</span><span class="ss">(</span><span class="s1">&#39;code.n.01&#39;</span><span class="ss">)</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>[<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">rules</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">principles</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">laws</span><span class="w"> </span><span class="ss">(</span><span class="nv">especially</span><span class="w"> </span><span class="nv">written</span><span class="w"> </span><span class="nv">ones</span><span class="ss">)</span><span class="w"> </span>]
<span class="nv">Synset</span><span class="ss">(</span><span class="s1">&#39;bug.n.02&#39;</span><span class="ss">)</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>[<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">fault</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">defect</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">computer</span><span class="w"> </span><span class="nv">program</span>,<span class="w"> </span><span class="nv">system</span>,<span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">machine</span><span class="w"> </span>]
<span class="w">   </span><span class="nv">is</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">1111111111111111</span>
...
<span class="nv">Path</span><span class="w"> </span><span class="nv">similarity</span><span class="w"> </span><span class="nv">of</span>:
<span class="nv">Synset</span><span class="ss">(</span><span class="s1">&#39;code.n.02&#39;</span><span class="ss">)</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>[<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">coding</span><span class="w"> </span><span class="nv">system</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">transmitting</span><span class="w"> </span><span class="nv">messages</span><span class="w"> </span><span class="nv">requiring</span><span class="w"> </span><span class="nv">brevity</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">secrecy</span><span class="w"> </span>]
<span class="nv">Synset</span><span class="ss">(</span><span class="s1">&#39;bug.n.02&#39;</span><span class="ss">)</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>[<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">fault</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">defect</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">computer</span><span class="w"> </span><span class="nv">program</span>,<span class="w"> </span><span class="nv">system</span>,<span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">machine</span><span class="w"> </span>]
<span class="w">   </span><span class="nv">is</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">09090909090909091</span>
...
<span class="nv">Path</span><span class="w"> </span><span class="nv">similarity</span><span class="w"> </span><span class="nv">of</span>:
<span class="nv">Synset</span><span class="ss">(</span><span class="s1">&#39;code.n.03&#39;</span><span class="ss">)</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>[<span class="w"> </span><span class="ss">(</span><span class="nv">computer</span><span class="w"> </span><span class="nv">science</span><span class="ss">)</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">symbolic</span><span class="w"> </span><span class="nv">arrangement</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">instructions</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">computer</span><span class="w"> </span><span class="nv">program</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">instructions</span><span class="w"> </span>]
<span class="nv">Synset</span><span class="ss">(</span><span class="s1">&#39;bug.n.02&#39;</span><span class="ss">)</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>[<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">fault</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">defect</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">computer</span><span class="w"> </span><span class="nv">program</span>,<span class="w"> </span><span class="nv">system</span>,<span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">machine</span><span class="w"> </span>]
<span class="w">   </span><span class="nv">is</span><span class="w"> </span><span class="mi">0</span>.<span class="mi">09090909090909091</span>
</code></pre></div>

<p>这些是这两个词各同义词集之间<ruby> 路径相似度 <rt>  path similarity </rt></ruby>的最大值，这些值表明两个词是有关联性的。</p>
<p>NLTK 提供多种<ruby> 相似度计分器 <rt>  similarity scorers </rt></ruby>，比如：</p>
<ul>
<li>path_similarity</li>
<li>lch_similarity</li>
<li>wup_similarity</li>
<li>res_similarity</li>
<li>jcn_similarity</li>
<li>lin_similarity</li>
</ul>
<p>要进一步了解这些<ruby> 相似度计分器 <rt>  similarity scorers </rt></ruby>，请查看 <a href="https://www.nltk.org/howto/wordnet.html">WordNet Interface</a> 的 Similarity 部分。</p>
<h4>自主尝试</h4>
<p>使用 Python 库，从维基百科的 <a href="https://en.wikipedia.org/wiki/Category:Lists_of_computer_terms">Category: Lists of computer terms</a> 生成一个术语列表，然后计算各术语之间的相似度。</p>
<h3>树和树库</h3>
<p>使用 NLTK，你可以把文本表示成树状结构以便进行分析。</p>
<p>这里有一个例子：</p>
<p>这是一份简短的文本，对其做预处理和词性标注：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">nltk</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;I love open source&quot;</span>
<span class="c1"># Tokenize to words</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">tokenize</span><span class="o">.</span><span class="n">word_tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># POS tag the words</span>
<span class="n">words_tagged</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">pos_tag</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
</code></pre></div>

<p>要把文本转换成树状结构，你必须定义一个<ruby> 语法 <rt>  grammar </rt></ruby>。这个例子里用的是一个基于 <a href="https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html">Penn Treebank tags</a> 的简单语法。</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="nx">simple</span><span class="w"> </span><span class="nx">grammar</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="nx">tree</span>
<span class="nx">grammar</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;NP: {&amp;lt;JJ&amp;gt;&amp;lt;NN&amp;gt;}&quot;</span>
</code></pre></div>

<p>然后用这个<ruby> 语法 <rt>  grammar </rt></ruby>创建一颗<ruby> 树 <rt>  tree </rt></ruby>：</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> Create tree
parser = nltk.RegexpParser(grammar)
tree = parser.parse(words_tagged)
pprint(tree)
</code></pre></div>

<p>运行上面的代码，将得到：</p>
<div class="highlight"><pre><span></span><code>Tree(&#39;S&#39;, [(&#39;I&#39;, &#39;PRP&#39;), (&#39;love&#39;, &#39;VBP&#39;), Tree(&#39;NP&#39;, [(&#39;open&#39;, &#39;JJ&#39;), (&#39;source&#39;, &#39;NN&#39;)])])
</code></pre></div>

<p>你也可以图形化地显示结果。</p>
<div class="highlight"><pre><span></span><code>tree.draw()
</code></pre></div>

<p><img alt="NLTK Tree" src="/data/attachment/album/202107/21/115644oswzxowwad5ldxww.jpg" title="NLTK Tree"></p>
<p>这个树状结构有助于准确解读文本的意思。比如，用它可以找到文本的 <a href="https://en.wikipedia.org/wiki/Subject_(grammar)">主语</a>：</p>
<div class="highlight"><pre><span></span><code>subject_tags = [&quot;NN&quot;, &quot;NNS&quot;, &quot;NP&quot;, &quot;NNP&quot;, &quot;NNPS&quot;, &quot;PRP&quot;, &quot;PRP$&quot;]
def subject(sentence_tree):
    for tagged_word in sentence_tree:
        # A crude logic for this case -  first word with these tags is considered subject
        if tagged_word[1] in subject_tags:
            return tagged_word[0]

print(&quot;Subject:&quot;, subject(tree))
</code></pre></div>

<p>结果显示主语是 <code>I</code>：</p>
<div class="highlight"><pre><span></span><code><span class="n">Subject</span><span class="o">:</span><span class="w"> </span><span class="n">I</span>
</code></pre></div>

<p>这是一个比较基础的文本分析步骤，可以用到更广泛的应用场景中。 比如，在聊天机器人方面，如果用户告诉机器人：“给我妈妈 Jane 预订一张机票，1 月 1 号伦敦飞纽约的”，机器人可以用这种分析方法解读这个指令：</p>
<p><strong>动作</strong>: 预订<br>
<strong>动作的对象</strong>: 机票<br>
<strong>乘客</strong>: Jane<br>
<strong>出发地</strong>: 伦敦<br>
<strong>目的地</strong>: 纽约<br>
<strong>日期</strong>: （明年）1 月 1 号</p>
<p><ruby> 树库 <rt>  treebank </rt></ruby>指由许多预先标注好的<ruby> 树 <rt>  tree </rt></ruby>构成的语料库。现在已经有面向多种语言的树库，既有开源的，也有限定条件下才能免费使用的，以及商用的。其中使用最广泛的是面向英语的宾州树库。宾州树库取材于<ruby> 华尔街日报 <rt>  Wall Street Journal </rt></ruby>。NLTK 也包含了宾州树库作为一个子语料库。下面是一些使用<ruby> 树库 <rt>  treebank </rt></ruby>的方法：</p>
<div class="highlight"><pre><span></span><code>words = nltk.corpus.treebank.words()
print(len(words), &quot;words:&quot;)
print(words)

tagged_sents = nltk.corpus.treebank.tagged_sents()
print(len(tagged_sents), &quot;sentences:&quot;)
print(tagged_sents)
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">100676</span><span class="w"> </span><span class="n">words</span><span class="p">:</span>
<span class="err">[&#39;</span><span class="n">Pierre</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Vinken</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="p">,</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="mf">61</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">years</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">old</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="p">,</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">...</span><span class="err">]</span>
<span class="mf">3914</span><span class="w"> </span><span class="n">sentences</span><span class="p">:</span>
<span class="err">[[</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Pierre</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">NNP</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">Vinken</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">NNP</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="p">,</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="p">,</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="mf">61</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">CD</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">years</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">NNS</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">old</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">JJ</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="p">,</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="p">,</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">will</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">MD</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">join</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">VB</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">the</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">DT</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">board</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">NN</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">as</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">IN</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">a</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">DT</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">nonexecutive</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">JJ</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="err">&#39;</span><span class="n">director</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">NN</span><span class="err">&#39;</span><span class="p">),</span><span class="w"> </span><span class="mf">...</span><span class="err">]</span>
</code></pre></div>

<p>查看一个句子里的各个<ruby> 标签 <rt>  tags </rt></ruby>：</p>
<div class="highlight"><pre><span></span><code>sent0 = tagged_sents[0]
pprint(sent0)
</code></pre></div>

<div class="highlight"><pre><span></span><code>[(&#39;Pierre&#39;, &#39;NNP&#39;),
 (&#39;Vinken&#39;, &#39;NNP&#39;),
 (&#39;,&#39;, &#39;,&#39;),
 (&#39;61&#39;, &#39;CD&#39;),
 (&#39;years&#39;, &#39;NNS&#39;),
...
</code></pre></div>

<p>定义一个<ruby> 语法 <rt>  grammar </rt></ruby>来把这个句子转换成树状结构：</p>
<div class="highlight"><pre><span></span><code><span class="k">grammar</span> = <span class="s">&#39;&#39;&#39;</span>
<span class="s">    Subject: {&lt;NNP&gt;&lt;NNP&gt;}</span>
<span class="s">    SubjectInfo: {&lt;CD&gt;&lt;NNS&gt;&lt;JJ&gt;}</span>
<span class="s">    Action: {&lt;MD&gt;&lt;VB&gt;}</span>
<span class="s">    Object: {&lt;DT&gt;&lt;NN&gt;}</span>
<span class="s">    Stopwords: {&lt;IN&gt;&lt;DT&gt;}</span>
<span class="s">    ObjectInfo: {&lt;JJ&gt;&lt;NN&gt;}</span>
<span class="s">    When: {&lt;NNP&gt;&lt;CD&gt;}</span>
<span class="s">&#39;&#39;&#39;</span>
<span class="n">parser</span> = <span class="n">nltk</span>.<span class="n">RegexpParser</span>(<span class="k">grammar</span>)
<span class="nb">tree</span> = <span class="n">parser</span>.<span class="nb">parse</span>(<span class="n">sent0</span>)
<span class="nb">print</span>(<span class="nb">tree</span>)
</code></pre></div>

<div class="highlight"><pre><span></span><code>(S
  (Subject Pierre/NNP Vinken/NNP)
  ,/,
  (SubjectInfo 61/CD years/NNS old/JJ)
  ,/,
  (Action will/MD join/VB)
  (Object the/DT board/NN)
  as/IN
  a/DT
  (ObjectInfo nonexecutive/JJ director/NN)
  (Subject Nov./NNP)
  29/CD
  ./.)
</code></pre></div>

<p>图形化地显示：</p>
<div class="highlight"><pre><span></span><code>tree.draw()
</code></pre></div>

<p><img alt="NLP Treebank image" src="/data/attachment/album/202107/21/115645kama1atb5maab93a.jpg" title="NLP Treebank image"></p>
<p><ruby> 树 <rt>  trees </rt></ruby>和<ruby> 树库 <rt>  treebanks </rt></ruby>的概念是文本分析的一个强大的组成部分。</p>
<h4>自主尝试</h4>
<p>使用 Python 库，下载维基百科的 “<a href="https://en.wikipedia.org/wiki/Open_source">open source</a>” 页面，将得到的文本以图形化的树状结构展现出来。</p>
<h3>命名实体识别</h3>
<p>无论口语还是书面语都包含着重要数据。文本处理的主要目标之一，就是提取出关键数据。几乎所有应用场景所需要提取关键数据，比如航空公司的订票机器人或者问答机器人。 NLTK 为此提供了一个<ruby> 命名实体识别 <rt>  named entity recognition </rt></ruby>的功能。</p>
<p>这里有一个代码示例：</p>
<div class="highlight"><pre><span></span><code>sentence = &#39;Peterson first suggested the name &quot;open source&quot; at Palo Alto, California&#39;
</code></pre></div>

<p>验证这个句子里的<ruby> 人名 <rt>  name </rt></ruby>和<ruby> 地名 <rt>  place </rt></ruby>有没有被识别出来。照例先预处理：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">nltk</span>

<span class="n">words</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">word_tokenize</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
<span class="n">pos_tagged</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">pos_tag</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
</code></pre></div>

<p>运行<ruby> 命名实体标注器 <rt>  named-entity tagger </rt></ruby>：</p>
<div class="highlight"><pre><span></span><code>ne_tagged = nltk.ne_chunk(pos_tagged)
print(&quot;NE tagged text:&quot;)
print(ne_tagged)
print()
</code></pre></div>

<div class="highlight"><pre><span></span><code>NE tagged text:
(S
  (PERSON Peterson/NNP)
  first/RB
  suggested/VBD
  the/DT
  name/NN
  ``/``
  open/JJ
  source/NN
  &#39;&#39;/&#39;&#39;
  at/IN
  (FACILITY Palo/NNP Alto/NNP)
  ,/,
  (GPE California/NNP))
</code></pre></div>

<p>上面的结果里，命名实体被识别出来并做了标注；只提取这个<ruby> 树 <rt>  tree </rt></ruby>里的命名实体：</p>
<div class="highlight"><pre><span></span><code>print(&quot;Recognized named entities:&quot;)
for ne in ne_tagged:
    if hasattr(ne, &quot;label&quot;):
        print(ne.label(), ne[0:])
</code></pre></div>

<div class="highlight"><pre><span></span><code>Recognized named entities:
PERSON [(&#39;Peterson&#39;, &#39;NNP&#39;)]
FACILITY [(&#39;Palo&#39;, &#39;NNP&#39;), (&#39;Alto&#39;, &#39;NNP&#39;)]
GPE [(&#39;California&#39;, &#39;NNP&#39;)]
</code></pre></div>

<p>图形化地显示：</p>
<div class="highlight"><pre><span></span><code>ne_tagged.draw()
</code></pre></div>

<p><img alt="NLTK Treebank tree" src="/data/attachment/album/202107/21/115645ghz7j75kwzls2gj5.jpg" title="NLTK Treebank tree"></p>
<p>NLTK 内置的<ruby> 命名实体标注器 <rt>  named-entity tagger </rt></ruby>，使用的是宾州法尼亚大学的 <a href="https://www.ldc.upenn.edu/collaborations/past-projects/ace">Automatic Content Extraction</a>（ACE）程序。该标注器能够识别<ruby> 组织机构 <rt>  ORGANIZATION </rt></ruby><ruby> 、人名 <rt>  PERSON </rt></ruby><ruby> 、地名 <rt>  LOCATION </rt></ruby><ruby> 、设施 <rt>  FACILITY </rt></ruby>和<ruby> 地缘政治实体 <rt>  geopolitical entity </rt></ruby>等常见<ruby> 实体 <rt>  entites </rt></ruby>。</p>
<p>NLTK 也可以使用其他<ruby> 标注器 <rt>  tagger </rt></ruby>，比如 <a href="https://nlp.stanford.edu/software/CRF-NER.html">Stanford Named Entity Recognizer</a>. 这个经过训练的标注器用 Java 写成，但 NLTK 提供了一个使用它的接口（详情请查看 <a href="https://www.nltk.org/_modules/nltk/parse/stanford.html">nltk.parse.stanford</a> 或 <a href="https://www.nltk.org/_modules/nltk/tag/stanford.html">nltk.tag.stanford</a>）。</p>
<h4>自主尝试</h4>
<p>使用 Python 库，下载维基百科的 “<a href="https://en.wikipedia.org/wiki/Open_source">open source</a>” 页面，并识别出对<ruby> 开源 <rt>  open source </rt></ruby>有影响力的人的名字，以及他们为<ruby> 开源 <rt>  open source </rt></ruby>做贡献的时间和地点。</p>
<h3>高级实践</h3>
<p>如果你准备好了，尝试用这篇文章以及此前的文章介绍的知识构建一个<ruby> 超级结构 <rt>  superstructure </rt></ruby>。</p>
<p>使用 Python 库，下载维基百科的 “<a href="https://en.wikipedia.org/wiki/Category:Computer_science">Category: Computer science page</a>”，然后：</p>
<ul>
<li>找出其中频率最高的<ruby> 单词 <rt>  unigrams </rt></ruby><ruby> 、二元搭配 <rt>  bigrams </rt></ruby>和<ruby> 三元搭配 <rt>  trigrams </rt></ruby>，将它们作为一个关键词列表或者技术列表。相关领域的学生或者工程师需要了解这样一份列表里的内容。</li>
<li>图形化地显示这个领域里重要的人名、技术、日期和地点。这会是一份很棒的信息图。</li>
<li>构建一个搜索引擎。你的搜索引擎性能能够超过维基百科吗？</li>
</ul>
<h3>下一步？</h3>
<p>自然语言处理是<ruby> 应用构建 <rt>  application building </rt></ruby>的典型支柱。NLTK 是经典、丰富且强大的工具集，提供了为现实世界构建有吸引力、目标明确的应用的工作坊。</p>
<p>在这个系列的文章里，我用 NLTK 作为例子，展示了自然语言处理可以做什么。自然语言处理和 NLTK 还有太多东西值得探索，这个系列的文章只是帮助你探索它们的切入点。</p>
<p>如果你的需求增长到 NLTK 已经满足不了了，你可以训练新的模型或者向 NLTK 添加新的功能。基于 NLTK 构建的新的自然语言处理库正在不断涌现，机器学习也正被深度用于自然语言处理。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>