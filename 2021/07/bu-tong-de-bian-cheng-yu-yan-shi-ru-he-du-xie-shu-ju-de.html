<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>不同的编程语言是如何读写数据的</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Alan Smithee 每种编程语言都有其独特的完成任务的方式，这也说明了为什么有这么多语言可供选择。 在 Jim Hall 的《不同的编程语 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/07/bu-tong-de-bian-cheng-yu-yan-shi-ru-he-du-xie-shu-ju-de.html" rel="bookmark"
           title="Permalink to 不同的编程语言是如何读写数据的">不同的编程语言是如何读写数据的</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-07-20T06:54:11+02:00">
                Published: Tue 20 July 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Alan Smithee</p>
<blockquote>
<p>每种编程语言都有其独特的完成任务的方式，这也说明了为什么有这么多语言可供选择。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202107/20/065355dfr3f1zmf7fpzmw7.jpg" title="Code going into a computer."></p>
<p>在 Jim Hall 的《<a href="https://opensource.com/article/21/4/compare-programming-languages">不同的编程语言如何完成相同的事情</a>》文章中，他演示了 13 种不同的语言如何使用不同的语法来完成同一个任务。经验是，编程语言往往有很多相似之处。一旦你了解了一种编程语言，你就可以通过理解它的语法和结构来学习另一种。</p>
<p>本着同样的精神，Jim 的文章比较了不同编程语言如何读写数据。无论数据来自配置文件还是用户创建的文件，在存储设备上处理数据都是程序员的常见任务。以这种方式涵盖所有编程语言是不切实际的，但最近的 <a href="http://Opensource.com">Opensource.com</a> 系列文章提供了对这些编程语言采用的不同方法的深入了解：</p>
<ul>
<li><a href="https://opensource.com/article/21/3/file-io-c">C</a></li>
<li><a href="https://opensource.com/article/21/3/ccc-input-output">C++</a></li>
<li><a href="https://opensource.com/article/21/3/io-java">Java</a></li>
<li><a href="https://opensource.com/article/21/4/groovy-io">Groovy</a></li>
<li><a href="https://opensource.com/article/21/3/lua-files">Lua</a></li>
<li><a href="https://opensource.com/article/21/3/input-output-bash">Bash</a></li>
<li><a href="https://opensource.com/article/21/6/reading-and-writing-files-python">Python</a></li>
</ul>
<h3>读写数据</h3>
<p>用计算机读写数据的过程和你在现实生活中读写数据的过程类似。要访问书中的数据，你首先要打开它，然后阅读单词或将生词写入书中，然后合上书。</p>
<p>当程序需要从文件中读取数据时，你向程序传入一个文件位置，然后计算机将该数据读入内存中并解析它。同样，当程序需要将数据写入文件时，计算机会将新数据放入系统的内存写入缓冲区，然后将其同步到存储设备上的文件中。</p>
<p>下面是这些操作的一些伪代码：</p>
<ol>
<li>在内存中加载文件。</li>
<li>读取文件内容，或将数据写入文件。</li>
<li>关闭文件。</li>
</ol>
<h3>从文件中读取数据</h3>
<p>从 <a href="http://Opensource.com">Opensource.com</a> 系列文章的语言中，你可以看到读取文件的三种趋势。</p>
<h4>C</h4>
<p>在 C 语言中，打开文件可能涉及检索单个字符（直到 <code>EOF</code> 指示符，表示文件结束）或一个数据块，具体取决于你的需求和方法。根据你的目标，它可能感觉像一个主要是手工的过程，但这正是其他语言所模仿的。</p>
<div class="highlight"><pre><span></span><code>FILE *infile;
int ch;

infile = fopen(argv[1], &quot;r&quot;);

do {
  ch = fgetc(infile);
  if (ch != EOF) {
    printf(&quot;%c&quot;, ch);
  }
 } while (ch != EOF);

fclose(infile);
</code></pre></div>

<p>你还可以选择将文件的某些部分加载到系统缓冲区中，然后在缓冲区外工作。</p>
<div class="highlight"><pre><span></span><code>FILE *infile;
char buffer[300];

infile = fopen(argv[1], &quot;r&quot;);

while (!feof(infile)) {
  size_t buffer_length;
  buffer_length = fread(buffer, sizeof(char), 300, infile);
}

printf(&quot;%s&quot;, buffer);
fclose(infile);
</code></pre></div>

<h4>C++</h4>
<p>C++ 简化了一些步骤，允许你将数据解析为字符串。</p>
<div class="highlight"><pre><span></span><code><span class="nt">std</span><span class="p">::</span><span class="nd">string</span><span class="w"> </span><span class="nt">sFilename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;example.txt&quot;</span><span class="o">;</span>

<span class="nt">std</span><span class="p">::</span><span class="nd">ifstream</span><span class="w"> </span><span class="nt">fileSource</span><span class="o">(</span><span class="nt">sFilename</span><span class="o">);</span>
<span class="nt">std</span><span class="p">::</span><span class="nd">string</span><span class="w"> </span><span class="nt">buffer</span><span class="o">;</span>

<span class="nt">while</span><span class="w"> </span><span class="o">(</span><span class="nt">fileSource</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nt">buffer</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">std</span><span class="p">:</span><span class="o">:</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h4>Java</h4>
<p>Java 和 Groovy 类似于 C++。它们使用名为 <code>Scanner</code> 的类来设置数据流或对象，这样就会包含你选择的文件内容。你可以通过标记（字节、行、整数等）扫描文件。</p>
<div class="highlight"><pre><span></span><code><span class="nv">File</span><span class="w"> </span><span class="nv">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">File</span><span class="ss">(</span><span class="s2">&quot;example.txt&quot;</span><span class="ss">)</span><span class="c1">;</span>

<span class="nv">Scanner</span><span class="w"> </span><span class="nv">myScanner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Scanner</span><span class="ss">(</span><span class="nv">myFile</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="nv">myScanner</span>.<span class="nv">hasNextLine</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">String</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">myScanner</span>.<span class="nv">nextLine</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="nv">line</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span>}

<span class="nv">myScanner</span>.<span class="nv">close</span><span class="ss">()</span><span class="c1">;</span>
</code></pre></div>

<h4>Groovy</h4>
<div class="highlight"><pre><span></span><code><span class="nv">def</span><span class="w"> </span><span class="nv">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">File</span><span class="ss">(</span><span class="s1">&#39;example.txt&#39;</span><span class="ss">)</span>

<span class="nv">def</span><span class="w"> </span><span class="nv">myScanner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Scanner</span><span class="ss">(</span><span class="nv">myFile</span><span class="ss">)</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="nv">myScanner</span>.<span class="nv">hasNextLine</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">myScanner</span>.<span class="nv">nextLine</span><span class="ss">()</span>
<span class="w">    </span><span class="nv">println</span><span class="ss">(</span><span class="nv">line</span><span class="ss">)</span>
<span class="w">  </span>}

<span class="nv">myScanner</span>.<span class="nv">close</span><span class="ss">()</span>
</code></pre></div>

<h4>Lua</h4>
<p>Lua 和 Python 进一步抽象了整个过程。你不必有意识地创建数据流，你只需给一个变量赋值为 <code>open</code> 函数的返回值，然后解析该变量的内容。这种方式快速，最简且容易。</p>
<div class="highlight"><pre><span></span><code>myFile = io.open(&#39;example.txt&#39;, &#39;r&#39;)

lines = myFile:read(&quot;*all&quot;)
print(lines)

myFile:close()
</code></pre></div>

<h4>Python</h4>
<div class="highlight"><pre><span></span><code><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">open</span><span class="ss">(</span><span class="s1">&#39;example.tmp&#39;</span>,<span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="ss">)</span>

<span class="k">for</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">f</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="nv">line</span><span class="ss">)</span>

<span class="nv">f</span>.<span class="nv">close</span><span class="ss">()</span>
</code></pre></div>

<h3>向文件中写入数据</h3>
<p>就写代码来说，写入是读取的逆过程。因此，将数据写入文件的过程与从文件中读取数据基本相同，只是使用了不同的函数。</p>
<h4>C</h4>
<p>在 C 语言中，你可以使用 <code>fputc</code> 函数将字符写入文件：</p>
<div class="highlight"><pre><span></span><code>fputc(ch, outfile);
</code></pre></div>

<p>或者，你可以使用 <code>fwrite</code> 将数据写入缓冲区。</p>
<div class="highlight"><pre><span></span><code>fwrite(buffer, sizeof(char), buffer_length, outfile);
</code></pre></div>

<h4>C++</h4>
<p>因为 C++ 使用 <code>ifstream</code> 库为数据打开缓冲区，所以你可以像 C 语言那样将数据写入缓冲区（C++ 库除外）。</p>
<div class="highlight"><pre><span></span><code><span class="nt">std</span><span class="p">::</span><span class="nd">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="nt">buffer</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="nt">std</span><span class="p">::</span><span class="nd">endl</span><span class="o">;</span>
</code></pre></div>

<h4>Java</h4>
<p>在 Java 中，你可以使用 <code>FileWriter</code> 类来创建一个可以写入数据的对象。它的工作方式与 <code>Scanner</code> 类非常相似，只是方向相反。</p>
<div class="highlight"><pre><span></span><code>FileWriter myFileWriter = new FileWriter(&quot;example.txt&quot;, true);
myFileWriter.write(&quot;Hello world\n&quot;);
myFileWriter.close();
</code></pre></div>

<h4>Groovy</h4>
<p>类似地，Groovy 使用 <code>FileWriter</code>，但使用了稍微 “groovy” 的语法。</p>
<div class="highlight"><pre><span></span><code>new FileWriter(&quot;example.txt&quot;, true).with {
  write(&quot;Hello world\n&quot;)
  flush()
}
</code></pre></div>

<h4>Lua</h4>
<p>Lua 和 Python 很相似，都使用名为 <code>open</code> 的函数来加载文件，<code>writer</code> 函数来写入数据，<code>close</code> 函数用于关闭文件。</p>
<div class="highlight"><pre><span></span><code>myFile = io.open(&#39;example.txt&#39;, &#39;a&#39;)
io.output(myFile)
io.write(&quot;hello world\n&quot;)
io.close(myFile)
</code></pre></div>

<h4>Python</h4>
<div class="highlight"><pre><span></span><code>myFile = open(&#39;example.txt&#39;, &#39;w&#39;)
myFile.write(&#39;hello world&#39;)
myFile.close()
</code></pre></div>

<h3>File 模式</h3>
<p>许多语言在打开文件时会指定一个“模式”。模式有很多，但这是常见的定义：</p>
<ul>
<li><strong>w</strong> 表示写入</li>
<li><strong>r</strong> 表示读取</li>
<li><strong>r+</strong> 表示可读可写</li>
<li><strong>a</strong> 表示追加</li>
</ul>
<p>某些语言，例如 Java 和 Groovy，允许你根据用于加载文件的类来确定模式。</p>
<p>无论编程语言以何种方式来确定文件模式，你都需要确保你是在 <em>追加</em> 数据，除非你打算用新数据覆盖文件。编程语言不像文件选择器那样，没有内置的提示来警告你防止数据丢失。</p>
<h3>新语言和旧把戏</h3>
<p>每种编程语言都有其独特完成任务的方式，这就是为什么有这么多语言可供选择。你可以而且应该选择最合适你的语言。但是，你一旦了解了编程的基本结构，你可以随意尝试其他语言，而不必担心不知道如何完成基本任务。通常情况下，实现目标的途径是相似的，所以只要你牢记基本概念，它们就很容易学习。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>