<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在 Ubuntu 中安装 Apache、MySQL、PHP（LAMP）套件</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Sk LAMP 套件是一种流行的开源 Web 开发平台，可用于运行和部署动态网站和基于 Web 的应用程序。通常，LAMP 套件由 Apache Web 服务器 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/01/zai-ubuntu-zhong-an-zhuang-apache-mysql-phplamptao-jian.html" rel="bookmark"
           title="Permalink to 在 Ubuntu 中安装 Apache、MySQL、PHP（LAMP）套件">在 Ubuntu 中安装 Apache、MySQL、PHP（LAMP）套件</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-01-22T13:04:44+01:00">
                Published: Fri 22 January 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Sk</p>
<p><img alt="" src="/data/attachment/album/202101/22/130445q11slzlkei4okeet.jpg"></p>
<p><strong>LAMP</strong> 套件是一种流行的开源 Web 开发平台，可用于运行和部署动态网站和基于 Web 的应用程序。通常，LAMP 套件由 Apache Web 服务器、MariaDB/MySQL 数据库、PHP/Python/Perl 程序设计（脚本）语言组成。 LAMP 是 <strong>L</strong>inux，<strong>M</strong>ariaDB/<strong>M</strong>YSQL，<strong>P</strong>HP/<strong>P</strong>ython/<strong>P</strong>erl 的缩写。 本教程描述了如何在 Ubuntu 18.04 LTS 服务器中安装 Apache、MySQL、PHP（LAMP 套件）。</p>
<p>就本教程而言，我们将使用以下 Ubuntu 测试。</p>
<ul>
<li><strong>操作系统</strong>：Ubuntu 18.04.1 LTS Server Edition</li>
<li><strong>IP 地址</strong> ：192.168.225.22/24</li>
</ul>
<h3>1. 安装 Apache Web 服务器</h3>
<p>首先，利用下面命令更新 Ubuntu 服务器：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>update
$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade
</code></pre></div>

<p>然后，安装 Apache Web 服务器（命令如下）：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>apache2
</code></pre></div>

<p>检查 Apache Web 服务器是否已经运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>apache2
</code></pre></div>

<p>输出结果大概是这样的：</p>
<div class="highlight"><pre><span></span><code><span class="err">●</span><span class="w"> </span><span class="n">apache2</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span>
<span class="w"> </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">apache2</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">;</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">en</span>
<span class="w"> </span><span class="n">Drop</span><span class="o">-</span><span class="n">In</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">apache2</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span>
<span class="w"> </span><span class="err">└─</span><span class="n">apache2</span><span class="o">-</span><span class="n">systemd</span><span class="o">.</span><span class="n">conf</span>
<span class="w"> </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2019</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">03</span><span class="w"> </span><span class="n">UTC</span><span class="p">;</span><span class="w"> </span><span class="mi">1</span><span class="nb">min</span><span class="w"> </span><span class="mi">5</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">2025</span><span class="w"> </span><span class="p">(</span><span class="n">apache2</span><span class="p">)</span>
<span class="w"> </span><span class="n">Tasks</span><span class="p">:</span><span class="w"> </span><span class="mi">55</span><span class="w"> </span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2320</span><span class="p">)</span>
<span class="w"> </span><span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">apache2</span><span class="o">.</span><span class="n">service</span>
<span class="w"> </span><span class="err">├─</span><span class="mi">2025</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">apache2</span><span class="w"> </span><span class="o">-</span><span class="n">k</span><span class="w"> </span><span class="n">start</span>
<span class="w"> </span><span class="err">├─</span><span class="mi">2027</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">apache2</span><span class="w"> </span><span class="o">-</span><span class="n">k</span><span class="w"> </span><span class="n">start</span>
<span class="w"> </span><span class="err">└─</span><span class="mi">2028</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">apache2</span><span class="w"> </span><span class="o">-</span><span class="n">k</span><span class="w"> </span><span class="n">start</span>

<span class="n">Feb</span><span class="w"> </span><span class="mi">05</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">02</span><span class="w"> </span><span class="n">ubuntuserver</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">...</span>
<span class="n">Feb</span><span class="w"> </span><span class="mi">05</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">03</span><span class="w"> </span><span class="n">ubuntuserver</span><span class="w"> </span><span class="n">apachectl</span><span class="p">[</span><span class="mi">2003</span><span class="p">]:</span><span class="w"> </span><span class="n">AH00558</span><span class="p">:</span><span class="w"> </span><span class="n">apache2</span><span class="p">:</span><span class="w"> </span><span class="n">Could</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">reliably</span>
<span class="n">Feb</span><span class="w"> </span><span class="mi">05</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">03</span><span class="w"> </span><span class="n">ubuntuserver</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Started</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="n">Server</span><span class="o">.</span>
</code></pre></div>

<p>祝贺你！ Apache 服务已经启动并运行了！！</p>
<h4>1.1 调整防火墙允许 Apache Web 服务器</h4>
<p>默认情况下，如果你已在 Ubuntu 中启用 UFW 防火墙，则无法从远程系统访问 Apache Web 服务器。 必须按照以下步骤开启 <code>http</code> 和 <code>https</code> 端口。</p>
<p>首先，使用以下命令列出 Ubuntu 系统上可用的应用程序配置文件：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ufw<span class="w"> </span>app<span class="w"> </span>list
</code></pre></div>

<p>输出结果：</p>
<div class="highlight"><pre><span></span><code>Available applications:
Apache
Apache Full
Apache Secure
OpenSSH
</code></pre></div>

<p>如你所见，Apache 和 OpenSSH 应用程序已安装 UFW 配置文件。你可以使用 <code>ufw app info "Profile Name"</code> 命令列出有关每个配置文件及其包含的规则的信息。</p>
<p>让我们研究一下 “Apache Full” 配置文件。 为此，请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ufw<span class="w"> </span>app<span class="w"> </span>info<span class="w"> </span><span class="s2">&quot;Apache Full&quot;</span>
</code></pre></div>

<p>输出结果：</p>
<div class="highlight"><pre><span></span><code><span class="n">Profile</span><span class="o">:</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">Full</span>
<span class="n">Title</span><span class="o">:</span><span class="w"> </span><span class="n">Web</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="o">(</span><span class="n">HTTP</span><span class="o">,</span><span class="n">HTTPS</span><span class="o">)</span>
<span class="n">Description</span><span class="o">:</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">generation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">omnipresent</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="n">web</span>
<span class="n">server</span><span class="o">.</span>

<span class="n">Ports</span><span class="o">:</span>
<span class="mi">80</span><span class="o">,</span><span class="mi">443</span><span class="o">/</span><span class="n">tcp</span>
</code></pre></div>

<p>如你所见，“Apache Full” 配置文件包含了启用经由端口 <strong>80</strong> 和 <strong>443</strong> 的传输规则：</p>
<p>现在，运行以下命令配置允许 HTTP 和 HTTPS 传入通信：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;Apache Full&quot;</span>
Rules<span class="w"> </span>updated
Rules<span class="w"> </span>updated<span class="w"> </span><span class="o">(</span>v6<span class="o">)</span>
</code></pre></div>

<p>如果你不想允许 HTTP 通信，而只允许 HTTP（80） 通信，请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ufw<span class="w"> </span>app<span class="w"> </span>info<span class="w"> </span><span class="s2">&quot;Apache&quot;</span>
</code></pre></div>

<h4>1.2 测试 Apache Web 服务器</h4>
<p>现在，打开 Web 浏览器并导航到 <a href="http://localhost/">http://localhost/</a> 或 <a href="http://IP-Address/">http://IP-Address/</a> 来访问 Apache 测试页。</p>
<p><img alt="" src="/data/attachment/album/202101/22/130446e7xc9fcceqocxt9c.png"></p>
<p>如果看到上面类似的显示内容，那就成功了。 Apache 服务器正在工作！</p>
<h3>2. 安装 MySQL</h3>
<p>在 Ubuntu 安装 MySQL 请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>mysql-server
</code></pre></div>

<p>使用以下命令验证 MySQL 服务是否正在运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>mysql
</code></pre></div>

<p>输出结果：</p>
<div class="highlight"><pre><span></span><code><span class="err">●</span><span class="w"> </span><span class="n">mysql</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">Community</span><span class="w"> </span><span class="n">Server</span>
<span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">mysql</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">;</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">enab</span>
<span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2019</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">50</span><span class="w"> </span><span class="n">UTC</span><span class="p">;</span><span class="w"> </span><span class="mi">17</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">3423</span><span class="w"> </span><span class="p">(</span><span class="n">mysqld</span><span class="p">)</span>
<span class="n">Tasks</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="p">(</span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2320</span><span class="p">)</span>
<span class="n">CGroup</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">system</span><span class="o">.</span><span class="n">slice</span><span class="o">/</span><span class="n">mysql</span><span class="o">.</span><span class="n">service</span>
<span class="err">└─</span><span class="mi">3423</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">mysqld</span><span class="w"> </span><span class="o">--</span><span class="n">daemonize</span><span class="w"> </span><span class="o">--</span><span class="n">pid</span><span class="o">-</span><span class="n">file</span><span class="o">=/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">pid</span>

<span class="n">Feb</span><span class="w"> </span><span class="mi">05</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="n">ubuntuserver</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">Community</span><span class="w"> </span><span class="n">Server</span><span class="o">...</span>
<span class="n">Feb</span><span class="w"> </span><span class="mi">05</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">50</span><span class="w"> </span><span class="n">ubuntuserver</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Started</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">Community</span><span class="w"> </span><span class="n">Server</span><span class="o">.</span>
</code></pre></div>

<p>MySQL 正在运行！</p>
<h4>2.1 配置数据库管理用户（root）密码</h4>
<p>默认情况下，MySQL root 用户密码为空。你需要通过运行以下脚本使你的 MySQL 服务器安全：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>mysql_secure_installation
</code></pre></div>

<p>系统将询问你是否要安装 “VALIDATE PASSWORD plugin（密码验证插件）”。该插件允许用户为数据库配置强密码凭据。如果启用，它将自动检查密码的强度并强制用户设置足够安全的密码。<strong>禁用此插件是安全的</strong>。但是，必须为数据库使用唯一的强密码凭据。如果不想启用此插件，只需按任意键即可跳过密码验证部分，然后继续其余步骤。</p>
<p>如果回答是 <code>y</code>，则会要求你选择密码验证级别。</p>
<div class="highlight"><pre><span></span><code><span class="nv">Securing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">MySQL</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="nv">deployment</span>.

<span class="nv">Connecting</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">MySQL</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">blank</span><span class="w"> </span><span class="nv">password</span>.

<span class="nv">VALIDATE</span><span class="w"> </span><span class="nv">PASSWORD</span><span class="w"> </span><span class="nv">PLUGIN</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="nv">passwords</span>
<span class="nv">and</span><span class="w"> </span><span class="nv">improve</span><span class="w"> </span><span class="nv">security</span>.<span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">checks</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">strength</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">password</span>
<span class="nv">and</span><span class="w"> </span><span class="nv">allows</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">users</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">those</span><span class="w"> </span><span class="nv">passwords</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">are</span>
<span class="nv">secure</span><span class="w"> </span><span class="nv">enough</span>.<span class="w"> </span><span class="nv">Would</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">setup</span><span class="w"> </span><span class="nv">VALIDATE</span><span class="w"> </span><span class="nv">PASSWORD</span><span class="w"> </span><span class="nv">plugin</span>?

<span class="nv">Press</span><span class="w"> </span><span class="nv">y</span><span class="o">|</span><span class="nv">Y</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Yes</span>,<span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">y</span>
</code></pre></div>

<p>可用的密码验证有 “low（低）”、 “medium（中）” 和 “strong（强）”。只需输入适当的数字（0 表示低，1 表示中，2 表示强密码）并按回车键。</p>
<div class="highlight"><pre><span></span><code>There are three levels of password validation policy:

LOW Length &gt;= 8
MEDIUM Length &gt;= 8, numeric, mixed case, and special characters
STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary file

Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG:
</code></pre></div>

<p>现在，输入 MySQL root 用户的密码。请注意，必须根据上一步中选择的密码策略，为 MySQL root 用户使用密码。如果你未启用该插件，则只需使用你选择的任意强度且唯一的密码即可。</p>
<div class="highlight"><pre><span></span><code><span class="nv">Please</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">root</span><span class="w"> </span><span class="nv">here</span>.

<span class="nv">New</span><span class="w"> </span><span class="nv">password</span>:

<span class="nv">Re</span><span class="o">-</span><span class="nv">enter</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">password</span>:

<span class="nv">Estimated</span><span class="w"> </span><span class="nv">strength</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">password</span>:<span class="w"> </span><span class="mi">50</span>
<span class="k">Do</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">wish</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="k">continue</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">password</span><span class="w"> </span><span class="nv">provided</span>?<span class="ss">(</span><span class="nv">Press</span><span class="w"> </span><span class="nv">y</span><span class="o">|</span><span class="nv">Y</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Yes</span>,<span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">No</span><span class="ss">)</span><span class="w"> </span>:<span class="w"> </span><span class="nv">y</span>
</code></pre></div>

<p>两次输入密码后，你将看到密码强度（在此示例情况下为 50）。如果你确定可以，请按 <code>y</code> 继续提供的密码。如果对密码长度不满意，请按其他任意键并设置一个强密码。我现在的密码可以，所以我选择了<code>y</code>。</p>
<p>对于其余的问题，只需键入 <code>y</code> 并按回车键。这将删除匿名用户、禁止 root 用户远程登录并删除 <code>test</code>（测试）数据库。</p>
<div class="highlight"><pre><span></span><code><span class="n">Remove</span><span class="w"> </span><span class="n">anonymous</span><span class="w"> </span><span class="n">users</span><span class="err">?</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="n">y</span><span class="o">|</span><span class="n">Y</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Yes</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">No</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">y</span>
<span class="n">Success</span><span class="o">.</span>

<span class="n">Normally</span><span class="p">,</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">from</span>
<span class="s1">&#39;localhost&#39;</span><span class="o">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">ensures</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">someone</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">guess</span><span class="w"> </span><span class="n">at</span>
<span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">network</span><span class="o">.</span>

<span class="n">Disallow</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">remotely</span><span class="err">?</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="n">y</span><span class="o">|</span><span class="n">Y</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Yes</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">No</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">y</span>
<span class="n">Success</span><span class="o">.</span>

<span class="n">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">comes</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">database</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="s1">&#39;test&#39;</span><span class="w"> </span><span class="n">that</span>
<span class="n">anyone</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">access</span><span class="o">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">intended</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">testing</span><span class="p">,</span>
<span class="ow">and</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">removed</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">moving</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">production</span>
<span class="n">environment</span><span class="o">.</span>

<span class="n">Remove</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">database</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="err">?</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="n">y</span><span class="o">|</span><span class="n">Y</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Yes</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">No</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">y</span>
<span class="o">-</span><span class="w"> </span><span class="n">Dropping</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">database</span><span class="o">...</span>
<span class="n">Success</span><span class="o">.</span>

<span class="o">-</span><span class="w"> </span><span class="n">Removing</span><span class="w"> </span><span class="n">privileges</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">database</span><span class="o">...</span>
<span class="n">Success</span><span class="o">.</span>

<span class="n">Reloading</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">privilege</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">changes</span>
<span class="n">made</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">effect</span><span class="w"> </span><span class="n">immediately</span><span class="o">.</span>

<span class="n">Reload</span><span class="w"> </span><span class="n">privilege</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="n">now</span><span class="err">?</span><span class="w"> </span><span class="p">(</span><span class="n">Press</span><span class="w"> </span><span class="n">y</span><span class="o">|</span><span class="n">Y</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Yes</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">No</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">y</span>
<span class="n">Success</span><span class="o">.</span>

<span class="n">All</span><span class="w"> </span><span class="n">done</span><span class="o">!</span>
</code></pre></div>

<p>以上就是为 MySQL root 用户设置密码。</p>
<h4>2.2 更改 MySQL 超级用户的身份验证方法</h4>
<p>默认情况下，Ubuntu 系统的 MySQL root 用户为 MySQL 5.7 版本及更新的版本使用插件 <code>auth_socket</code> 设置身份验证。尽管它增强了安全性，但是当你使用任何外部程序（例如 phpMyAdmin）访问数据库服务器时，也会变得更困难。要解决此问题，你需要将身份验证方法从 <code>auth_socket</code> 更改为 <code>mysql_native_password</code>。为此，请使用以下命令登录到你的 MySQL 提示符下：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>mysql
</code></pre></div>

<p>在 MySQL 提示符下运行以下命令，找到所有 MySQL 当前用户帐户的身份验证方法：</p>
<div class="highlight"><pre><span></span><code>SELECT user,authentication_string,plugin,host FROM mysql.user;
</code></pre></div>

<p>输出结果：</p>
<div class="highlight"><pre><span></span><code><span class="nb">+------------------</span><span class="c">|</span><span class="nb">-------------------------------------------</span><span class="c">|</span><span class="nb">-----------------------</span><span class="c">|</span><span class="nb">-----------+</span>
<span class="c">| user | authentication_string | plugin | host |</span>
<span class="nb">+------------------</span><span class="c">|</span><span class="nb">-------------------------------------------</span><span class="c">|</span><span class="nb">-----------------------</span><span class="c">|</span><span class="nb">-----------+</span>
<span class="c">| root | | auth_socket | localhost |</span>
<span class="c">| mysql</span><span class="nt">.</span><span class="c">session | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span>
<span class="c">| mysql</span><span class="nt">.</span><span class="c">sys | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span>
<span class="c">| debian</span><span class="nb">-</span><span class="c">sys</span><span class="nb">-</span><span class="c">maint | *F126737722832701DD3979741508F05FA71E5BA0 | mysql_native_password | localhost |</span>
<span class="nb">+------------------</span><span class="c">|</span><span class="nb">-------------------------------------------</span><span class="c">|</span><span class="nb">-----------------------</span><span class="c">|</span><span class="nb">-----------+</span>
<span class="c">4 rows in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p><img alt="" src="/data/attachment/album/202101/22/130447n9vpgdn9ndvmddrp.png"></p>
<p>如你所见，Mysql root 用户使用 <code>auth_socket</code> 插件进行身份验证。</p>
<p>要将此身份验证更改为 <code>mysql_native_password</code> 方法，请在 MySQL 提示符下运行以下命令。 别忘了用你选择的强大唯一的密码替换 <code>password</code>。 如果已启用 VALIDATION 插件，请确保已根据当前策略要求使用了强密码。</p>
<div class="highlight"><pre><span></span><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;password&#39;;
</code></pre></div>

<p>使用以下命令更新数据库：</p>
<div class="highlight"><pre><span></span><code>FLUSH PRIVILEGES;
</code></pre></div>

<p>使用命令再次检查身份验证方法是否已更改：</p>
<div class="highlight"><pre><span></span><code>SELECT user,authentication_string,plugin,host FROM mysql.user;
</code></pre></div>

<p>输出结果：</p>
<p><img alt="" src="/data/attachment/album/202101/22/130449t4stkkjmkb5rus9m.png"></p>
<p>好！MySQL root 用户就可以使用密码进行身份验证来访问 <code>mysql shell</code>。</p>
<p>从 MySQL 提示符下退出：</p>
<div class="highlight"><pre><span></span><code><span class="k">exit</span>
</code></pre></div>

<h3>3. 安装 PHP</h3>
<p>安装 PHP 请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>php<span class="w"> </span>libapache2-mod-php<span class="w"> </span>php-mysql
</code></pre></div>

<p>安装 PHP 后，在 Apache 文档根目录中创建 <code>info.php</code> 文件。通常，在大多数基于 Debian 的 Linux 发行版中，Apache 文档根目录为 <code>/var/www/html/</code> 或 <code>/var/www/</code>。Ubuntu 18.04 LTS 系统下，文档根目录是 <code>/var/www/html/</code>。</p>
<p>在 Apache 根目录中创建 <code>info.php</code> 文件：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>vi<span class="w"> </span>/var/www/html/info.php
</code></pre></div>

<p>在此文件中编辑如下内容：</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="nb">phpinfo</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</code></pre></div>

<p>然后按下 <code>ESC</code> 键并且输入 <code>:wq</code> 保存并退出此文件。重新启动 Apache 服务使更改生效。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>apache2
</code></pre></div>

<h4>3.1 测试 PHP</h4>
<p>打开 Web 浏览器，然后导航到 URL <a href="http://xn--IP-im8ckc/info.php">http://IP地址/info.php</a>。</p>
<p>你就将看到 PHP 测试页面。</p>
<p><img alt="" src="/data/attachment/album/202101/22/130449t6xo2zdnk6x1bmk2.png"></p>
<p>通常，当用户向 Web 服务器发出请求时，Apache 首先会在文档根目录中查找名为 <code>index.html</code> 的文件。如果你想将 Apache 更改为 <code>php</code> 文件提供服务而不是其他文件，请将 <code>dir.conf</code> 配置文件中的 <code>index.php</code> 移至第一个位置，如下所示：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/apache2/mods-enabled/dir.conf
</code></pre></div>

<p>上面的配置文件（<code>dir.conf</code>） 内容如下：</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;IfModule</span><span class="w"> </span><span class="s">mod_dir.c</span><span class="nt">&gt;</span>
<span class="nb">DirectoryIndex</span><span class="w"> </span>index.html<span class="w"> </span>index.cgi<span class="w"> </span>index.pl<span class="w"> </span>index.php<span class="w"> </span>index.xhtml<span class="w"> </span>index.htm
<span class="nt">&lt;/IfModule&gt;</span>

<span class="c"># vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span>
</code></pre></div>

<p>将 <code>index.php</code> 移动到最前面。更改后，<code>dir.conf</code> 文件内容看起来如下所示。</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;IfModule</span><span class="w"> </span><span class="s">mod_dir.c</span><span class="nt">&gt;</span>
<span class="nb">DirectoryIndex</span><span class="w"> </span>index.php<span class="w"> </span>index.html<span class="w"> </span>index.cgi<span class="w"> </span>index.pl<span class="w"> </span>index.xhtml<span class="w"> </span>index.htm
<span class="nt">&lt;/IfModule&gt;</span>

<span class="c"># vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span>
</code></pre></div>

<p>然后按下 <code>ESC</code> 键并且输入 <code>:wq</code> 保存并关闭此文件。重新启动 Apache 服务使更改生效。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>apache2
</code></pre></div>

<h4>3.2 安装 PHP 模块</h4>
<p>为了增加 PHP 的功能，可以安装一些其他的 PHP 模块。</p>
<p>要列出可用的 PHP 模块，请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-cache<span class="w"> </span>search<span class="w"> </span>php-<span class="w"> </span><span class="p">|</span><span class="w"> </span>less
</code></pre></div>

<p>输出结果：</p>
<p><img alt="" src="/data/attachment/album/202101/22/130450ujolkpoaejoeeekp.png"></p>
<p>使用方向键浏览结果。要退出，请输入 <code>q</code> 并按下回车键。</p>
<p>要查找任意 <code>php</code> 模块的详细信息，例如 <code>php-gd</code>，请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-cache<span class="w"> </span>show<span class="w"> </span>php-gd
</code></pre></div>

<p>安装 PHP 模块请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>php-gd
</code></pre></div>

<p>安装所有的模块（虽然没有必要），请运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>php*
</code></pre></div>

<p>安装任何 <code>php</code> 模块后，请不要忘记重新启动 Apache 服务。要检查模块是否已加载，请在浏览器中打开 <code>info.php</code> 文件并检查是否存在。</p>
<p>接下来，你可能需要安装数据库管理工具，以通过 Web 浏览器轻松管理数据库。如果是这样，请按照以下链接中的说明安装 <code>phpMyAdmin</code>。</p>
<p>祝贺你！我们已经在 Ubuntu 服务器中成功配置了 LAMP 套件。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>