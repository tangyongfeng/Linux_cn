<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>从 Linux 命令行进行打印</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Sandra Henry-stocker 在 Linux 命令行进行打印的内容比单单一个 lp 命令多得多，让我们来看一些可用选项。 Linux 命令行打印很容易。你可以使 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/01/cong-linux-ming-ling-xing-jin-xing-da-yin.html" rel="bookmark"
           title="Permalink to 从 Linux 命令行进行打印">从 Linux 命令行进行打印</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-01-13T23:03:17+01:00">
                Published: Wed 13 January 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Sandra Henry-stocker</p>
<blockquote>
<p>在 Linux 命令行进行打印的内容比单单一个 <code>lp</code> 命令多得多，让我们来看一些可用选项。</p>
</blockquote>
<p><img alt="Sherry " src="/data/attachment/album/202101/13/230317cm4cjuiti44pgv8o.jpg"></p>
<p>Linux 命令行打印很容易。你可以使用 <code>lp</code> 命令来请求打印，并使用 <code>lpq</code> 命令来查看队列中有哪些打印作业，但是当你要双面打印或使用纵向模式时，这些会变得有些复杂。你可能还需要做很多其他事情，例如打印多份文档副本或取消打印作业。让我们来看看一些选项，当你从命令行打印时，如何让你的打印输出看起来如你所愿。</p>
<h3>显示打印机配置</h3>
<p>要从命令行查看打印机设置，请使用 <code>lpoptions</code> 命令。 输出应如下所示：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpoptions
<span class="nv">copies</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>device-uri<span class="o">=</span>dnssd://HP%20Color%20LaserJet%20CP2025dn%20<span class="o">(</span>F47468<span class="o">)</span>._pdl-datastream._tcp.local/<span class="w"> </span><span class="nv">finishings</span><span class="o">=</span><span class="m">3</span><span class="w"> </span>job-cancel-after<span class="o">=</span><span class="m">10800</span><span class="w"> </span>job-hold-until<span class="o">=</span>no-hold<span class="w"> </span>job-priority<span class="o">=</span><span class="m">50</span><span class="w"> </span>job-sheets<span class="o">=</span>none,none<span class="w"> </span>marker-change-time<span class="o">=</span><span class="m">1553023232</span><span class="w"> </span>marker-colors<span class="o">=</span><span class="c1">#000000,#00FFFF,#FF00FF,#FFFF00 marker-levels=18,62,62,63 marker-names=&#39;Black\ Cartridge\ HP\ CC530A,Cyan\ Cartridge\ HP\ CC531A,Magenta\ Cartridge\ HP\ CC533A,Yellow\ Cartridge\ HP\ CC532A&#39; marker-types=toner,toner,toner,toner number-up=1 printer-commands=none printer-info=&#39;HP Color LaserJet CP2025dn (F47468)&#39; printer-is-accepting-jobs=true printer-is-shared=true printer-is-temporary=false printer-location printer-make-and-model=&#39;HP Color LaserJet cp2025dn pcl3, hpcups 3.18.7&#39; printer-state=3 printer-state-change-time=1553023232 printer-state-reasons=none printer-type=167964 printer-uri-supported=ipp://localhost/printers/Color-LaserJet-CP2025dn sides=one-sided</span>
</code></pre></div>

<p>如果将其空格转换为回车符，输出可能会更人性化，请注意列出了多少设置选项。</p>
<p>注意：在下面的输出中，一些行被重新链接，以使输出更具可读性。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpoptions<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s2">&quot; &quot;</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span>
<span class="nv">copies</span><span class="o">=</span><span class="m">1</span>
device-uri<span class="o">=</span>dnssd://HP%20Color%20LaserJet%20CP2025dn%20<span class="o">(</span>F47468<span class="o">)</span>._pdl-datastream._tcp.local/
<span class="nv">finishings</span><span class="o">=</span><span class="m">3</span>
job-cancel-after<span class="o">=</span><span class="m">10800</span>
job-hold-until<span class="o">=</span>no-hold
job-priority<span class="o">=</span><span class="m">50</span>
job-sheets<span class="o">=</span>none,none
marker-change-time<span class="o">=</span><span class="m">1553023232</span>
marker-colors<span class="o">=</span><span class="c1">#000000,#00FFFF,#FF00FF,#FFFF00</span>
marker-levels<span class="o">=</span><span class="m">18</span>,62,62,63
marker-names<span class="o">=</span><span class="s1">&#39;Black\ Cartridge\ HP\ CC530A,</span>
<span class="s1">Cyan\ Cartridge\ HP\ CC531A,</span>
<span class="s1">Magenta\ Cartridge\ HP\ CC533A,</span>
<span class="s1">Yellow\ Cartridge\ HP\ CC532A&#39;</span>
marker-types<span class="o">=</span>toner,toner,toner,toner
number-up<span class="o">=</span><span class="m">1</span>
printer-commands<span class="o">=</span>none
printer-info<span class="o">=</span><span class="s1">&#39;HP Color LaserJet CP2025dn (F47468)&#39;</span>
printer-is-accepting-jobs<span class="o">=</span><span class="nb">true</span>
printer-is-shared<span class="o">=</span><span class="nb">true</span>
printer-is-temporary<span class="o">=</span><span class="nb">false</span>
printer-location
printer-make-and-model<span class="o">=</span><span class="s1">&#39;HP Color LaserJet cp2025dn pcl3, hpcups 3.18.7&#39;</span>
printer-state<span class="o">=</span><span class="m">3</span>
printer-state-change-time<span class="o">=</span><span class="m">1553023232</span>
printer-state-reasons<span class="o">=</span>none
printer-type<span class="o">=</span><span class="m">167964</span>
printer-uri-supported<span class="o">=</span>ipp://localhost/printers/Color-LaserJet-CP2025dn
<span class="nv">sides</span><span class="o">=</span>one-sided
</code></pre></div>

<p>使用 <code>-v</code> 选项时，<code>lpinfo</code> 命令将列出驱动程序和相关信息：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpinfo<span class="w"> </span>-v
network<span class="w"> </span>ipp
network<span class="w"> </span>https
network<span class="w"> </span>socket
network<span class="w"> </span>beh
direct<span class="w"> </span>hp
network<span class="w"> </span>lpd
file<span class="w"> </span>cups-brf:/
network<span class="w"> </span>ipps
network<span class="w"> </span>http
direct<span class="w"> </span>hpfax
network<span class="w"> </span>dnssd://HP%20Color%20LaserJet%20CP2025dn%20<span class="o">(</span>F47468<span class="o">)</span>._pdl-datastream._tcp.local/<span class="w"> </span>&lt;<span class="o">==</span><span class="w"> </span>printer
network<span class="w"> </span>socket://192.168.0.23<span class="w"> </span>&lt;<span class="o">==</span><span class="w"> </span>printer<span class="w"> </span>IP
</code></pre></div>

<p><code>lpoptions</code> 命令将显示默认打印机的设置。使用 <code>-p</code> 选项指定其中一个可用打印机代号：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpoptions<span class="w"> </span>-p<span class="w"> </span>LaserJet
</code></pre></div>

<p><code>lpstat -p</code> 命令显示打印机的状态，而 <code>lpstat -p -d</code> 列出可用打印机列表。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpstat<span class="w"> </span>-p<span class="w"> </span>-d
printer<span class="w"> </span>Color-LaserJet-CP2025dn<span class="w"> </span>is<span class="w"> </span>idle.<span class="w"> </span>enabled<span class="w"> </span>since<span class="w"> </span>Tue<span class="w"> </span><span class="m">19</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">2019</span><span class="w"> </span><span class="m">05</span>:07:45<span class="w"> </span>PM<span class="w"> </span>EDT
system<span class="w"> </span>default<span class="w"> </span>destination:<span class="w"> </span>Color-LaserJet-CP2025dn
</code></pre></div>

<h3>非常有用的命令</h3>
<p>要在默认打印机上打印文档，只需使用 <code>lp</code> 命令，后跟要打印的文件名即可。 如果文件名包含空格（在 Linux 系统上很少见），请将该名称放在引号中或开始输入文件名并按 <code>Tab</code> 键调用空格的转义标志（如下面的第二个示例所示）。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lp<span class="w"> </span><span class="s2">&quot;never leave home angry&quot;</span>
$<span class="w"> </span>lp<span class="w"> </span>never<span class="se">\ </span>leave<span class="se">\ </span>home<span class="se">\ </span>angry
</code></pre></div>

<p><code>lpq</code> 命令显示打印队列：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpq
Color-LaserJet-CP2025dn<span class="w"> </span>is<span class="w"> </span>ready<span class="w"> </span>and<span class="w"> </span>printing
Rank<span class="w"> </span>Owner<span class="w"> </span>Job<span class="w"> </span>File<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>Total<span class="w"> </span>Size
active<span class="w"> </span>shs<span class="w"> </span><span class="m">234</span><span class="w"> </span>agenda<span class="w"> </span><span class="m">2048</span><span class="w"> </span>bytes
</code></pre></div>

<p>使用 <code>-n</code> 选项时，<code>lp</code> 命令可用来指定所需打印输出的份数：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lp<span class="w"> </span>-n<span class="w"> </span><span class="m">11</span><span class="w"> </span>agenda
</code></pre></div>

<p>要取消打印作业，可以使用 <code>cancel</code> 或 <code>lprm</code> 命令。如果没来得及执行，则可能会看到以下信息：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cancel<span class="w"> </span><span class="m">229</span>
cancel:<span class="w"> </span>cancel-job<span class="w"> </span>failed:<span class="w"> </span>Job<span class="w"> </span><span class="c1">#229 is already completed - can&#39;t cancel.</span>
</code></pre></div>

<h3>双面打印</h3>
<p>要以双面模式打印，你可以在 <code>lp</code> 命令中使用 <code>sides</code> 选项，该选项不但表示了在纸张的正反面进行打印，还表示了从纸张的哪个边开始打印。这个设置代表了你期望以双面纵向文档的正常方式打印。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lp<span class="w"> </span>-o<span class="w"> </span><span class="nv">sides</span><span class="o">=</span>two-sided-long-edge<span class="w"> </span>Notes.pdf
</code></pre></div>

<p>如果要所有文档以双面模式打印，则可以使用 <code>lpoptions</code> 命令更改 <code>sides</code> 设置以修改 <code>lp</code> 的设置。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpoptions<span class="w"> </span>-o<span class="w"> </span><span class="nv">sides</span><span class="o">=</span>two-sided-short-edge
</code></pre></div>

<p>要恢复为单面打印，可以使用如下命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lpoptions<span class="w"> </span>-o<span class="w"> </span><span class="nv">sides</span><span class="o">=</span>one-sided
</code></pre></div>

<h4>横向打印</h4>
<p>要以横向模式打印，可以在 <code>lp</code> 命令中使用 <code>landscape</code> 选项。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lp<span class="w"> </span>-o<span class="w"> </span>landscape<span class="w"> </span>penguin.jpg
</code></pre></div>

<h3>CUPS（Unix 通用打印系统）</h3>
<p>Linux 系统上使用的打印系统是基于标准的开源打印系统，称为 <strong>CUPS</strong>，原意是<ruby> Unix 通用打印系统 <rt>  Common Unix Printing System </rt></ruby>。 它允许计算机充当打印服务器。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>