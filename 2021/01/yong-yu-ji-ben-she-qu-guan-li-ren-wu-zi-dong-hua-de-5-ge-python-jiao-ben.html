<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>用于基本社区管理任务自动化的 5 个 Python 脚本</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Rich Bowen 如果某些事情不得不重复做三遍，尝试使其自动化。 我 之前写过关于社区管理员的工作，如果你问 10 位社区管理员 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2021/01/yong-yu-ji-ben-she-qu-guan-li-ren-wu-zi-dong-hua-de-5-ge-python-jiao-ben.html" rel="bookmark"
           title="Permalink to 用于基本社区管理任务自动化的 5 个 Python 脚本">用于基本社区管理任务自动化的 5 个 Python 脚本</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2021-01-27T00:06:00+01:00">
                Published: Wed 27 January 2021
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Rich Bowen</p>
<blockquote>
<p>如果某些事情不得不重复做三遍，尝试使其自动化。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202101/27/000544aakdc4mnmn6tzj8y.jpg" title="shapes of people symbols"></p>
<p>我 <a href="http://drbacchus.com/what-does-a-community-manager-do/">之前写过关于社区管理员的工作</a>，如果你问 10 位社区管理员，你会得到 12 个不同的答案。不过，大多数情况下，你做的是社区需要你在任何特定时刻做的事情。而且很多事情可能是重复的。</p>
<p>当我还是系统管理员时，我遵循一个规则：如果某些事必须做三遍，我会尝试使其自动化。当然，如今，使用诸如 Ansible 这样的强大工具，就有了一整套科学的方法。</p>
<p>我每天或每周要做的一些事情涉及在一些地方查找内容，然后生成信息的摘要或报告，然后发布到别处。这样的任务是自动化的理想选择。这些并不是什么 <a href="https://6dollarshirts.com/rocket-surgery">难事</a>，当我与同事共享其中一些脚本时，总是至少有一个能证明这是有用的。</p>
<p><a href="https://github.com/rbowen/centos-community-tools/tree/master/scripts">在 GitHub</a> 上，我有几个每周都要使用的脚本。它们都不是很复杂，但每次都为我节省几分钟。其中一些是用 Perl 写的，因为我快 50 岁了（这些是我早些年写的）。有些是用 Python 写的，因为几年前，我决定要学习 Python。</p>
<p>以下是概述：</p>
<h3>tshirts.py</h3>
<p>这个简单的 <a href="https://github.com/rbowen/centos-community-tools/blob/master/scripts/tshirts.py">tshirts.py 脚本</a>会根据你要定制的活动 T 恤的数量，然后告诉你尺寸分布是什么。它将这些尺寸分布在一条正态曲线（也称为 “钟形曲线”）上，以我的经验，这和一个正常的会议观众的实际需求非常吻合。如果在美国使用，则可能需要将脚本中的值调整的稍大一些；如果在欧洲使用，则可能需要将脚本中的值稍稍缩小一些。你的情况也许不同。</p>
<p>用法：</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">rbowen</span><span class="err">@</span><span class="n">sasha</span><span class="p">:</span><span class="n">community</span><span class="o">-</span><span class="n">tools</span><span class="o">/</span><span class="n">scripts</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="o">./</span><span class="n">tshirts</span><span class="o">.</span><span class="n">py</span><span class="w">                                                                                                                                                          </span>
<span class="n">How</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">shirts</span><span class="err">?</span><span class="w"> </span><span class="mi">300</span>
<span class="n">For</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="n">shirts</span><span class="p">,</span><span class="w"> </span><span class="n">order</span><span class="p">:</span>

<span class="mf">30.0</span><span class="w"> </span><span class="n">small</span>
<span class="mf">72.0</span><span class="w"> </span><span class="n">medium</span>
<span class="mf">96.0</span><span class="w"> </span><span class="n">large</span>
<span class="mf">72.0</span><span class="w"> </span><span class="n">xl</span>
<span class="mf">30.0</span><span class="w"> </span><span class="mi">2</span><span class="n">xl</span>
</code></pre></div>

<h3>followers.py</h3>
<p><a href="https://github.com/rbowen/centos-community-tools/blob/master/scripts/followers.py">followers.py 脚本</a>为我提供了我关心的 Twitter 账号的关注者数量。</p>
<p>该脚本只有 14 行，没什么复杂的，但是它可能节省我十分钟的加载网页和查找数字的时间。</p>
<p>你需要编辑 <code>feed</code> 数组以添加你关心的帐户：</p>
<div class="highlight"><pre><span></span><code>feeds = [
        &#39;centosproject&#39;,
        &#39;centos&#39;
        ];
</code></pre></div>

<p>注意：如果你在英语国家以外的地方运行它，则可能无法正常工作，因为它只是一个简单的屏幕抓取脚本，它读取 HTML 并查找其中包含的特定信息。因此，当输出使用其他语言时，正则表达式可能不匹配。</p>
<p>用法：</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">rbowen</span><span class="err">@</span><span class="n">sasha</span><span class="p">:</span><span class="n">community</span><span class="o">-</span><span class="n">tools</span><span class="o">/</span><span class="n">scripts</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="o">./</span><span class="n">followers</span><span class="o">.</span><span class="n">py</span><span class="w">                                                                                                                                                                          </span>
<span class="n">centosproject</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="mi">479</span><span class="w"> </span><span class="n">Followers</span>
<span class="n">centos</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="mi">155</span><span class="w"> </span><span class="n">Followers</span>
</code></pre></div>

<h3>get_meetups</h3>
<p><a href="https://github.com/rbowen/centos-community-tools/blob/master/scripts/get_meetups">get_meetups 脚本</a>S 另一种类别的脚本 —— API脚本。这个特定的脚本使用 <a href="http://meetup.com">meetup.com</a> 网站的 API 来寻找在特定区域和时间范围内特定主题的聚会，以便我可以将它报告给我的社区。你所依赖的许多服务都提供了 API，因此你的脚本可以查找信息，而无需手动查找网页。学习如何使用这些 API 既令人沮丧又耗时，但是最终将获得可以节省大量时间的技能。</p>
<p><em>免责声明：<a href="http://meetup.com">meetup.com</a> 已于 2019 年 8 月更改了他们的 API，我还没有将这个脚本更新到新的API，所以它现在实际上并没有工作。在接下来的几周内请关注此版本的修复版本。</em></p>
<h3>centos-announcements.pl</h3>
<p><a href="https://github.com/rbowen/centos-community-tools/blob/master/scripts/centos-announcements.pl">centos-announcements.pl 脚本</a>要复杂得多，而且对我的用例来说非常特殊，但你可能有类似的情况。在本例中该脚本查看邮件列表存档（<code>centos-announce</code> 邮件列表），并查找具有特定格式的邮件，然后生成这些邮件的报告。报告有两种不同的格式：一种用于我的每月新闻通讯，另一种用于安排 Twitter 信息（借助于 Hootsuite）。</p>
<p>我使用 Hootsuite 为 Twitter 安排内容，它们具有便捷的 CSV（逗号分隔值）格式，你可以一次批量安排整整一周的推文。从各种数据源（比如：邮件列表、博客、其他网页）自动生成 CSV 格式可以节省大量时间。但是请注意，这可能只应该用于初稿，然后你可以对其进行检查和编辑，以便最终不会自动发布你不想要内容的推文。</p>
<h3>reporting.pl</h3>
<p><a href="https://github.com/rbowen/centos-community-tools/blob/master/scripts/sig_reporting/reporting.pl">reporting.pl 脚本</a>也是相当特定的，以满足我的特殊需求，但是这个概念本身是通用的。我每月向 <a href="https://wiki.centos.org/SpecialInterestGroup">CentOS SIG</a>（特殊兴趣小组）发送邮件，这些邮件计划在给定的月份报告。该脚本只是告诉我本月有哪些 SIG，并记录需要发送给他们的电子邮件。</p>
<p>但是，因以下两个原因，实际上并未发送该电子邮件。第一，我希望在消息发送之前对其进行编辑。第二，虽然发送电子邮件的脚本在过去很有效，但如今，很可能被当做垃圾邮件而被过滤。</p>
<h3>总结</h3>
<p>在这个存储库中还有一些其他脚本，这些脚本或多或少是针对我的特定需求的，但是我希望其中至少有一个脚本对你有用，并且希望这些脚本的多样性能激励你去自动化一些你自己的东西。我也希望看到你的自动化脚本存储库；在评论中链接他们！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>