<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Homebrew：让你从 Mac 切换到 Linux 更轻松</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Matthew Broberg 不管你是想要更舒服地从 Mac 搬到 Linux，还是不满意常规的 Linux 包管理器，都可以试试 Homebrew。 Homebrew 项目最初是为了给 Mac 用户提 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/06/homebrewrang-ni-cong-mac-qie-huan-dao-linux-geng-qing-song.html" rel="bookmark"
           title="Permalink to Homebrew：让你从 Mac 切换到 Linux 更轻松">Homebrew：让你从 Mac 切换到 Linux 更轻松</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-06-28T09:12:07+02:00">
                Published: Sun 28 June 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Matthew Broberg</p>
<blockquote>
<p>不管你是想要更舒服地从 Mac 搬到 Linux，还是不满意常规的 Linux 包管理器，都可以试试 Homebrew。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202006/28/091127an02f8oae0pln3as.jpg"></p>
<p><a href="https://brew.sh/">Homebrew</a> 项目最初是为了给 Mac 用户提供一个非官方的 Linux 式的包管理器。用户很快就爱上了它友好的界面以及帮助性的提示，而且，它已经被移植到 Linux 系统 —— 这看起来像是一个奇怪的命运转折。</p>
<p>一开始，有两个分开的项目分别针对 macOS 和 Linux （Homebrew 与 Linuxbrew），但是现在是由 Homebrew 核心管理着这两个操作系统。由于我正 <a href="https://opensource.com/article/19/10/why-switch-mac-linux">从 Mac 切换到 Linux</a>，所以一直在研究我在 macOS 最常用的开源软件在 Linux 表现如何，最终，我很高兴地发现 Homebrew 对 Linux 的支持太赞了！</p>
<h3>为什么要在 Linux 使用 Homebrew 呢？</h3>
<p>长期使用 Linux 的用户对 Homebrew 的第一反应是：“为什么不直接使用……呢”，省略号代表他们喜欢的某个 Linux 包管理器。基于 Debian 的系统早就有了 <code>apt</code>，基于 Fedora 的系统则有 <code>dnf</code> 和 <code>yum</code>，并且像 Flatpak 跟 AppImage 这样的项目，在两种系统上都能流畅运行。我花了不少时间尝试这些技术，不得不说，它们都有其强大之处。</p>
<p>那我为什么还要 <a href="https://opensource.com/article/20/6/homebrew-mac">坚持使用 Homebrew</a> 呢？首先，我对它非常熟悉。在为我过去使用的专有软件寻找开源替代品的过程中，我已经学会了许多使用方法，而保持一些熟悉的东西，比如 Homebrew，可以让我专注于一次学习一件事情，而不是被不同系统间的差异搞垮。</p>
<p>此外，我没有看到哪一个包管理器像 Homebrew 一样，对用户如此友好。正如默认的帮助命令一样，命令井然有序：</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span><span class="w"> </span><span class="n">brew</span><span class="w"> </span><span class="o">-</span><span class="n">h</span>
<span class="n">Example</span><span class="w"> </span><span class="k">usage</span><span class="err">:</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="o">[</span><span class="n">TEXT|/REGEX/</span><span class="o">]</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">[</span><span class="n">FORMULA...</span><span class="o">]</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">FORMULA</span><span class="p">...</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="k">update</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="o">[</span><span class="n">FORMULA...</span><span class="o">]</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">uninstall</span><span class="w"> </span><span class="n">FORMULA</span><span class="p">...</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">[</span><span class="n">FORMULA...</span><span class="o">]</span>

<span class="nl">Troubleshooting</span><span class="p">:</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">config</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">doctor</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">--</span><span class="n">verbose</span><span class="w"> </span><span class="o">--</span><span class="n">debug</span><span class="w"> </span><span class="n">FORMULA</span>

<span class="nl">Contributing</span><span class="p">:</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="o">[</span><span class="n">URL [--no-fetch</span><span class="o">]</span><span class="err">]</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">edit</span><span class="w"> </span><span class="o">[</span><span class="n">FORMULA...</span><span class="o">]</span>

<span class="n">Further</span><span class="w"> </span><span class="nl">help</span><span class="p">:</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">commands</span>
<span class="w">  </span><span class="n">brew</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="o">[</span><span class="n">COMMAND</span><span class="o">]</span>
<span class="w">  </span><span class="n">man</span><span class="w"> </span><span class="n">brew</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="p">.</span><span class="n">brew</span><span class="p">.</span><span class="n">sh</span><span class="o">&gt;</span>
</code></pre></div>

<p>过于简短的输出可能会被误解为它功能局限，但是你简单看看每一个子命令，都有很丰富的功能。虽然上面的列表只有短短 23 行，但对高级用户来说，光是子命令 <code>install</code> 就包含整整 79 行的帮助信息：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>brew<span class="w"> </span>--help<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
<span class="m">23</span>
$<span class="w"> </span>brew<span class="w"> </span>install<span class="w"> </span>--help<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
<span class="m">79</span>
</code></pre></div>

<p>它可以选择忽略或者安装依赖关系，也可以选择用源代码编译以及用什么编译器来编译某个确切的上游 Git 提交，或者选择应用的官方 “灌装” 版。总而言之，Homebrew 即适合新手，也同样能满足老鸟。</p>
<h3>开始在 Linux 使用 Homebrew</h3>
<p>如果你想要试着使用 Homebrew，可以用这个单行脚本在 Mac 或者 Linux 上进行安装：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>/bin/bash<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://raw.githubusercontent.com/Homebrew/install/master/install.sh<span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>

<p>这条命令会立即开始安装 Homebrew。如果你比较谨慎，可以使用 <code>curl</code> 将该文件下载到本地，检查完毕之后再运行。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://raw.githubusercontent.com/Homebrew/install/master/install.sh<span class="w"> </span>--output<span class="w"> </span>homebrew_installer.sh
$<span class="w"> </span>more<span class="w"> </span>homebrew_installer.sh<span class="w"> </span><span class="c1"># 审核该脚本，直到你觉得没问题了</span>
$<span class="w"> </span>bash<span class="w"> </span>homebrew_installer.sh
</code></pre></div>

<p>对 Linux 的安装步骤还包括如何配置点文件，对于 Debian 系统来说是 <code>~/.profile</code>，对于 Fedora 系统是 <code>~/.bash_profile</code>。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-d<span class="w"> </span>/home/linuxbrew/.linuxbrew<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="k">$(</span>/home/linuxbrew/.linuxbrew/bin/brew<span class="w"> </span>shellenv<span class="k">)</span>
$<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-r<span class="w"> </span>~/.bash_profile<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;eval \$(</span><span class="k">$(</span>brew<span class="w"> </span>--prefix<span class="k">)</span><span class="s2">/bin/brew shellenv)&quot;</span><span class="w"> </span>&gt;&gt;~/.bash_profile
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;eval \$(</span><span class="k">$(</span>brew<span class="w"> </span>--prefix<span class="k">)</span><span class="s2">/bin/brew shellenv)&quot;</span><span class="w"> </span>&gt;&gt;~/.profile
</code></pre></div>

<p>为了确认已经安装好，Homebrew 团队提供一个空的 <code>hello</code> “秘方” 供测试：</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">brew</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">hello</span>
<span class="o">==&gt;</span><span class="w"> </span><span class="n">Downloading</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">linuxbrew</span><span class="o">.</span><span class="n">bintray</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bottles</span><span class="o">/</span><span class="n">hello</span><span class="o">-</span><span class="mf">2.10</span><span class="o">.</span><span class="n">x86_64_linux</span><span class="o">.</span><span class="n">bottle</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="c1">######################################################################## 100.0%</span>
<span class="o">==&gt;</span><span class="w"> </span><span class="n">Pouring</span><span class="w"> </span><span class="n">hello</span><span class="o">-</span><span class="mf">2.10</span><span class="o">.</span><span class="n">x86_64_linux</span><span class="o">.</span><span class="n">bottle</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="err">?</span><span class="w">  </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">linuxbrew</span><span class="o">/.</span><span class="n">linuxbrew</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">hello</span><span class="o">/</span><span class="mf">2.10</span><span class="p">:</span><span class="w"> </span><span class="mi">52</span><span class="w"> </span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="mf">595.6</span><span class="n">KB</span>
</code></pre></div>

<p>看起来安装毫无问题，让我来试试更多操作。</p>
<h3>命令行工具 Brew</h3>
<p>Homebrew 宣称自己是一款默认只 “安装你需要而 [Linux] 没有的东西”的应用程序。</p>
<p>你可以用 <code>brew</code> 命令安装任何打包在 Homebrew 中的命令行软件。这些包的定义文件叫做 “<ruby> 秘方 <rt>  formula </rt></ruby>”，而且它们通过“<ruby> 瓶子 <rt>  bottle </rt></ruby>”来编译并分享。在 Homebrew 的世界里，还有许多 “啤酒方面” 的术语，但这个包管理器主要目的是让软件便于使用。</p>
<p>都有些什么样的软件呢？对我这样的技术玩家（既然你已经在读这篇文章，估计你也是）来说最方便的东西。例如，便利的 <code>tree</code> 命令，可以展示目录结构，或者 <code>pyenv</code>，我用它来 <a href="https://opensource.com/article/20/4/pyenv">在 Mac 管理不同版本 Python</a>。</p>
<p>你可以用 <code>search</code> 命令查看所有可以安装的“秘方”，在后面加上 <code>wc</code> 命令看看一共有多少：</p>
<div class="highlight"><pre><span></span><code># -l 选项统计行数
$ brew search | wc -l
    5087
</code></pre></div>

<p>迄今为止，一共有 5000 多个 “秘方”，这囊括了很多软件。需要注意的是：并非所有 “秘方” 都能在 Linux 运行。在 <code>brew search --help</code> 输出中有一节提到可以按软件运行的操作系统来筛选软件。它会在浏览器打开用于每个操作系统的软件仓库。我运行的是 Fedora，所以我会用它来试一试：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>brew<span class="w"> </span>search<span class="w"> </span>--fedora<span class="w"> </span>tree
</code></pre></div>

<p>浏览器打开了网址 <code>https://apps.fedoraproject.org/packages/s/tree</code>，向我展示了所有 Fedora 的可用选项。你也可以通过其它方法进行浏览。“秘方” 被集中整理到由操作系统划分的核心仓库当中（Mac 在 <a href="https://github.com/Homebrew/homebrew-core">Homebrew Core</a>，Linux 在 <a href="https://github.com/Homebrew/linuxbrew-core">Linux Core</a>）。同样也可以通过 Homebrew API <a href="https://formulae.brew.sh/formula/">在网页显示</a>。</p>
<p>即使有这些选择，我还是通过其它用户的推荐找到很多新工具。我列出一些我最喜欢的工具，你可以在里面找点灵感：</p>
<ul>
<li><code>pyenv</code>、<code>rbenv</code> 和 <code>nodenv</code> 用来管理（相应的） Python、Ruby 和 Node.js 版本</li>
<li><code>imagemagick</code> 用于脚本化编辑图片</li>
<li><code>pandoc</code> 用于脚本化转换文档格式（我通常将 .docx 文件转成 .md 或者 .html）</li>
<li><code>hub</code> 为 GitHub 用户提供 <a href="https://opensource.com/article/20/3/github-hub">更好的 Git 体验</a></li>
<li><code>tldr</code> 展示了命令工具的使用范例</li>
</ul>
<p>想要深入了解 Homebrew，可以去 <a href="https://github.com/tldr-pages/tldr">trldr 页面</a> 看看，比起应用的 man 页面，它要友好得多。使用 <code>search</code> 命令确认你可以安装：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>brew<span class="w"> </span>search<span class="w"> </span><span class="nv">tldr</span>
<span class="o">==</span>&gt;<span class="w"> </span>Formulae
tldr<span class="w"> </span>✔
</code></pre></div>

<p>太好了！对勾说明你可以安装。那么继续吧：</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">brew</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">tldr</span>
<span class="o">==&gt;</span><span class="w"> </span><span class="n">Downloading</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">linuxbrew</span><span class="o">.</span><span class="n">bintray</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bottles</span><span class="o">/</span><span class="n">tldr</span><span class="o">-</span><span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span><span class="n">_2</span><span class="o">.</span><span class="n">x86_64_linux</span><span class="o">.</span><span class="n">bottle</span><span class="o">.</span><span class="mf">1.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="c1">######################################################################## 100.0%</span>
<span class="o">==&gt;</span><span class="w"> </span><span class="n">Pouring</span><span class="w"> </span><span class="n">tldr</span><span class="o">-</span><span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span><span class="n">_2</span><span class="o">.</span><span class="n">x86_64_linux</span><span class="o">.</span><span class="n">bottle</span><span class="o">.</span><span class="mf">1.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="err">?</span><span class="w">  </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">linuxbrew</span><span class="o">/.</span><span class="n">linuxbrew</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">tldr</span><span class="o">/</span><span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span><span class="n">_2</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="mf">63.2</span><span class="n">KB</span>
</code></pre></div>

<p>Homebrew 提供了编译好的二进制文件，所以你不必在本地机器上从源码编译。这能节省很多时间，也不用听 CPU 风扇的噪声。我很欣赏 Homebrew 的另外一点是，你不完全理解每一个选项的含义也不会影响正常使用。若你想自己编译，可以在 <code>brew install</code> 命令后面加上 <code>-s</code> 或者 <code>--build-from-source</code> 标识，这样就能从源码编译 “秘方”（即便已经有一个 “瓶子” 存在）。</p>
<p>同样，软件底层的复杂性也很有意思。使用 <code>info</code> 可以查看 <code>tldr</code> 软件的依赖管理，“秘方” 的源代码存放在磁盘上的何处，甚至还能查看公开分析。</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">brew</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">tldr</span>
<span class="n">tldr</span><span class="o">:</span><span class="w"> </span><span class="n">stable</span><span class="w"> </span><span class="mf">1.3.0</span><span class="w"> </span><span class="p">(</span><span class="n">bottled</span><span class="p">),</span><span class="w"> </span><span class="n">HEAD</span>
<span class="n">Simplified</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">community</span><span class="o">-</span><span class="n">driven</span><span class="w"> </span><span class="n">man</span><span class="w"> </span><span class="n">pages</span>
<span class="n">https</span><span class="o">://</span><span class="n">tldr</span><span class="p">.</span><span class="n">sh</span><span class="o">/</span>
<span class="n">Conflicts</span><span class="w"> </span><span class="k">with</span><span class="o">:</span>
<span class="w">  </span><span class="n">tealdeer</span><span class="w"> </span><span class="p">(</span><span class="n">because</span><span class="w"> </span><span class="k">both</span><span class="w"> </span><span class="k">install</span><span class="w"> </span><span class="n n-Quoted">`tldr`</span><span class="w"> </span><span class="n">binaries</span><span class="p">)</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">linuxbrew</span><span class="o">/</span><span class="p">.</span><span class="n">linuxbrew</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">tldr</span><span class="o">/</span><span class="mf">1.3.0</span><span class="n">_2</span><span class="w"> </span><span class="p">(</span><span class="mi">6</span><span class="w"> </span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="mf">63.2</span><span class="n">KB</span><span class="p">)</span><span class="w"> </span><span class="o">*</span>
<span class="w">  </span><span class="n">Poured</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">bottle</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="mi">15</span><span class="o">:</span><span class="mi">56</span><span class="o">:</span><span class="mi">15</span>
<span class="k">From</span><span class="o">:</span><span class="w"> </span><span class="n">https</span><span class="o">://</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">Homebrew</span><span class="o">/</span><span class="n">linuxbrew</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="kt">blob</span><span class="o">/</span><span class="k">master</span><span class="o">/</span><span class="n">Formula</span><span class="o">/</span><span class="n">tldr</span><span class="p">.</span><span class="n">rb</span>
<span class="o">==&gt;</span><span class="w"> </span><span class="n">Dependencies</span>
<span class="n">Build</span><span class="o">:</span><span class="w"> </span><span class="n">pkg</span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="n">✔</span>
<span class="n">Required</span><span class="o">:</span><span class="w"> </span><span class="n">libzip</span><span class="w"> </span><span class="n">✔</span><span class="p">,</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="n">✔</span>
<span class="o">==&gt;</span><span class="w"> </span><span class="k">Options</span>
<span class="o">--</span><span class="n">HEAD</span>
<span class="w">        </span><span class="k">Install</span><span class="w"> </span><span class="n">HEAD</span><span class="w"> </span><span class="n">version</span>
<span class="o">==&gt;</span><span class="w"> </span><span class="n">Analytics</span>
<span class="k">install</span><span class="o">:</span><span class="w"> </span><span class="mi">197</span><span class="w"> </span><span class="p">(</span><span class="mi">30</span><span class="w"> </span><span class="n">days</span><span class="p">),</span><span class="w"> </span><span class="mi">647</span><span class="w"> </span><span class="p">(</span><span class="mi">90</span><span class="w"> </span><span class="n">days</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">546</span><span class="w"> </span><span class="p">(</span><span class="mi">365</span><span class="w"> </span><span class="n">days</span><span class="p">)</span>
<span class="k">install</span><span class="o">-</span><span class="k">on</span><span class="o">-</span><span class="n">request</span><span class="o">:</span><span class="w"> </span><span class="mi">197</span><span class="w"> </span><span class="p">(</span><span class="mi">30</span><span class="w"> </span><span class="n">days</span><span class="p">),</span><span class="w"> </span><span class="mi">646</span><span class="w"> </span><span class="p">(</span><span class="mi">90</span><span class="w"> </span><span class="n">days</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">546</span><span class="w"> </span><span class="p">(</span><span class="mi">365</span><span class="w"> </span><span class="n">days</span><span class="p">)</span>
<span class="n">build</span><span class="o">-</span><span class="k">error</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="mi">30</span><span class="w"> </span><span class="n">days</span><span class="p">)</span>
</code></pre></div>

<h3>从 Mac 到 Linux 的一点不足</h3>
<p>在 macOS，Homebrew 的 <code>cask</code>（“酒桶”）子命令可以让用户使用命令行安装、管理整个应用软件。不幸的是，<code>cask</code>还不能在任何 Linux 发行版上使用。我在安装一个开源工具时发现了这点：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>brew<span class="w"> </span>cask<span class="w"> </span>install<span class="w"> </span>tusk
Error:<span class="w"> </span>Installing<span class="w"> </span>casks<span class="w"> </span>is<span class="w"> </span>supported<span class="w"> </span>only<span class="w"> </span>on<span class="w"> </span>macOS
</code></pre></div>

<p>我在 <a href="https://discourse.brew.sh/t/add-linux-support-to-existing-cask/5766">论坛上</a> 问了一下，很快得到其他用户的反馈。总结一下，方案如下：</p>
<ul>
<li>复刻 Homebrew 项目，构建这个特性，然后像别人展示其价值</li>
<li>给该软件写一个 “秘方”，然后从源代码编译</li>
<li>为该软件创建一个第三方仓库</li>
</ul>
<p>最后一个是我最感兴趣的。Homebrew 通过 <a href="https://docs.brew.sh/How-to-Create-and-Maintain-a-Tap">创建并维护 “<ruby> 水龙头 <rt>  tap </rt></ruby>”</a> （另一个受啤酒影响的术语）管理第三方仓库。随着你对系统越来越熟悉，并想加入生态系统， “水龙头” 是值得研究的。</p>
<h3>备份 Homebrew 的安装记录</h3>
<p>我最中意的 Homebrew 特性之一就是你可以像其它任何 <a href="https://opensource.com/article/19/3/move-your-dotfiles-version-control">用版本控制工具来备份点文件</a> 一样备份你的安装记录。为了实现这个目的，Homebrew 提供 <code>bundle</code>（“捆扎”）子命令，它可以控制一个叫 <code>dump</code>（“倾倒”）的子命令生成一个 <code>Brewfile</code>。这个文件包含你目前所有安装的工具列表，可以重复使用。进入你想使用的目录然后运行命令，它会根据你所安装的软件生成 <code>Brewfile</code>：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/Development/dotfiles<span class="w"> </span><span class="c1"># This is my dotfile folder</span>
$<span class="w"> </span>brew<span class="w"> </span>bundle<span class="w"> </span>dump
$<span class="w"> </span>ls<span class="w"> </span>Brewfile
Brewfile
</code></pre></div>

<p>当我换了一台机器，想要安装一样的软件时，进入含有 <code>Brewfile</code> 的文件夹，然后重新安装：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>Brewfile
Brewfile
$<span class="w"> </span>brew<span class="w"> </span>bundle
</code></pre></div>

<p>它会在我的新机器上安装所有列出的 “秘方”。</p>
<h4>在 Mac 和 Linux 同时管理 Brewfile</h4>
<p><code>Brewfile</code> 非常适合备份你目前的安装记录，但是如果某些在 Mac 上运行的软件无法运行在 Linux 呢？或者刚好相反？我发现不管是 Mac 还是 Linux，如果软件无法在当前操作系统运行，Homebrew 会优雅地忽略那一行。如果它遇到不兼容的请求（比如使用 <code>brew</code> 在 Linux 安装 “<ruby> 酒桶 <rt>  cask </rt></ruby>” 时），它会选择跳过，继续安装过程：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>brew<span class="w"> </span>bundle<span class="w"> </span>--file<span class="o">=</span>Brewfile.example

Skipping<span class="w"> </span>cask<span class="w"> </span>licecap<span class="w"> </span><span class="o">(</span>on<span class="w"> </span>Linux<span class="o">)</span>
Skipping<span class="w"> </span>cask<span class="w"> </span>macdown<span class="w"> </span><span class="o">(</span>on<span class="w"> </span>Linux<span class="o">)</span>
Installing<span class="w"> </span>fish
Homebrew<span class="w"> </span>Bundle<span class="w"> </span>complete!<span class="w"> </span><span class="m">1</span><span class="w"> </span>Brewfile<span class="w"> </span>dependency<span class="w"> </span>now<span class="w"> </span>installed.
</code></pre></div>

<p>为了保持配置文件的简洁，我在两个操作系统上使用同一份 <code>Brewfile</code>，因为它只安装与操作系统相关的版本，所以我一直没有遇到任何问题。</p>
<h3>使用 Homebrew 管理软件包</h3>
<p>Homebrew 已经成了我必备的命令行工具，由于我很熟悉它，所以在 Linux 上的体验也充满乐趣。Homebrew 让我的工具井然有序，并且时刻保持更新，我愈发欣赏它在实用性与功能上找到的平衡点。我更喜欢将软件包管理的细节保持在用户需要了解的最小程度，大多数人都会从中受益。如果你已经很熟悉 Linux 包管理器了，Homebrew 可能会让你觉得很基础，但稍微深入一点看，就会发现它的高级选项远远超过本文的内容。</p>
<p>对 Linux 用户来说，他们有很多包管理器可以选择。如果你来自 MacOS，Homebrew 会让你宾至如归。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>