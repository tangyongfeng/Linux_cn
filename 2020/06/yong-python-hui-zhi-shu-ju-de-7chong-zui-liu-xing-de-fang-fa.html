<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>用 Python 绘制数据的7种最流行的方法</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Shaun Taylor-morgan 比较七个在 Python 中绘图的库和 API，看看哪个最能满足你的需求。 “如何在 Python 中绘图？”曾经这个问题有一个简单的答案：Matplotlib …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/06/yong-python-hui-zhi-shu-ju-de-7chong-zui-liu-xing-de-fang-fa.html" rel="bookmark"
           title="Permalink to 用 Python 绘制数据的7种最流行的方法">用 Python 绘制数据的7种最流行的方法</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-06-18T00:11:51+02:00">
                Published: Thu 18 June 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Shaun Taylor-morgan</p>
<p><img alt="" src="/data/attachment/album/202006/18/000953eg4zpk3kfifqv4px.jpg"></p>
<blockquote>
<p>比较七个在 Python 中绘图的库和 API，看看哪个最能满足你的需求。</p>
</blockquote>
<p>“如何在 Python 中绘图？”曾经这个问题有一个简单的答案：Matplotlib 是唯一的办法。如今，Python 作为数据科学的语言，有着更多的选择。你应该用什么呢？</p>
<p>本指南将帮助你决定。</p>
<p>它将向你展示如何使用四个最流行的 Python 绘图库：Matplotlib、Seaborn、Plotly 和 Bokeh，再加上两个值得考虑的优秀的后起之秀：Altair，拥有丰富的 API；Pygal，拥有漂亮的 SVG 输出。我还会看看 Pandas 提供的非常方便的绘图 API。</p>
<p>对于每一个库，我都包含了源代码片段，以及一个使用 <a href="https://anvil.works/">Anvil</a> 的完整的基于 Web 的例子。Anvil 是我们的平台，除了 Python 之外，什么都不用做就可以构建网络应用。让我们一起来看看。</p>
<h3>示例绘图</h3>
<p>每个库都采取了稍微不同的方法来绘制数据。为了比较它们，我将用每个库绘制同样的图，并给你展示源代码。对于示例数据，我选择了这张 1966 年以来英国大选结果的分组柱状图。</p>
<p><img alt="Bar chart of British election data" src="/data/attachment/album/202006/18/001157cnngxterp7tnmol7.png"></p>
<p>我从维基百科上整理了<a href="https://en.wikipedia.org/wiki/United_Kingdom_general_elections_overview">英国选举史的数据集</a>：从 1966 年到 2019 年，保守党、工党和自由党（广义）在每次选举中赢得的英国议会席位数，加上“其他”赢得的席位数。你可以<a href="https://anvil.works/blog/img/plotting-in-python/uk-election-results.csv">以 CSV 文件格式下载它</a>。</p>
<h3>Matplotlib</h3>
<p><a href="https://matplotlib.org/">Matplotlib</a> 是最古老的 Python 绘图库，现在仍然是最流行的。它创建于 2003 年，是 <a href="https://www.scipy.org/about.html">SciPy Stack</a> 的一部分，SciPy Stack 是一个类似于 <a href="https://www.mathworks.com/products/matlab.html">Matlab</a> 的开源科学计算库。</p>
<p>Matplotlib 为你提供了对绘制的精确控制。例如，你可以在你的条形图中定义每个条形图的单独的 X 位置。下面是绘制这个图表的代码（你可以在<a href="https://anvil.works/blog/plotting-in-matplotlib">这里</a>运行）：</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">from</span> <span class="nn">votes</span> <span class="kn">import</span> <span class="n">wide</span> <span class="k">as</span> <span class="n">df</span>

    <span class="c1"># Initialise a figure. subplots() with no args gives one plot.</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1"># A little data preparation</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">years</span><span class="p">))</span>

    <span class="c1"># Plot each bar plot. Note: manually calculating the &#39;dodges&#39; of the bars</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;conservative&#39;</span><span class="p">],</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Conservative&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#0343df&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;labour&#39;</span><span class="p">],</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Labour&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#e50000&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;liberal&#39;</span><span class="p">],</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Liberal&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#ffff14&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;others&#39;</span><span class="p">],</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Others&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#929591&#39;</span><span class="p">)</span>

    <span class="c1"># Customise some display properties</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Seats&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;UK election results&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>    <span class="c1"># This ensures we have one tick per year, otherwise we get fewer</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">years</span><span class="o">.</span><span class="kp">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

    <span class="c1"># Ask Matplotlib to show the plot</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>这是用 Matplotlib 绘制的选举结果:</p>
<p><img alt="Matplotlib plot of British election data" src="/data/attachment/album/202006/18/001159hrlkb13hs2lxo1sq.png"></p>
<h3>Seaborn</h3>
<p><a href="https://seaborn.pydata.org/">Seaborn</a> 是 Matplotlib 之上的一个抽象层；它提供了一个非常整洁的界面，让你可以非常容易地制作出各种类型的有用绘图。</p>
<p>不过，它并没有在能力上有所妥协！Seaborn 提供了访问底层 Matplotlib 对象的<a href="https://anvil.works/blog/escape-hatches-and-ejector-seats">逃生舱口</a>，所以你仍然可以进行完全控制。</p>
<p>Seaborn 的代码比原始的 Matplotlib 更简单（可在<a href="https://anvil.works/blog/plotting-in-seaborn">此处</a>运行）：</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
    <span class="kn">from</span> <span class="nn">votes</span> <span class="kn">import</span> <span class="n">long</span> <span class="k">as</span> <span class="n">df</span>

    <span class="c1"># Some boilerplate to initialise things</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

    <span class="c1"># This is where the actual plot gets made</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;seats&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;party&quot;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;grey&#39;</span><span class="p">],</span> <span class="n">saturation</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

    <span class="c1"># Customise some display properties</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;UK election results&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#cccccc&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Seats&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>

    <span class="c1"># Ask Matplotlib to show it</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>并生成这样的图表：</p>
<p><img alt="Seaborn plot of British election data" src="/data/attachment/album/202006/18/001205lhb1exzhuwb7h18q.png"></p>
<h3>Plotly</h3>
<p><a href="https://plot.ly/">Plotly</a> 是一个绘图生态系统，它包括一个 Python 绘图库。它有三个不同的接口：</p>
<ol>
<li>一个面向对象的接口。</li>
<li>一个命令式接口，允许你使用类似 JSON 的数据结构来指定你的绘图。</li>
<li>类似于 Seaborn 的高级接口，称为 Plotly Express。</li>
</ol>
<p>Plotly 绘图被设计成嵌入到 Web 应用程序中。Plotly 的核心其实是一个 JavaScript 库！它使用 <a href="https://d3js.org/">D3</a> 和 <a href="http://stack.gl/">stack.gl</a> 来绘制图表。</p>
<p>你可以通过向该 JavaScript 库传递 JSON 来构建其他语言的 Plotly 库。官方的 Python 和 R 库就是这样做的。在 Anvil，我们将 Python Plotly API 移植到了 <a href="https://anvil.works/docs/client/components/plots">Web 浏览器中运行</a>。</p>
<p>这是使用 Plotly 的源代码（你可以在这里<a href="https://anvil.works/blog/plotting-in-plotly">运行</a>）：</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>
    <span class="kn">from</span> <span class="nn">votes</span> <span class="kn">import</span> <span class="n">wide</span> <span class="k">as</span> <span class="n">df</span>

    <span class="c1">#  Get a convenient list of x-values</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">years</span><span class="p">)))</span>

    <span class="c1"># Specify the plots</span>
    <span class="n">bar_plots</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;conservative&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Conservative&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#0343df&#39;</span><span class="p">)),</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;labour&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Labour&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#e50000&#39;</span><span class="p">)),</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;liberal&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Liberal&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#ffff14&#39;</span><span class="p">)),</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;others&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Others&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#929591&#39;</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="c1"># Customise some display properties</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Election results&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span>
        <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Seats&quot;</span><span class="p">,</span>
        <span class="n">xaxis_tickmode</span><span class="o">=</span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
        <span class="n">xaxis_tickvals</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">27</span><span class="p">)),</span>
        <span class="n">xaxis_ticktext</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Make the multi-bar plot</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">bar_plots</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

    <span class="c1"># Tell Plotly to render it</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>选举结果图表：</p>
<p><img alt="Plotly plot of British election data" src="/data/attachment/album/202006/18/001409t1f5ld315p98r1x1.gif" title="Plotly plot of British election data"></p>
<h3>Bokeh</h3>
<p><a href="https://docs.bokeh.org/en/latest/index.html">Bokeh</a>（发音为 “BOE-kay”）擅长构建交互式绘图，所以这个标准的例子并没有将其展现其最好的一面。和 Plotly 一样，Bokeh 的绘图也是为了嵌入到 Web 应用中，它以 HTML 文件的形式输出绘图。</p>
<p>下面是使用 Bokeh 的代码（你可以在<a href="https://anvil.works/blog/plotting-in-bokeh">这里</a>运行）：</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">show</span><span class="p">,</span> <span class="n">output_file</span>
    <span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">FactorRange</span><span class="p">,</span> <span class="n">HoverTool</span>
    <span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
    <span class="kn">from</span> <span class="nn">bokeh.transform</span> <span class="kn">import</span> <span class="n">factor_cmap</span>
    <span class="kn">from</span> <span class="nn">votes</span> <span class="kn">import</span> <span class="n">long</span> <span class="k">as</span> <span class="n">df</span>

    <span class="c1"># Specify a file to write the plot to</span>
    <span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;elections.html&quot;</span><span class="p">)</span>

    <span class="c1"># Tuples of groups (year, party)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]),</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;party&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;seats&#39;</span><span class="p">]</span>

    <span class="c1"># Bokeh wraps your data in its own objects to support interactivity</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span>

    <span class="c1"># Create a colourmap</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Conservative&#39;</span><span class="p">:</span> <span class="s1">&#39;#0343df&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Labour&#39;</span><span class="p">:</span> <span class="s1">&#39;#e50000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Liberal&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffff14&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Others&#39;</span><span class="p">:</span> <span class="s1">&#39;#929591&#39;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">fill_color</span> <span class="o">=</span> <span class="n">factor_cmap</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">factors</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Make the plot</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_range</span><span class="o">=</span><span class="n">FactorRange</span><span class="p">(</span><span class="o">*</span><span class="n">x</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Election results&quot;</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">vbar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>

    <span class="c1"># Customise some display properties</span>
    <span class="n">p</span><span class="o">.</span><span class="n">y_range</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">p</span><span class="o">.</span><span class="n">x_range</span><span class="o">.</span><span class="n">range_padding</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Seats&#39;</span>
    <span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major_label_orientation</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">p</span><span class="o">.</span><span class="n">xgrid</span><span class="o">.</span><span class="n">grid_line_color</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

<p>图表如下：</p>
<p><img alt="Bokeh plot of British election data" src="/data/attachment/album/202006/18/001417wgh442d4ox7ef3z5.png" title="Bokeh plot of British election data"></p>
<h3>Altair</h3>
<p><a href="https://altair-viz.github.io/">Altair</a> 是基于一种名为 <a href="https://vega.github.io/vega/">Vega</a> 的声明式绘图语言（或“可视化语法”）。这意味着它具有经过深思熟虑的 API，可以很好地扩展复杂的绘图，使你不至于在嵌套循环的地狱中迷失方向。</p>
<p>与 Bokeh 一样，Altair 将其图形输出为 HTML 文件。这是代码（你可以在<a href="https://anvil.works/blog/plotting-in-altair">这里</a>运行）：</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
    <span class="kn">from</span> <span class="nn">votes</span> <span class="kn">import</span> <span class="n">long</span> <span class="k">as</span> <span class="n">df</span>

    <span class="c1"># Set up the colourmap</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Conservative&#39;</span><span class="p">:</span> <span class="s1">&#39;#0343df&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Labour&#39;</span><span class="p">:</span> <span class="s1">&#39;#e50000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Liberal&#39;</span><span class="p">:</span> <span class="s1">&#39;#ffff14&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Others&#39;</span><span class="p">:</span> <span class="s1">&#39;#929591&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># Cast years to strings</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

    <span class="c1"># Here&#39;s where we make the plot</span>
    <span class="n">chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;party&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
        <span class="n">y</span><span class="o">=</span><span class="s1">&#39;seats&#39;</span><span class="p">,</span>
        <span class="n">column</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]),</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
        <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;party&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="nb">range</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">values</span><span class="p">())))</span>
    <span class="p">)</span>

    <span class="c1"># Save it as an HTML file.</span>
    <span class="n">chart</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;altair-elections.html&#39;</span><span class="p">)</span>
</code></pre></div>

<p>结果图表：</p>
<p><img alt="Altair plot of British election data" src="/data/attachment/album/202006/18/001421cdtudgog0450gjd8.png" title="Altair plot of British election data"></p>
<h3>Pygal</h3>
<p><a href="http://www.pygal.org/en/stable/">Pygal</a> 专注于视觉外观。它默认生成 SVG 图，所以你可以无限放大它们或打印出来，而不会被像素化。Pygal 绘图还内置了一些很好的交互性功能，如果你想在 Web 应用中嵌入绘图，Pygal 是另一个被低估了的候选者。</p>
<p>代码是这样的（你可以在<a href="https://anvil.works/blog/plotting-in-pygal">这里</a>运行它）：</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">pygal</span>
    <span class="kn">from</span> <span class="nn">pygal.style</span> <span class="kn">import</span> <span class="n">Style</span>
    <span class="kn">from</span> <span class="nn">votes</span> <span class="kn">import</span> <span class="n">wide</span> <span class="k">as</span> <span class="n">df</span>

    <span class="c1"># Define the style</span>
    <span class="n">custom_style</span> <span class="o">=</span> <span class="n">Style</span><span class="p">(</span>
        <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;#0343df&#39;</span><span class="p">,</span> <span class="s1">&#39;#e50000&#39;</span><span class="p">,</span> <span class="s1">&#39;#ffff14&#39;</span><span class="p">,</span> <span class="s1">&#39;#929591&#39;</span><span class="p">)</span>
        <span class="n">font_family</span><span class="o">=</span><span class="s1">&#39;Roboto,Helvetica,Arial,sans-serif&#39;</span><span class="p">,</span>
        <span class="n">background</span><span class="o">=</span><span class="s1">&#39;transparent&#39;</span><span class="p">,</span>
        <span class="n">label_font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Set up the bar plot, ready for data</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">pygal</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;UK Election Results&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">custom_style</span><span class="p">,</span>
        <span class="n">y_title</span><span class="o">=</span><span class="s1">&#39;Seats&#39;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span>
        <span class="n">x_label_rotation</span><span class="o">=</span><span class="mi">270</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Add four data sets to the bar plot</span>
    <span class="n">c</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Conservative&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;conservative&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Labour&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;labour&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Liberal&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;liberal&#39;</span><span class="p">])</span>
    <span class="n">c</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Others&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;others&#39;</span><span class="p">])</span>

    <span class="c1"># Define the X-labels</span>
    <span class="n">c</span><span class="o">.</span><span class="n">x_labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span>

    <span class="c1"># Write this to an SVG file</span>
    <span class="n">c</span><span class="o">.</span><span class="n">render_to_file</span><span class="p">(</span><span class="s1">&#39;pygal.svg&#39;</span><span class="p">)</span>
</code></pre></div>

<p>绘制结果：</p>
<p><img alt="Pygal plot of British election data" src="/data/attachment/album/202006/18/001431skaluz4embb4ozlf.png" title="Pygal plot of British election data"></p>
<h3>Pandas</h3>
<p><a href="https://pandas.pydata.org/">Pandas</a> 是 Python 的一个极其流行的数据科学库。它允许你做各种可扩展的数据处理，但它也有一个方便的绘图 API。因为它直接在数据帧上操作，所以 Pandas 的例子是本文中最简洁的代码片段，甚至比 Seaborn 的代码还要短！</p>
<p>Pandas API 是 Matplotlib 的一个封装器，所以你也可以使用底层的 Matplotlib API 来对你的绘图进行精细的控制。</p>
<p>这是 Pandas 中的选举结果图表。代码精美简洁！</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span>
    <span class="kn">from</span> <span class="nn">votes</span> <span class="kn">import</span> <span class="n">wide</span> <span class="k">as</span> <span class="n">df</span>

    <span class="n">cmap</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">([</span><span class="s1">&#39;#0343df&#39;</span><span class="p">,</span> <span class="s1">&#39;#e50000&#39;</span><span class="p">,</span> <span class="s1">&#39;#ffff14&#39;</span><span class="p">,</span> <span class="s1">&#39;#929591&#39;</span><span class="p">])</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Seats&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;UK election results&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>绘图结果：</p>
<p><img alt="Pandas plot of British election data" src="/data/attachment/album/202006/18/001434w92kbi5jp9x797z5.png" title="Pandas plot of British election data"></p>
<p>要运行这个例子，请看<a href="https://anvil.works/blog/plotting-in-pandas">这里</a>。</p>
<h3>以你的方式绘制</h3>
<p>Python 提供了许多绘制数据的方法，无需太多的代码。虽然你可以通过这些方法快速开始创建你的绘图，但它们确实需要一些本地配置。如果需要，<a href="https://anvil.works/">Anvil</a> 为 Python 开发提供了精美的 Web 体验。祝你绘制愉快！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>