<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>11 年后重新打造的 rdiff-backup 2.0 有什么新功能？</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Patrik Dufresne 这个老牌 Linux 备份方案迁移到了 Python 3 提供了添加许多新功能的机会。 2020 年 3 月，rdiff-backup 升级到了 2.0 版，这距离上一个主 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li class="active"><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/09/11-nian-hou-zhong-xin-da-zao-de-rdiff-backup-20-you-shi-yao-xin-gong-neng.html" rel="bookmark"
           title="Permalink to 11 年后重新打造的 rdiff-backup 2.0 有什么新功能？">11 年后重新打造的 rdiff-backup 2.0 有什么新功能？</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-09-29T09:49:19+02:00">
                Published: Tue 29 September 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xi-tong-yun-wei">系统运维</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Patrik Dufresne</p>
<blockquote>
<p>这个老牌 Linux 备份方案迁移到了 Python 3 提供了添加许多新功能的机会。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202009/29/094858pb9pa3sppsq9x5z1.jpg"></p>
<p>2020 年 3 月，<a href="https://rdiff-backup.net/">rdiff-backup</a> 升级到了 2.0 版，这距离上一个主要版本已经过去了 11 年。2020 年初 Python 2 的废弃是这次更新的动力，但它为开发团队提供了整合其他功能和优势的机会。</p>
<p>大约二十年来，<code>rdiff-backup</code> 帮助 Linux 用户在本地或远程维护他们的数据的完整备份，而无需无谓地消耗资源。这是因为这个开源解决方案可以进行反向增量备份，只备份从上一次备份中改变的文件。</p>
<p>这次改版（或者说，重生）得益于一个新的、自组织的开发团队（由来自 <a href="https://www.ikus-soft.com/en/">IKUS Software</a> 的 Eric Zolf 和 Patrik Dufresne，以及来自 <a href="https://seravo.fi/english">Seravo</a> 的 Otto Kekäläinen 共同领导）的努力，为了所有 <code>rdiff-backup</code> 用户的利益，他们齐心协力。</p>
<h3>rdiff-backup 的新功能</h3>
<p>在 Eric 的带领下，随着向 Python 3 的迁移，项目被迁移到了一个新的、不受企业限制的<a href="https://github.com/rdiff-backup/rdiff-backup">仓库</a>，以欢迎贡献。团队还整合了多年来提交的所有补丁，包括对稀疏文件的支持和对硬链接的修复。</p>
<h4>用 Travis CI 实现自动化</h4>
<p>另一个巨大的改进是增加了一个使用开源 <a href="https://en.wikipedia.org/wiki/Travis_CI">Travis CI</a> 的持续集成/持续交付（CI/CD）管道。这允许在各种环境下测试 <code>rdiff-backup</code>，从而确保变化不会影响方案的稳定性。CI/CD 管道包括集成所有主要平台的构建和二进制发布。</p>
<h4>使用 yum 和 apt 轻松安装</h4>
<p>新的 <code>rdiff-backup</code> 解决方案可以运行在所有主流的 Linux 发行版上，包括 Fedora、Red Hat、Elementary、Debian 等。Frank 和 Otto 付出了艰辛的努力，提供了开放的仓库以方便访问和安装。你可以使用你的软件包管理器安装 <code>rdiff-backup</code>，或者按照 GitHub 项目页面上的<a href="https://github.com/rdiff-backup/rdiff-backup#installation">分步说明</a>进行安装。</p>
<h4>新的主页</h4>
<p>团队将网站从 Savannah 迁移到了 GitHub Pages，并对 <a href="https://rdiff-backup.net/">rdiff-backup.net</a> 官网进行了改版，加入了新的内容，让外观和感觉更加到位。</p>
<h3>如何使用 rdiff-backup</h3>
<p>如果你是 <code>rdiff-backup</code> 的新手，你可能会对它的易用性感到惊讶。备份方案应该让你对备份和恢复过程感到舒适，而不是吓人。</p>
<h4>开始备份</h4>
<p>要开始备份到本地驱动器，例如通过 USB 连接的驱动器，输入 <code>rdiff-backup</code> 命令，然后输入要备份的驱动器和要存储文件的目标目录。</p>
<p>例如，要备份到名为 <code>my_backup_drive</code> 的本地驱动器，请输入：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>rdiff-backup<span class="w"> </span>/home/tux/<span class="w"> </span>/run/media/tux/my_backup_drive/
</code></pre></div>

<p>要将数据备份到异地存储，请使用远程服务器的位置，并在 <code>::</code> 后面指向备份驱动器的挂载点：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>rdiff-backup<span class="w"> </span>/home/tux/<span class="w"> </span>tux@example.com::/my_backup_drive/
</code></pre></div>

<p>你可能需要<a href="https://opensource.com/article/20/8/how-ssh">设置 SSH 密钥</a>来使这个过程更轻松。</p>
<h4>还原文件</h4>
<p>做备份的原因是有时文件会丢失。为了使恢复尽可能简单，你甚至不需要 <code>rdiff-backup</code> 来恢复文件（虽然使用 <code>rdiff-backup</code> 命令提供了一些方便）。</p>
<p>如果你需要从备份驱动器中获取一个文件，你可以使用 <code>cp</code> 将其从备份驱动器复制到本地系统，或者对于远程驱动器使用 <code>scp</code> 命令。</p>
<p>对于本地驱动器，使用：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cp<span class="w"> </span>_run_media/tux/my_backup_drive/Documents/example.txt<span class="w"> </span>~/Documents
</code></pre></div>

<p>或者用于远程驱动器：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>scp<span class="w"> </span>tux@example.com::/my_backup_drive/Documents/example.txt<span class="w"> </span>~/Documents
</code></pre></div>

<p>然而，使用 <code>rdiff-backup</code> 命令提供了其他选项，包括 <code>--restore-as-of</code>。这允许你指定你要恢复的文件的哪个版本。</p>
<p>例如，假设你想恢复一个文件在四天前的版本：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>rdiff-backup<span class="w"> </span>--restore-as-of<span class="w"> </span>4D<span class="w"> </span>/run/media/tux/foo.txt<span class="w"> </span>~/foo_4D.txt
</code></pre></div>

<p>你也可以用 <code>rdiff-backup</code> 来获取最新版本：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>rdiff-backup<span class="w"> </span>--restore-as-of<span class="w"> </span>now<span class="w"> </span>/run/media/tux/foo.txt<span class="w"> </span>~/foo_4D.txt<span class="sb">`</span>
</code></pre></div>

<p>就是这么简单。另外，<code>rdiff-backup</code> 还有很多其他选项，例如，你可以从列表中排除文件，从一个远程备份到另一个远程等等，这些你可以在<a href="https://rdiff-backup.net/docs/examples.html">文档</a>中了解。</p>
<h3>总结</h3>
<p>我们的开发团队希望用户能够喜欢这个改版后的开源 <code>rdiff-backup</code> 方案，这是我们不断努力的结晶。我们也感谢我们的贡献者，他们真正展示了开源的力量。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>