<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在你的 Android 手机上创建和运行 Python 应用</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Phani Adabala 使用 Termux 和 Flask 在你的移动设备上创建、开发和运行一个网页应用。 学习和使用 Python 是很有趣的。由于它越来越受欢迎，有 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/09/zai-ni-de-android-shou-ji-shang-chuang-jian-he-yun-xing-python-ying-yong.html" rel="bookmark"
           title="Permalink to 在你的 Android 手机上创建和运行 Python 应用">在你的 Android 手机上创建和运行 Python 应用</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-09-04T21:49:00+02:00">
                Published: Fri 04 September 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Phani Adabala</p>
<blockquote>
<p>使用 Termux 和 Flask 在你的移动设备上创建、开发和运行一个网页应用。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202009/04/214901zsohgryndzrcs6zz.jpg"></p>
<p>学习和使用 Python 是很有趣的。由于它越来越受欢迎，有越来越多的方式可以让计算世界比现在更好。</p>
<p>想象一下，只需一个 Android 移动设备和开源工具，就可以构建和运行一个 Python 应用，无论是开发一个命令行工具从互联网上获取你最喜欢的文章，还是启动一个直接在掌上设备运行的网页服务器，所有这些都可以实现。这将完全改变你对移动设备的看法，将它从一个仅仅让你消费内容的设备变成一个帮助你发挥创造力的设备。</p>
<p>在本文中，我将演示运行和测试一个简单的 Python 应用所需的所有的工具、软件包、步骤和各种零零散散的东西。我使用 <a href="https://opensource.com/article/18/4/flask">Flask 框架</a>来创建一个简单的 “Hello, World!” 应用，并在一个简单而强大的网页服务器上运行。最棒的是，这一切都发生在手机上。不需要笔记本或台式机。</p>
<h3>在 Android 上安装 Termux</h3>
<p>首先，<a href="https://opensource.com/article/20/8/termux">安装 Termux 应用程序</a>。Termux 是一个强大的终端仿真器，它提供了所有最流行的 Linux 命令，加上数百个额外的包，以便于安装。它不需要任何特殊的权限，你可以使用默认的 <a href="https://play.google.com/store/apps/details?id=com.termux">Google Play</a> 商店或开源应用仓库 <a href="https://f-droid.org/repository/browse/?fdid=com.termux">F-Droid</a> 来安装。</p>
<p><img alt="" src="/data/attachment/album/202009/04/215255dl0ojyor0j5r5tj0.jpg"></p>
<p>安装 Termux 后，启动它并使用 Termux 的 <code>pkg</code> 命令执行一些必要的软件安装。</p>
<p>订阅附加仓库 <code>root-repo</code>：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pkg<span class="w"> </span>install<span class="w"> </span>root-repo
</code></pre></div>

<p>执行更新，使所有安装的软件达到最新状态。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pkg<span class="w"> </span>update
</code></pre></div>

<p>最后，安装 Python：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pkg<span class="w"> </span>install<span class="w"> </span>python
</code></pre></div>

<p><img alt="" src="/data/attachment/album/202009/04/215342dibmbruiu6ya3iiw.jpg"></p>
<p>安装和自动配置完成后，就可以构建你的应用了。</p>
<h3>在 Android 上构建一个 Android 应用</h3>
<p>现在你已经安装了一个终端，你可以在很大程度上像使用另一台 Linux 电脑一样使用你的 Android 手机。这很好地展示了终端到底有多强大。</p>
<p>首先创建一个项目目录：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdir<span class="w"> </span>Source
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>Source
</code></pre></div>

<p>接下来，创建一个 Python 虚拟环境。这是 Python 开发者的常见做法，它有助于让你的 Python 项目独立于你的开发系统（在本例中是你的手机）。在你的虚拟环境中，你将能够安装特定于你应用的 Python 模块。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
</code></pre></div>

<p>激活你的新虚拟环境（注意，开头的两个点用空格隔开）</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>.<span class="w"> </span>./venv/bin/activate
<span class="o">(</span>env<span class="o">)</span>$
</code></pre></div>

<p>请注意你的 shell 提示符现在以 <code>(env)</code> 开头，表示你在虚拟环境中。</p>
<p>现在使用 <code>pip</code> 安装 Flask Python 模块。</p>
<div class="highlight"><pre><span></span><code>(env) $ pip install flask
</code></pre></div>

<h3>在 Android 上写 Python 代码</h3>
<p>你已经准备好了。现在你需要为你的应用编写代码。</p>
<p>要做到这一点，你需要有经典文本编辑器的经验。我使用的是 <code>vi</code>。如果你不熟悉 <code>vi</code>，请安装并试用 <code>vimtutor</code>，它（如其名称所暗示的）可以教你如何使用这个编辑器。如果你有其他你喜欢的编辑器，如 <code>jove</code>、<code>jed</code>、<code>joe</code> 或 <code>emacs</code>，你可以安装并使用其中一个。</p>
<p>现在，由于这个演示程序非常简单，你也可以直接使用 shell 的 heredoc 功能，它允许你直接在提示符中输入文本。</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="n">env</span><span class="p">)</span><span class="err">$</span> <span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="n">EOF</span> <span class="o">&gt;&gt;</span> <span class="n">hello_world</span><span class="o">.</span><span class="n">py</span>
<span class="o">&gt;</span> <span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="o">&gt;</span> <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
<span class="o">&gt;</span>     <span class="k">return</span> <span class="s1">&#39;Hello, World!&#39;</span>
<span class="o">&gt;</span> <span class="n">EOF</span>
<span class="p">(</span><span class="n">env</span><span class="p">)</span><span class="err">$</span>
</code></pre></div>

<p>这只有六行代码，但有了它，你可以导入 Flask，创建一个应用，并将传入流量路由到名为 <code>hello_world</code> 的函数。</p>
<p><img alt="" src="/data/attachment/album/202009/04/215417sl50660g565zlxxe.jpg"></p>
<p>现在你已经准备好了网页服务器的代码。现在是时候设置一些<a href="https://opensource.com/article/19/8/what-are-environment-variables">环境变量</a>，并在你的手机上启动一个网页服务器了。</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">FLASK_APP</span><span class="o">=</span><span class="n">hello_world</span><span class="o">.</span><span class="n">py</span>
<span class="p">(</span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">FLASK_ENV</span><span class="o">=</span><span class="n">development</span>
<span class="p">(</span><span class="n">evn</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">hello_world</span><span class="o">.</span><span class="n">py</span>
</code></pre></div>

<p><img alt="" src="/data/attachment/album/202009/04/215445o8g1osga8uuuhbbg.jpg"></p>
<p>启动应用后，你会看到这条消息:</p>
<div class="highlight"><pre><span></span><code>serving Flask app… running on http://127.0.0.1:5000/
</code></pre></div>

<p>这表明你现在在 localhost（也就是你的设备）上运行着一个微型网页服务器。该服务器正在监听来自 5000 端口的请求。</p>
<p>打开你的手机浏览器并进入到 <code>http://localhost:5000</code>，查看你的网页应用。</p>
<p><img alt="" src="/data/attachment/album/202009/04/215514kkvf4ykkfvhec84z.jpg"></p>
<p>你并没有损害手机的安全性。你只运行了一个本地服务器，这意味着你的手机不接受来自外部世界的请求。只有你可以访问你的 Flask 服务器。</p>
<p>为了让别人看到你的服务器，你可以在 <code>run</code> 命令中加入 <code>--host=0.0.0.0</code> 来禁用 Flask 的调试模式。这会打开你的手机上的端口，所以要谨慎使用。</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">FLASK_ENV</span><span class="o">=</span><span class="err">””</span>
<span class="p">(</span><span class="n">env</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">flask</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">–</span><span class="n">host</span><span class="o">=</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
</code></pre></div>

<p>按 <code>Ctrl+C</code> 停止服务器（使用特殊的 <code>Termux</code> 键来作为 <code>Ctrl</code> 键）。</p>
<h3>决定下一步怎么做</h3>
<p>你的手机可能不是一个严肃的网页应用的理想服务器平台，但这个例子证明了可能性是无限的。你可能会在 Android 手机上编程，只是因为这是一种方便的实践方式，或者因为你有一个令人兴奋的本地化网页应用的新想法，或者你只是碰巧使用 Flask 应用来完成自己的日常任务。正如爱因斯坦曾经说过的“想象力比知识更重要”，对于任何一个新手编码者，或者一个经验丰富的 Linux 或 Android 爱好者来说，这是一个有趣的小项目。它可以扩展到无穷的层次，所以让你的好奇心接手，并做出一些令人兴奋的东西!</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>