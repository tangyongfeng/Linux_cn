<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在 Ubuntu 和其他 Linux 发行版上使用 Yarn</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Abhishek Prakash 本速成教程向你展示了在 Ubuntu 和 Debian Linux 上安装 Yarn 包管理器的官方方法。你还将学习到一些基本的 Yarn 命令以及彻底删 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/10/zai-ubuntu-he-qi-ta-linux-fa-xing-ban-shang-shi-yong-yarn.html" rel="bookmark"
           title="Permalink to 在 Ubuntu 和其他 Linux 发行版上使用 Yarn">在 Ubuntu 和其他 Linux 发行版上使用 Yarn</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-10-20T23:52:00+02:00">
                Published: Tue 20 October 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Abhishek Prakash</p>
<blockquote>
<p>本速成教程向你展示了在 Ubuntu 和 Debian Linux 上安装 Yarn 包管理器的官方方法。你还将学习到一些基本的 Yarn 命令以及彻底删除 Yarn 的步骤。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202010/21/000023d6m6nmddyldliprr.jpg"></p>
<p><a href="https://yarnpkg.com/lang/en/">Yarn</a> 是 Facebook 开发的开源 JavaScript 包管理器。它是流行的 npm 包管理器的一个替代品，或者应该说是改进。 <a href="https://code.fb.com/">Facebook 开发团队</a> 创建 Yarn 是为了克服 <a href="https://www.npmjs.com/">npm</a> 的缺点。 Facebook 声称 Yarn 比 npm 更快、更可靠、更安全。</p>
<p>与 npm 一样，Yarn 为你提供一种自动安装、更新、配置和删除从全局注册库中检索到的程序包的方法。</p>
<p>Yarn 的优点是它更快，因为它可以缓存已下载的每个包，所以无需再次下载。它还将操作并行化，以最大化资源利用率。在执行每个已安装的包代码之前，Yarn 还使用 <a href="https://itsfoss.com/checksum-tools-guide-linux/">校验和来验证完整性</a>。 Yarn 还保证可以在一个系统上运行的安装，在任何其他系统上都会以完全相同地方式工作。</p>
<p>如果你正 <a href="https://itsfoss.com/install-nodejs-ubuntu/">在 Ubuntu 上使用 node.js</a>，那么你的系统上可能已经安装了 npm。在这种情况下，你可以使用 npm 通过以下方式全局安装 Yarn：</p>
<div class="highlight"><pre><span></span><code>sudo npm install yarn -g
</code></pre></div>

<p>不过，我推荐使用官方方式在 Ubuntu/Debian 上安装 Yarn。</p>
<h3>在 Ubuntu 和 Debian 上安装 Yarn [官方方式]</h3>
<p>这里提到的说明应该适用于所有版本的 Ubuntu，例如 Ubuntu 18.04、16.04 等。同样的一组说明也适用于 Debian 和其他基于 Debian 的发行版。</p>
<p>由于本教程使用 <code>curl</code> 来添加 Yarn 项目的 GPG 密钥，所以最好验证一下你是否已经安装了 <code>curl</code>。</p>
<div class="highlight"><pre><span></span><code>sudo apt install curl
</code></pre></div>

<p>如果 <code>curl</code> 尚未安装，则上面的命令将安装它。既然有了 <code>curl</code>，你就可以使用它以如下方式添加 Yarn 项目的 GPG 密钥：</p>
<div class="highlight"><pre><span></span><code>curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
</code></pre></div>

<p>在此之后，将存储库添加到源列表中，以便将来可以轻松地升级 Yarn 包，并进行其余系统更新：</p>
<div class="highlight"><pre><span></span><code>sudo sh -c &#39;echo &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot; &gt;&gt; /etc/apt/sources.list.d/yarn.list&#39;
</code></pre></div>

<p>你现在可以继续了。<a href="https://itsfoss.com/update-ubuntu/">更新 Ubuntu</a> 或 Debian 系统，以刷新可用软件包列表，然后安装 Yarn：</p>
<div class="highlight"><pre><span></span><code>sudo apt update
sudo apt install yarn
</code></pre></div>

<p>这将一起安装 Yarn 和 node.js。该过程完成后，请验证是否已成功安装 Yarn。 你可以通过检查 Yarn 版本来做到这一点。</p>
<div class="highlight"><pre><span></span><code>yarn --version
</code></pre></div>

<p>对我来说，它显示了这样的输出：</p>
<div class="highlight"><pre><span></span><code>yarn --version
1.12.3
</code></pre></div>

<p>这意味着我的系统上安装了 Yarn 版本 1.12.3。</p>
<h3>使用 Yarn</h3>
<p>我假设你对 JavaScript 编程以及依赖项的工作原理有一些基本的了解。我在这里不做详细介绍。我将向你展示一些基本的 Yarn 命令，这些命令将帮助你入门。</p>
<h4>使用 Yarn 创建一个新项目</h4>
<p>与 <code>npm</code> 一样，Yarn 也可以使用 <code>package.json</code> 文件。在这里添加依赖项。所有依赖包都缓存在项目根目录下的 <code>node_modules</code> 目录中。</p>
<p>在项目的根目录中，运行以下命令以生成新的 <code>package.json</code> 文件：</p>
<p>它会问你一些问题。你可以按回车键跳过或使用默认值。</p>
<div class="highlight"><pre><span></span><code><span class="nx">yarn</span><span class="w"> </span><span class="nx">init</span>
<span class="nx">yarn</span><span class="w"> </span><span class="nx">init</span><span class="w"> </span><span class="nx">v1</span><span class="m m-Double">.12.3</span>
<span class="nx">question</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="p">(</span><span class="nx">test_yarn</span><span class="p">):</span><span class="w"> </span><span class="nx">test_yarn_proect</span>
<span class="nx">question</span><span class="w"> </span><span class="nx">version</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">1.0.0</span><span class="p">):</span><span class="w"> </span><span class="m m-Double">0.1</span>
<span class="nx">question</span><span class="w"> </span><span class="nx">description</span><span class="p">:</span><span class="w"> </span><span class="nx">Test</span><span class="w"> </span><span class="nx">Yarn</span>
<span class="nx">question</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="nx">point</span><span class="w"> </span><span class="p">(</span><span class="nx">index</span><span class="p">.</span><span class="nx">js</span><span class="p">):</span>
<span class="nx">question</span><span class="w"> </span><span class="nx">repository</span><span class="w"> </span><span class="nx">url</span><span class="p">:</span>
<span class="nx">question</span><span class="w"> </span><span class="nx">author</span><span class="p">:</span><span class="w"> </span><span class="nx">abhishek</span>
<span class="nx">question</span><span class="w"> </span><span class="nx">license</span><span class="w"> </span><span class="p">(</span><span class="nx">MIT</span><span class="p">):</span>
<span class="nx">question</span><span class="w"> </span><span class="k">private</span><span class="p">:</span>
<span class="nx">success</span><span class="w"> </span><span class="nx">Saved</span><span class="w"> </span><span class="kn">package</span><span class="p">.</span><span class="nx">json</span>
<span class="nx">Done</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m m-Double">82.42</span><span class="nx">s</span><span class="p">.</span>
</code></pre></div>

<p>这样，你就得到了一个如下的 <code>package.json</code> 文件：</p>
<div class="highlight"><pre><span></span><code>{
 &quot;name&quot;: &quot;test_yarn_proect&quot;,
 &quot;version&quot;: &quot;0.1&quot;,
 &quot;description&quot;: &quot;Test Yarn&quot;,
 &quot;main&quot;: &quot;index.js&quot;,
 &quot;author&quot;: &quot;abhishek&quot;,
 &quot;license&quot;: &quot;MIT&quot;
}
</code></pre></div>

<p>现在你有了 <code>package.json</code>，你可以手动编辑它以添加或删除包依赖项，也可以使用 Yarn 命令（首选）。</p>
<h4>使用 Yarn 添加依赖项</h4>
<p>你可以通过以下方式添加对特定包的依赖关系：</p>
<div class="highlight"><pre><span></span><code>yarn add &lt;包名&gt;
</code></pre></div>

<p>例如，如果你想在项目中使用 <a href="https://lodash.com/">Lodash</a>，则可以使用 Yarn 添加它，如下所示：</p>
<div class="highlight"><pre><span></span><code><span class="n">yarn</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">lodash</span>
<span class="n">yarn</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">v1</span><span class="mf">.12.3</span>
<span class="n">info</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">lockfile</span><span class="w"> </span><span class="n">found</span><span class="p">.</span>
<span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="n">Resolving</span><span class="w"> </span><span class="n">packages</span><span class="err">…</span>
<span class="p">[</span><span class="mi">2</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="n">Fetching</span><span class="w"> </span><span class="n">packages</span><span class="err">…</span>
<span class="p">[</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="n">Linking</span><span class="w"> </span><span class="n">dependencies</span><span class="err">…</span>
<span class="p">[</span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="n">Building</span><span class="w"> </span><span class="n">fresh</span><span class="w"> </span><span class="n">packages</span><span class="err">…</span>
<span class="n">success</span><span class="w"> </span><span class="n">Saved</span><span class="w"> </span><span class="n">lockfile</span><span class="p">.</span>
<span class="n">success</span><span class="w"> </span><span class="n">Saved</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">dependency</span><span class="p">.</span>
<span class="n">info</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="n">dependencies</span>
<span class="err">└─</span><span class="w"> </span><span class="p">[</span><span class="n">email</span><span class="w"> </span><span class="n">protected</span><span class="p">]</span>
<span class="n">info</span><span class="w"> </span><span class="n">All</span><span class="w"> </span><span class="n">dependencies</span>
<span class="err">└─</span><span class="w"> </span><span class="p">[</span><span class="n">email</span><span class="w"> </span><span class="n">protected</span><span class="p">]</span>
<span class="n">Done</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">2.67</span><span class="n">s</span><span class="p">.</span>
</code></pre></div>

<p>你可以看到，此依赖项已自动添加到 <code>package.json</code> 文件中：</p>
<div class="highlight"><pre><span></span><code>{
 &quot;name&quot;: &quot;test_yarn_proect&quot;,
 &quot;version&quot;: &quot;0.1&quot;,
 &quot;description&quot;: &quot;Test Yarn&quot;,
 &quot;main&quot;: &quot;index.js&quot;,
 &quot;author&quot;: &quot;abhishek&quot;,
 &quot;license&quot;: &quot;MIT&quot;,
 &quot;dependencies&quot;: {
 &quot;lodash&quot;: &quot;^4.17.11&quot;
 }
}
</code></pre></div>

<p>默认情况下，Yarn 将在依赖项中添加最新版本的包。如果要使用特定版本，可以在添加时指定。</p>
<div class="highlight"><pre><span></span><code><span class="nx">yarn</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="kn">package</span><span class="err">@</span><span class="nx">version</span><span class="o">-</span><span class="k">or</span><span class="o">-</span><span class="nx">tag</span>
</code></pre></div>

<p>像往常一样，你也可以手动更新 <code>package.json</code> 文件。</p>
<h4>使用 Yarn 升级依赖项</h4>
<p>你可以使用以下命令将特定依赖项升级到其最新版本：</p>
<div class="highlight"><pre><span></span><code>yarn upgrade &lt;包名&gt;
</code></pre></div>

<p>它将查看所​​涉及的包是否具有较新的版本，并且会相应地对其进行更新。</p>
<p>你还可以通过以下方式更改已添加的依赖项的版本：</p>
<div class="highlight"><pre><span></span><code><span class="nx">yarn</span><span class="w"> </span><span class="nx">upgrade</span><span class="w"> </span><span class="nx">package_name</span><span class="err">@</span><span class="nx">version_or_tag</span>
</code></pre></div>

<p>你还可以使用一个命令将项目的所有依赖项升级到它们的最新版本：</p>
<div class="highlight"><pre><span></span><code>yarn upgrade
</code></pre></div>

<p>它将检查所有依赖项的版本，如果有任何较新的版本，则会更新它们。</p>
<h4>使用 Yarn 删除依赖项</h4>
<p>你可以通过以下方式从项目的依赖项中删除包：</p>
<div class="highlight"><pre><span></span><code>yarn remove &lt;包名&gt;
</code></pre></div>

<h4>安装所有项目依赖项</h4>
<p>如果对你 <code>project.json</code> 文件进行了任何更改，则应该运行：</p>
<div class="highlight"><pre><span></span><code>yarn
</code></pre></div>

<p>或者，</p>
<div class="highlight"><pre><span></span><code>yarn install
</code></pre></div>

<p>一次安装所有依赖项。</p>
<h3>如何从 Ubuntu 或 Debian 中删除 Yarn</h3>
<p>我将通过介绍从系统中删除 Yarn 的步骤来完成本教程，如果你使用上述步骤安装 Yarn 的话。如果你意识到不再需要 Yarn 了，则可以将它删除。</p>
<p>使用以下命令删除 Yarn 及其依赖项。</p>
<div class="highlight"><pre><span></span><code>sudo apt purge yarn
</code></pre></div>

<p>你也应该从源列表中把存储库信息一并删除掉：</p>
<div class="highlight"><pre><span></span><code>sudo rm /etc/apt/sources.list.d/yarn.list
</code></pre></div>

<p>下一步删除已添加到受信任密钥的 GPG 密钥是可选的。但要做到这一点，你需要知道密钥。你可以使用 <code>apt-key</code> 命令获得它：</p>
<div class="highlight"><pre><span></span><code><span class="nl">Warning</span><span class="p">:</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="k">key</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">parsed</span><span class="w"> </span><span class="p">(</span><span class="n">stdout</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">terminal</span><span class="p">)</span><span class="w"> </span><span class="n">pub</span><span class="w">   </span><span class="n">rsa4096</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">05</span><span class="w"> </span><span class="o">[</span><span class="n">SC</span><span class="o">]</span><span class="w">       </span><span class="mi">72</span><span class="n">EC</span><span class="w"> </span><span class="n">F46A</span><span class="w"> </span><span class="mi">56</span><span class="n">B4</span><span class="w"> </span><span class="n">AD39</span><span class="w"> </span><span class="n">C907</span><span class="w">  </span><span class="n">BBB7</span><span class="w"> </span><span class="mi">1646</span><span class="w"> </span><span class="n">B01B</span><span class="w"> </span><span class="mf">86E5</span><span class="w"> </span><span class="mi">0310</span><span class="w"> </span><span class="n">uid</span><span class="w">           </span><span class="o">[</span><span class="n"> unknown</span><span class="o">]</span><span class="w"> </span><span class="n">Yarn</span><span class="w"> </span><span class="n">Packaging</span><span class="w"> </span><span class="n">yarn</span><span class="nv">@dan</span><span class="p">.</span><span class="n">cx</span><span class="w"> </span><span class="n">sub</span><span class="w">   </span><span class="n">rsa4096</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">05</span><span class="w"> </span><span class="o">[</span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="n">sub</span><span class="w">   </span><span class="n">rsa4096</span><span class="w"> </span><span class="mi">2019</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">02</span><span class="w"> </span><span class="o">[</span><span class="n">S</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">expires: 2020-02-02</span><span class="o">]</span>
</code></pre></div>

<p>这里的密钥是以 <code>pub</code> 开始的行中 GPG 密钥指纹的最后 8 个字符。</p>
<p>因此，对于我来说，密钥是 <code>86E50310</code>，我将使用以下命令将其删除：</p>
<div class="highlight"><pre><span></span><code>sudo apt-key del 86E50310
</code></pre></div>

<p>你会在输出中看到 <code>OK</code>，并且 Yarn 包的 GPG 密钥将从系统信任的 GPG 密钥列表中删除。</p>
<p>我希望本教程可以帮助你在 Ubuntu、Debian、Linux Mint、 elementary OS 等操作系统上安装 Yarn。 我提供了一些基本的 Yarn 命令，以帮助你入门，并完成了从系统中删除 Yarn 的完整步骤。</p>
<p>希望你喜欢本教程，如果有任何疑问或建议，请随时在下面留言。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>