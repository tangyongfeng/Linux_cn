<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>8 个让我更有效率的 Git 别名</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Ricardo Gerardi 使用别名为你最常用或复杂的 Git 命令创建快捷方式。 这篇出色的文章《改变我使用 Git 工作方式的七个技巧》启发了 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li class="active"><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/12/8-ge-rang-wo-geng-you-xiao-lu-de-git-bie-ming.html" rel="bookmark"
           title="Permalink to 8 个让我更有效率的 Git 别名">8 个让我更有效率的 Git 别名</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-12-09T20:23:10+01:00">
                Published: Wed 09 December 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ruan-jian-kai-fa">软件开发</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Ricardo Gerardi</p>
<blockquote>
<p>使用别名为你最常用或复杂的 Git 命令创建快捷方式。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202012/09/202245q50ss5kncqc241sf.jpg"></p>
<p>这篇出色的文章《<a href="/article-12894-1.html">改变我使用 Git 工作方式的七个技巧</a>》启发了我写下另一个对我在命令行上使用 Git 的经验有重大影响的 Git 特性：别名。</p>
<p>定义 Git 的别名来替代命令有两大好处。</p>
<ul>
<li>它简化了有许多选项的长命令，使它们更短，更容易记住。</li>
<li>缩短了经常使用的命令，使你的工作更有效率。</li>
</ul>
<h3>如何定义和使用别名</h3>
<p>要定义 Git 的别名，请使用 <code>git config</code> 命令，加上别名和要替换的命令。例如，要为 <code>git push</code> 创建别名 <code>p</code>：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.p<span class="w"> </span><span class="s1">&#39;push&#39;</span>
</code></pre></div>

<p>你可以通过将别名作为 <code>git</code> 的参数来使用别名，就像其他命令一样：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>p
</code></pre></div>

<p>要查看所有的别名，用 <code>git config</code> 列出你的配置：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>-l
user.name<span class="o">=</span>ricardo
user.email<span class="o">=</span>ricardo@example.com
alias.p<span class="o">=</span>push
</code></pre></div>

<p>你也可以用你喜欢的 shell 来定义别名，比如 Bash 或 Zsh。不过，用 Git 定义别名有几个功能是用 shell 无法实现的。首先，它允许你在不同的 shell 中使用别名，而无需额外配置。此外，它还集成了 Git 的自动更正功能，所以当你输入错误的命令时，Git 可以建议你正确的别名。最后，Git 还会将别名保存在用户配置文件中，你可以通过复制一个文件将别名转移到其他机器上。</p>
<p>无论使用哪种方法，定义别名都能改善你使用 Git 的整体体验。更多关于定义 Git 别名的信息，请看《<a href="https://git-scm.com/book/en/v2/Git-Basics-Git-Aliases">Git Book</a>》。</p>
<h3>8 个有用的 Git 别名</h3>
<p>现在你知道如何创建和使用别名了，来看看一些有用的别名。</p>
<h4>1、Git 状态</h4>
<p>Git 命令行用户经常使用 <code>status</code> 命令来查看已更改或未跟踪的文件。默认情况下，这个命令提供了很多行的冗长输出，你可能不想要或不需要。你可以使用一个别名来处理这两个组件。定义别名 <code>st</code> 来缩短命令，并使用选项 <code>-sb</code> 来输出一个不那么啰嗦的状态和分支信息。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.st<span class="w"> </span><span class="s1">&#39;status -sb&#39;</span>
</code></pre></div>

<p>如果你在一个干净的分支上使用这个别名，你的输出就像这样：</p>
<div class="highlight"><pre><span></span><code>$<span class="w">  </span>git<span class="w"> </span>st
<span class="c1">## master</span>
</code></pre></div>

<p>在一个带有已更改和未跟踪文件的分支上使用它，会产生这样的输出：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>st
<span class="c1">## master</span>
<span class="w"> </span>M<span class="w"> </span>test2
??<span class="w"> </span>test3
</code></pre></div>

<h4>2、Git 单行日志</h4>
<p>创建一个别名，以单行方式显示你的提交，使输出更紧凑：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.ll<span class="w"> </span><span class="s1">&#39;log --oneline&#39;</span>
</code></pre></div>

<p>使用这个别名可以提供所有提交的简短列表：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>ll
33559c5<span class="w"> </span><span class="o">(</span>HEAD<span class="w"> </span>-&gt;<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Another<span class="w"> </span>commit
17646c1<span class="w"> </span>test1
</code></pre></div>

<h4>3、Git 的最近一次提交</h4>
<p>这将显示你最近一次提交的详细信息。这是扩展了《Git Book》中 <a href="https://git-scm.com/book/en/v2/Git-Basics-Git-Aliases">别名</a> 一章的例子：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.last<span class="w"> </span><span class="s1">&#39;log -1 HEAD --stat&#39;</span>
</code></pre></div>

<p>用它来查看最后的提交：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>last
commit<span class="w"> </span>f3dddcbaabb928f84f45131ea5be88dcf0692783<span class="w"> </span><span class="o">(</span>HEAD<span class="w"> </span>-&gt;<span class="w"> </span>branch1<span class="o">)</span>
Author:<span class="w"> </span>ricardo<span class="w"> </span>&lt;ricardo@example.com&gt;
Date:<span class="w">   </span>Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">00</span>:19:52<span class="w"> </span><span class="m">2020</span><span class="w"> </span>+0000

<span class="w">    </span>Commit<span class="w"> </span>to<span class="w"> </span>branch1

<span class="w"> </span>test2<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>+
<span class="w"> </span>test3<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span>files<span class="w"> </span>changed,<span class="w"> </span><span class="m">1</span><span class="w"> </span>insertion<span class="o">(</span>+<span class="o">)</span>
</code></pre></div>

<h4>4、Git 提交</h4>
<p>当你对 Git 仓库进行修改时，你会经常使用 <code>git commit</code>。使用 <code>cm</code> 别名使 <code>git commit -m</code> 命令更有效率：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.cm<span class="w"> </span><span class="s1">&#39;commit -m&#39;</span>
</code></pre></div>

<p>因为 Git 别名扩展了命令，所以你可以在执行过程中提供额外的参数：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>cm<span class="w"> </span><span class="s2">&quot;A nice commit message&quot;</span>
<span class="o">[</span>branch1<span class="w"> </span>0baa729<span class="o">]</span><span class="w"> </span>A<span class="w"> </span>nice<span class="w"> </span>commit<span class="w"> </span>message
<span class="w"> </span><span class="m">1</span><span class="w"> </span>file<span class="w"> </span>changed,<span class="w"> </span><span class="m">2</span><span class="w"> </span>insertions<span class="o">(</span>+<span class="o">)</span>
</code></pre></div>

<h4>5、Git 远程仓库</h4>
<p><code>git remote -v</code> 命令列出了所有配置的远程仓库。用别名 <code>rv</code> 将其缩短：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.rv<span class="w"> </span><span class="s1">&#39;remote -v&#39;</span>
</code></pre></div>

<h4>6、Git 差异</h4>
<p><code>git diff</code> 命令可以显示不同提交的文件之间的差异，或者提交和工作树之间的差异。用 <code>d</code> 别名来简化它：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.d<span class="w"> </span><span class="s1">&#39;diff&#39;</span>
</code></pre></div>

<p>标准的 <code>git diff</code> 命令对小的改动很好用，但对于比较复杂的改动，外部工具如 <code>vimdiff</code> 就更有用。创建别名 <code>dv</code> 来使用 <code>vimdiff</code> 显示差异，并使用 <code>y</code> 参数跳过确认提示：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.dv<span class="w"> </span><span class="s1">&#39;difftool -t vimdiff -y&#39;</span>
</code></pre></div>

<p>使用这个别名来显示两个提交之间的 <code>file1</code> 差异：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>dv<span class="w"> </span>33559c5<span class="w"> </span>ca1494d<span class="w"> </span>file1
</code></pre></div>

<p><img alt="vim-diff results" src="/data/attachment/album/202012/09/202318c1ddkud88sh2tklh.png" title="vim-diff results"></p>
<h4>7、Git 配置列表</h4>
<p><code>gl</code> 别名可以更方便地列出所有用户配置：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.gl<span class="w"> </span><span class="s1">&#39;config --global -l&#39;</span>
</code></pre></div>

<p>现在你可以看到所有定义的别名（和其他配置选项）：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>gl
user.name<span class="o">=</span>ricardo
user.email<span class="o">=</span>ricardo@example.com
alias.p<span class="o">=</span>push
alias.st<span class="o">=</span>status<span class="w"> </span>-sb
alias.ll<span class="o">=</span>log<span class="w"> </span>--oneline
alias.last<span class="o">=</span>log<span class="w"> </span>-1<span class="w"> </span>HEAD<span class="w"> </span>--stat
alias.cm<span class="o">=</span>commit<span class="w"> </span>-m
alias.rv<span class="o">=</span>remote<span class="w"> </span>-v
alias.d<span class="o">=</span>diff
alias.dv<span class="o">=</span>difftool<span class="w"> </span>-t<span class="w"> </span>vimdiff<span class="w"> </span>-y
alias.gl<span class="o">=</span>config<span class="w"> </span>--global<span class="w"> </span>-l
alias.se<span class="o">=</span>!git<span class="w"> </span>rev-list<span class="w"> </span>--all<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>git<span class="w"> </span>grep<span class="w"> </span>-F
</code></pre></div>

<h4>8、搜索提交</h4>
<p>Git 别名允许你定义更复杂的别名，比如执行外部 shell 命令，可以在别名前加上 <code>!</code> 字符。你可以用它来执行自定义脚本或更复杂的命令，包括 shell 管道。</p>
<p>例如，定义 <code>se</code> 别名来搜索你的提交：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>alias.se<span class="w"> </span><span class="s1">&#39;!git rev-list --all | xargs git grep -F&#39;</span>
</code></pre></div>

<p>使用这个别名来搜索提交中的特定字符串：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>se<span class="w"> </span>test2
0baa729c1d683201d0500b0e2f9c408df8f9a366:file1:test2
ca1494dd06633f08519ec43b57e25c30b1c78b32:file1:test2
</code></pre></div>

<h3>自动更正你的别名</h3>
<p>使用 Git 别名的一个很酷的好处是它与自动更正功能的原生集成。如果你犯了错误，默认情况下，Git 会建议使用与你输入的命令相似的命令，包括别名。例如，如果你把 <code>status</code> 打成了 <code>ts</code>，而不是 <code>st</code>，Git 会推荐正确的别名：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>ts
git:<span class="w"> </span><span class="s1">&#39;ts&#39;</span><span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>git<span class="w"> </span>command.<span class="w"> </span>See<span class="w"> </span><span class="s1">&#39;git --help&#39;</span>.

The<span class="w"> </span>most<span class="w"> </span>similar<span class="w"> </span><span class="nb">command</span><span class="w"> </span>is
<span class="w">        </span>st
</code></pre></div>

<p>如果你启用了自动更正功能，Git 会自动执行正确的命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>help.autocorrect<span class="w"> </span><span class="m">20</span>
$<span class="w"> </span>git<span class="w"> </span>ts
WARNING:<span class="w"> </span>You<span class="w"> </span>called<span class="w"> </span>a<span class="w"> </span>Git<span class="w"> </span><span class="nb">command</span><span class="w"> </span>named<span class="w"> </span><span class="s1">&#39;ts&#39;</span>,<span class="w"> </span>which<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist.
Continuing<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">2</span>.0<span class="w"> </span>seconds,<span class="w"> </span>assuming<span class="w"> </span>that<span class="w"> </span>you<span class="w"> </span>meant<span class="w"> </span><span class="s1">&#39;st&#39;</span>.
<span class="c1">## branch1</span>
??<span class="w"> </span>test4
</code></pre></div>

<h3>优化 Git 命令</h3>
<p>Git 别名是一个很有用的功能，它可以优化常见的重复性命令的执行，从而提高你的效率。Git 允许你定义任意数量的别名，有些用户会定义很多别名。我更喜欢只为最常用的命令定义别名 —— 定义太多别名会让人难以记忆，而且可能需要查找才能使用。</p>
<p>更多关于别名的内容，包括其他有用的内容，请参见 <a href="https://git.wiki.kernel.org/index.php/Aliases">Git 维基的别名页面</a>。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>