<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>提升你的 Vim 技能的 5 个方法</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Detlef Johnson 通过一些有趣的小技巧使你的文本编辑器更上一层楼。 Vim 是最受欢迎的文本编辑器之一，因此绝对值得你花时间 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/04/ti-sheng-ni-de-vim-ji-neng-de-5-ge-fang-fa.html" rel="bookmark"
           title="Permalink to 提升你的 Vim 技能的 5 个方法">提升你的 Vim 技能的 5 个方法</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-04-05T23:24:59+02:00">
                Published: Sun 05 April 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Detlef Johnson</p>
<blockquote>
<p>通过一些有趣的小技巧使你的文本编辑器更上一层楼。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202004/05/232434x1hnzlnhcnm3nrc7.jpg"></p>
<p>Vim 是最受欢迎的文本编辑器之一，因此绝对值得你花时间去学习如何使用它。就算你只是学习使用这个无处不在的 <a href="https://www.vim.org/">Vi(m)</a> 命令行文本编辑器打开文件、输入和编辑一些文本、保存编辑的文件并退出程序，你都会受益匪浅。</p>
<p>你会发现，使用 Vim 非常方便的的场景几乎总是涉及到运行远程 Shell 操作的任务。如果你时不时地使用 ssh，比如</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ssh<span class="w"> </span>user@hostname.provider.com
</code></pre></div>

<p>并在虚拟专用服务器（VPS）或本地虚拟化容器中工作，那么就可以从这些强大的 Vim 技能中受益匪浅。</p>
<h3>将 Vim 设置为默认的文本编辑器</h3>
<p>几乎所有的现代 Linux（或 BSD）发行版中，都可以在终端仿真器的 shell 命令提示符下使用 Vim。一旦在你的用户 shell 程序中将 Vim 定义为默认编辑器后，那么就可以使用熟悉的 Vim 键绑定来在内置的实用程序（例如 <code>man</code>）中导航。我将说明如何使用 Bash 和 Z shell（zsh）来实现此目的，zsh 现在是 macOS 用户的默认 shell（自 Catalina 起）。</p>
<h4>在 Bash 中将 Vim 设置为默认</h4>
<p>Bash 通过点文件的组合来管理设置。最常见的的做法将你的编辑器添加到主目录中的 <code>.bashrc</code> 文件中，但也可以将其添加到 <code>.bash_profile</code> 中。（请阅读 <a href="https://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html">GNU Bash 文档</a>了解两者的不同之处）。</p>
<p>通过在 <code>~/.bashrc</code> 中添加以下内容，将 Vim 设置为默认编辑器：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># set default editor to Vim</span>
<span class="k">export</span><span class="w"> </span><span class="n">EDITOR</span><span class="o">=</span><span class="n">vim</span>
</code></pre></div>

<p>以 <code>#</code> 开头的行是可选的注释，这是一个好方法，可以提醒自己该命令的作用。</p>
<h4>在 zsh 中将 Vim 设置为默认</h4>
<p>zsh 是一种越来越流行的终端仿真器，尤其是在苹果公司的基于 FreeBSD 的 Darwin 系统最近从 Bash 转向 zsh 以来。</p>
<p>zsh 点文件与 Bash 的文件相当，因此你可以在 <code>~/.zshrc</code> 或 <code>~/.zprofile</code> 之间进行选择。有关何时使用哪一个的详细信息，请参见 <a href="http://zsh.sourceforge.net/Intro/intro_3.html">zsh文档</a>。</p>
<p>将其设置为默认：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># set default editor to Vim</span>
<span class="k">export</span><span class="w"> </span><span class="n">EDITOR</span><span class="o">=</span><span class="n">vim</span>
</code></pre></div>

<h3>优化 Vim 配置</h3>
<p>Vim 像是终端仿真器 shell 一样，也使用点文件来设置个人偏好。如果你发现了这种模式，则可能已经猜到它是 <code>~/.vimrc</code>。</p>
<p>你可能要更改的第一个设置是将对传统的 Vi 兼容模式切换为“关闭”。由于 Vim 是 Vi 的超集，因此 Vi 中的所有功能在 Vim 中都是可用的，并且在 Vim 中得到了很大的改进，你可以获得许多高级功能。最新版本（8.2）允许你在分割的窗口中以子进程 shell 的方式打开一个终端。</p>
<p>顺便说一句，明确关闭对传统的 Vi 的兼容性看起来没有什么作用（<a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#compatible-default">事实上，可能并没有什么作用</a>）。当 Vim 遇到 <code>.vimrc</code> 文件时，它会暗暗地自动将兼容模式切换到关闭。但有时将其明确关闭仍然很重要。缩写 <code>nocp</code> 是 <code>nocompatible</code> 的同义词，作用是一样的。<a href="https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it">条条大道通罗马</a>，切换首选项有很多方式。</p>
<p>在 <code>.vimrc</code> 语法中， 以 <code>"</code> 开头的行是注释（就像 <code>.bashrc</code> 文件中的 <code>#</code> 一样），这些注释可以帮助你记住诸如为何选择了一个隐晦的设置名称之类的内容。</p>
<p>要关闭 Vi 兼容性，请将以下内容添加到 <code>~/.vimrc</code> 文件中：</p>
<div class="highlight"><pre><span></span><code>&quot; ensure that legacy compatibility mode is off
&quot; documentation: &lt;http://vimdoc.sourceforge.net/htmldoc/options.html\#&#39;compatible&gt;&#39;
set nocp
</code></pre></div>

<h3>理解模式</h3>
<p>Vim 的 “模式”概念是非常重要的，尤其是“普通模式”和“插入模式”之间的区别。对模式的混淆是大多数新用户的困扰。模式并不是 Vim 所独有的，甚至也不是 Vi 所引入的。命令模式是如此的古老，以至于它比 70 年代发明的<a href="https://www.npr.org/2020/02/22/808404858/remembering-the-pioneer-behind-your-computers-cut-copy-and-paste-functions">复制和粘贴</a>功能还要早。</p>
<h4>重要的模式</h4>
<p>Vim 依赖于不同的模式来定义键盘的敲击行为。需要了解的重要模式有：</p>
<ul>
<li>普通模式：默认模式，主要用于导航和打开文件。</li>
<li>插入模式（包括替换）：这种模式下 Vim 允许将文本输入到打开的文件中。</li>
<li>可视模式：Vim 的行为类似于基于鼠标的输入方式，如复制、编辑、替换等。</li>
<li>命令模式（包括行模式、Ex 命令模式和末行模式）：是在 Vim 中做更多事情的强大方法。</li>
</ul>
<p>每种模式都有很多值得探索的地方。使用 <a href="http://www2.geog.ucl.ac.uk/%7Eplewis/teaching/unix/vimtutor">Vimtutor</a>（<code>vimtutor</code>）可以交互式地学习移动光标、模式和在末行模式下运行 Ex 命令。一些不可缺少的生产力操作符包括：</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:E</code></td>
<td>打开资源管理器，用于定位文件和目录。</td>
</tr>
<tr>
<td><code>.</code></td>
<td>重复上次的编辑操作。</td>
</tr>
<tr>
<td><code>;</code></td>
<td>向前重复上一次的动作或移动</td>
</tr>
<tr>
<td><code>,</code></td>
<td>向后重复上一次的动作或移动。</td>
</tr>
<tr>
<td><code>/</code></td>
<td>向前搜索文档。</td>
</tr>
<tr>
<td><code>?</code></td>
<td>向后搜索文档。</td>
</tr>
<tr>
<td><code>*</code></td>
<td>查找光标所在处的单词的下一个出现的地方。</td>
</tr>
<tr>
<td><code>#</code></td>
<td>查找光标所在处的单词的上一次出现的地方。</td>
</tr>
<tr>
<td><code>~</code></td>
<td>切换大小写。</td>
</tr>
<tr>
<td><code>%</code></td>
<td>在 <code>()</code>、<code>[]</code> 和 <code>{}</code> 的开闭符号之间切换；对编码非常有用。</td>
</tr>
<tr>
<td><code>z=</code></td>
<td>提出拼写建议。</td>
</tr>
</tbody>
</table>
<h3>像钢琴一样弹奏 Vim</h3>
<p>尽管把 Vim 的操作符“语言”记在记忆中是很重要的，但要想掌握它，难点在于学会像音乐家一样思考，把操作符和动作组合成“和弦”，这样你就可以像弹钢琴一样弹奏 Vim。这就是 Vim 的文本操作能力可以与另一个著名的命令行编辑器 Emacs 相媲美的地方。（虽然其中一个编辑器会让磨损掉你的 <code>Esc</code> 键，而另一个编辑器会让你的 <code>Ctrl</code> 键磨损掉。）</p>
<p>在描述键“和弦”时，Vim 中的传统做法是用大写字母 C 后面加上一个连字符（<code>C-</code>）来指代 <code>Ctrl</code> 键。这并不是通用的，但我将从这里开始遵循这一惯例，并在有可能引起混淆的时候加以说明。</p>
<p>如果你在 Vim 中键入长行，你会想把它设置成可以换行。想要根据你的工作方式对 Vim 进行个性化设置，请考虑一下这个设置：默认情况下，你希望 Vim 启动时如何处理文本换行？开还是关？我喜欢将其关闭，并将其留在运行命令文件之外。当我想让文本自动换行时，我只需在命令行模式下用 <code>:set wrap</code> 设置即可。</p>
<p>让 Vim 设置为默认情况下自动换行并没有错，这只是一个偏好问题 —— 它可能随着时间的推移而改变。同样你也可以控制粘贴、代码语言缩进语法和 <code>Tab</code> 键的设置（制表符还是空格？多少个空格？可也在<a href="https://opensource.com/article/18/9/vi-editor-productivity-powerhouse">这里</a>深入研究这些选项）。所有这些默认行为的选项都是完全可配置和可更改的，并且在你使用命令行模式操作时可以实时更改。</p>
<p>你会在社区论坛、Vim 维基和文章（比如这篇文章）中找到很多关于设置 Vim 默认设置的建议。你应该很熟悉为你的个人计算环境设置首选项，Vim 也不例外。我强烈建议你从对设置进行很小的更改开始，慢慢地进行其它更改，以便你可以轻松地恢复设置。这样一来，你就可以好多年避免使用插件或完全不用插件。</p>
<h3>Vim 8.2 中的分割、标签和终端</h3>
<p>有两种方法可以将你正在处理的文件分割成不同的视图：它们可以并排显示，也可以使用应用程序标签页在全屏（窗口）中切换。这些对应用程序窗口的更改是从命令模式启动的，这需要使用冒号（<code>:</code>）来调起提示符。</p>
<p>每个分割的窗口可以容纳一个文件进行编辑，你可以通过标签页在更多的文件之间随意切换。分割的屏幕空间有限，所以当你想分割更多的屏幕时，标签页是很方便的。想要如何设置，纯属个人喜好的问题。要水平分割一个窗口，使用 <code>:sp</code>，垂直分割时使用 <code>:vs</code>。</p>
<p>从 <a href="https://www.vim.org/vim-8.2-released.php">Vim 8.2</a> 开始，你可以用 <code>:vert term</code> 打开一个垂直分割的终端 shell 子进程，以在你的代码旁边的命令行上进行操作。你需要键入 <code>exit</code> 来关闭你的终端进程，就像你结束一个 shell 会话一样，但你关闭这个分割的窗口和标签页的方式和关闭任何普通的 Vim 窗口一样，要用 <code>:q</code> 来关闭。</p>
<p>要初始化一个标签页，请使用一个特殊的编辑命令：<code>:tabedit</code>，它会自动切换到新打开的标签页。如果你给该命令一个文件名作为参数，会打开该文件并进行编辑。如果你忽略了给它一个文件名作为参数，可以在命令行模式下的使用编辑命令 <code>:e filename.txt</code>，就像在任何一个普通的 Vim 窗口中一样。可以使用下一个（<code>:tabn</code>）和上一个（<code>:tabp</code>）命令在标签页间导航。</p>
<p>要使用分割，你需要知道如何使用组合键 <code>C-w</code> 和你想要移动的方向的移动键，例如左（<code>h</code>）、下（<code>j</code>）、左（<code>k</code>）、右（<code>l</code>）。如果你想学习更多的组合键，请阅读 Vim 手册中的 <code>:help split</code> 和 <code>:help tabpage</code>。</p>
<h3>获取帮助</h3>
<p>虽然可以在 Vimtutor 中打开参考 Vim 手册，但用 <code>:help</code> 打开 Vim 帮助，可以让你自己把时间花在编辑器上，不用完全依赖像这样的文章，就能获得更多的成果。经验是掌握 Vim 的关键。经验有助于提高你的整体计算直觉，因为 Vim 中的很多东西都是从 Unix 宇宙中汲取的。</p>
<p>祝你在探索 Vim 之美的过程中玩得开心，有什么问题可以在评论中分享。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>