<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Fish：一个友好的交互式 Shell</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Michal Konečný 你是否正在寻找 bash 的替代品？你是否在寻找更人性化的东西？不用再看了，因为你刚发现了 fish！ Fish（友好的交互式 shell）是 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/04/fishyi-ge-you-hao-de-jiao-hu-shi-shell.html" rel="bookmark"
           title="Permalink to Fish：一个友好的交互式 Shell">Fish：一个友好的交互式 Shell</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-04-03T21:43:59+02:00">
                Published: Fri 03 April 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Michal Konečný</p>
<p><img alt="Fish — A Friendly Interactive Shell" src="/data/attachment/album/202004/03/214403wr6sd4fdld6gul6r.jpg"></p>
<p>你是否正在寻找 bash 的替代品？你是否在寻找更人性化的东西？不用再看了，因为你刚发现了 fish！</p>
<p>Fish（友好的交互式 shell）是一个智能且用户友好的命令行 shell，可在 Linux、MacOS 和其他操作系统上运行。可以将其用于终端的日常工作和脚本编写。用 fish 编写的脚本比相同的 bash 版本具有更少的神秘性。</p>
<h3>Fish 的用户友好功能</h3>
<ul>
<li><strong>建议</strong>：Fish 会提示你之前写过的命令。当经常输入相同命令时，这样可以提高生产率。</li>
<li><strong>健全的脚本能力</strong>：Fish 避免使用那些隐秘字符。这提供了更清晰和更友好的语法。</li>
<li><strong>基于手册页的补全</strong>：Fish 会根据命令的手册页自动补全参数。</li>
<li><strong>语法高亮</strong>：Fish 会高亮显示命令语法以使其在视觉上友好。</li>
</ul>
<h3>安装</h3>
<h4>Fedora 工作站</h4>
<p>使用 <code>dnf</code> 命令安装 fish：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>fish
</code></pre></div>

<p>安装 <code>util-linux-user</code> 包，然后使用适当的参数运行 <code>chsh</code>（更改 shell 程序）命令，将 fish 设置为默认 shell 程序：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>util-linux-user
$<span class="w"> </span>chsh<span class="w"> </span>-s<span class="w"> </span>/usr/bin/fish
</code></pre></div>

<p>你需要注销然后重新登录，更改才能生效。</p>
<h4>Fedora Silverblue</h4>
<p>由于它不是 GUI 应用，因此你需要使用 <code>rpm-ostree</code> 将其加到层内。使用以下命令在 Fedora Silverblue 上安装 fish：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>rpm-ostree<span class="w"> </span>install<span class="w"> </span>fish
</code></pre></div>

<p>在 Fedora Silverblue 上，你需要重启 PC 才能切换到新的 ostree 镜像。</p>
<p>如果你想在 Fedora Silverblue 用 fish 作为主要 shell，最简单的方法是更新 <code>/etc/passwd</code> 文件。找到你的用户，并将 <code>/bin/bash</code> 更改为 <code>/usr/bin/fish</code>。</p>
<p>你需要 <a href="https://fedoramagazine.org/howto-use-sudo/">root 权限</a>来编辑 <code>/etc/passwd</code> 文件。另外，你需要注销并重新登录才能使更改生效。</p>
<h3>配置</h3>
<p>fish 的用户配置文件在 <code>~/.config/fish/config.fish</code>。要更改所有用户的配置，请编辑 <code>/etc/fish/config.fish</code>。</p>
<p>用户配置文件必须手动创建。安装脚本不会创建 <code>~/.config/fish/config.fish</code>。</p>
<p>以下是两个个配置示例以及它们的 bash 等效项，以帮助你入门：</p>
<h4>创建别名</h4>
<ul>
<li><code>~/.bashrc</code>：<code>alias ll='ls -lh'</code></li>
<li><code>~/.config/fish/config.fish</code>: <code>alias ll='ls -lh'</code></li>
</ul>
<h4>设置环境变量</h4>
<ul>
<li><code>~/.bashrc</code>：<code>export PATH=$PATH:~/bin</code></li>
<li><code>~/.config/fish/config.fish</code>：<code>set -gx PATH $PATH ~/bin</code></li>
</ul>
<h3>使用 fish 工作</h3>
<p>将 fish 配置为默认 shell 程序后，命令提示符将类似于下图所示。如果尚未将 fish 配置为默认 shell，只需运行 <code>fish</code> 命令以在当前终端会话中启动。</p>
<p><img alt="" src="/data/attachment/album/202004/03/214403c2xxq31x3o1o2192.png"></p>
<p>在你开始输入命令时，你会注意到语法高亮显示：</p>
<p><img alt="" src="/data/attachment/album/202004/03/214404av4mcisn1cpymium.png"></p>
<p>很酷，不是吗？?</p>
<p>你还将在输入时看到建议的命令。例如，再次开始输入上一个命令：</p>
<p><img alt="" src="/data/attachment/album/202004/03/214404d2tslhgmlhxittdy.png"></p>
<p>注意输入时出现的灰色文本。灰色文本显示建议之前编写的命令。要自动补全，只需按 <code>CTRL+F</code>。</p>
<p>通过输入连接号（<code>–</code>）然后使用 <code>TAB</code> 键，它会根据前面命令的手册页获取参数建议：</p>
<p><img alt="" src="/data/attachment/album/202004/03/214404uz8klm8uxtulcq18.png"></p>
<p>如果你按一次 <code>TAB</code>，它将显示前几个建议（或所有建议，如果只有少量参数可用）。如果再次按 <code>TAB</code>，它将显示所有建议。如果连续三次按 <code>TAB</code>，它将切换到交互模式，你可以使用箭头键选择一个参数。</p>
<p>除此之外，fish 的工作与大多数其他 shell 相似。其他差异已经写在文档中。因此，找到你可能感兴趣的其他功能应该不难。</p>
<h3>让 fish 变得更强大</h3>
<p>使用 <a href="https://github.com/oh-my-fish/theme-bobthefish">powerline</a> 使 fish 变得更强大。Powerline 可以为 fish 的界面添加命令执行时间、彩色化 git 状态、当前 git 分支等。</p>
<p>在安装 powerline 之前，你必须先安装 <a href="https://github.com/oh-my-fish/oh-my-fish">Oh My Fish</a>。Oh My Fish 扩展了 fish 的核心基础架构，以支持安装其他插件。安装 Oh My Fish 的最简单方法是使用 <code>curl</code> 命令：</p>
<div class="highlight"><pre><span></span><code>&gt; curl -L https://get.oh-my.fish | fish
</code></pre></div>

<p>如果你不想直接将安装命令管道传给 <code>fish</code>，请参见 Oh My Fish 的 <a href="https://github.com/oh-my-fish/oh-my-fish/blob/master/README.md#installation">README</a> 的安装部分，以了解其他安装方法。</p>
<p>Fish 的 powerline 插件是 <a href="https://github.com/oh-my-fish/theme-bobthefish">bobthefish</a>。Bobthefish 需要 <code>powerline-fonts</code> 包。</p>
<p>在 Fedora 工作站上：</p>
<div class="highlight"><pre><span></span><code>&gt; sudo dnf install powerline-fonts
</code></pre></div>

<p>在 Fedora Silverblue 上：</p>
<div class="highlight"><pre><span></span><code>&gt; rpm-ostree install powerline-fonts
</code></pre></div>

<p>在 Fedora Silverblue 上，你必须重启以完成字体的安装。</p>
<p>安装 <code>powerline-fonts</code> 之后，安装 <code>bobthefish</code>：</p>
<div class="highlight"><pre><span></span><code>&gt; omf install bobthefish
</code></pre></div>

<p>现在你可以通过 powerline 体验 fish 的全部奇妙之处：</p>
<p><img alt="" src="/data/attachment/album/202004/03/214405ql4e7i70vbp5lurd.png"></p>
<h3>更多资源</h3>
<p>查看这些网页，了解更多 fish 内容：</p>
<ul>
<li><a href="https://fishshell.com/">官网</a></li>
<li><a href="https://fishshell.com/docs/current/index.html">文档</a></li>
<li><a href="https://fishshell.com/docs/current/tutorial.html">教程</a></li>
<li><a href="https://fishshell.com/docs/current/faq.html">常见问题</a></li>
<li><a href="https://rootnroll.com/d/fish-shell/">在线体验</a></li>
<li><a href="https://sourceforge.net/projects/fish/lists/fish-users">邮件列表</a></li>
<li><a href="https://github.com/fish-shell/fish-shell/">GitHub</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>