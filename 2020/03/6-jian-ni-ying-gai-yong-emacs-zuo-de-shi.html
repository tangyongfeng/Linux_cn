<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>6 件你应该用 Emacs 做的事</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Seth Kenlon 下面六件事情你可能都没有意识到可以在 Emacs 下完成。此外还有我们的新备忘单，拿去，充分利用 Emacs 的功能吧。 想象一 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/03/6-jian-ni-ying-gai-yong-emacs-zuo-de-shi.html" rel="bookmark"
           title="Permalink to 6 件你应该用 Emacs 做的事">6 件你应该用 Emacs 做的事</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-03-17T13:37:00+01:00">
                Published: Tue 17 March 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Seth Kenlon</p>
<blockquote>
<p>下面六件事情你可能都没有意识到可以在 Emacs 下完成。此外还有我们的新备忘单，拿去，充分利用 Emacs 的功能吧。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202003/17/133738wjj66p2safcpc50z.jpg"></p>
<p>想象一下使用 Python 的 IDLE 界面来编辑文本。你可以将文件加载到内存中，编辑它们，并保存更改。但是你执行的每个操作都由 Python 函数定义。例如，调用 <code>upper()</code> 来让一个单词全部大写，调用 <code>open</code> 打开文件，等等。文本文档中的所有内容都是 Python 对象，可以进行相应的操作。从用户的角度来看，这与其他文本编辑器的体验一致。对于 Python 开发人员来说，这是一个丰富的 Python 环境，只需在配置文件中添加几个自定义函数就可以对其进行更改和开发。</p>
<p>这就是 <a href="https://www.gnu.org/software/emacs/">Emacs</a> 对 1958 年的编程语言 <a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a> 所做的事情。在 Emacs 中，运行应用程序的 Lisp 引擎与输入文本之间无缝结合。对 Emacs 来说，一切都是 Lisp 数据，因此一切都可以通过编程进行分析和操作。</p>
<p>这造就了一个强大的用户界面（UI）。但是，如果你是 Emacs 的普通用户，你可能对它的能力知之甚少。下面是你可能没有意识到 Emacs 可以做的六件事。</p>
<h3>使用 Tramp 模式进行云端编辑</h3>
<p>Emacs 早在网络流行化之前就实现了透明的网络编辑能力了，而且时至今日，它仍然提供了最流畅的远程编辑体验。Emacs 中的 <a href="https://www.gnu.org/software/tramp/">Tramp 模式</a>（以前称为 RPC 模式）代表着 “<ruby> 透明的远程（文件）访问，多协议 <rt>  Transparent Remote (file) Access，Multiple Protocol </rt></ruby>”，这准确说明了它提供的功能：通过最流行的网络协议轻松访问你希望编辑的远程文件。目前最流行、最安全的能用于远程编辑的协议是 <a href="https://www.openssh.com/">OpenSSH</a>，因此 Tramp 使用它作为默认的协议。</p>
<p>在 Emacs 22.1 或更高版本中已经包含了 Tramp，因此要使用 Tramp，只需使用 Tramp 语法打开一个文件。在 Emacs 的 “File” 菜单中，选择 “Open File”。当在 Emacs 窗口底部的小缓冲区中出现提示时，使用以下语法输入文件名：</p>
<div class="highlight"><pre><span></span><code><span class="o">/</span><span class="nl">ssh</span><span class="p">:</span><span class="k">user</span><span class="nv">@example</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="o">/</span><span class="k">path</span><span class="o">/</span><span class="k">to</span><span class="o">/</span><span class="k">file</span>
</code></pre></div>

<p>如果需要交互式登录，Tramp 会提示你输入密码。但是，Tramp 直接使用 OpenSSH，所以为了避免交互提示，你可以将主机名、用户名和 SSH 密钥路径添加到你的 <code>~/.ssh/config</code> 文件。与 Git 一样，Emacs 首先使用你的 SSH 配置，只有在出现错误时才会停下来询问更多信息。</p>
<p>Tramp 非常适合编辑并没有放在你的计算机上的文件，它的用户体验与编辑本地文件没有明显的区别。下次，当你 SSH 到服务器启动 Vim 或 Emacs 会话时，请尝试使用 Tramp。</p>
<h3>日历</h3>
<p>如果你喜欢文本多过图形界面，那么你一定会很高兴地知道，可以使用 Emacs 以纯文本的方式安排你的日程（或生活），而且你依然可以在移动设备上使用开源的 <a href="https://orgmode.org/">Org 模式</a>查看器来获得华丽的通知。</p>
<p>这个过程需要一些配置，以创建一个方便的方式来与移动设备同步你的日程（我使用 Git，但你可以调用蓝牙、KDE Connect、Nextcloud，或其他文件同步工具），此外你必须在移动设备上安装一个 Org 模式查看器（如 <a href="https://f-droid.org/en/packages/com.orgzly/">Orgzly</a>）以及 Git 客户程序。但是，一旦你搭建好了这些基础，该流程就会与你常用的（或正在完善的，如果你是新用户）Emacs 工作流完美地集成在一起。你可以在 Emacs 中方便地查阅日程、更新日程，并专注于任务上。议程上的变化将会反映在移动设备上，因此即使在 Emacs 不可用的时候，你也可以保持井然有序。</p>
<p><img alt="" src="/data/attachment/album/202003/17/133804qspp7mas7sdass55.jpg"></p>
<p>感兴趣了？阅读我的关于<a href="/article-11320-1.html">使用 Org mode 和 Git 进行日程安排</a>的逐步指南。</p>
<h3>访问终端</h3>
<p>有<a href="/article-11814-1.html">许多终端模拟器</a>可用。尽管 Emacs 中的 Elisp 终端仿真器不是最强大的通用仿真器，但是它有两个显著的优点：</p>
<ol>
<li><strong>打开在 Emacs 缓冲区之中</strong>：我使用 Emacs 的 Elisp shell，因为它在 Emacs 窗口中打开很方便，我经常全屏运行该窗口。这是一个小而重要的优势，只需要输入 <code>Ctrl+x+o</code>（或用 Emacs 符号来表示就是 <code>C-x o</code>）就能使用终端了，而且它还有一个特别好的地方在于当运行漫长的作业时能够一瞥它的状态报告。</li>
<li><strong>在没有系统剪贴板的情况下复制和粘贴特别方便</strong>：无论是因为懒惰不愿将手从键盘移动到鼠标，还是因为在远程控制台运行 Emacs 而无法使用鼠标，在 Emacs 中运行终端有时意味着可以从 Emacs 缓冲区中很快地传输数据到 Bash。</li>
</ol>
<p>要尝试 Emacs 终端，输入 <code>Alt+x</code>（用 Emacs 符号表示就是 <code>M-x</code>），然后输入 <code>shell</code>，然后按回车。</p>
<h3>使用 Racket 模式</h3>
<p><a href="http://racket-lang.org/">Racket</a> 是一种激动人心的新兴 Lisp 方言，拥有动态编程环境、GUI 工具包和充满激情的社区。学习 Racket 的默认编辑器是 DrRacket，它的顶部是定义面板，底部是交互面板。使用该设置，用户可以编写影响 Racket 运行时环境的定义。就像旧的 <a href="https://en.wikipedia.org/wiki/Logo_(programming_language)#Turtle_and_graphics">Logo Turtle</a> 程序，但是有一个终端而不是仅仅一个海龟。</p>
<p><img alt="Racket-mode" src="/data/attachment/album/202003/17/133807pa7ahhmuvrr2lmvv.jpg"></p>
<p><em>由 PLT 提供的 LGPL 示例代码</em></p>
<p>基于 Lisp 的 Emacs 为资深 Racket 编程人员提供了一个很好的集成开发环境（IDE）。它尚未附带 <a href="https://www.racket-mode.com/">Racket 模式</a>，但你可以使用 Emacs 包安装程序安装 Racket 模式和辅助扩展。要安装它，按下 <code>Alt+X</code>（用 Emacs 符号表示就是 <code>M-x</code>），键入 <code>package-install</code>，然后按回车。接着输入要安装的包 <code>racet-mode</code>，按回车。</p>
<p>使用 <code>M-x racket-mode</code> 进入 Racket 模式。如果你是 Racket 新手，而对 Lisp 或 Emacs 比较熟悉，可以从这份优秀的<a href="https://docs.racket-lang.org/quick/index.html">图解 Racket</a> 入手。</p>
<h3>脚本</h3>
<p>你可能知道，Bash 脚本在自动化和增强 Linux 或 Unix 体验方面很流行。你可能听说过 Python 在这方面也做得很好。但是你知道 Lisp 脚本可以用同样的方式运行吗？有时人们会对 Lisp 到底有多有用感到困惑，因为许多人是通过 Emacs 来了解 Lisp 的，因此有一种潜在的印象，即在 21 世纪运行 Lisp 的惟一方法是在 Emacs 中运行。幸运的是，事实并非如此，Emacs 是一个很好的 IDE，它支持将 Lisp 脚本作为一般的系统可执行文件来运行。</p>
<p>除了 Elisp 之外，还有两种流行的现代 Lisp 可以很容易地用来作为独立脚本运行。</p>
<ol>
<li><strong>Racket</strong>：你可以通过在系统上运行 Racket 来提供运行 Racket 脚本所需的运行时支持，或者你可以使用 <code>raco exe</code> 产生一个可执行文件。<code>raco exe</code> 命令将代码和运行时支持文件一起打包，以创建可执行文件。然后，<code>raco distribution</code> 命令将可执行文件打包成可以在其他机器上工作的发行版。Emacs 有许多 Racket 工具，因此在 Emacs 中创建 Racket 文件既简单又有效。</li>
<li><strong>GNU Guile</strong>：<a href="https://www.gnu.org/software/guile/">GNU Guile</a>（<ruby> GNU 通用智能语言扩展 <rt>  GNU Ubiquitous Intelligent Language for Extensions </rt></ruby> 的缩写）是 <a href="https://en.wikipedia.org/wiki/Scheme_(programming_language)">Scheme</a> 编程语言的一个实现，它可以用于为桌面、互联网、终端等创建应用程序和游戏。Emacs 中的 Scheme 扩展众多，使用任何一个扩展来编写 Scheme 都很容易。例如，这里有一个用 Guile 编写的 “Hello world” 脚本：</li>
</ol>
<div class="highlight"><pre><span></span><code>#!/usr/bin/guile -s
!#

(display &quot;hello world&quot;)
     (newline)
</code></pre></div>

<p>用 <code>guile</code> 编译并允许它：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>guile<span class="w"> </span>./hello.scheme
<span class="p">;;;</span><span class="w"> </span>compiling<span class="w"> </span>/home/seth/./hello.scheme
<span class="p">;;;</span><span class="w"> </span>compiled<span class="w"> </span><span class="o">[</span>...<span class="o">]</span>/hello.scheme.go
hello<span class="w"> </span>world
$<span class="w"> </span>guile<span class="w"> </span>./hello.scheme
hello<span class="w"> </span>world
</code></pre></div>

<h3>无需 Emacs 允许 Elisp</h3>
<p>Emacs 可以作为 Elisp 的运行环境，但是你无需按照传统印象中的必须打开 Emacs 来运行 Elisp。<code>--script</code> 选项可以让你使用 Emacs 作为引擎来执行 Elisp 脚本，而无需运行 Emacs 图形界面（甚至也无需使用终端）。下面这个例子中，<code>-Q</code> 选项让 Emacs 忽略 <code>.emacs</code> 文件，从而避免由于执行 Elisp 脚本时产生延迟（若你的脚本依赖于 Emacs 配置中的内容，那么请忽略该选项）。</p>
<div class="highlight"><pre><span></span><code>emacs -Q --script ~/path/to/script.el
</code></pre></div>

<h3>下载 Emacs 备忘录</h3>
<p>Emacs 许多重要功能都不是只能通过 Emacs 来实现的；Org 模式是 Emacs 扩展也是一种格式标准，流行的 Lisp 方言大多不依赖于具体的应用，我们甚至可以在没有可见或可交互式 Emacs 实例的情况下编写和运行 Elisp。然后若你对为什么模糊代码和数据之间的界限能够引发创新和效率感到好奇的话，那么 Emacs 是一个很棒的工具。</p>
<p>幸运的是，现在是 21 世纪，Emacs 有了带有传统菜单的图形界面以及大量的文档，因此学习曲线不再像以前那样。然而，要最大化 Emacs 对你的好处，你需要学习它的快捷键。由于 Emacs 支持的每个任务都是一个 Elisp 函数，Emacs 中的任何功能都可以对应一个快捷键，因此要描述所有这些快捷键是不可能完成的任务。你只要学习使用频率 10 倍于不常用功能的那些快捷键即可。</p>
<p>我们汇聚了最常用的 Emacs 快捷键成为一份 Emacs 备忘录以便你查询。将它挂在屏幕附近或办公室墙上，把它作为鼠标垫也行。让它触手可及经常翻阅一下。每次翻两下可以让你获得十倍的学习效率。而且一旦开始编写自己的函数，你一定不会后悔获取了这个免费的备忘录副本的！</p>
<ul>
<li><a href="https://opensource.com/downloads/emacs-cheat-sheet">这里下载 Emacs 备忘录（需注册）</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>