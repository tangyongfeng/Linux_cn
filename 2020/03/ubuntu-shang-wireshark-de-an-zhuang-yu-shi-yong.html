<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Ubuntu 上 Wireshark 的安装与使用</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Kushal Rai 在本教程中，你将学习如何在 Ubuntu 和其它基于 Ubuntu 的发行版上安装最新的 Wireshark。同时你也将学习如何在没有 sudo 的情况下 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2020/03/ubuntu-shang-wireshark-de-an-zhuang-yu-shi-yong.html" rel="bookmark"
           title="Permalink to Ubuntu 上 Wireshark 的安装与使用">Ubuntu 上 Wireshark 的安装与使用</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-03-12T11:55:00+01:00">
                Published: Thu 12 March 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Kushal Rai</p>
<blockquote>
<p>在本教程中，你将学习如何在 Ubuntu 和其它基于 Ubuntu 的发行版上安装最新的 Wireshark。同时你也将学习如何在没有 sudo 的情况下来运行 Wireshark，以及如何设置它来进行数据包嗅探。</p>
</blockquote>
<p><a href="https://www.wireshark.org/">Wireshark</a> 是一款自由开源的网络协议分析器，它在全球被广泛使用。</p>
<p>通过使用 Wireshark，你可以实时捕获网络的传入和传出数据包，并将其用于网络故障排除、数据包分析、软件和通信协议开发等。</p>
<p>它适用于所有主流的桌面操作系统，如 Windows、Linux、macOS、BSD 等。</p>
<p>在本教程中，我将指导你在 Ubuntu 和其他基于 Ubuntu 的发行版上安装 Wireshark 。我还将介绍如何设置和配置 Wireshark 来捕获数据包。</p>
<h3>在基于 Ubuntu 的 Linux 发行版上安装 Wireshark</h3>
<p><img alt="" src="/data/attachment/album/202003/12/115531iuuw57udntwcdv2w.png"></p>
<p>Wireshark 适用于所有主流 Linux 发行版。你应该查看<a href="https://www.wireshark.org/docs/wsug_html_chunked/ChBuildInstallUnixInstallBins.html">官方安装说明</a>。因为在本教程中，我将着重在仅基于 Ubuntu 的发行版上安装最新版本的 Wireshark 。</p>
<p>Wireshark 可以在 Ubuntu 的 Universe 存储库中找到。你可以<a href="https://itsfoss.com/ubuntu-repositories/">启用 universe 存储库</a>，然后按如下方式安装：</p>
<div class="highlight"><pre><span></span><code><span class="n">sudo</span><span class="w"> </span><span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span><span class="w"> </span><span class="n">universe</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">wireshark</span>
</code></pre></div>

<p>这种方法的一个小问题是，你可能并不总是得到最新版本的 Wireshark 。</p>
<p>例如，在 Ubuntu 18.04 中，如果你使用 <a href="https://itsfoss.com/apt-command-guide/">apt</a> 命令检查 Wireshark 的可用版本，可用版本会显示是 2.6 。</p>
<div class="highlight"><pre><span></span><code><span class="n">abhishek</span><span class="nv">@nuc</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">apt</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">wireshark</span>
<span class="nl">Package</span><span class="p">:</span><span class="w"> </span><span class="n">wireshark</span>
<span class="nl">Version</span><span class="p">:</span><span class="w"> </span><span class="mf">2.6.10</span><span class="o">-</span><span class="mi">1</span><span class="o">~</span><span class="n">ubuntu18</span><span class="mf">.04.0</span>
<span class="nl">Priority</span><span class="p">:</span><span class="w"> </span><span class="n">optional</span>
<span class="k">Section</span><span class="err">:</span><span class="w"> </span><span class="n">universe</span><span class="o">/</span><span class="n">net</span>
<span class="nl">Origin</span><span class="p">:</span><span class="w"> </span><span class="n">Ubuntu</span>
<span class="nl">Maintainer</span><span class="p">:</span><span class="w"> </span><span class="n">Balint</span><span class="w"> </span><span class="n">Reczey</span><span class="w"> </span><span class="o">&lt;</span><span class="n">rbalint</span><span class="nv">@ubuntu</span><span class="p">.</span><span class="n">com</span><span class="o">&gt;</span>
</code></pre></div>

<p>然而， <a href="https://www.wireshark.org/news/20191218.html">Wireshark 3.2 稳定版</a>已经在几个月前发布了。当然，新版本拥有新的特性。</p>
<p>那么在这种情况下，你应该怎么办呢？谢天谢地， Wireshark 开发者提供了一种官方 PPA 方式，你可以使用它在 Ubuntu 和其它基于 Ubuntu 的发行版上安装最新稳定版本的 Wireshark.</p>
<p>我希望你熟悉 PPA。如果没有，请<a href="https://itsfoss.com/ppa-guide/">阅读我们关于 PPA 的优秀指南，以便完全理解它</a>。</p>
<p>打开终端并逐个使用以下命令：</p>
<div class="highlight"><pre><span></span><code><span class="n">sudo</span><span class="w"> </span><span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span><span class="w"> </span><span class="nl">ppa:</span><span class="n">wireshark</span><span class="o">-</span><span class="n">dev</span><span class="o">/</span><span class="n">stable</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="w"> </span><span class="n">update</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">wireshark</span>
</code></pre></div>

<p>即使安装了旧版本的 Wireshark ，它也将更新为新版本。</p>
<p>安装时，系统将询问你是否允许非超级用户捕获数据包。选择“Yes”允许，选择“No”限制非超级用户捕获数据包，最后完成安装。</p>
<h3>不使用 sudo 运行 Wireshark</h3>
<p>如果在上一次安装中选择了“No”，则以 root 用户身份运行以下命令：</p>
<div class="highlight"><pre><span></span><code><span class="n">sudo</span><span class="w"> </span><span class="n">dpkg</span><span class="o">-</span><span class="n">reconfigure</span><span class="w"> </span><span class="n">wireshark</span><span class="o">-</span><span class="n">common</span>
</code></pre></div>

<p>然后按 <code>tab</code> 键并使用回车键选择“No”：</p>
<p><img alt="" src="/data/attachment/album/202003/12/115535e0v0wqnn5x50w62r.png"></p>
<p>由于你允许非超级用户捕获数据包，因此你必须将该用户添加到 <code>wireshark</code> 组。使用 <a href="https://linuxhandbook.com/usermod-command/">usermod</a> 命令将自己添加到 <code>wireshark</code> 组。</p>
<div class="highlight"><pre><span></span><code><span class="n">sudo</span><span class="w"> </span><span class="n">usermod</span><span class="w"> </span><span class="o">-</span><span class="n">aG</span><span class="w"> </span><span class="n">wireshark</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="n">whoami</span><span class="p">)</span>
</code></pre></div>

<p>最后，<a href="https://itsfoss.com/schedule-shutdown-ubuntu/">重启你的 Ubuntu 系统</a>对你的系统进行必要的修改。</p>
<blockquote>
<p>冷知识</p>
<p>Wireshark 于 1998 年首次发布，最初被称为 Ethereal 。2006 年，由于商标问题，开发商不得不将其名称改为 Wireshark 。</p>
</blockquote>
<h3>启动 Wireshark</h3>
<p>你可以从应用程序启动器或者命令行启动 Wireshark 应用。</p>
<p>如果从命令行启动，只需要在你的控制台中输入 <code>wireshark</code>：</p>
<div class="highlight"><pre><span></span><code><span class="n">wireshark</span>
</code></pre></div>

<p>要是从<strong>图形化界面</strong>启动，需要在搜索栏搜索 Wireshark 应用，并按回车键。</p>
<p><img alt="" src="/data/attachment/album/202003/12/115537zetu5e1t5iwp85dd.png"></p>
<p>现在，让我们来玩玩 Wireshark 吧。</p>
<h3>使用 Wireshark 捕获数据包</h3>
<p>当你启动 Wireshark 的时候，你会看到一个接口列表，你可以使用它来捕获这个接口接收和发送的数据包。</p>
<p>你可以使用 Wireshark 监视许多类型的接口，例如，有线、外部设备等。根据你的偏好，你可以从下图中的标记区域选择在欢迎屏幕中显示特定类型的接口。</p>
<p><img alt="Select interface" src="/data/attachment/album/202003/12/115540wprooaftzo8l39nz.jpg"></p>
<p>例如，我只列出了<strong>有线</strong>网络接口。</p>
<p><img alt="" src="/data/attachment/album/202003/12/115542aiddliilletd3izx.jpg"></p>
<p>接下来，要开始捕获数据包，你必须选择接口（在我的示例中是 <code>ens33</code> ），然后单击“Start capturing packets”图标，如下图所示。</p>
<p><img alt="Start capturing packets with Wireshark" src="/data/attachment/album/202003/12/115544uxcek5e5knxekeun.jpg"></p>
<p>你还可以同时从多个接口捕获数据包。只需按住 <code>CTRL</code> 按钮，同时单击要捕获的接口，然后点击“Start capturing packets”图标，如下图所示。</p>
<p><img alt="" src="/data/attachment/album/202003/12/115545zs8pqaup3t9rro8r.jpg"></p>
<p>接下来，我尝试在终端中使用 <code>ping google.com</code> 命令，如你所见，捕获了许多数据包。</p>
<p><img alt="Captured packets" src="/data/attachment/album/202003/12/115548eiyixoj8emk8glhm.jpg"></p>
<p>现在你可以选择任何数据包来检查该特定数据包。在点击一个特定的包之后，你可以看到与它相关的 TCP/IP 协议的不同层的信息。</p>
<p><img alt="Packet info" src="/data/attachment/album/202003/12/115550arsmqmwp2rxvw26u.png"></p>
<p>你还可以在底部看到该特定数据包的原始数据，如下图所示。</p>
<p><img alt="Check RAW data in the captured packets" src="/data/attachment/album/202003/12/115554n5704o7qqa071smm.png"></p>
<blockquote>
<p>这就是为什么端到端加密很重要。</p>
<p>假设你正在登录一个不使用 HTTPS 的网站。与你在同一网络上的任何人都可以嗅探数据包，并在原始数据中看到用户名和密码。</p>
<p>这就是为什么现在大多数聊天应用程序使用端到端加密，而大多数网站使用 https （而不是 http）。</p>
</blockquote>
<h4>在 Wireshark 中停止数据包捕获</h4>
<p>你可以点击如图所示的红色图标停止捕获数据包。</p>
<p><img alt="Stop packet capture in Wireshark" src="/data/attachment/album/202003/12/115559yo00jd5dflrvafw5.png"></p>
<h4>将捕获的数据包保存成文件</h4>
<p>你可以单击下图中标记的图标，将捕获的数据包保存到文件中以备将来使用。</p>
<p><img alt="Save captured packets by Wireshark" src="/data/attachment/album/202003/12/115602hk5na15uykknbwek.jpg"></p>
<p><strong>注意</strong>：输出可以导出为 XML、PostScript、CSV 或纯文本。</p>
<p>接下来，选择一个目标文件夹，键入文件名并单击“Save”。</p>
<p>然后选择文件并单击“Open”。</p>
<p><img alt="" src="/data/attachment/album/202003/12/115605w6nimr6r0xa0sb7a.jpg"></p>
<p>现在你可以随时打开和分析保存的数据包。要打开文件，请按 <code>\+o</code>，或从 Wireshark 转到 “File &gt; Open”。</p>
<p>捕获的数据包将从文件中加载。</p>
<p><img alt="" src="/data/attachment/album/202003/12/115607eccpcpcc0wwzk0bu.png"></p>
<h3>结语</h3>
<p>Wireshark 支持许多不同的通信协议。有许多选项和功能，使你能够以独特的方式捕获和分析网络数据包。你可以从 Wireshark 的<a href="https://www.wireshark.org/docs/https://www.wireshark.org/docs/">官方文档</a>了解更多关于 Wireshark 的信息。</p>
<p>我希望这个教程能帮助你在 Ubuntu 上安装 Wireshark 。请让我知道你的问题和建议。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>