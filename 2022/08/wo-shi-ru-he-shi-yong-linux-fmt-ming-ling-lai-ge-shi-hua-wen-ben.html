<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>我是如何使用 Linux fmt 命令来格式化文本</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Jim Hall fmt 命令是一个简单的文本格式化程序。我将在这里展示如何使用它来格式化文本和邮件回复。 当我为项目编写文 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2022/08/wo-shi-ru-he-shi-yong-linux-fmt-ming-ling-lai-ge-shi-hua-wen-ben.html" rel="bookmark"
           title="Permalink to 我是如何使用 Linux fmt 命令来格式化文本">我是如何使用 Linux fmt 命令来格式化文本</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2022-08-01T18:43:15+02:00">
                Published: Mon 01 August 2022
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Jim Hall</p>
<p><img alt="" src="/data/attachment/album/202208/01/184300zbyfjayeyqa5pmcb.jpg"></p>
<blockquote>
<p>fmt 命令是一个简单的文本格式化程序。我将在这里展示如何使用它来格式化文本和邮件回复。</p>
</blockquote>
<p>当我为项目编写文档时，我经常以纯文本的形式编写自述文件和安装说明。我不需要使用 HTML 或者 Markdown 之类的标记语言来描述项目的功能或如何编译它。但是维护这样的文档可能会很痛苦。如果我需要更新我的 <code>Readme</code> 文件中的一个句子的中间位置，我需要重新格式化文本，以避免在我的其它文本中间出现一个很长或很短的行，而其它的行的格式是整整齐齐的 75 列。一些编辑器包含可以自动重新格式化文本以填充段落的功能，但并非所有的编辑器都这样做。这就是 Linux <code>fmt</code> 命令的用武之地。</p>
<h3>使用 Linux fmt 命令格式化文本</h3>
<p><code>fmt</code> 命令是一个简单的文本格式化程序；它收集单词并填充段落，但不应用任何其它文本样式，例如斜体或粗体。这一切都是纯文本。使用 <code>fmt</code> 命令，你可以快速调整文本，使其更易于阅读。让我们从这个熟悉的示例文本开始:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>trek.txt<span class="w"> </span>
Space:<span class="w"> </span>the<span class="w"> </span>final
frontier.<span class="w"> </span>These<span class="w"> </span>are<span class="w"> </span>the<span class="w"> </span>voyages
of<span class="w"> </span>the<span class="w"> </span>starship<span class="w"> </span>Enterprise.<span class="w"> </span>Its
continuing<span class="w"> </span>mission:<span class="w"> </span>to<span class="w"> </span>explore
strange<span class="w"> </span>new<span class="w"> </span>worlds.<span class="w"> </span>To
seek<span class="w"> </span>out<span class="w"> </span>new<span class="w"> </span>life<span class="w"> </span>and<span class="w"> </span>new
civilizations.<span class="w"> </span>To<span class="w"> </span>boldly<span class="w"> </span>go
where<span class="w"> </span>no<span class="w"> </span>one<span class="w"> </span>has<span class="w"> </span>gone<span class="w"> </span>before!
</code></pre></div>

<p>在这个实例文件中，每行都有不同的长度，并且它们以一种奇怪的方式换行。如果你对纯文本文件进行大量更改，你可以会遇到类似的奇怪的换行。要重新格式化此文本，你可以使用 <code>fmt</code> 命令将段落的行填充为统一长度：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>fmt<span class="w"> </span>trek.txt<span class="w"> </span>
Space:<span class="w"> </span>the<span class="w"> </span>final<span class="w"> </span>frontier.<span class="w"> </span>These<span class="w"> </span>are<span class="w"> </span>the<span class="w"> </span>voyages<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>starship
Enterprise.<span class="w"> </span>Its<span class="w"> </span>continuing<span class="w"> </span>mission:<span class="w"> </span>to<span class="w"> </span>explore<span class="w"> </span>strange<span class="w"> </span>new<span class="w"> </span>worlds.<span class="w"> </span>To
seek<span class="w"> </span>out<span class="w"> </span>new<span class="w"> </span>life<span class="w"> </span>and<span class="w"> </span>new<span class="w"> </span>civilizations.<span class="w"> </span>To<span class="w"> </span>boldly<span class="w"> </span>go<span class="w"> </span>where<span class="w"> </span>no<span class="w"> </span>one<span class="w"> </span>has
gone<span class="w"> </span>before!
</code></pre></div>

<p>默认情况下，<code>fmt</code> 会将文本格式化为 75 的列宽大小，但你可以使用 <code>-w</code> 或 <code>--width</code> 选项进行更改：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>fmt<span class="w"> </span>-w<span class="w"> </span><span class="m">60</span><span class="w"> </span>trek.txt<span class="w"> </span>
Space:<span class="w"> </span>the<span class="w"> </span>final<span class="w"> </span>frontier.<span class="w"> </span>These<span class="w"> </span>are<span class="w"> </span>the<span class="w"> </span>voyages<span class="w"> </span>of
the<span class="w"> </span>starship<span class="w"> </span>Enterprise.<span class="w"> </span>Its<span class="w"> </span>continuing<span class="w"> </span>mission:<span class="w"> </span>to
explore<span class="w"> </span>strange<span class="w"> </span>new<span class="w"> </span>worlds.<span class="w"> </span>To<span class="w"> </span>seek<span class="w"> </span>out<span class="w"> </span>new<span class="w"> </span>life<span class="w"> </span>and<span class="w"> </span>new
civilizations.<span class="w"> </span>To<span class="w"> </span>boldly<span class="w"> </span>go<span class="w"> </span>where<span class="w"> </span>no<span class="w"> </span>one<span class="w"> </span>has<span class="w"> </span>gone<span class="w"> </span>before!
</code></pre></div>

<h3>使用 Linux fmt 命令格式化电子邮件回复</h3>
<p>我加入了一个邮件列表，这里更喜欢纯文本电子邮件，这使得在列表服务器上归档电子邮件变得更加容易。但现实是并非每个人都以纯文本形式发送电子邮件。有时候，当我以纯文本形式回复这些电子邮件时，我的电子邮件客户端会将整个段落放在一行中。这使得在电子邮件中“引用”回复变得困难。</p>
<p>这是一个简单的例子。当我以纯文本形式回复电子邮件时，我的电子邮件客户端通过在每行前添加 <code>&gt;</code> 字符来“引用”对方的电子邮件。对于一条短消息，可能如下所示：</p>
<div class="highlight"><pre><span></span><code>&gt; I like the idea of the interim development builds.
</code></pre></div>

<p>没有正确“换行”的长行将无法在我的纯文本电子邮件回复中正确显示，因为它只是前面带有 <code>&gt;</code> 字符的长行，如下所示：</p>
<div class="highlight"><pre><span></span><code>&gt; I like the idea of the interim development builds. This should be a great way to test new changes that everyone can experiment with.
</code></pre></div>

<p>为了解决这个问题，我打开了一个终端并将引用的文本复制并粘贴到一个新文件中。然后我使用 <code>-p</code> 或 <code>--prefix</code> 选项来告诉 <code>fmt</code> 在每一行之前使用什么字符作为“前缀”。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>&gt;<span class="w"> </span>email.txt
&gt;<span class="w"> </span>I<span class="w"> </span>like<span class="w"> </span>the<span class="w"> </span>idea<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>interim<span class="w"> </span>development<span class="w"> </span>builds.<span class="w"> </span>This<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>a<span class="w"> </span>great<span class="w"> </span>way<span class="w"> </span>to<span class="w"> </span><span class="nb">test</span><span class="w"> </span>new<span class="w"> </span>changes<span class="w"> </span>that<span class="w"> </span>everyone<span class="w"> </span>can<span class="w"> </span>experiment<span class="w"> </span>with.
^D
$<span class="w"> </span>fmt<span class="w"> </span>-p<span class="w"> </span><span class="s1">&#39;&gt;&#39;</span><span class="w"> </span>email.txt
&gt;<span class="w"> </span>I<span class="w"> </span>like<span class="w"> </span>the<span class="w"> </span>idea<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>interim<span class="w"> </span>development<span class="w"> </span>builds.<span class="w"> </span>This<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>a
&gt;<span class="w"> </span>great<span class="w"> </span>way<span class="w"> </span>to<span class="w"> </span><span class="nb">test</span><span class="w"> </span>new<span class="w"> </span>changes<span class="w"> </span>that<span class="w"> </span>everyone<span class="w"> </span>can<span class="w"> </span>experiment<span class="w"> </span>with.
</code></pre></div>

<p><code>fmt</code> 命令是一个非常简单的文本格式化程序，但它可以做很多有用的事情，可以帮助以纯文本形式编写和更新文档。要了解其它选项，例如 <code>-c</code> 或 <code>--crown-margin</code> 以匹配段落前两行缩进，例如项目列表。还可以尝试使用 <code>-t</code> 或者 <code>--tagged-paragraph</code> 来保留段落中第一行的缩进，就像缩进的段落一样。<code>-u</code> 或 <code>--uniform-spacing</code> 选项在单词之间使用一个空格，在句子之间使用两个空格。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>