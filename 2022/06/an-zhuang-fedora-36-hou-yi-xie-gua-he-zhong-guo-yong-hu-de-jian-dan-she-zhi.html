<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>安装 Fedora 36 后一些适合中国用户的简单设置</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Insidentally Fedora 安装之后稍作一些简单优化和配置，就可以愉快的使用了。 Fedora 是红帽系发行版中最激进的发行版。不少朋友将使用 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2022/06/an-zhuang-fedora-36-hou-yi-xie-gua-he-zhong-guo-yong-hu-de-jian-dan-she-zhi.html" rel="bookmark"
           title="Permalink to 安装 Fedora 36 后一些适合中国用户的简单设置">安装 Fedora 36 后一些适合中国用户的简单设置</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2022-06-19T09:25:00+02:00">
                Published: Sun 19 June 2022
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Insidentally</p>
<blockquote>
<p>Fedora 安装之后稍作一些简单优化和配置，就可以愉快的使用了。</p>
</blockquote>
<p><img alt="" src="/data/attachment/album/202206/19/092500aruw5nlz5z5weesa.jpg"></p>
<p>Fedora 是红帽系发行版中最激进的发行版。不少朋友将使用 Fedora 的人看做是红帽的小白鼠。但是 Fedora 超快的更新速度其实也为开发者提供了不少便利。本文介绍了安装 Fedora 36 后一些简单的设置，可以使你的 Fedora 更加易用一些。</p>
<h3>1、设置软件源</h3>
<p>Fedora 默认使用 Metalink 给出推荐的镜像列表，保证用户使用的镜像仓库足够新，并且能够尽快收到安全更新，从而提供更好的安全性。所以通常情况下使用默认配置即可，无需更改配置文件。</p>
<p>不过，由于 Metalink 需要从国外的 Fedora 项目服务器上获取元信息，所以对于校园内网、无国外访问等特殊情况，Metalink 并不适用，此时可以参照清华大学 tuna 小组介绍的 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/fedora/">方法</a> 来修改软件源。</p>
<h3>2、更新系统</h3>
<p>激进的发行版就要有激进的用法，因此配置好软件源后第一件事就是执行系统更新、刷新存储库列表是理所当然要做的。</p>
<p>你可以从 GNOME 软件中心执行此操作，或者使用终端操作。</p>
<p>对于终端，只需使用以下命令：</p>
<div class="highlight"><pre><span></span><code>sudo dnf update
</code></pre></div>

<p>可能需要重新启动才能完成系统更新。</p>
<h3>3、删除旧的内核以及其他不需要的旧软件包</h3>
<p>更新系统之后多半会安装新的内核，以及会出现一些无用的依赖。重新启动系统到新的内核，确保内核运转没有问题了，就可以删除旧内核以及无用的依赖了。</p>
<p>使用以下命令就可以自动删除无用的依赖：</p>
<div class="highlight"><pre><span></span><code>sudo dnf autoremove
</code></pre></div>

<p>Fedora 内核更新快，但是每次更新内核，旧的内核不会自动删除，占用硬盘空间。以前的教程删除旧内核都是先搜索，再移除要删除的版本，输入版本号也非常麻烦。使用以下命令即可一条命令删除旧内核：</p>
<div class="highlight"><pre><span></span><code>sudo dnf remove --oldinstallonly
</code></pre></div>

<p><img alt="Fedora 一条命令删除旧内核" src="/data/attachment/album/202206/19/092547vf4prtcfu7pc5kcr.jpg"></p>
<h3>4、启用 RPM Fusion 软件源</h3>
<p>安装 Fedora 时会提示你是否启用其他第三方软件源。</p>
<p>但是自动启用的软件源，只有英伟达驱动程序、谷歌 Chrome 和 Steam 等软件源，全套的 RPM Fusion 软件源并没有自动启用，因此还有诸如 VLC 和 MPV 等软件也不可用。</p>
<p>建议你还是开启全套的 RPM Fusion，国内玩家还是建议使用清华的镜像开启 RPM Fusion：</p>
<div class="highlight"><pre><span></span><code>sudo yum install --nogpgcheck https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm
</code></pre></div>

<p>安装成功后，修改 <code>/etc/yum.repos.d/</code> 目录下以 <code>rpmfusion</code> 开头，以 <code>.repo</code> 结尾的文件。具体而言，需要将文件中的 <code>baseurl=</code> 开头的行等号后面链接中的 <code>http://download1.rpmfusion.org/</code> 替换为 <code>https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/</code>， 替换后的文件类似如下：</p>
<div class="highlight"><pre><span></span><code><span class="k">[rpmfusion-free]</span>
<span class="na">name</span><span class="o">=</span><span class="s">RPM Fusion for Fedora $releasever - Free</span>
<span class="na">baseurl</span><span class="o">=</span><span class="s">https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/free/fedora/releases/$releasever/Everything/$basearch/os/</span>
<span class="na">mirrorlist</span><span class="o">=</span><span class="s">http://mirrors.rpmfusion.org/mirrorlist?repo=free-fedora-$releasever&amp;arch=$basearch</span>
<span class="na">enabled</span><span class="o">=</span><span class="s">1</span>
<span class="na">metadata_expire</span><span class="o">=</span><span class="s">7d</span>
<span class="na">gpgcheck</span><span class="o">=</span><span class="s">1</span>
<span class="na">gpgkey</span><span class="o">=</span><span class="s">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmfusion-free-fedora-$releasever</span>

<span class="k">[rpmfusion-free-debuginfo]</span>
<span class="na">name</span><span class="o">=</span><span class="s">RPM Fusion for Fedora $releasever - Free - Debug</span>
<span class="na">mirrorlist</span><span class="o">=</span><span class="s">http://mirrors.rpmfusion.org/mirrorlist?repo=free-fedora-debug-$releasever&amp;arch=$basearch</span>
<span class="na">enabled</span><span class="o">=</span><span class="s">0</span>
<span class="na">metadata_expire</span><span class="o">=</span><span class="s">7d</span>
<span class="na">gpgcheck</span><span class="o">=</span><span class="s">1</span>
<span class="na">gpgkey</span><span class="o">=</span><span class="s">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmfusion-free-fedora-$releasever</span>

<span class="k">[rpmfusion-free-source]</span>
<span class="na">name</span><span class="o">=</span><span class="s">RPM Fusion for Fedora $releasever - Free - Source</span>
<span class="na">baseurl</span><span class="o">=</span><span class="s">https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/free/fedora/releases/$releasever/Everything/source/SRPMS/</span>
<span class="na">mirrorlist</span><span class="o">=</span><span class="s">http://mirrors.rpmfusion.org/mirrorlist?repo=free-fedora-source-$releasever&amp;arch=$basearch</span>
<span class="na">enabled</span><span class="o">=</span><span class="s">0</span>
<span class="na">metadata_expire</span><span class="o">=</span><span class="s">7d</span>
<span class="na">gpgcheck</span><span class="o">=</span><span class="s">1</span>
<span class="na">gpgkey</span><span class="o">=</span><span class="s">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmfusion-free-fedora-$releasever</span>
</code></pre></div>

<h3>5、添加 Flathub 存储库</h3>
<p>Fedora 默认情况下启用了 Flatpak。 但是，它是过滤后的 Flatpak 。</p>
<p>因此，要访问各种可用的 Flatpak 应用程序，你可以在终端中使用以下命令添加 Flathub 存储库：</p>
<div class="highlight"><pre><span></span><code><span class="nv">flatpak</span><span class="w"> </span><span class="nv">remote</span><span class="o">-</span><span class="nv">add</span><span class="w"> </span><span class="o">--</span><span class="k">if</span><span class="o">-</span><span class="nv">not</span><span class="o">-</span><span class="nv">exists</span><span class="w"> </span><span class="nv">flathub</span><span class="w"> </span><span class="nv">https</span>:<span class="o">//</span><span class="nv">flathub</span>.<span class="nv">org</span><span class="o">/</span><span class="nv">repo</span><span class="o">/</span><span class="nv">flathub</span>.<span class="nv">flatpakrepo</span>
</code></pre></div>

<h3>6、配置 DNF 以更快地下载包</h3>
<p>Fedora 可以通过多种方法增强下载包的速度。比如选择最快的镜像，可以提高包下载速度。此外，如果你的互联网连接速度足够快，则可以更改并行下载的数量以获得更快的下载。</p>
<p>要做这两件事，只需编辑位于 <code>/etc/dnf/dnf.conf</code> 的 DNF 配置文件。</p>
<p>将以下行附加到 <code>/etc/dnf/dnf.conf</code> 文件中，保存并退出：</p>
<div class="highlight"><pre><span></span><code><span class="n">fastestmirror</span><span class="o">=</span><span class="bp">true</span>
<span class="n">deltarpm</span><span class="o">=</span><span class="bp">true</span>
<span class="n">max_parellel_downloads</span><span class="o">=</span><span class="mi">10</span>
</code></pre></div>

<ul>
<li><code>fastestmirror</code> 为选择最快软件源，如果你手动修改了仓库里面的信息则不需要启动这个。</li>
<li><code>deltarpm</code> 相当于增量下载，把软件增加的部分下载下来，和原软件包合成新软件包，类似于现在的 Android 软件更新。</li>
<li><code>max_parellel_downloads</code> 设置最大并行下载数量。</li>
</ul>
<h3>7、安装后更改主机名</h3>
<p>安装后，默认主机名设置为 <code>fedora</code>。</p>
<p>因此，如果你想在安装后个性化你的系统主机名，可以使用以下命令设置新的主机名：</p>
<div class="highlight"><pre><span></span><code>sudo hostnamectl set-hostname &lt;你的主机名&gt;
</code></pre></div>

<p>请将 <code>&lt;你的主机名&gt;</code> 替换为你的主机名（不包含 <code>&lt;</code> 和 <code>&gt;</code>），建议采用 FQDN 主机名，即包括域名的完全限定主机名。</p>
<p>然后可以修改 <code>/etc/hosts</code> 在 <code>127.0.0.1</code> 以及 <code>::1</code> 条目后面都加上你的主机名。类似下面这样：</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">Loopback</span><span class="w"> </span><span class="nv">entries</span><span class="c1">; do not change.</span>
#<span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="nv">historical</span><span class="w"> </span><span class="nv">reasons</span>,<span class="w"> </span><span class="nv">localhost</span><span class="w"> </span><span class="nv">precedes</span><span class="w"> </span><span class="nv">localhost</span>.<span class="nv">localdomain</span>:
<span class="mi">127</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">1</span><span class="w">   </span><span class="nv">localhost</span><span class="w"> </span><span class="nv">localhost</span>.<span class="nv">localdomain</span><span class="w"> </span><span class="nv">localhost4</span><span class="w"> </span><span class="nv">localhost4</span>.<span class="nv">localdomain4</span><span class="w"> </span><span class="o">&lt;</span>你的主机名<span class="o">&gt;</span>
::<span class="mi">1</span><span class="w">         </span><span class="nv">localhost</span><span class="w"> </span><span class="nv">localhost</span>.<span class="nv">localdomain</span><span class="w"> </span><span class="nv">localhost6</span><span class="w"> </span><span class="nv">localhost6</span>.<span class="nv">localdomain6</span><span class="w"> </span><span class="o">&lt;</span>你的主机名<span class="o">&gt;</span>
#<span class="w"> </span><span class="nv">See</span><span class="w"> </span><span class="nv">hosts</span><span class="ss">(</span><span class="mi">5</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">proper</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">examples</span>:
#<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">10</span><span class="w"> </span><span class="nv">foo</span>.<span class="nv">mydomain</span>.<span class="nv">org</span><span class="w"> </span><span class="nv">foo</span>
#<span class="w"> </span><span class="mi">192</span>.<span class="mi">168</span>.<span class="mi">1</span>.<span class="mi">13</span><span class="w"> </span><span class="nv">bar</span>.<span class="nv">mydomain</span>.<span class="nv">org</span><span class="w"> </span><span class="nv">bar</span>
</code></pre></div>

<h3>8、安装 GNOME 优化和扩展应用程序</h3>
<p>要调整 GNOME 的外观和感觉，你需要安装 GNOME <ruby> 优化 <rt>  Tweaks </rt></ruby> 和扩展管理器应用程序。 可以通过软件中心或终端使用以下命令来完成：</p>
<div class="highlight"><pre><span></span><code>sudo dnf install gnome-tweaks gnome-extensions-app
</code></pre></div>

<p>然后你就可以在 <a href="https://extensions.gnome.org/">GNOME Shell 扩展页面</a> 挑选扩展了。</p>
<p>使用一些好用的 GNOME 扩展来增强你的桌面工作的使用体验。限于篇幅，本文就不展开 GNOME 扩展的玩法了。</p>
<h3>9、用于电池健康管理的 TLP</h3>
<p>TLP 是一个很好的实用程序，可帮助优化笔记本电脑的电池。该实用程序带有各种命令行选项来调整和查看有关功耗的报告。</p>
<p>TLP 非常好用，你只需安装它并忘记它。这不需要任何设置或设置即可使其工作。使用默认设置安装后，它就可以开箱即用。</p>
<div class="highlight"><pre><span></span><code>dnf install tlp tlp-rdw
</code></pre></div>

<p>然后卸载有冲突的 <code>power-profiles-daemon</code> 软件包：</p>
<div class="highlight"><pre><span></span><code>dnf remove power-profiles-daemon
</code></pre></div>

<p>设置开机启动 TLP 的服务：</p>
<div class="highlight"><pre><span></span><code>systemctl enable tlp.service
</code></pre></div>

<p>您还应该屏蔽以下服务以避免冲突，确保 TLP 的无线设备（蓝牙、wifi等）切换选项的能够正确操作：</p>
<div class="highlight"><pre><span></span><code>systemctl mask systemd-rfkill.service systemd-rfkill.socket
</code></pre></div>

<p>安装 TLP 能够极大的提高笔记本电脑电池的使用时长。</p>
<h3>10、安装和配置主题</h3>
<p>GNOME 桌面的美化是个见仁见智的事情。</p>
<p>我的美化方案是用软件源里面有的东西。</p>
<p>安装主题：</p>
<div class="highlight"><pre><span></span><code>sudo dnf install flat-remix-theme
</code></pre></div>

<p>安装图标：</p>
<div class="highlight"><pre><span></span><code>sudo dnf install numix-icon-theme-circle
</code></pre></div>

<p>安装光标：</p>
<div class="highlight"><pre><span></span><code>sudo dnf install breeze-cursor-theme
</code></pre></div>

<p>然后启用“<ruby> 用户主题 <rt>  User Themes </rt></ruby>” 扩展，在扩展里面启用它。</p>
<p><img alt="GNOME 扩展管理" src="/data/attachment/album/202206/19/092548uzbbkzjtsppkjsbj.jpg"></p>
<p>再去 GNOME <ruby> 优化 <rt>  Tweaks </rt></ruby>的“外观”设置里面修改刚刚安装的主题、图标和光标，还可以修改字体。</p>
<p><img alt="GNOME 优化外观" src="/data/attachment/album/202206/19/092549yzwiim0z58v284w0.jpg"></p>
<h3>11、配置 NTP 以获得准确的时间</h3>
<p>网络时间协议（NTP）是用来使计算机时间同步化的一种协议，它可以使计算机对其服务器或时钟源做同步化，它可以提供高精准度的时间校正。</p>
<p>Fedora 默认使用 chrony 来进行时间同步。</p>
<p>可以修改 <code>/etc/chrony.conf</code></p>
<p>将 <code>pool</code> 的值选择为下列中的其中一个即可：</p>
<div class="highlight"><pre><span></span><code># 中国 NTP 授时快速服务
pool cn.ntp.org.cn 

# 阿里云 NTP
pool ntp.aliyun.com 

# 腾讯云 NTP
pool ntp.tencent.com 
</code></pre></div>

<p>随后重启 chrony 即可。</p>
<div class="highlight"><pre><span></span><code>sudo systemctl restart chronyd.service
</code></pre></div>

<p>最后就是愉快的使用 Fedora 了。</p>
<p><img alt="" src="/data/attachment/album/202206/19/092550ahfrmhv6ubzqkibo.jpg"></p>
<p>via: <a href="https://www.insidentally.com/articles/000028/">https://www.insidentally.com/articles/000028/</a></p>
<p>作者：<a href="https://www.insidentally.com">insidentally</a> 编辑：<a href="https://github.com/wxy">wxy</a></p>
<p>本文由贡献者投稿至 <a href="https://github.com/LCTT/Articles/">Linux 中国公开投稿计划</a>，采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 协议</a> 发布，<a href="https://linux.cn/">Linux中国</a> 荣誉推出</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>