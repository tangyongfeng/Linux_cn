<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>“文章助手”小程序已半残</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: 硬核老王 前天，我收到了腾讯官方发来的一个警告： “因用户投诉并经平台审核，你的小程序涉嫌滥用小程序接口能力，影 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li class="active"><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2022/10/wen-zhang-zhu-shou-xiao-cheng-xu-yi-ban-can.html" rel="bookmark"
           title="Permalink to “文章助手”小程序已半残">“文章助手”小程序已半残</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2022-10-26T14:22:45+02:00">
                Published: Wed 26 October 2022
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xin-wen">新闻</a>.</p>

</footer><!-- /.post-info -->      <p>Author: 硬核老王</p>
<p><img alt="" src="/data/attachment/album/202210/26/142225sjuezeo4tde7tj7i.jpg"></p>
<p>前天，我收到了腾讯官方发来的一个警告：</p>
<blockquote>
<p>“因用户投诉并经平台审核，你的小程序涉嫌滥用小程序接口能力，影响用户体验行为。”</p>
</blockquote>
<p>惊讶之下，我发现是我们几年前为了解决公众号文章内不能放置链接而开发的“文章助手”小程序被警告了。</p>
<p>众所周知，一般情况下，微信文章不能像网页一样放入链接的。对于一般的文字性内容，这其实并无大碍，但是对于我们这种技术类文章，常常会有一些链接，以便读者可以深入了解相关内容。因此，这种限制对我们来说是一种缺陷，为了解决这种问题，我们陆续想过几种方法，比如利用文末的“阅读原文”、在文章内注明完整链接等。最后，我们在 2019 年想到可以开发一个小程序来 <a href="/article-10838-1.html">辅助提供</a> 这个链接。</p>
<p>通过一些 <a href="/article-10896-1.html">简单的方式</a>，可以在你的微信文章中需要放置链接的地方嵌入这个“文章助手”小程序。用户只需要点击该小程序链接，即可显示该链接，并自动复制链接到剪贴板，然后只需要打开浏览器粘贴访问即可。</p>
<p>我自己对这种委曲求全的解决方案感觉比较满意。</p>
<p>现在，这个有两年没有继续添加新功能的小程序被警告了。于是我仔细查看了警告内容，在腾讯官方提供的《微信小程序平台运营规范》中是这样说的：</p>
<blockquote>
<p>5.15.4 滥用操作剪切板接口</p>
<p>在用户使用剪切板功能进行复制操作后，恶意、强行中断小程序内功能服务或业务的完整流程，要求用户跳转或使用其他方式才可完整体验业务流程，影响用户体验。</p>
<p>用户未进行任何操作情况下，小程序默认读取用户剪切板信息。</p>
</blockquote>
<p>考虑到申诉基本上不会得到解决（事实上我申诉了，也被驳回了），我只能修改相关代码，将以下行为做了调整：</p>
<ul>
<li>不检测剪贴板内容长度（原本是为了避免当剪贴板内有较多内容而被覆盖）</li>
<li>不自动复制链接到剪贴板，而需要用户手动点击一下才复制</li>
</ul>
<p>以我的估计，这样就不算滥用了吧？……</p>
<p>然而，新版本提交之后，紧接着，“文章助手”小程序就被封了剪贴板能力：</p>
<blockquote>
<p>因用户投诉并经平台审核，发现帐号已发布的服务涉嫌滥用小程序接口能力，影响用户体验</p>
<p>已封禁服务的“操作剪贴板”能力</p>
</blockquote>
<p>哑然。</p>
<p>无奈之下再次发起无用的申诉（已被驳回），并寻求客服解答。经过漫长的等待，客服给出了如下答复：</p>
<blockquote>
<p>审核部门排查发现你的小程序内活动通过文本口令引导跳转其他渠道体验或进行，属于滥用剪切板能力 请开发者对小程序进行全面排查以及整改，将涉及违规的内容移除(包括但不仅限于内容展示、代码、路径等)，如有隐藏内容、路径、代码等，也需一并移除</p>
</blockquote>
<p>呵，合着是<strong>不让用户粘贴链接到浏览器</strong>啊！</p>
<p>原本“文章助手”小程序内会提示用户“链接已复制，请在浏览器内粘贴打开”，看来这是摸了老虎屁股了。</p>
<p>而没有剪贴板能力的“文章助手”小程序，可以说是已经失去了一半用处。</p>
<p>那现在我有两个选择：</p>
<ol>
<li>放弃这个小程序（这样我也不用每个月支付云开发的 20 元费用，需要说明的是，这个小程序是完全免费，没有任何广告和赞助，公益提供给任何人使用的）；</li>
<li>看看是否还有抢救的机会。</li>
</ol>
<p>考虑到这个小程序已经累计有了 16 万用户，并为近 50 万个链接提供过服务，如果就此关闭，是对既往用户的不负责。因此，经过我灵机一动，我考虑可以完整地显示链接，让用户自己复制，至于复制后干什么，我不说，我也不知道，我也不想知道。</p>
<p>所以，你看的 0.4.7 版的“文章助手”就是这样了。</p>
<p>至于这样是否还会触犯腾讯的禁忌，我就不知道了，只能说，大家且行且珍惜吧。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>