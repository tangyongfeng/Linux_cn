<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Android 4.4 移植到了 PowerPC 架构，支持大端架构</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Eric Brown eInfochips（一家软件厂商） 已将将 Android 4.4 系统移植到 PowerPC 架构，它将用于一家航空电子客户用来监视引擎的健康状况的 人机 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li class="active"><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2016/07/android-44-yi-zhi-dao-liao-powerpc-jia-gou-zhi-chi-da-duan-jia-gou.html" rel="bookmark"
           title="Permalink to Android 4.4 移植到了 PowerPC 架构，支持大端架构">Android 4.4 移植到了 PowerPC 架构，支持大端架构</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-07-05T19:47:00+02:00">
                Published: Tue 05 July 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xin-wen">新闻</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Eric Brown</p>
<p>eInfochips（一家软件厂商） 已将将 Android 4.4 系统移植到 PowerPC 架构，它将用于一家航空电子客户用来监视引擎的健康状况的<ruby> 人机界面 <rp>  （ </rp> <rt>  Human Machine Interface </rt> <rp>  ） </rp></ruby>（HMI）。</p>
<p>eInfochips 已经开发了第一个面向 PowerPC 架构的 CPU 的 Android 移植版本，并支持<ruby> 大端 <rp>  （ </rp> <rt>  Big Endian </rt> <rp>  ） </rp></ruby>架构。此移植基于<ruby> Android 开源项目 <rp>  （ </rp> <rt>  Android Open Source Project </rt> <rp>  ） </rp></ruby> （AOSP）中 Android 4.4 （KitKat）的代码，其功能内核的版本号为 3.12.19。</p>
<p>Android 开始兴起的时候，PowerPC 正在快速丢失和 ARM 架构共同角逐的市场。高端的网络客户和其它的企业级的嵌入式工具大多运行在诸如<ruby> 飞思卡尔 <rp>  （ </rp> <rt>  Freescale </rt> <rp>  ） </rp></ruby>的 PowerQUICC 和 QorIQ 这样的 PowerPC 处理器上，但是并不是 Linux 系统。不过，有几个 Android 的移植计划。在 2009 年，飞思卡尔和 Embedded Alley（一家软件厂商，当前是 Mentor Graphics 的 Linux 团队的一部分）<a href="http://linuxdevices.linuxgizmos.com/android-ported-to-powerpc/">宣布了针对 PowerQUICC 和 QorIQ 芯片的移植版本</a>，当前由 NXP 公司构建。另一个名为 <a href="http://www.androidppc.com/">Android-PowerPC</a> 的项目也作出了相似的工作。</p>
<p>这些努力来的都并不容易，然而，当航空公司找到 eInfochips，希望能够为他们那些基于 PowerPC 的引擎监控系统添加 Android 应用程序以改善人机界面。该公司找出了这些早期的移植版本，然而，它们都相距甚远。所以，他们不得不从头开始新的移植。</p>
<p>最主要的问题是这些移植的 Android 版本实在是太老了，和现在的 Android 差别太大了。Embedded Alley 移植的版本为 Android 1.5 (Cupcake)，它于 2009 年发布，Linux 内核版本为 2.6.28。而 Android-PowerPC 项目最后一版的移植是 Android 2.2 (Froyo)，它于 2010 年发布，内核版本为 2.6.32。此外，航空公司还有一些额外的技术诉求，例如对<ruby> 大端架构 <rp>  （ </rp> <rt>  Big Endian </rt> <rp>  ） </rp></ruby>的支持，这种老式的内存访问方式仍旧应用于网络通信和电信行业。然而那些早期的移植版本仅能够支持<ruby> 小端架构 <rp>  （ </rp> <rt>  Little Endian </rt> <rp>  ） </rp></ruby>的内存访问。</p>
<h3>来自 eInfochips 的全新 PowerPC 架构移植</h3>
<p>eInfochips, 它最为出名的应该是那些基于 ARM/骁龙处理器的模块计算机板卡，例如 <a href="http://hackerboards.com/quad-core-snapdragon-com-offers-three-dev-kit-options/">Eragon 600</a>。 它已经完成了基于 QorIQ 的 Android 4.4 系统移植，且发布了白皮书介绍了该项目。采用该项目的航空电子设备客户仍旧不愿透露名称，目前仍旧不清楚什么时候会公开此该移植版本。</p>
<p><img alt="" src="/data/attachment/album/201607/05/194735r7gptdwoa5qgg3tz.jpg"></p>
<p><em>图片来自 eInfochips 的博客日志</em></p>
<p>全新的 PowerPC Android 项目包括：</p>
<ul>
<li>为 PowerPC <a href="http://linuxdevices.linuxgizmos.com/low-cost-powerquicc-chips-offer-flexible-interconnect-options/">e5500</a> 定制的 Bionic 库</li>
<li>基于 Android KitKat 的大端支持</li>
<li>使用 GCC 5.2 工具链开发</li>
<li>Android 4.4 框架的 PowerPC 支持</li>
<li>PowerPC e5500 的 Android 内核版本为 3.12.19</li>
</ul>
<p>根据 eInfochips 的销售经理 Sooryanarayanan Balasubramanian 描述，该航空电子客户想要使用 Android 主要是因为熟悉的界面能够缩减培训的时间，并且让程序更新和增加新程序变得更加容易。他继续解释说：“这次成功的移植了 Android，使得今后的工作仅仅需要在应用层作出修修改改，而不再向以前一样需要在所有层面之间作相互的校验。”，“这是第一次在航空航天工业作出这些尝试，这需要在设计时尽量认真。”</p>
<p>通过白皮书，可以知道将 Android 移植到 PowerPC 上需要对框架、核心库、开发工具链、运行时链接器、对象链接器和开源编译工具作出大量的修改。在字节码生成阶段，移植团队决定使用<ruby> 便携模式 <rp>  （ </rp> <rt>  portable mode </rt> <rp>  ） </rp></ruby>而不是<ruby> 快速解释模式 <rp>  （ </rp> <rt>  fast interpreter mode </rt> <rp>  ） </rp></ruby>。这是因为还没有 PowerPC 可用的快速解释模式，而使用开源的 <a href="https://sourceware.org/libffi/">libffi</a> 的便携模式能够支持 PowerPC。</p>
<p>同时，团队还面临着在 Android 运行时 (ART) 环境和 Dalvik 虚拟机 (DVM) 环境之间的选择。他们发现，ART 环境下的便携模式还未经测试且缺乏良好的文档支持，所以最终选择了 DVM 环境下的便携模式。</p>
<p>白皮书中还提及了其它的一些在移植过程中遇到的困难，包括重新开发工具链，重写脚本以解决 AOSP 对编译器标志“非标准”使用的问题。最终完成的移植版本提供了 37 个服务，以及提供了无界面的 Android 部署，在前端使用用户空间的模拟 UI。</p>
<h3>目标硬件</h3>
<p>感谢来自 <a href="https://www.einfochips.com/blog/k2-categories/aerospace/presenting-a-case-for-porting-android-on-powerpc-architecture.html">eInfochips 博客日志</a> 的图片（如下图所示），让我们能够确认此 PowerPC 的 Android 移植项目的硬件平台。这个板卡为 <a href="http://www.xes-inc.com/products/processor-mezzanines/xpedite6101/">X-ES Xpedite 6101</a>，它是一个加固级 XMC/PrPMC 夹层模组。</p>
<p><img alt="" src="/data/attachment/album/201607/05/194737jplzfmwi82llw7i1.jpg"></p>
<p><em>X-ES Xpedite 6101 照片和框图</em></p>
<p>X-ES Xpedite 6101 板卡拥有一个可选的 NXP 公司基于 QorIQ T 系列通信处理器（T2081、T1042 和 T1022），它们分别集成了 8 个、4 个和 2 个 e6500 核心，稍有不同的是，T2081 的处理器主频为 1.8GHz，T1042/22 的处理器主频为 1.4GHz。所有的核心都集成了 AltiVec SIMD 引擎，这也就意味着它能够提供 DSP 级别的浮点运算性能。所有以上 3 款 X-ES 板卡都能够支持最高 8GB 的 DDR3-1600 ECC SDRAM 内存。外加 512MB NOR 和 32GB 的 NAND 闪存。</p>
<p><img alt="" src="/data/attachment/album/201607/05/194738xp87p8pu75p8856r.jpg"></p>
<p><em>NXP T2081 框图</em></p>
<p>板卡的 I/O 包括一个 x4 PCI Express Gen2 通道，以及两个千兆级网卡、 RS232/422/485 串口和 SATA 3.0 接口。此外，它可选 3 款 QorIQ 处理器，Xpedite 6101 提供了三种 <a href="http://www.xes-inc.com/capabilities/ruggedization/">X-ES 加固等级</a>，分别是额定工作温度 0 ~ 55°C, -40 ~ 70°C, 或者是 -40 ~ 85°C，且包含 3 类冲击和抗振类别。</p>
<p>此外，我们已经介绍过的基于 X-ES QorIQ 的 XMC/PrPMC 板卡包括 <a href="http://hackerboards.com/high-end-boards-run-linux-on-64-bit-arm-qoriq-socs/">XPedite6401 和 XPedite6370</a>，它们支持已有的板卡级 Linux 、风河的 VxWorks（一种实时操作系统） 和 Green Hills 的 Integrity（也是一种操作系统）。</p>
<h3>更多信息</h3>
<p>eInfochips Android PowerPC 移植白皮书可以<a href="http://biz.einfochips.com/portingandroidonpowerpc">在此</a>下载(需要先免费注册)。</p>
<h3>相关资料</h3>
<ul>
<li><a href="http://hackerboards.com/commercial-embedded-linux-distro-boosts-virtualization/">Commercial embedded Linux distro boosts virtualization</a></li>
<li><a href="http://hackerboards.com/freescale-unveils-first-arm-based-qoriq-socs/">Freescale unveils first ARM-based QorIQ SoCs</a></li>
<li><a href="http://hackerboards.com/high-end-boards-run-linux-on-64-bit-arm-qoriq-socs/">High-end boards run Linux on 64-bit ARM QorIQ SoCs</a></li>
<li><a href="http://hackerboards.com/free-open-enea-linux-taps-yocto-and-linaro-code/">Free, Open Enea Linux taps Yocto Project and Linaro code</a></li>
<li><a href="http://hackerboards.com/lynuxworks-reverts-to-its-lynxos-roots-changes-name/">LynuxWorks reverts to its LynxOS roots, changes name</a></li>
<li><a href="http://hackerboards.com/first-quad-and-octa-core-qoriq-socs-unveiled/">First quad- and octa-core QorIQ SoCs unveiled</a></li>
<li><a href="http://hackerboards.com/free-white-paper-shows-how-linux-won-embedded/">Free white paper shows how Linux won embedded</a></li>
<li><a href="http://hackerboards.com/quad-core-snapdragon-com-offers-three-dev-kit-options/">Quad-core Snapdragon COM offers three dev kit options</a></li>
<li><a href="http://hackerboards.com/tiny-com-runs-linux-and-android-on-quad-core-64-bit-snapdragon-410/">Tiny COM runs Linux on quad-core 64-bit Snapdragon 410</a></li>
<li><a href="http://hackerboards.com/powerpc-based-iot-gateway-com-ships-with-linux-bsp/">PowerPC based IoT gateway COM ships with Linux BSP</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>