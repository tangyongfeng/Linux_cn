<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>在 Linux 上安装使用 VirtualBox 的命令行管理界面 VBoxManage</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Kashif VirtualBox 拥有一套命令行工具，你可以使用 VirtualBox 的命令行界面 (CLI) 对远程无界面的服务器上的虚拟机进行管理操作。在这篇教 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2016/07/zai-linux-shang-an-zhuang-shi-yong-virtualbox-de-ming-ling-xing-guan-li-jie-mian-vboxmanage.html" rel="bookmark"
           title="Permalink to 在 Linux 上安装使用 VirtualBox 的命令行管理界面 VBoxManage">在 Linux 上安装使用 VirtualBox 的命令行管理界面 VBoxManage</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-07-16T10:01:00+02:00">
                Published: Sat 16 July 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Kashif</p>
<p>VirtualBox 拥有一套命令行工具，你可以使用 VirtualBox 的命令行界面 (CLI) 对远程无界面的服务器上的虚拟机进行管理操作。在这篇教程中，你将会学到如何在没有 GUI 的情况下使用 VBoxManage 创建、启动一个虚拟机。VBoxManage 是 VirtualBox 的命令行界面，你可以在你的主机操作系统的命令行中用它来实现对 VirtualBox 的所有操作。VBoxManage 拥有图形化用户界面所支持的全部功能，而且它支持的功能远不止这些。它提供虚拟引擎的所有功能，甚至包含 GUI 还不能实现的那些功能。如果你想尝试下不同的用户界面而不仅仅是 GUI，或者更改虚拟机更多高级和实验性的配置，那么你就需要用到命令行。</p>
<p><img alt="" src="/data/attachment/album/201607/15/230529cnth1ldbxv1hcx9p.jpg"></p>
<p>当你想要在 VirtualBox 上创建或运行虚拟机时，你会发现 VBoxManage 非常有用，你只需要使用远程主机的终端就够了。这对于需要远程管理虚拟机的服务器来说是一种常见的情形。</p>
<h3>准备工作</h3>
<p>在开始使用 VBoxManage 的命令行工具前，确保在运行着 Ubuntu 16.04 的服务器上，你拥有超级用户的权限或者你能够使用 sudo 命令，而且你已经在服务器上安装了 Oracle Virtual Box。 然后你需要安装 VirtualBox 扩展包，这是运行 VRDE 远程桌面环境，访问无界面虚拟机所必须的。</p>
<h3>安装 VBoxManage</h3>
<p>通过 <a href="https://www.virtualbox.org/wiki/Downloads">Virtual Box 下载页</a> 这个链接，你能够获取你所需要的软件扩展包的最新版本，扩展包的版本和你安装的 VirtualBox 版本需要一致！</p>
<p><img alt="" src="/data/attachment/album/201607/15/230605qlw7w134x4l4w4dg.png"></p>
<p>也可以用下面这条命令来获取 VBoxManage 扩展。</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">virtualbox</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">virtualbox</span><span class="o">/</span><span class="mf">5.0</span><span class="o">.</span><span class="mi">20</span><span class="o">/</span><span class="n">Oracle_VM_VirtualBox_Extension_Pack</span><span class="o">-</span><span class="mf">5.0</span><span class="o">.</span><span class="mi">20</span><span class="o">-</span><span class="mf">106931.</span><span class="n">vbox</span><span class="o">-</span><span class="n">extpack</span>
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201607/15/230614h7xo0j3u008g4j7o.png"></p>
<p>运行下面这条命令，确认 VBoxManage 已经成功安装在你的机器上。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>list<span class="w"> </span>extpacks
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201607/15/230616y8sbtk478ab8b88a.png"></p>
<h3>在 Ubuntu 16.04 上使用 VBoxManage</h3>
<p>接下来我们将要使用 VBoxManage 向你展现通过命令行终端工具来新建和管理虚拟机是多么的简单。</p>
<p>运行下面的命令，新建一个将用来安装 Ubuntu 系统的虚拟机。</p>
<div class="highlight"><pre><span></span><code><span class="p">#</span><span class="w"> </span><span class="n">VBoxManage</span><span class="w"> </span><span class="n">createvm</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">Ubuntu16</span><span class="mf">.04</span><span class="w"> </span><span class="o">--</span><span class="n">register</span>
</code></pre></div>

<p>在运行了这条命令之后，VBoxMnage 将会新建一个叫 做“Ubuntu16.vbox” 的虚拟机，这个虚拟机的位置是家目录路径下的 “VirtualBox VMs/Ubuntu16/Ubuntu16.04.vbox”。在上面这条命令中，“createvm” 是用来新建虚拟机，“--name” 定义了虚拟机的名字，而 “registervm” 命令是用来注册虚拟机的。</p>
<p>现在，使用下面这条命令为虚拟机创建一个硬盘镜像。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>createhd<span class="w"> </span>--filename<span class="w"> </span>Ubuntu16.04<span class="w"> </span>--size<span class="w"> </span><span class="m">5124</span>
</code></pre></div>

<p>这里，“createhd” 用来创建硬盘镜像，“--filename” 用来指定虚拟机的名称，也就是创建的硬盘镜像名称。“--size” 表示硬盘镜像的空间容量，空间容量的单位总是 MB。我们指定了 5Gb，也就是 5124 MB。</p>
<p>接下来我们需要设置操作系统类型，如果要安装 Linux 系的系统，那么用下面这条命令指定系统类型为 Linux 或者 Ubuntu 或者 Fedora 之类的。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>modifyvm<span class="w"> </span>Ubuntu16.04<span class="w"> </span>--ostype<span class="w"> </span>Ubuntu
</code></pre></div>

<p>用下面这条命令来设置虚拟系统的内存大小，也就是从主机中分配到虚拟机系统的内存。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>modifyvm<span class="w"> </span>Ubuntu10.10<span class="w"> </span>--memory<span class="w"> </span><span class="m">512</span>
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201607/15/230632p8bbczg8fz8vr02b.png"></p>
<p>现在用下面这个命令为虚拟机创建一个存储控制器。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>storagectl<span class="w"> </span>Ubuntu16.04<span class="w"> </span>--name<span class="w"> </span>IDE<span class="w"> </span>--add<span class="w"> </span>ide<span class="w"> </span>--controller<span class="w"> </span>PIIX4<span class="w"> </span>--bootable<span class="w"> </span>on
</code></pre></div>

<p>这里的 “storagect1” 是给虚拟机创建存储控制器的，“--name” 指定了虚拟机里需要创建、更改或者移除的存储控制器的名称。“--add” 选项指明存储控制器所需要连接到的系统总线类型，可选的选项有 ide / sata / scsi / floppy。“--controller” 选择主板的类型，主板需要根据需要的存储控制器选择，可选的选项有 LsiLogic / LSILogicSAS / BusLogic / IntelAhci / PIIX3 / PIIX4 / ICH6 / I82078。最后的 “--bootable” 表示控制器是否可以引导系统。</p>
<p>上面的命令创建了叫做 IDE 的存储控制器。之后虚拟介质就能通过 “storageattach” 命令连接到该控制器。</p>
<p>然后运行下面这个命令来创建一个叫做 SATA 的存储控制器，它将会连接到之后的硬盘镜像上。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>storagectl<span class="w"> </span>Ubuntu16.04<span class="w"> </span>--name<span class="w"> </span>SATA<span class="w"> </span>--add<span class="w"> </span>sata<span class="w"> </span>--controller<span class="w"> </span>IntelAhci<span class="w"> </span>--bootable<span class="w"> </span>on
</code></pre></div>

<p>将之前创建的硬盘镜像和 CD/DVD 驱动器加载到 IDE 控制器。将 Ubuntu 的安装光盘插到 CD/DVD 驱动器上。然后用 “storageattach” 命令连接存储控制器和虚拟机。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>storageattach<span class="w"> </span>Ubuntu16.04<span class="w"> </span>--storagectl<span class="w"> </span>SATA<span class="w"> </span>--port<span class="w"> </span><span class="m">0</span><span class="w"> </span>--device<span class="w"> </span><span class="m">0</span><span class="w"> </span>--type<span class="w"> </span>hdd<span class="w"> </span>--medium<span class="w"> </span><span class="s2">&quot;your_iso_filepath&quot;</span>
</code></pre></div>

<p>这将把 SATA 存储控制器及介质（比如之前创建的虚拟磁盘镜像）连接到 Ubuntu16.04 虚拟机中。</p>
<p>运行下面的命令添加像网络连接，音频之类的功能。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>modifyvm<span class="w"> </span>Ubuntu10.10<span class="w"> </span>--nic1<span class="w"> </span>nat<span class="w"> </span>--nictype1<span class="w"> </span>82540EM<span class="w"> </span>--cableconnected1<span class="w"> </span>on
$<span class="w"> </span>VBoxManage<span class="w"> </span>modifyvm<span class="w"> </span>Ubuntu10.10<span class="w"> </span>--vram<span class="w"> </span><span class="m">128</span><span class="w"> </span>--accelerate3d<span class="w"> </span>on<span class="w"> </span>--audio<span class="w"> </span>alsa<span class="w"> </span>--audiocontroller<span class="w"> </span>ac97
</code></pre></div>

<p>通过指定你想要启动虚拟机的名称，用下面这个命令启动虚拟机。</p>
<div class="highlight"><pre><span></span><code> $ VBoxManage startvm Ubuntu16.04
</code></pre></div>

<p>然后会打开一个新窗口，新窗口里虚拟机通过关联文件中引导。</p>
<p><img alt="" src="/data/attachment/album/201607/15/230634rfpttdr6su066sd8.png"></p>
<p>你可以用接下来的命令来关掉虚拟机。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>VBoxManage<span class="w"> </span>controlvm<span class="w"> </span>Ubuntu16.04<span class="w"> </span>poweroff
</code></pre></div>

<p>“controlvm” 命令用来控制虚拟机的状态，可选的选项有 pause / resume / reset / poweroff / savestate / acpipowerbutton / acpisleepbutton。controlvm 有很多选项，用下面这个命令来查看它支持的所有选项。</p>
<div class="highlight"><pre><span></span><code>$VBoxManage controlvm
</code></pre></div>

<p><img alt="" src="/data/attachment/album/201607/15/230642amzm2lml2a5z4m1m.png"></p>
<h3>完结</h3>
<p>从这篇文章中，我们了解了 Oracle Virtual Box 中一个十分实用的工具 VBoxManage，文章包含了 VBoxManage 的安装和在 Ubuntu 16.04 系统上的使用，包括通过 VBoxManage 中实用的命令来创建和管理虚拟机。希望这篇文章对你有帮助，另外别忘了分享你的评论或者建议。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>