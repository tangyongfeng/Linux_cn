<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>17 个 tar 命令实用示例</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Pradeep Kumar Tar（Tape ARchive，磁带归档的缩写，LCTT 译注：最初设计用于将文件打包到磁带上，现在我们大都使用它来实现备份某个分区或 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2016/09/17-ge-tar-ming-ling-shi-yong-shi-li.html" rel="bookmark"
           title="Permalink to 17 个 tar 命令实用示例">17 个 tar 命令实用示例</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-09-24T08:59:00+02:00">
                Published: Sat 24 September 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Pradeep Kumar</p>
<p>Tar（Tape ARchive，磁带归档的缩写，LCTT 译注：最初设计用于将文件打包到磁带上，现在我们大都使用它来实现备份某个分区或者某些重要的目录）是类 Unix 系统中使用最广泛的命令，用于归档多个文件或目录到单个归档文件中，并且归档文件可以进一步使用 gzip 或者 bzip2 等技术进行压缩。换言之，tar 命令也可以用于备份：先是归档多个文件和目录到一个单独的 tar 文件或归档文件，然后在需要之时将 tar 文件中的文件和目录释放出来。</p>
<p><img alt="" src="/data/attachment/album/201609/24/070653f5wz5iaaj9ywjfyt.jpg"></p>
<p>本文将介绍 tar 的 17 个实用示例。</p>
<p>tar 命令语法如下：</p>
<div class="highlight"><pre><span></span><code># tar &lt;选项&gt; &lt;文件&gt;
</code></pre></div>

<p>下面列举 tar 命令中一些常用的选项：</p>
<blockquote>
<p>--delete : 从归档文件 (而非磁带) 中删除</p>
<p>-r, --append : 将文件追加到归档文件中</p>
<p>-t, --list : 列出归档文件中包含的内容</p>
<p>--test-label : 测试归档文件卷标并退出</p>
<p>-u, --update : 将已更新的文件追加到归档文件中</p>
<p>-x, --extract, --get : 释放归档文件中文件及目录</p>
<p>-C, --directory=DIR : 执行归档动作前变更工作目录到 DIR</p>
<p>-f, --file=ARCHIVE : 指定 (将要创建或已存在的) 归档文件名</p>
<p>-j, --bip2 : 对归档文件使用 bzip2 压缩</p>
<p>-J, --xz : 对归档文件使用 xz 压缩</p>
<p>-p, --preserve-permissions : 保留原文件的访问权限</p>
<p>-v, --verbose : 显示命令整个执行过程</p>
<p>-z, gzip : 对归档文件使用 gzip 压缩</p>
</blockquote>
<p>注 : 在 tar 命令选项中的连接符 <code>-</code> 是可选的（LCTT 译注：不用 <code>-</code> 也没事。这在 GNU 软件里面很罕见，大概是由于 tar 命令更多受到古老的 UNIX 风格影响）。</p>
<h3>示例 1：创建一个 tar 归档文件</h3>
<p>现在来创建一个 tar 文件，将 /etc/ 目录和 /root/anaconda-ks.cfg 文件打包进去。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">cvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">anaconda</span><span class="o">-</span><span class="n">ks</span><span class="p">.</span><span class="n">cfg</span>
</code></pre></div>

<p>以上命令会在当前目录创建一个名为 "myarchive" 的 tar 文件，内含 /etc/ 目录和 /root/anaconda-ks.cfg 文件。</p>
<p>其中，<code>-c</code> 选项表示要创建 tar 文件，<code>-v</code> 选项用于输出 tar 的详细过程到屏幕上，<code>-f</code> 选项则是指定归档文件名称。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">22947840</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">00</span><span class="err">:</span><span class="mi">24</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h3>示例 2：列出归档文件中的内容</h3>
<p>在 tar 命令中使用 <code>–t</code> 选项可以不用释放其中的文件就可以快速列出文件中包含的内容。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">tvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span>
</code></pre></div>

<p>列出 tar 文件中的指定的文件和目录。下列命令尝试查看 anaconda-ks.cfg 文件是否存在于 tar 文件中。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">tvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">anaconda</span><span class="o">-</span><span class="n">ks</span><span class="p">.</span><span class="n">cfg</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-------</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w"> </span><span class="mi">953</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">33</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">anaconda</span><span class="o">-</span><span class="n">ks</span><span class="p">.</span><span class="n">cfg</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h3>示例 3：追加文件到归档（tar）文件中</h3>
<p><code>-r</code> 选项用于向已有的 tar 文件中追加文件。下面来将 /etc/fstab 添加到 data.tar 中。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">rvf</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="n">tar</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span>
</code></pre></div>

<p>注：在压缩过的 tar 文件中无法进行追加文件操作。</p>
<h3>示例 4：从 tar 文件中释放文件以及目录</h3>
<p><code>-x</code> 选项用于释放出 tar 文件中的文件和目录。下面来释放上边创建的 tar 文件中的内容。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">xvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span>
</code></pre></div>

<p>这个命令会在当前目录中释放出 myarchive.tar 文件中的内容。</p>
<h3>示例 5：释放 tar 文件到指定目录</h3>
<p>假如你想要释放 tar 文件中的内容到指定的文件夹或者目录，使用 <code>-C</code> 选项后边加上指定的文件的路径。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">xvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span>
</code></pre></div>

<h3>示例 6：释放 tar 文件中的指定文件或目录</h3>
<p>假设你只要释放 tar 文件中的 anaconda-ks.cfg 到 /tmp 目录。</p>
<p>语法如下：</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="err">–</span><span class="n">xvf</span><span class="w"> </span><span class="err">{</span><span class="n">tar</span><span class="o">-</span><span class="k">file</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="err">{</span><span class="k">file</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="n">be</span><span class="o">-</span><span class="n">extracted</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="err">{</span><span class="k">path</span><span class="o">-</span><span class="k">where</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="k">extract</span><span class="err">}</span>

<span class="o">[</span><span class="n">root@linuxtechi tmp</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">xvf</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">anaconda</span><span class="o">-</span><span class="n">ks</span><span class="p">.</span><span class="n">cfg</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span>
<span class="n">root</span><span class="o">/</span><span class="n">anaconda</span><span class="o">-</span><span class="n">ks</span><span class="p">.</span><span class="n">cfg</span>
<span class="o">[</span><span class="n">root@linuxtechi tmp</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">anaconda</span><span class="o">-</span><span class="n">ks</span><span class="p">.</span><span class="n">cfg</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-------</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">953</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">33</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">anaconda</span><span class="o">-</span><span class="n">ks</span><span class="p">.</span><span class="n">cfg</span>
<span class="o">[</span><span class="n">root@linuxtechi tmp</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h3>示例 7：创建并压缩归档文件（.tar.gz 或 .tgz）</h3>
<p>假设我们需要打包 /etc 和 /opt 文件夹，并用 gzip 工具将其压缩。可以在 tar 命令中使用 <code>-z</code> 选项来实现。这种 tar 文件的扩展名可以是 .tar.gz 或者 .tgz。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">zcpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span>
</code></pre></div>

<p>或</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">zcpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tgz</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span>
</code></pre></div>

<h3>示例 8：创建并压缩归档文件（.tar.bz2 或 .tbz2）</h3>
<p>假设我们需要打包 /etc 和 /opt 文件夹，并使用 bzip2 压缩。可以在 tar 命令中使用 <code>-j</code> 选项来实现。这种 tar 文件的扩展名可以是 .tar.bz2 或者 .tbz。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">jcpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span>
</code></pre></div>

<p>或</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">jcpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tbz2</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span>
</code></pre></div>

<h3>示例 9：排除指定文件或类型后创建 tar 文件</h3>
<p>创建 tar 文件时在 tar 命令中使用 <code>–exclude</code> 选项来排除指定文件或者类型。假设在创建压缩的 tar 文件时要排除 .html 文件。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">zcpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tgz</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="w"> </span><span class="c1">--exclude=*.html</span>
</code></pre></div>

<h3>示例 10：列出 .tar.gz 或 .tgz 文件中的内容</h3>
<p>使用 <code>-t</code> 选项可以查看 .tar.gz 或 .tgz 文件中内容。如下：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">tvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tgz</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">more</span>
<span class="p">.............................................</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">07</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">41</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">       </span><span class="mi">541</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">23</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-------</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">23</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">crypttab</span>
<span class="n">lrwxrwxrwx</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">23</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">mtab</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">proc</span><span class="o">/</span><span class="n">self</span><span class="o">/</span><span class="n">mounts</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">       </span><span class="mi">149</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">07</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">41</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">resolv</span><span class="p">.</span><span class="n">conf</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">06</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">55</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">06</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">15</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">rpm</span><span class="o">-</span><span class="n">gpg</span><span class="o">/</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">      </span><span class="mi">1690</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">04</span><span class="err">:</span><span class="mi">59</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">rpm</span><span class="o">-</span><span class="n">gpg</span><span class="o">/</span><span class="n">RPM</span><span class="o">-</span><span class="n">GPG</span><span class="o">-</span><span class="k">KEY</span><span class="o">-</span><span class="n">CentOS</span><span class="o">-</span><span class="mi">7</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">      </span><span class="mi">1004</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">04</span><span class="err">:</span><span class="mi">59</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">rpm</span><span class="o">-</span><span class="n">gpg</span><span class="o">/</span><span class="n">RPM</span><span class="o">-</span><span class="n">GPG</span><span class="o">-</span><span class="k">KEY</span><span class="o">-</span><span class="n">CentOS</span><span class="o">-</span><span class="n">Debug</span><span class="o">-</span><span class="mi">7</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">      </span><span class="mi">1690</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">04</span><span class="err">:</span><span class="mi">59</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">rpm</span><span class="o">-</span><span class="n">gpg</span><span class="o">/</span><span class="n">RPM</span><span class="o">-</span><span class="n">GPG</span><span class="o">-</span><span class="k">KEY</span><span class="o">-</span><span class="n">CentOS</span><span class="o">-</span><span class="n">Testing</span><span class="o">-</span><span class="mi">7</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">      </span><span class="mi">3140</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">15</span><span class="w"> </span><span class="mi">06</span><span class="err">:</span><span class="mi">53</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">rpm</span><span class="o">-</span><span class="n">gpg</span><span class="o">/</span><span class="n">RPM</span><span class="o">-</span><span class="n">GPG</span><span class="o">-</span><span class="k">KEY</span><span class="o">-</span><span class="n">foreman</span>
<span class="p">..........................................................</span>
</code></pre></div>

<h3>示例 11：列出 .tar.bz2 或 .tbz2 文件中的内容</h3>
<p>使用 <code>-t</code> 选项可以查看 .tar.bz2 或 .tbz2 文件中内容。如下：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">tvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tbz2</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">more</span>
<span class="p">........................................................</span>
<span class="n">rwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">25</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">java</span><span class="o">/</span>
<span class="n">lrwxrwxrwx</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">25</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">cacerts</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">ca</span><span class="o">-</span><span class="n">trust</span><span class="o">/</span><span class="n">extracted</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">cacerts</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">06</span><span class="w"> </span><span class="mi">02</span><span class="err">:</span><span class="mi">54</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">nssdb</span><span class="o">/</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">     </span><span class="mi">65536</span><span class="w"> </span><span class="mi">2010</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">12</span><span class="w"> </span><span class="mi">15</span><span class="err">:</span><span class="mi">09</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">nssdb</span><span class="o">/</span><span class="n">cert8</span><span class="p">.</span><span class="n">db</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">      </span><span class="mi">9216</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">06</span><span class="w"> </span><span class="mi">02</span><span class="err">:</span><span class="mi">54</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">nssdb</span><span class="o">/</span><span class="n">cert9</span><span class="p">.</span><span class="n">db</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">     </span><span class="mi">16384</span><span class="w"> </span><span class="mi">2010</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">12</span><span class="w"> </span><span class="mi">16</span><span class="err">:</span><span class="mi">21</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">nssdb</span><span class="o">/</span><span class="n">key3</span><span class="p">.</span><span class="n">db</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">     </span><span class="mi">11264</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">06</span><span class="w"> </span><span class="mi">02</span><span class="err">:</span><span class="mi">54</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">nssdb</span><span class="o">/</span><span class="n">key4</span><span class="p">.</span><span class="n">db</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">       </span><span class="mi">451</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">21</span><span class="w"> </span><span class="mi">09</span><span class="err">:</span><span class="mi">42</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">nssdb</span><span class="o">/</span><span class="n">pkcs11</span><span class="p">.</span><span class="n">txt</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">     </span><span class="mi">16384</span><span class="w"> </span><span class="mi">2010</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">12</span><span class="w"> </span><span class="mi">15</span><span class="err">:</span><span class="mi">45</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">nssdb</span><span class="o">/</span><span class="n">secmod</span><span class="p">.</span><span class="n">db</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">01</span><span class="err">:</span><span class="mi">26</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">CA</span><span class="o">/</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">29</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">48</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">CA</span><span class="o">/</span><span class="n">certs</span><span class="o">/</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">29</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">48</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">CA</span><span class="o">/</span><span class="n">crl</span><span class="o">/</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">29</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">48</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">CA</span><span class="o">/</span><span class="n">newcerts</span><span class="o">/</span>
<span class="n">drwx</span><span class="o">------</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">29</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">48</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">CA</span><span class="o">/</span><span class="n">private</span><span class="o">/</span>
<span class="n">drwx</span><span class="o">------</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20</span><span class="w"> </span><span class="mi">06</span><span class="err">:</span><span class="mi">34</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">rsyslog</span><span class="o">/</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">root</span><span class="o">/</span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">06</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">44</span><span class="w"> </span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">pulp</span><span class="o">/</span>
<span class="p">..............................................................</span>
</code></pre></div>

<h3>示例 12：解压 .tar.gz 或 .tgz 文件</h3>
<p>使用 <code>-x</code> 和 <code>-z</code> 选项来解压 .tar.gz 或 .tgz 文件。如下：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">zxpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tgz</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span>
</code></pre></div>

<p>以上命令将 tar 文件解压到 /tmp 目录。</p>
<p>注：现今的 tar 命令会在执行解压动作前自动检查文件的压缩类型，这意味着我们在使用 tar 命令是可以不用指定文件的压缩类型。如下：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">xpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tgz</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span>
</code></pre></div>

<h3>示例 13：解压 .tar.bz2 或 .tbz2 文件</h3>
<p>使用 <code>-j</code> 和 <code>-x</code> 选项来解压 .tar.bz2 或 .tbz2 文件。如下：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">jxpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tbz2</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span>
</code></pre></div>

<p>或</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="n">xpvf</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tbz2</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span>
</code></pre></div>

<h3>示例 14：使用 tar 命令进行定时备份</h3>
<p>总有一些实时场景需要我们对指定的文件和目录进行打包，已达到日常备份的目的。假设需要每天备份整个 /opt 目录，可以创建一个带 tar 命令的 cron 任务来完成。如下：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">zcvf</span><span class="w"> </span><span class="n">optbackup</span><span class="o">-</span><span class="err">$</span><span class="p">(</span><span class="nc">date</span><span class="w"> </span><span class="o">+%</span><span class="n">Y</span><span class="o">-%</span><span class="n">m</span><span class="o">-%</span><span class="n">d</span><span class="p">).</span><span class="n">tgz</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span>
</code></pre></div>

<p>为以上命令创建一个 cron 任务即可。</p>
<h3>示例 15：使用 -T 及 -X 创建压缩归档文件</h3>
<p>想像这样一个场景：把想要归档和压缩的文件及目录记录到到一个文件，然后把这个文件当做 tar 命令的传入参数来完成归档任务；而有时候则是需要排除上面提到的这个文件里面记录的特定路径后进行归档和压缩。</p>
<p>在 tar 命令中使用 <code>-T</code> 选项来指定该输入文件，使用 <code>-X</code> 选项来指定包含要排除的文件列表。</p>
<p>假设要归档 /etc、/opt、/home 目录，并排除 /etc/sysconfig/kdump 和 /etc/sysconfig/foreman 文件，可以创建 /root/tar-include 和 /root/tar-exclude 然后分别输入以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">tar</span><span class="o">-</span><span class="k">include</span>
<span class="o">/</span><span class="n">etc</span>
<span class="o">/</span><span class="n">opt</span>
<span class="o">/</span><span class="n">home</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">tar</span><span class="o">-</span><span class="n">exclude</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">sysconfig</span><span class="o">/</span><span class="n">kdump</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">sysconfig</span><span class="o">/</span><span class="n">foreman</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>运行以下命令来创建一个压缩归档文件。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="n">zcpvf</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="err">$</span><span class="p">(</span><span class="nc">date</span><span class="w"> </span><span class="o">+%</span><span class="n">Y</span><span class="o">-%</span><span class="n">m</span><span class="o">-%</span><span class="n">d</span><span class="p">).</span><span class="n">tgz</span><span class="w"> </span><span class="o">-</span><span class="n">T</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">tar</span><span class="o">-</span><span class="k">include</span><span class="w"> </span><span class="o">-</span><span class="n">X</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">tar</span><span class="o">-</span><span class="n">exclude</span>
</code></pre></div>

<h3>示例 16：查看 .tar、.tgz 和 .tbz2 文件的大小</h3>
<p>使用如下命令来查看 (压缩) tar 文件的体积。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">czf</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="n">tar</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">wc</span><span class="w"> </span><span class="o">-</span><span class="n">c</span>
<span class="mi">427</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">czf</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mf">09.</span><span class="n">tgz</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">wc</span><span class="w"> </span><span class="o">-</span><span class="n">c</span>
<span class="mi">37956009</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">czf</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">myarchive</span><span class="p">.</span><span class="n">tbz2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">wc</span><span class="w"> </span><span class="o">-</span><span class="n">c</span>
<span class="mi">30835317</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h3>示例 17：分割体积庞大的 tar 文件为多份小文件</h3>
<p>类 Unix 系统中使用 split 命令来将大体积文件分割成小体积文件。大体积的 tar 当然也可以使用这个命令来进行分割。</p>
<p>假设需要将 "mybackup-2016-09-09.tgz" 分割成每份 6 MB 的小文件。</p>
<div class="highlight"><pre><span></span><code><span class="n">Syntax</span><span class="w"> </span><span class="o">:</span><span class="w">  </span><span class="n">split</span><span class="w"> </span><span class="o">-</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Size</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">MB</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">tar</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;.&lt;</span><span class="n">extension</span><span class="o">&gt;</span><span class="w"> </span><span class="err">“</span><span class="n">prefix</span><span class="o">-</span><span class="n">name</span><span class="err">”</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">split</span><span class="w"> </span><span class="o">-</span><span class="n">b</span><span class="w"> </span><span class="mi">6</span><span class="n">M</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mf">09.</span><span class="n">tgz</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">parts</span>
</code></pre></div>

<p>以上命令会在当前目录分割 mybackup-2016-09-09.tgz 文件成为多个 6 MB 的小文件，文件名为 mybackup-partsaa ~ mybackup-partsag。如果在要在分割文件后以数字而非字母来区分，可以在以上的 split 命令使用 <code>-d</code> 选项。</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">parts</span><span class="o">*</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">6291456</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">05</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsaa</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">6291456</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">05</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsab</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">6291456</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">05</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsac</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">6291456</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">05</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsad</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">6291456</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">05</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsae</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">6291456</span><span class="w"> </span><span class="n">Sep</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">05</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsaf</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="p">.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="mi">637219</span><span class="w">  </span><span class="n">Sep</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">03</span><span class="err">:</span><span class="mi">05</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsag</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>然后通过网络将这些分割文件转移到其他服务器，就可以合并成为一个单独的 tar 文件了，如下：</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="n">partsa</span><span class="o">*</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">mybackup</span><span class="o">-</span><span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mf">09.</span><span class="n">tgz</span>
<span class="o">[</span><span class="n">root@linuxtechi ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>文毕，希望你喜欢 tar 命令的这几个不同的示例。随时评论并分享你的心得。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>