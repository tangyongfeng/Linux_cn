<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>你必须了解的基础的 Linux 网络命令</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Abhishek Prakash 摘要：有抱负的 Linux 系统管理员和 Linux 狂热者必须知道的、最重要的、而且基础的 Linux 网络命令合集。 在 It’s FOSS 我们并非每 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li class="active"><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2016/09/ni-bi-xu-liao-jie-de-ji-chu-de-linux-wang-luo-ming-ling.html" rel="bookmark"
           title="Permalink to 你必须了解的基础的 Linux 网络命令">你必须了解的基础的 Linux 网络命令</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-09-23T09:40:00+02:00">
                Published: Fri 23 September 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xi-tong-yun-wei">系统运维</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Abhishek Prakash</p>
<p><img alt="" src="/data/attachment/album/201609/23/104804jo338oaf2jf23a2a.jpg"></p>
<blockquote>
<p>摘要：有抱负的 Linux 系统管理员和 Linux 狂热者必须知道的、最重要的、而且基础的 Linux 网络命令合集。</p>
</blockquote>
<p>在 It’s FOSS 我们并非每天都谈论 Linux 的“命令行方面”。基本上，我更专注于 Linux 的桌面端。但你们读者中的一些人在内部调查（仅面向 It's FOSS newsletter 订阅者）中指出，你们也想学些命令行技巧。速查表也受大部分读者所喜欢和支持。</p>
<p>为此，我编辑了一个 Linux 中基础网络命令的列表。它并不是一个教你如何使用这些命令的教程，而是一个命令合集和他们的简短解释。所以，如果你已经使用过这些命令，你可以用它来快速记住命令。</p>
<p>你可以把这个网页添加为书签以便快速查阅，或输出一个 PDF 版本以便离线使用。</p>
<p>当我还是通信系统工程专业的学生的时候我就有这个 Linux 网络命令的列表了。它帮助我在计算机网络课程获得了高分。希望它也能以同样的方式帮助你。</p>
<h3>Linux 基础网络命令列表</h3>
<p>我在计算机网络课程上使用 FreeBSD，不过这些 UNIX 命令应该也能在 Linux 上同样工作。</p>
<h4>连通性</h4>
<ul>
<li><code>ping &lt;host&gt;</code>：发送 ICMP echo 消息（一个包）到主机。这可能会不停地发送直到你按下 <code>Control-C</code>。Ping 的通意味着一个包从你的机器通过 ICMP 发送出去，并在 IP 层回显。Ping 告诉你另一个主机是否在运行。</li>
<li><code>telnet &lt;host&gt; [port]</code>：与主机在指定的端口通信。默认的 telnet 端口是 23。按 Control-] 以退出 telnet。其它一些常用的端口是：<ul>
<li>7 —— echo 端口</li>
<li>25 —— SMTP，用于发送邮件</li>
<li>79 —— Finger (LCTT 译注：<a href="https://en.wikipedia.org/wiki/Finger_protocol">维基百科 - Finger protocal</a>，不过举例 Finger 恐怕不合时宜，倒不如试试 80？），提供该网络下其它用户的信息。</li>
</ul>
</li>
</ul>
<h4>ARP</h4>
<p>ARP 用于将 IP 地址转换为以太网地址。root 用户可以添加和删除 ARP 记录。当 ARP 记录被污染或者错误时，删除它们会有用。root 显式添加的 ARP 记录是永久的 —— 代理设置的也是。ARP 表保存在内核中，动态地被操作。ARP 记录会被缓存，通常在 20 分钟后失效并被删除。</p>
<ul>
<li><code>arp -a</code>：打印 ARP 表。</li>
<li><code>arp -s &lt;ip_address&gt; &lt;mac_address&gt; [pub]</code>：添加一条记录到表中。</li>
<li><code>arp -a -d</code>：删除 ARP 表中的所有记录。</li>
</ul>
<h4>路由</h4>
<ul>
<li><code>netstat -r</code>：打印路由表。路由表保存在内核中，用于 IP 层把包路由到非本地网络。</li>
<li><code>route add</code>：route 命令用于向路由表添加静态（手动指定而非动态）路由路径。所有从该 PC 到那个 IP/子网的流量都会经由指定的网关 IP。它也可以用来设置一个默认路由。例如，在 IP/子网处使用 0.0.0.0，就可以发送所有包到特定的网关。</li>
<li><code>routed</code>：控制动态路由的 BSD 守护程序。开机时启动。它运行 RIP 路由协议。只有 root 用户可用。没有 root 权限你不能运行它。</li>
<li><code>gated</code>：gated 是另一个使用 RIP 协议的路由守护进程。它同时支持 OSPF、EGP 和 RIP 协议。只有 root 用户可用。</li>
<li><code>traceroute</code>：用于跟踪 IP 包的路由。它每次发送包时都把跳数加 1，从而使得从源地址到目的地之间的所有网关都会返回消息。</li>
<li><code>netstat -rnf inet</code>：显示 IPv4 的路由表。</li>
<li><code>sysctl net.inet.ip.forwarding=1</code>：启用包转发（把主机变为路由器）。</li>
<li><code>route add|delete [-net|-host] &lt;destination&gt; &lt;gateway&gt;</code>：（如 <code>route add 192.168.20.0/24 192.168.30.4</code>）添加一条路由。</li>
<li><code>route flush</code>：删除所有路由。</li>
<li><code>route add -net 0.0.0.0 192.168.10.2</code>：添加一条默认路由。</li>
<li><code>routed -Pripv2 -Pno_rdisc -d [-s|-q]</code>：运行 routed 守护进程，使用 RIPv2 协议，不启用 ICMP 自动发现，在前台运行，供给模式或安静模式。</li>
<li><code>route add 224.0.0.0/4 127.0.0.1</code>：为本地地址定义多播路由。（LCTT 译注：原文存疑）</li>
<li><code>rtquery -n &lt;host&gt;</code>（LCTT 译注：增加了 host 参数）：查询指定主机上的 RIP 守护进程（手动更新路由表）。</li>
</ul>
<h4>其它</h4>
<ul>
<li><code>nslookup</code>：向 DNS 服务器查询，将 IP 转为名称，或反之。例如，<code>nslookup facebook.com</code> 会给出 facebook.com 的 IP。</li>
<li><code>ftp &lt;host&gt; [port]</code>（LCTT 译注：原文中 water 应是笔误）：传输文件到指定主机。通常可以使用 登录名 "anonymous" , 密码 "guest" 来登录。</li>
<li><code>rlogin -l &lt;host&gt;</code>（LCTT 译注：添加了 host 参数）：使用类似 telnet 的虚拟终端登录到主机。</li>
</ul>
<h4>重要文件</h4>
<ul>
<li><code>/etc/hosts</code>：域名到 IP 地址的映射。</li>
<li><code>/etc/networks</code>：网络名称到 IP 地址的映射。</li>
<li><code>/etc/protocols</code>：协议名称到协议编号的映射。</li>
<li><code>/etc/services</code>：TCP/UDP 服务名称到端口号的映射。</li>
</ul>
<h4>工具和网络性能分析</h4>
<ul>
<li><code>ifconfig &lt;interface&gt; &lt;address&gt; [up]</code>：启动接口。</li>
<li><code>ifconfig &lt;interface&gt; [down|delete]</code>：停止接口。</li>
<li><code>ethereal &amp;</code>：在后台打开 <code>ethereal</code> 而非前台。</li>
<li><code>tcpdump -i -vvv</code>：抓取和分析包的工具。</li>
<li><code>netstat -w [seconds] -I [interface]</code>：显示网络设置和统计信息。</li>
<li><code>udpmt -p [port] -s [bytes] target_host</code>：发送 UDP 流量。</li>
<li><code>udptarget -p [port]</code>：接收 UDP 流量。</li>
<li><code>tcpmt -p [port] -s [bytes] target_host</code>：发送 TCP 流量。</li>
<li><code>tcptarget -p [port]</code>：接收 TCP 流量。</li>
</ul>
<h4>交换机</h4>
<ul>
<li><code>ifconfig sl0 srcIP dstIP</code>：配置一个串行接口（在此前先执行 <code>slattach -l /dev/ttyd0</code>，此后执行 <code>sysctl net.inet.ip.forwarding=1</code>）</li>
<li><code>telnet 192.168.0.254</code>：从子网中的一台主机访问交换机。</li>
<li><code>sh ru</code> 或 <code>show running-configuration</code>：查看当前配置。</li>
<li><code>configure terminal</code>：进入配置模式。</li>
<li><code>exit</code>：退出当前模式。（LCTT 译注：原文存疑）</li>
</ul>
<h4>VLAN</h4>
<ul>
<li><code>vlan n</code>：创建一个 ID 为 n 的 VLAN。</li>
<li><code>no vlan N</code>：删除 ID 为 n 的 VLAN。</li>
<li><code>untagged Y</code>：添加端口 Y 到 VLAN n。</li>
<li><code>ifconfig vlan0 create</code>：创建 vlan0 接口。</li>
<li><code>ifconfig vlan0 vlan_ID vlandev em0</code>：把 em0 加入到 vlan0 接口（LCTT 译注：原文存疑），并设置标记为 ID。</li>
<li><code>ifconfig vlan0 [up]</code>：启用虚拟接口。</li>
<li><code>tagged Y</code>：为当前 VLAN 的端口 Y 添加标记帧支持。</li>
</ul>
<h4>UDP/TCP</h4>
<ul>
<li><code>socklab udp</code>：使用 UDP 协议运行 <code>socklab</code>。</li>
<li><code>sock</code>：创建一个 UDP 套接字，等效于输入 <code>sock udp</code> 和 <code>bind</code>。</li>
<li><code>sendto &lt;Socket ID&gt; &lt;hostname&gt; &lt;port #&gt;</code>：发送数据包。</li>
<li><code>recvfrom &lt;Socket ID&gt; &lt;byte #&gt;</code>：从套接字接收数据。</li>
<li><code>socklab tcp</code>：使用 TCP 协议运行 <code>socklab</code>。</li>
<li><code>passive</code>：创建一个被动模式的套接字，等效于 <code>socklab</code>，<code>sock tcp</code>，<code>bind</code>，<code>listen</code>。</li>
<li><code>accept</code>：接受进来的连接（可以在发起进来的连接之前或之后执行）。</li>
<li><code>connect &lt;hostname&gt; &lt;port #&gt;</code>：等效于 <code>socklab</code>，<code>sock tcp</code>，<code>bind</code>，<code>connect</code>。</li>
<li><code>close</code>：关闭连接。</li>
<li><code>read &lt;byte #&gt;</code>：从套接字中读取 n 字节。</li>
<li><code>write</code>：（例如，<code>write ciao</code>、<code>write #10</code>）向套接字写入 "ciao" 或 10 个字节。</li>
</ul>
<h4>NAT/防火墙</h4>
<ul>
<li><code>rm /etc/resolv.conf</code>：禁止地址解析，保证你的过滤和防火墙规则正确工作。</li>
<li><code>ipnat -f file_name</code>：将过滤规则写入文件。</li>
<li><code>ipnat -l</code>：显示活动的规则列表。</li>
<li><code>ipnat -C -F</code>：重新初始化规则表。</li>
<li><code>map em0 192.168.1.0/24 -&gt; 195.221.227.57/32 em0</code>：将 IP 地址映射到接口。</li>
<li><code>map em0 192.168.1.0/24 -&gt; 195.221.227.57/32 portmap tcp/udp 20000:50000</code>：带端口号的映射。</li>
<li><code>ipf -f file_name</code>：将过滤规则写入文件。</li>
<li><code>ipf -F -a</code>：重置规则表。</li>
<li><code>ipfstat -I</code>：当与 -s 选项合用时列出活动的状态条目（LCTT 译注：原文存疑）。</li>
</ul>
<p>希望这份基础的 Linux 网络命令合集对你有用。欢迎各种问题和建议。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>