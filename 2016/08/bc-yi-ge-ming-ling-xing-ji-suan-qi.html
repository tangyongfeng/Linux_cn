<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>'bc : 一个命令行计算器'</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Paul W. Frields 假如你在一个图形桌面环境中需要一个计算器时，你可能只需要一路进行点击便可以找到一个计算器。例如，Fedora …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2016/08/bc-yi-ge-ming-ling-xing-ji-suan-qi.html" rel="bookmark"
           title="Permalink to 'bc : 一个命令行计算器'">'bc : 一个命令行计算器'</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-08-06T18:22:57+02:00">
                Published: Sat 06 August 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Paul W. Frields</p>
<p><img alt="" src="/data/attachment/album/201608/06/182300kcj29vz3qmpjs9xm.jpg"></p>
<p>假如你在一个图形桌面环境中需要一个计算器时，你可能只需要一路进行点击便可以找到一个计算器。例如，Fedora 工作站中就已经包含了一个名为 <code>Calculator</code> 的工具。它有着几种不同的操作模式，例如，你可以进行复杂的数学运算或者金融运算。但是，你知道吗，命令行也提供了一个与之相似的名为 <code>bc</code> 的工具？</p>
<p><code>bc</code> 工具可以为你提供的功能可以满足你对科学计算器、金融计算器或者是简单计算器的期望。另外，假如需要的话，它还可以从命令行中被脚本化。这使得当你需要做复杂的数学运算时，你可以在 shell 脚本中使用它。</p>
<p>因为 bc 也被用于其他的系统软件，例如 CUPS 打印服务，所以它可能已经在你的 Fedora 系统中被安装了。你可以使用下面这个命令来进行检查：</p>
<div class="highlight"><pre><span></span><code>dnf list installed bc
</code></pre></div>

<p>假如因为某些原因你没有在上面命令的输出中看到它，你可以使用下面的这个命令来安装它：</p>
<div class="highlight"><pre><span></span><code>sudo dnf install bc
</code></pre></div>

<h3>用 bc 做一些简单的数学运算</h3>
<p>使用 bc 的一种方式是进入它自己的 shell。在那里你可以按行进行许多次计算。当你键入 bc 后，首先出现的是有关这个程序的警告：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>bc
bc<span class="w"> </span><span class="m">1</span>.06.95
Copyright<span class="w"> </span><span class="m">1991</span>-1994,<span class="w"> </span><span class="m">1997</span>,<span class="w"> </span><span class="m">1998</span>,<span class="w"> </span><span class="m">2000</span>,<span class="w"> </span><span class="m">2004</span>,<span class="w"> </span><span class="m">2006</span><span class="w"> </span>Free<span class="w"> </span>Software<span class="w"> </span>Foundation,<span class="w"> </span>Inc.
This<span class="w"> </span>is<span class="w"> </span>free<span class="w"> </span>software<span class="w"> </span>with<span class="w"> </span>ABSOLUTELY<span class="w"> </span>NO<span class="w"> </span>WARRANTY.
For<span class="w"> </span>details<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="sb">`</span>warranty<span class="err">&#39;</span>.
</code></pre></div>

<p>现在你可以按照每行一个输入运算式或者命令了：</p>
<div class="highlight"><pre><span></span><code><span class="mf">1</span><span class="o">+</span><span class="mf">1</span>
</code></pre></div>

<p>bc 会回答上面计算式的答案是：</p>
<div class="highlight"><pre><span></span><code><span class="mf">2</span>
</code></pre></div>

<p>在这里你还可以执行其他的命令。你可以使用 加（+）、减（-）、乘（*）、除（/）、圆括号、指数符号（^） 等等。请注意 bc 同样也遵循所有约定俗成的运算规则，例如运算的先后顺序。你可以试试下面的例子：</p>
<div class="highlight"><pre><span></span><code>(4+7)*2
4+7*2
</code></pre></div>

<p>若要退出 bc 可以通过按键组合 <code>Ctrl+D</code> 来发送 “输入结束”信号给 bc 。</p>
<p>使用 bc 的另一种方式是使用 <code>echo</code> 命令来传递运算式或命令。下面这个示例就是计算器中的 “Hello, world” 例子，使用 shell 的管道函数（|） 来将 <code>echo</code> 的输出传入 <code>bc</code> 中：</p>
<div class="highlight"><pre><span></span><code>echo &#39;1+1&#39; | bc
</code></pre></div>

<p>使用 shell 的管道，你可以发送不止一个运算操作，你需要使用分号来分隔不同的运算。结果将在不同的行中返回。</p>
<div class="highlight"><pre><span></span><code>echo &#39;1+1; 2+2&#39; | bc
</code></pre></div>

<h3>精度</h3>
<p>在某些计算中，bc 会使用精度的概念，即小数点后面的数字位数。默认的精度是 0。除法操作总是使用精度的设定。所以，如果你没有设置精度，有可能会带来意想不到的答案：</p>
<div class="highlight"><pre><span></span><code>echo &#39;3/2&#39; | bc
echo &#39;scale=3; 3/2&#39; | bc
</code></pre></div>

<p>乘法使用一个更复杂的精度选择机制：</p>
<div class="highlight"><pre><span></span><code>echo &#39;3*2&#39; | bc
echo &#39;3*2.0&#39; | bc
</code></pre></div>

<p>同时，加法和减法的相关运算则与之相似：</p>
<div class="highlight"><pre><span></span><code>echo &#39;7-4.15&#39; | bc
</code></pre></div>

<h3>其他进制系统</h3>
<p>bc 的另一个有用的功能是可以使用除了十进制以外的其他计数系统。例如，你可以轻松地做十六进制或二进制的数学运算。可以使用 <code>ibase</code> 和 <code>obase</code> 命令来分别设定输入和输出的进制系统。需要记住的是一旦你使用了 <code>ibase</code>，之后你输入的任何数字都将被认为是在新定义的进制系统中。</p>
<p>要做十六进制数到十进制数的转换或运算，你可以使用类似下面的命令。请注意大于 9 的十六进制数必须是大写的（A-F）：</p>
<div class="highlight"><pre><span></span><code>echo &#39;ibase=16; A42F&#39; | bc
echo &#39;ibase=16; 5F72+C39B&#39; | bc
</code></pre></div>

<p>若要使得结果是十六进制数，则需要设定 <code>obase</code> ：</p>
<div class="highlight"><pre><span></span><code>echo &#39;obase=16; ibase=16; 5F72+C39B&#39; | bc
</code></pre></div>

<p>下面是一个小技巧。假如你在 shell 中做这些十六进制运算，怎样才能使得输入重新为十进制数呢？答案是使用 <code>ibase</code> 命令，但你必须设定它为在当前进制中与十进制中的 10 等价的值。例如，假如 <code>ibase</code> 被设定为十六进制，你需要输入：</p>
<div class="highlight"><pre><span></span><code>ibase=A
</code></pre></div>

<p>一旦你执行了上面的命令，所有输入的数字都将是十进制的了，接着你便可以输入 <code>obase=10</code> 来重置输出的进制系统。</p>
<h3>结论</h3>
<p>上面所提到的只是 bc 所能做到的基础。它还允许你为某些复杂的运算和程序定义函数、变量和循环结构。你可以在你的系统中将这些程序保存为文本文件以便你在需要的时候使用。你还可以在网上找到更多的资源，它们提供了更多的例子以及额外的函数库。快乐地计算吧！</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>