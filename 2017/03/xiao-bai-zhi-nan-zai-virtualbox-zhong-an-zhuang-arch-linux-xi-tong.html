<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>小白指南：在 VirtualBox 中安装 Arch Linux 系统</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Dimitris Arch Linux 是专门为 i386 和 x86-64 架构的计算机而设计的基于 Linux 内核的操作系统。其特有的软件包管理器使用 pacman 进行完整追踪 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/03/xiao-bai-zhi-nan-zai-virtualbox-zhong-an-zhuang-arch-linux-xi-tong.html" rel="bookmark"
           title="Permalink to 小白指南：在 VirtualBox 中安装 Arch Linux 系统">小白指南：在 VirtualBox 中安装 Arch Linux 系统</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-03-14T11:21:00+01:00">
                Published: Tue 14 March 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Dimitris</p>
<p>Arch Linux 是专门为 i386 和 x86-64 架构的计算机而设计的基于 Linux 内核的操作系统。其特有的软件包管理器使用 <code>pacman</code> 进行完整追踪来将系统应用软件升级到最新版本。 Pacman 是一个用于安装、升级和卸载软件包的管理器。这是一款完全自由而开源的软件，由 Linux 开源社区提供支持。</p>
<p>Arch Linux 也因其丰富的 Wiki 帮助文档而大受推崇。该系统基于二进制的软件包，这些软件包主要是为 i386 的 64 位和 32 位的系统而开发的，同时也为现代的硬件系统提供最佳的性能优化。</p>
<p>你可以参考这篇教程直接在你的本地电脑上安装 Arch Linux 系统，或者你也可以使用你的 Windows 电脑中的 VirtualBox 虚拟机来安装。</p>
<p><img alt="" src="/data/attachment/album/201703/14/112101vih4s4t5bfhsetom.jpg"></p>
<h3>Arch Linux 软件仓库</h3>
<p>要在 VirtualBox 中安装 Arch Linux 系统，你得了解该系统的基础软件仓库。软件仓库用于在安装的过程中获取软件包。对于 Arch Linux 系统来说，有很多可用的软件仓库，可以使用 pacman 工具来进行维护。下面列出的是在 VirtualBox 中安装 Arch Linux 系统时用到的一些基础软件仓库列表：</p>
<ul>
<li><strong>core</strong>  软件仓库包括所有的用于对系统进行基本设置的一些软件包，比如启动 Arch Linux 系统和编译软件包。</li>
<li><strong>extra</strong> 软件仓库包括 core 软件仓库以外的其它软件包以及与桌面环境相关的软件包。</li>
<li><strong>community</strong> 软件仓库包含的是由可信任的　Linux　社区用户维护的软件包，其中的大多数的软件包都会被迁移到核心软件仓库或者额外软件仓库中。</li>
<li><strong>Multilib</strong> 软件仓库包括 32 位的软件包以及用于在 64 位操作系统中安装 32 位应用程序的类库。</li>
<li><strong>testing</strong> 软件仓库包括那些即将成为 core 或 extra 的软件包。</li>
<li><strong>community-testing</strong> 软件仓库主要用于 community 类的测试。</li>
<li><strong>multilib testing</strong>  软件仓库跟 testing 软件仓库类似，但是它包含 Multilib 类。</li>
<li><strong>gnome-unstable</strong>  软件仓库包括最新的 GNOME 桌面环境。</li>
<li><strong>kde-unstable</strong>  软件仓库包括 KDE 最新的发布前软件包。</li>
</ul>
<h3>在 VirtualBox 虚拟机中安装 Arch Linux 系统</h3>
<h4>下载 Arch Linux 系统</h4>
<p>要在 VirtualBox 虚拟机中安装 Arch Linux 系统，你最好使用<a href="https://www.archlinux.org/">官网</a>下载的新版 Arch Linux 系统。你可以选择直接下载或是种子方式下载系统文件，这是一个很安全的下载方式。在安装之前，确保你系统中有 20 GB 的剩余空间和 1 GB 的内存。</p>
<p><img alt="Download Arch Linux" src="/data/attachment/album/201703/14/112113ehrrstnwmnsxnwr8.png"></p>
<h4>在 Oracle VirtualBox 虚拟机管理界面初始化系统安装</h4>
<p>打开 Oracle VirtualBox 虚拟机管理界面，点击<ruby> 新建 <rp>  （ </rp> <rt>  new </rt> <rp>  ） </rp></ruby>，输入你想创建的新系统的名称；这里输入的是 “Arch Linux” 。系统会自动选择 Arch Linux 的版本和类型，这取决于你的系统配置。单击<em>下一步</em>。</p>
<p><img alt="Open VirtualBox" src="/data/attachment/album/201703/14/112113rynd2gaiinqd70hn.png"></p>
<p>为你的新系统分配内存，最好是 1024 MB 。单击<em>下一步</em>，然后点击<ruby> 创建 <rp>  （ </rp> <rt>  create </rt> <rp>  ） </rp></ruby>来创建一个虚拟磁盘。</p>
<p><img alt="Set RAM size" src="/data/attachment/album/201703/14/112114ydtmpd875zt5d5y6.png"></p>
<p>在下一步中，你将会被询问为新系统选择磁盘类型。通常选择<ruby> VirtualBox 磁盘镜像 <rp>  （ </rp> <rt>  VirtualBox Disk Image，VDI </rt> <rp>  ） </rp></ruby>类型。</p>
<p><img alt="Select disk file type" src="/data/attachment/album/201703/14/112114l1gg8ryjzleeiiop.png"></p>
<p>选择<ruby> 动态分配 <rp>  （ </rp> <rt>  dynamically allocated </rt> <rp>  ） </rp></ruby>，单击<em>下一步</em>。</p>
<p><img alt="Allocate disk space dynamically" src="/data/attachment/album/201703/14/112115ajwxkoz0tta6zgzt.png"></p>
<p>分配 20 GB 的硬盘大小及存放位置。</p>
<p><img alt="Choose a hard disk size of 20GB" src="/data/attachment/album/201703/14/112115eq89vz33dgz2jj9d.png"></p>
<p>现在你可以看到 Arch Linux 系统已创建完成了。点击<ruby> 开始 <rp>  （ </rp> <rt>  start </rt> <rp>  ） </rp></ruby>按钮。</p>
<p><img alt="Start the Virtual Machine" src="/data/attachment/album/201703/14/112115dkzubpxb5gkmb0xz.png"></p>
<p>单击<ruby> 浏览 <rp>  （ </rp> <rt>  browser </rt> <rp>  ） </rp></ruby>然后选择你从官网下载的启动磁盘。</p>
<p><img alt="Choose Arch Linux Disk image" src="/data/attachment/album/201703/14/112116dl2o6hh6i2266zo3.png"></p>
<p><img alt="Browse for disk image file" src="/data/attachment/album/201703/14/112116zrptdt77dtj4r74s.png"></p>
<p>点击<ruby> 启动 <rp>  （ </rp> <rt>  start </rt> <rp>  ） </rp></ruby>，然后打开全屏模式。</p>
<p><img alt="Open the full-screen view" src="/data/attachment/album/201703/14/112117braa5buac62a8auu.png"></p>
<p><img alt="Start the Arch Linux VM" src="/data/attachment/album/201703/14/112117r4jlnnjuhhwbnlg3.png"></p>
<h4>在 VirtualBox 中启动并安装 Arch Linux 系统</h4>
<p>你将会看到 Arch Linux 系统第一个打开界面。单击 “Boot Arch Linux (x86_64)”， 它用于 64 位系统，或者单击 “Boot Arch Linux (i686)”，用于 32 位系统。</p>
<p><img alt="Choose to boot Arch Linux" src="/data/attachment/album/201703/14/112118tgeajrjya0z22ll9.png"></p>
<p>当你单击第一个选项后，系统将开始启动。实际上只是进入到一个临时启动状态，即进入到 Arch Linux 的 Live 系统，并以 root 帐号登录了。</p>
<p><img alt="Booting into Arch Linux live version" src="/data/attachment/album/201703/14/112118apid4aaa43oq11aq.png"></p>
<p>输入下面的命令来检查网络连接。</p>
<div class="highlight"><pre><span></span><code>ping google.com
</code></pre></div>

<p>这个单词 ping 表示网路封包搜寻。你将会看到下面的返回信息，表明 Arch Linux 已经连接到外网了。这是执行安装过程中的很关键的一点。（LCTT 译注：或许你 ping 不到那个不存在的网站，你选个存在的吧。）</p>
<p><img alt="Test internet connectivity with ping" src="/data/attachment/album/201703/14/112118urjaph92hespzrty.png"></p>
<p>输入如下命令清屏：</p>
<div class="highlight"><pre><span></span><code>clear
</code></pre></div>

<p>在开始安装之前，你得先为硬盘分区。输入 <code>fdisk -l</code> ，你将会看到当前系统的磁盘分区情况。注意一开始你给 Arch Linux 系统分配的 20 GB 存储空间。</p>
<p><img alt="Partition the harddisk" src="/data/attachment/album/201703/14/112119j5e179pz0f5l5ylh.png"></p>
<h4>硬盘分区</h4>
<p>我们打算把这个 20 GB 的磁盘分成三个分区。第一个主分区为 root 分区，大小为 10 GB 。第二个分区为 swap 分区，大小为内存的两倍，为 2048 MB 。第三个是逻辑分区，大小为 8 GB 。</p>
<p><img alt="Create 3 disk partitions" src="/data/attachment/album/201703/14/112119laa1u8a1hucxsub1.png"></p>
<p>输入下面的命令：</p>
<div class="highlight"><pre><span></span><code>cfdisk
</code></pre></div>

<p>你将看到 <code>gpt</code>、<code>dos</code>、<code>sgi</code> 和 <code>sun</code> 类型，选择 <code>dos</code> 选项，然后按回车。</p>
<p><img alt="Create a partition of type DOS" src="/data/attachment/album/201703/14/112119vw5w73418pw3jztz.png"></p>
<p>这里你将看到主磁盘空间，大小为 20 GB 。在<ruby> 剩余空间 <rp>  （ </rp> <rt>  free space </rt> <rp>  ） </rp></ruby>按回车来修改分区大小，输入 10 GB 。</p>
<p><img alt="Choose 10GB partition size" src="/data/attachment/album/201703/14/112120wqk4hv8z08hbkq7c.png"></p>
<p>按回车并单击<ruby> 主分区 <rp>  （ </rp> <rt>  primary </rt> <rp>  ） </rp></ruby> 。</p>
<p><img alt="Select primary" src="/data/attachment/album/201703/14/112120gindzk5y9j11o5zo.png"></p>
<p>在可引导选项按回车选择<ruby> 可引导 <rp>  （ </rp> <rt>  bootable </rt> <rp>  ） </rp></ruby>类型。</p>
<p><img alt="Make partition bootable." src="/data/attachment/album/201703/14/112120ql6gjf9jy2y3j8tv.png"></p>
<p>在<ruby> 写入 <rp>  （ </rp> <rt>  write </rt> <rp>  ） </rp></ruby>选项按回车键将分区信息写入磁盘。</p>
<p><img alt="Write partition to disk" src="/data/attachment/album/201703/14/112120vaxpqfjowtoddpjx.png"></p>
<p>之后输入 <code>yes</code> 来应用更改。</p>
<p><img alt="Confirm changes" src="/data/attachment/album/201703/14/112121a7lzo47uxtta4vyh.png"></p>
<p>现在已经创建完成 10 GB 分区。单击<ruby> 剩余空间 <rp>  （ </rp> <rt>  free space </rt> <rp>  ） </rp></ruby>，输入分区大小 2048 M 。</p>
<p><img alt="Create the 2GB swap partition" src="/data/attachment/album/201703/14/112121i2xw5v7ysvykewh7.png"></p>
<p>以同样的方式创建逻辑分区。在<ruby> 退出 <rp>  （ </rp> <rt>  quit </rt> <rp>  ） </rp></ruby>选项按回车键，然后输入下面的命令来清屏：</p>
<div class="highlight"><pre><span></span><code>clear
</code></pre></div>

<p><img alt="quit cfdisk" src="/data/attachment/album/201703/14/112121bs3tiaacsa8yhtih.png"></p>
<p>输入下面的命令来格式化新建的分区：</p>
<div class="highlight"><pre><span></span><code>mkfs.ext4 /dev/sda1
</code></pre></div>

<p>这里的 <code>sda1</code> 是分区名。使用同样的命令来格式化第二个分区 <code>sda3</code> :</p>
<div class="highlight"><pre><span></span><code>mkfs.ext4 /dev/sda3
</code></pre></div>

<p>格式化 swap 分区：</p>
<div class="highlight"><pre><span></span><code>mkswap /dev/sda2
</code></pre></div>

<p><img alt="Format the swap partition with mkswap" src="/data/attachment/album/201703/14/112122s3d7o9n943sqsqon.png"></p>
<p>使用下面的命令来激活 swap 分区：</p>
<div class="highlight"><pre><span></span><code>swapon /dev/sda2
</code></pre></div>

<p>输入 clear 命令清屏：</p>
<div class="highlight"><pre><span></span><code>clear
</code></pre></div>

<p><img alt="Enable swap" src="/data/attachment/album/201703/14/112122a67b676k98h7676h.png"></p>
<p>输入下面的命令来挂载主分区以开始系统安装：</p>
<div class="highlight"><pre><span></span><code>mount /dev/sda1 /mnt
</code></pre></div>

<p><img alt="Mount the partitions" src="/data/attachment/album/201703/14/112122ele0ppeexsbo5e5b.png"></p>
<h4>引导 Arch Linux 启动</h4>
<p>输入下面的命令来引导系统启动：</p>
<div class="highlight"><pre><span></span><code>pacstrap /mnt base base-devel
</code></pre></div>

<p>可以看到系统正在同步数据包。</p>
<p><img alt="Bootstrap Arch Linux" src="/data/attachment/album/201703/14/112123zl1qy633za6qf4uf.png"></p>
<p>安装将会开始，需要几分钟。</p>
<p><img alt="Arch Linux installation has been started" src="/data/attachment/album/201703/14/112123qanu53o3gqgrq5vu.png"></p>
<p>系统基本软件安装完成后，输入下面的命令来创建 fstab 文件：</p>
<div class="highlight"><pre><span></span><code>genfstab /mnt&gt;&gt; /mnt/etc/fstab
</code></pre></div>

<p><img alt="Generating /etc/fstab" src="/data/attachment/album/201703/14/112123k3yl4luy99l8797z.png"></p>
<p>配置区域、时间和 root 帐号密码。</p>
<p>输入下面的命令来更改系统的根目录为 Arch Linux 的安装目录：</p>
<div class="highlight"><pre><span></span><code>arch-chroot /mnt /bin/bash
</code></pre></div>

<p>现在来更改语言配置：</p>
<div class="highlight"><pre><span></span><code>nano /etc/locale.gen
</code></pre></div>

<p><img alt="Set language in Arch Linux" src="/data/attachment/album/201703/14/112124k3otqjl4ot3tkkwc.png"></p>
<p>通过删除 <code>#</code> 以及按 <code>control + x</code> ，按 <code>y</code> ，然后再按回车来选择下面的语言配置：</p>
<p><img alt="select language" src="/data/attachment/album/201703/14/112124pi4klm4x5k4i33l6.png"></p>
<p>输入下面的命令来激活它：</p>
<div class="highlight"><pre><span></span><code>locale-gen
</code></pre></div>

<p>按回车。</p>
<p><img alt="Generate the locales in Arch Linux" src="/data/attachment/album/201703/14/112124yhzse8gzela1kzsh.png"></p>
<p>使用下面的命令来创建 <code>/etc/locale.conf</code> 配置文件：</p>
<div class="highlight"><pre><span></span><code>nano /etc/locale.conf
</code></pre></div>

<p>然后按回车。现在你就可以在配置文件中输入下面一行内容来为系统添加语言：</p>
<div class="highlight"><pre><span></span><code>LANG=en_US.UTF-8
</code></pre></div>

<p>然后按 <code>control + x</code> ，按 <code>y</code> ，再按回车。</p>
<p><img alt="Set default language" src="/data/attachment/album/201703/14/112124aaidwdd5awgaodwa.png"></p>
<p>输入下面的命令来同步时区：</p>
<div class="highlight"><pre><span></span><code>ls /usr/share/zoneinfo
</code></pre></div>

<p>下面你将看到整个世界的时区列表。</p>
<p><img alt="Set System language default" src="/data/attachment/album/201703/14/112125vs06iptlfzfrld46.png"></p>
<p>输入下面的命令来选择你所在的时区：</p>
<div class="highlight"><pre><span></span><code>ln –s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 
</code></pre></div>

<p>或者你可以从下面的列表中选择其它名称。</p>
<p><img alt="" src="/data/attachment/album/201703/14/112125l8rrsgmjp8h2hskx.png"></p>
<p>使用下面的命令来设置标准时间：</p>
<div class="highlight"><pre><span></span><code>hwclock --systohc --utc
</code></pre></div>

<p>硬件时钟已同步。</p>
<p><img alt="Set time" src="/data/attachment/album/201703/14/112125ktvuko2usu1ofv3o.png"></p>
<p>设置 root 帐号密码：</p>
<div class="highlight"><pre><span></span><code>passwd
</code></pre></div>

<p>按回车。 然而输入你想设置的密码，按回车确认。</p>
<p><img alt="Set the root password" src="/data/attachment/album/201703/14/112126p1a6mi2ii5f2zmmu.png"></p>
<h4>设置主机名和网络</h4>
<p>使用下面的命令来设置主机名：</p>
<div class="highlight"><pre><span></span><code>nano /etc/hostname
</code></pre></div>

<p>然后按回车。输入你想设置的主机名称，按 <code>control + x</code> ，按 <code>y</code> ，再按回车 。</p>
<p><img alt="Set the hostname" src="/data/attachment/album/201703/14/112126ryx4qxzxmqntj1sn.png"></p>
<p>启用 dhcpcd ：</p>
<div class="highlight"><pre><span></span><code>systemctl enable dhcpcd
</code></pre></div>

<p>这样在下一次系统启动时， dhcpcd 将会自动启动，并自动获取一个 IP 地址：</p>
<p><img alt="Enable dhcpcd" src="/data/attachment/album/201703/14/112126bnlsgntipiunzukr.png"></p>
<h4>安装引导加载程序</h4>
<p>最后一步，输入以下命令来初始化 grub 安装。输入以下命令：</p>
<div class="highlight"><pre><span></span><code>pacman –S grub os-rober
</code></pre></div>

<p>然后按 <code>y</code> ，将会下载相关程序。</p>
<p><img alt="Configure grub" src="/data/attachment/album/201703/14/112126vxsiq0zkxhwk406r.png"></p>
<p>使用下面的命令来将启动加载程序安装到硬盘上：</p>
<div class="highlight"><pre><span></span><code>grub-install /dev/sda
</code></pre></div>

<p>然后进行配置：</p>
<div class="highlight"><pre><span></span><code>grub-mkconfig -o /boot/grub/grub.cfg
</code></pre></div>

<p><img alt="Install and configure grub boot loader" src="/data/attachment/album/201703/14/112127ujnnmnqnkez4an00.png"></p>
<p>最后重启系统：</p>
<div class="highlight"><pre><span></span><code>reboot
</code></pre></div>

<p>然后按回车 。</p>
<p><img alt="Reboot the system" src="/data/attachment/album/201703/14/112127w9iq9b9kprujuuuu.png"></p>
<h4>启动进入到已安装完成的 Arch Linux 系统</h4>
<p>选择“启动已存在的操作系统”选项来启动 Virtual Box 虚拟机中的 Arch Linux 系统。</p>
<p><img alt="Boot Arch Linux" src="/data/attachment/album/201703/14/112128d1q5e5zlm92q7q5l.png"></p>
<p>使用 root 帐号和密码登录后，你将进入全新安装好的 Arch Linux 操作系统。</p>
<p><img alt="Arch Linux installed successfully" src="/data/attachment/album/201703/14/112128ottjltp8ttzt9r1h.png"></p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>