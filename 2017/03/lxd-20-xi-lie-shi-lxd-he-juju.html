<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>LXD 2.0 系列（十）：LXD 和 Juju</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Stéphane Graber 这是 LXD 2.0 系列介绍文章的第十篇。 LXD 入门 安装与配置 你的第一个 LXD 容器 资源控制 镜像管理 远程主机及容器迁 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li class="active"><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/03/lxd-20-xi-lie-shi-lxd-he-juju.html" rel="bookmark"
           title="Permalink to LXD 2.0 系列（十）：LXD 和 Juju">LXD 2.0 系列（十）：LXD 和 Juju</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-03-07T06:04:00+01:00">
                Published: Tue 07 March 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/rong-qi-yu-yun">容器与云</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Stéphane Graber</p>
<p>这是 LXD 2.0 系列介绍文章的第十篇。</p>
<ol>
<li><a href="/article-7618-1.html">LXD 入门</a></li>
<li><a href="/article-7687-1.html">安装与配置</a></li>
<li><a href="/article-7706-1.html">你的第一个 LXD 容器</a></li>
<li><a href="/article-8072-1.html">资源控制</a></li>
<li><a href="/article-8107-1.html">镜像管理</a></li>
<li><a href="/article-8169-1.html">远程主机及容器迁移</a></li>
<li><a href="/article-8235-1.html">LXD 中的 Docker</a></li>
<li><a href="/article-8257-1.html">LXD 中的 LXD</a></li>
<li><a href="/article-8263-1.html">实时迁移</a></li>
<li><a href="/article-8273-1.html">LXD 和 Juju</a></li>
<li><a href="/article-8274-1.html">LXD 和 OpenStack</a></li>
<li><a href="/article-8282-1.html">调试，及给 LXD 做贡献</a></li>
</ol>
<p><img alt="" src="/data/attachment/album/201703/07/060310l9zd4y4j4ud4q196.jpg"></p>
<h3>介绍</h3>
<p>Juju 是 Canonical 的服务建模和部署工具。 它支持非常广泛的云服务提供商，使您能够轻松地在任何云上部署任何您想要的服务。</p>
<p>此外，Juju 2.0 还支持 LXD，既适用于本地部署，也适合开发，并且可以在云实例或物理机上共同协作。</p>
<p>本篇文章将关注本地使用，通过一个没有任何Juju经验的LXD用户来体验。</p>
<h3>要求</h3>
<p>本篇文章假设你已经安装了 LXD 2.0 并且配置完毕（看前面的文章），并且是在 Ubuntu 16.04 LTS 上运行的。</p>
<h3>设置 Juju</h3>
<p>第一件事是在 Ubuntu 16.04 上安装 Juju 2.0。这个很简单：</p>
<div class="highlight"><pre><span></span><code><span class="nx">stgraber</span><span class="err">@</span><span class="nx">dakara</span><span class="p">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="nx">sudo</span><span class="w"> </span><span class="nx">apt</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">juju</span>
<span class="nx">Reading</span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">lists</span><span class="o">...</span><span class="w"> </span><span class="nx">Done</span>
<span class="nx">Building</span><span class="w"> </span><span class="nx">dependency</span><span class="w"> </span><span class="nx">tree</span><span class="w"> </span>
<span class="nx">Reading</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="nx">information</span><span class="o">...</span><span class="w"> </span><span class="nx">Done</span>
<span class="nx">The</span><span class="w"> </span><span class="nx">following</span><span class="w"> </span><span class="nx">additional</span><span class="w"> </span><span class="nx">packages</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">installed</span><span class="p">:</span>
<span class="w"> </span><span class="nx">juju</span><span class="o">-</span><span class="m m-Double">2.0</span>
<span class="nx">Suggested</span><span class="w"> </span><span class="nx">packages</span><span class="p">:</span>
<span class="w"> </span><span class="nx">juju</span><span class="o">-</span><span class="nx">core</span>
<span class="nx">The</span><span class="w"> </span><span class="nx">following</span><span class="w"> </span><span class="nx">NEW</span><span class="w"> </span><span class="nx">packages</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">installed</span><span class="p">:</span>
<span class="w"> </span><span class="nx">juju</span><span class="w"> </span><span class="nx">juju</span><span class="o">-</span><span class="m m-Double">2.0</span>
<span class="mi">0</span><span class="w"> </span><span class="nx">upgraded</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nx">newly</span><span class="w"> </span><span class="nx">installed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">remove</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">upgraded</span><span class="p">.</span>
<span class="nx">Need</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="m m-Double">39.7</span><span class="w"> </span><span class="nx">MB</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">archives</span><span class="p">.</span>
<span class="nx">After</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">operation</span><span class="p">,</span><span class="w"> </span><span class="mi">269</span><span class="w"> </span><span class="nx">MB</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">additional</span><span class="w"> </span><span class="nx">disk</span><span class="w"> </span><span class="nx">space</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">used</span><span class="p">.</span>
<span class="nx">Do</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">want</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="k">continue</span><span class="p">?</span><span class="w"> </span><span class="p">[</span><span class="nx">Y</span><span class="o">/</span><span class="nx">n</span><span class="p">]</span><span class="w"> </span>
<span class="nx">Get</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="nx">http</span><span class="p">:</span><span class="c1">//us.archive.ubuntu.com/ubuntu xenial-updates/main amd64 juju-2.0 amd64 2.0~beta7-0ubuntu1.16.04.1 [39.6 MB]</span>
<span class="nx">Get</span><span class="p">:</span><span class="mi">2</span><span class="w"> </span><span class="nx">http</span><span class="p">:</span><span class="c1">//us.archive.ubuntu.com/ubuntu xenial-updates/main amd64 juju all 2.0~beta7-0ubuntu1.16.04.1 [9,556 B]</span>
<span class="nx">Fetched</span><span class="w"> </span><span class="m m-Double">39.7</span><span class="w"> </span><span class="nx">MB</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="nx">s</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">53.4</span><span class="w"> </span><span class="nx">MB</span><span class="o">/</span><span class="nx">s</span><span class="p">)</span>
<span class="nx">Selecting</span><span class="w"> </span><span class="nx">previously</span><span class="w"> </span><span class="nx">unselected</span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">juju</span><span class="o">-</span><span class="m m-Double">2.0</span><span class="p">.</span>
<span class="p">(</span><span class="nx">Reading</span><span class="w"> </span><span class="nx">database</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="mi">255132</span><span class="w"> </span><span class="nx">files</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">directories</span><span class="w"> </span><span class="nx">currently</span><span class="w"> </span><span class="nx">installed</span><span class="p">.)</span>
<span class="nx">Preparing</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">unpack</span><span class="w"> </span><span class="o">.../</span><span class="nx">juju</span><span class="o">-</span><span class="m m-Double">2.0</span><span class="nx">_2</span><span class="m m-Double">.0</span><span class="o">~</span><span class="nx">beta7</span><span class="o">-</span><span class="mi">0</span><span class="nx">ubuntu1</span><span class="m m-Double">.16.04.1</span><span class="nx">_amd64</span><span class="p">.</span><span class="nx">deb</span><span class="w"> </span><span class="o">...</span>
<span class="nx">Unpacking</span><span class="w"> </span><span class="nx">juju</span><span class="o">-</span><span class="m m-Double">2.0</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">2.0</span><span class="o">~</span><span class="nx">beta7</span><span class="o">-</span><span class="mi">0</span><span class="nx">ubuntu1</span><span class="m m-Double">.16.04.1</span><span class="p">)</span><span class="w"> </span><span class="o">...</span>
<span class="nx">Selecting</span><span class="w"> </span><span class="nx">previously</span><span class="w"> </span><span class="nx">unselected</span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">juju</span><span class="p">.</span>
<span class="nx">Preparing</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">unpack</span><span class="w"> </span><span class="o">.../</span><span class="nx">juju_2</span><span class="m m-Double">.0</span><span class="o">~</span><span class="nx">beta7</span><span class="o">-</span><span class="mi">0</span><span class="nx">ubuntu1</span><span class="m m-Double">.16.04.1</span><span class="nx">_all</span><span class="p">.</span><span class="nx">deb</span><span class="w"> </span><span class="o">...</span>
<span class="nx">Unpacking</span><span class="w"> </span><span class="nx">juju</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">2.0</span><span class="o">~</span><span class="nx">beta7</span><span class="o">-</span><span class="mi">0</span><span class="nx">ubuntu1</span><span class="m m-Double">.16.04.1</span><span class="p">)</span><span class="w"> </span><span class="o">...</span>
<span class="nx">Processing</span><span class="w"> </span><span class="nx">triggers</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">man</span><span class="o">-</span><span class="nx">db</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">2.7.5</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">...</span>
<span class="nx">Setting</span><span class="w"> </span><span class="nx">up</span><span class="w"> </span><span class="nx">juju</span><span class="o">-</span><span class="m m-Double">2.0</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">2.0</span><span class="o">~</span><span class="nx">beta7</span><span class="o">-</span><span class="mi">0</span><span class="nx">ubuntu1</span><span class="m m-Double">.16.04.1</span><span class="p">)</span><span class="w"> </span><span class="o">...</span>
<span class="nx">Setting</span><span class="w"> </span><span class="nx">up</span><span class="w"> </span><span class="nx">juju</span><span class="w"> </span><span class="p">(</span><span class="m m-Double">2.0</span><span class="o">~</span><span class="nx">beta7</span><span class="o">-</span><span class="mi">0</span><span class="nx">ubuntu1</span><span class="m m-Double">.16.04.1</span><span class="p">)</span><span class="w"> </span><span class="o">...</span>
</code></pre></div>

<p>安装完成后，我们可以使用 LXD 启动一个新的“控制器”。这意味着 Juju 不会修改你主机上的任何东西，它会在 LXD 容器中安装它的管理服务。</p>
<p>现在我们创建一个“test”控制器：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="err">@</span><span class="n">dakara</span><span class="p">:</span><span class="o">~$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">bootstrap</span><span class="w"> </span><span class="n">localhost</span><span class="w"> </span><span class="n">test</span>
<span class="n">Creating</span><span class="w"> </span><span class="n">Juju</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="s2">&quot;local.test&quot;</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">localhost</span><span class="o">/</span><span class="n">localhost</span>
<span class="n">Bootstrapping</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span>
<span class="n">Starting</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">controller</span>
<span class="n">Launching</span><span class="w"> </span><span class="n">instance</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">juju</span><span class="o">-</span><span class="mi">745</span><span class="n">d1be3</span><span class="o">-</span><span class="n">e93d</span><span class="o">-</span><span class="mi">41</span><span class="n">a2</span><span class="o">-</span><span class="mi">80</span><span class="n">d4</span><span class="o">-</span><span class="n">fbe8714230dd</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">0</span>
<span class="n">Installing</span><span class="w"> </span><span class="n">Juju</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">bootstrap</span><span class="w"> </span><span class="n">instance</span>
<span class="n">Preparing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Juju</span><span class="w"> </span><span class="n">GUI</span><span class="w"> </span><span class="mf">2.1</span><span class="o">.</span><span class="mi">2</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="n">installation</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">address</span>
<span class="n">Attempting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">10.178</span><span class="o">.</span><span class="mf">150.72</span><span class="p">:</span><span class="mi">22</span>
<span class="n">Logging</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">cloud</span><span class="o">-</span><span class="n">init</span><span class="o">-</span><span class="n">output</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="k">remote</span><span class="w"> </span><span class="n">host</span>
<span class="n">Running</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">update</span>
<span class="n">Running</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">upgrade</span>
<span class="n">Installing</span><span class="w"> </span><span class="n">package</span><span class="p">:</span><span class="w"> </span><span class="n">curl</span>
<span class="n">Installing</span><span class="w"> </span><span class="n">package</span><span class="p">:</span><span class="w"> </span><span class="n">cpu</span><span class="o">-</span><span class="n">checker</span>
<span class="n">Installing</span><span class="w"> </span><span class="n">package</span><span class="p">:</span><span class="w"> </span><span class="n">bridge</span><span class="o">-</span><span class="n">utils</span>
<span class="n">Installing</span><span class="w"> </span><span class="n">package</span><span class="p">:</span><span class="w"> </span><span class="n">cloud</span><span class="o">-</span><span class="n">utils</span>
<span class="n">Installing</span><span class="w"> </span><span class="n">package</span><span class="p">:</span><span class="w"> </span><span class="n">cloud</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">utils</span>
<span class="n">Installing</span><span class="w"> </span><span class="n">package</span><span class="p">:</span><span class="w"> </span><span class="n">tmux</span>
<span class="n">Fetching</span><span class="w"> </span><span class="n">tools</span><span class="p">:</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">sSfw</span><span class="w"> </span><span class="s1">&#39;tools from %{url_effective} downloaded: HTTP %{http_code}; time %{time_total}s; size %{size_download} bytes; speed %{speed_download} bytes/s &#39;</span><span class="w"> </span><span class="o">--</span><span class="n">retry</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="o">$</span><span class="n">bin</span><span class="o">/</span><span class="n">tools</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span><span class="w"> </span><span class="o">&lt;</span><span class="p">[</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">streams</span><span class="o">.</span><span class="n">canonical</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">juju</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">agent</span><span class="o">/</span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="o">/</span><span class="n">juju</span><span class="o">-</span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="o">-</span><span class="n">xenial</span><span class="o">-</span><span class="n">amd64</span><span class="o">.</span><span class="n">tgz</span><span class="p">]</span><span class="o">&gt;</span>
<span class="n">Bootstrapping</span><span class="w"> </span><span class="n">Juju</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">agent</span>
<span class="n">Starting</span><span class="w"> </span><span class="n">Juju</span><span class="w"> </span><span class="n">machine</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="p">(</span><span class="n">jujud</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Bootstrap</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">installed</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">become</span><span class="w"> </span><span class="n">available</span><span class="p">:</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="p">(</span><span class="n">upgrade</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">progress</span><span class="p">)</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">become</span><span class="w"> </span><span class="n">available</span><span class="p">:</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="p">(</span><span class="n">upgrade</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">progress</span><span class="p">)</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">become</span><span class="w"> </span><span class="n">available</span><span class="p">:</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="p">(</span><span class="n">upgrade</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">progress</span><span class="p">)</span>
<span class="n">Bootstrap</span><span class="w"> </span><span class="n">complete</span><span class="p">,</span><span class="w"> </span><span class="n">local</span><span class="o">.</span><span class="n">test</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">available</span><span class="o">.</span>
</code></pre></div>

<p>这会花费一点时间，这时你可以看到一个正在运行的一个新的 LXD 容器：</p>
<div class="highlight"><pre><span></span><code><span class="c">stgraber@dakara:~$ lxc list juju</span><span class="nb">-</span>
<span class="nb">+-----------------------------------------------------+---------+----------------------+------+------------+-----------+</span>
<span class="c">|                         NAME                        |  STATE  |          IPV4        | IPV6 |    TYPE    | SNAPSHOTS |</span>
<span class="nb">+-----------------------------------------------------+---------+----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">745d1be3</span><span class="nb">-</span><span class="c">e93d</span><span class="nb">-</span><span class="c">41a2</span><span class="nb">-</span><span class="c">80d4</span><span class="nb">-</span><span class="c">fbe8714230dd</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">0 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">72 (eth0) |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+----------------------+------+------------+-----------+</span>
</code></pre></div>

<p>在 Juju 这边，你可以确认它是有响应的，并且还没有服务运行：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">status</span>
<span class="o">[</span><span class="n">Services</span><span class="o">]</span><span class="w"> </span>
<span class="n">NAME</span><span class="w"> </span><span class="n">STATUS</span><span class="w"> </span><span class="n">EXPOSED</span><span class="w"> </span><span class="n">CHARM</span><span class="w"> </span>

<span class="o">[</span><span class="n">Units</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="n">WORKLOAD</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">JUJU</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">VERSION</span><span class="w"> </span><span class="n">MACHINE</span><span class="w"> </span><span class="n">PORTS</span><span class="w"> </span><span class="k">PUBLIC</span><span class="o">-</span><span class="n">ADDRESS</span><span class="w"> </span><span class="n">MESSAGE</span><span class="w"> </span>

<span class="o">[</span><span class="n">Machines</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="k">STATE</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="n">INS</span><span class="o">-</span><span class="n">ID</span><span class="w"> </span><span class="n">SERIES</span><span class="w"> </span><span class="n">AZ</span>
</code></pre></div>

<p>你也可以在浏览器中访问 Juju 的 GUI 界面：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">gui</span>
<span class="n">Opening</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Juju</span><span class="w"> </span><span class="n">GUI</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">browser</span><span class="p">.</span>
<span class="k">If</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">open</span><span class="p">,</span><span class="w"> </span><span class="k">open</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="nl">URL</span><span class="p">:</span>
<span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="mf">10.178.150.72</span><span class="err">:</span><span class="mi">17070</span><span class="o">/</span><span class="n">gui</span><span class="o">/</span><span class="mi">97</span><span class="n">fa390d</span><span class="o">-</span><span class="mi">96</span><span class="n">ad</span><span class="o">-</span><span class="mi">44</span><span class="n">df</span><span class="o">-</span><span class="mi">8</span><span class="n">b59</span><span class="o">-</span><span class="n">e15fdcfc636b</span><span class="o">/</span>
</code></pre></div>

<p><img alt="Juju web UI" src="/data/attachment/album/201703/07/060453zvvfe8qf1bk8vb8f.png"></p>
<p>不过我更倾向使用命令行，因此我会在接下来使用。</p>
<h3>部署一个 minecraft 服务</h3>
<p>让我们先来一个简单的，部署在一个容器中使用一个 Juju 单元的服务。</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">deploy</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="n">trusty</span><span class="o">/</span><span class="n">minecraft</span>
<span class="n">Added</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="ss">&quot;cs:trusty/minecraft-3&quot;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">model</span><span class="p">.</span>
<span class="n">Deploying</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="ss">&quot;cs:trusty/minecraft-3&quot;</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="ss">&quot;trusty&quot;</span><span class="p">.</span>
</code></pre></div>

<p>命令返回会很快，然而这不意味着服务已经启动并运行了。你应该使用 <code>juju status</code> 来查看：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">status</span>
<span class="o">[</span><span class="n">Services</span><span class="o">]</span><span class="w"> </span>
<span class="n">NAME</span><span class="w"> </span><span class="n">STATUS</span><span class="w"> </span><span class="n">EXPOSED</span><span class="w"> </span><span class="n">CHARM</span><span class="w"> </span>
<span class="n">minecraft</span><span class="w"> </span><span class="n">maintenance</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="n">trusty</span><span class="o">/</span><span class="n">minecraft</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span>

<span class="o">[</span><span class="n">Units</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="n">WORKLOAD</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">JUJU</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">VERSION</span><span class="w"> </span><span class="n">MACHINE</span><span class="w"> </span><span class="n">PORTS</span><span class="w"> </span><span class="k">PUBLIC</span><span class="o">-</span><span class="n">ADDRESS</span><span class="w"> </span><span class="n">MESSAGE</span><span class="w"> </span>
<span class="n">minecraft</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">maintenance</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mf">10.178.150.74</span><span class="w"> </span><span class="p">(</span><span class="n">install</span><span class="p">)</span><span class="w"> </span><span class="n">Installing</span><span class="w"> </span><span class="n">java</span><span class="w"> </span>

<span class="o">[</span><span class="n">Machines</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="k">STATE</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="n">INS</span><span class="o">-</span><span class="n">ID</span><span class="w"> </span><span class="n">SERIES</span><span class="w"> </span><span class="n">AZ</span><span class="w"> </span>
<span class="mi">1</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="mf">10.178.150.74</span><span class="w"> </span><span class="n">juju</span><span class="o">-</span><span class="mi">97</span><span class="n">fa390d</span><span class="o">-</span><span class="mi">96</span><span class="n">ad</span><span class="o">-</span><span class="mi">44</span><span class="n">df</span><span class="o">-</span><span class="mi">8</span><span class="n">b59</span><span class="o">-</span><span class="n">e15fdcfc636b</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="n">trusty</span><span class="w"> </span>
</code></pre></div>

<p>我们可以看到它正在忙于在刚刚创建的 LXD 容器中安装 java。</p>
<div class="highlight"><pre><span></span><code><span class="c">stgraber@dakara:~$ lxc list juju</span><span class="nb">-</span>
<span class="nb">+-----------------------------------------------------+---------+----------------------+------+------------+-----------+</span>
<span class="c">|                         NAME                        |  STATE  |          IPV4        | IPV6 |    TYPE    | SNAPSHOTS |</span>
<span class="nb">+-----------------------------------------------------+---------+----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">745d1be3</span><span class="nb">-</span><span class="c">e93d</span><span class="nb">-</span><span class="c">41a2</span><span class="nb">-</span><span class="c">80d4</span><span class="nb">-</span><span class="c">fbe8714230dd</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">0 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">72 (eth0) |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">97fa390d</span><span class="nb">-</span><span class="c">96ad</span><span class="nb">-</span><span class="c">44df</span><span class="nb">-</span><span class="c">8b59</span><span class="nb">-</span><span class="c">e15fdcfc636b</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">1 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">74 (eth0) |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+----------------------+------+------------+-----------+</span>
</code></pre></div>

<p>过一会之后，如我们所见服务就部署完毕了：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">status</span>
<span class="o">[</span><span class="n">Services</span><span class="o">]</span><span class="w"> </span>
<span class="n">NAME</span><span class="w"> </span><span class="n">STATUS</span><span class="w"> </span><span class="n">EXPOSED</span><span class="w"> </span><span class="n">CHARM</span><span class="w"> </span>
<span class="n">minecraft</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="n">trusty</span><span class="o">/</span><span class="n">minecraft</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span>

<span class="o">[</span><span class="n">Units</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="n">WORKLOAD</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">JUJU</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">VERSION</span><span class="w"> </span><span class="n">MACHINE</span><span class="w"> </span><span class="n">PORTS</span><span class="w"> </span><span class="k">PUBLIC</span><span class="o">-</span><span class="n">ADDRESS</span><span class="w"> </span><span class="n">MESSAGE</span><span class="w"> </span>
<span class="n">minecraft</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">25565</span><span class="o">/</span><span class="n">tcp</span><span class="w"> </span><span class="mf">10.178.150.74</span><span class="w"> </span><span class="n">Ready</span><span class="w"> </span>

<span class="o">[</span><span class="n">Machines</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="k">STATE</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="n">INS</span><span class="o">-</span><span class="n">ID</span><span class="w"> </span><span class="n">SERIES</span><span class="w"> </span><span class="n">AZ</span><span class="w"> </span>
<span class="mi">1</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="mf">10.178.150.74</span><span class="w"> </span><span class="n">juju</span><span class="o">-</span><span class="mi">97</span><span class="n">fa390d</span><span class="o">-</span><span class="mi">96</span><span class="n">ad</span><span class="o">-</span><span class="mi">44</span><span class="n">df</span><span class="o">-</span><span class="mi">8</span><span class="n">b59</span><span class="o">-</span><span class="n">e15fdcfc636b</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="n">trusty</span>
</code></pre></div>

<p>这时你就可以启动你的 Minecraft 客户端了，将其指向 10.178.150.74，端口是 25565。现在可以在新的 minecraft 服务器上玩了！</p>
<p>当你不再需要它，只需运行：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="k">destroy</span><span class="o">-</span><span class="n">service</span><span class="w"> </span><span class="n">minecraft</span>
</code></pre></div>

<p>只要等待几秒就好了。</p>
<h3>部署一个更复杂的 web 应用</h3>
<p>Juju 的主要工作是建模复杂的服务，并以可扩展的方式部署它们。</p>
<p>为了更好地展示，让我们部署一个 Juju “组合”。 这个组合是由网站，API，数据库，静态 Web 服务器和反向代理组成的基本 Web 服务。</p>
<p>所以这将扩展到 4 个互联的 LXD 容器。</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">deploy</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">charmers</span><span class="o">/</span><span class="n">bundle</span><span class="o">/</span><span class="n">web</span><span class="o">-</span><span class="n">infrastructure</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">a</span><span class="o">-</span><span class="n">box</span>
<span class="n">added</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="mi">1</span>
<span class="n">service</span><span class="w"> </span><span class="n">api</span><span class="w"> </span><span class="n">deployed</span><span class="w"> </span><span class="p">(</span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="ss">&quot;trusty&quot;</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bundle</span><span class="p">)</span>
<span class="n">annotations</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">api</span>
<span class="n">added</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="n">trusty</span><span class="o">/</span><span class="n">mongodb</span><span class="o">-</span><span class="mi">3</span>
<span class="n">service</span><span class="w"> </span><span class="n">mongodb</span><span class="w"> </span><span class="n">deployed</span><span class="w"> </span><span class="p">(</span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="n">trusty</span><span class="o">/</span><span class="n">mongodb</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="ss">&quot;trusty&quot;</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bundle</span><span class="p">)</span>
<span class="n">annotations</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">mongodb</span>
<span class="n">added</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">4</span>
<span class="n">service</span><span class="w"> </span><span class="n">nginx</span><span class="w"> </span><span class="n">deployed</span><span class="w"> </span><span class="p">(</span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">4</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="ss">&quot;trusty&quot;</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bundle</span><span class="p">)</span>
<span class="n">annotations</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">nginx</span>
<span class="n">added</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="mi">3</span>
<span class="n">service</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="w"> </span><span class="n">deployed</span><span class="w"> </span><span class="p">(</span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="ss">&quot;trusty&quot;</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bundle</span><span class="p">)</span>
<span class="n">annotations</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span>
<span class="n">added</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">website</span><span class="o">-</span><span class="mi">3</span>
<span class="n">service</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="n">deployed</span><span class="w"> </span><span class="p">(</span><span class="n">charm</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">website</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="ss">&quot;trusty&quot;</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bundle</span><span class="p">)</span>
<span class="n">annotations</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">website</span>
<span class="n">related</span><span class="w"> </span><span class="nl">mongodb</span><span class="p">:</span><span class="k">database</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nl">api</span><span class="p">:</span><span class="n">mongodb</span>
<span class="n">related</span><span class="w"> </span><span class="nl">website</span><span class="p">:</span><span class="n">nginx</span><span class="o">-</span><span class="n">engine</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nl">nginx</span><span class="p">:</span><span class="n">web</span><span class="o">-</span><span class="n">engine</span>
<span class="n">related</span><span class="w"> </span><span class="nl">api</span><span class="p">:</span><span class="n">website</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="nl">proxy</span><span class="p">:</span><span class="n">website</span>
<span class="n">related</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="nl">proxy</span><span class="p">:</span><span class="n">website</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nl">website</span><span class="p">:</span><span class="n">website</span>
<span class="n">added</span><span class="w"> </span><span class="n">api</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">machine</span>
<span class="n">added</span><span class="w"> </span><span class="n">mongodb</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">machine</span>
<span class="n">added</span><span class="w"> </span><span class="n">nginx</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">machine</span>
<span class="n">added</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">machine</span>
<span class="n">deployment</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">bundle</span><span class="w"> </span><span class="ss">&quot;cs:~charmers/bundle/web-infrastructure-in-a-box-10&quot;</span><span class="w"> </span><span class="n">completed</span>
</code></pre></div>

<p>几秒后，你会看到 LXD 容器在运行了：</p>
<div class="highlight"><pre><span></span><code><span class="c">stgraber@dakara:~$ lxc list juju</span><span class="nb">-</span>
<span class="nb">+-----------------------------------------------------+---------+-----------------------+------+------------+-----------+</span>
<span class="c">|                         NAME                        |  STATE  |           IPV4        | IPV6 |    TYPE    | SNAPSHOTS |</span>
<span class="nb">+-----------------------------------------------------+---------+-----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">745d1be3</span><span class="nb">-</span><span class="c">e93d</span><span class="nb">-</span><span class="c">41a2</span><span class="nb">-</span><span class="c">80d4</span><span class="nb">-</span><span class="c">fbe8714230dd</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">0 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">72 (eth0)  |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+-----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">97fa390d</span><span class="nb">-</span><span class="c">96ad</span><span class="nb">-</span><span class="c">44df</span><span class="nb">-</span><span class="c">8b59</span><span class="nb">-</span><span class="c">e15fdcfc636b</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">2 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">98 (eth0)  |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+-----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">97fa390d</span><span class="nb">-</span><span class="c">96ad</span><span class="nb">-</span><span class="c">44df</span><span class="nb">-</span><span class="c">8b59</span><span class="nb">-</span><span class="c">e15fdcfc636b</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">3 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">29 (eth0)  |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+-----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">97fa390d</span><span class="nb">-</span><span class="c">96ad</span><span class="nb">-</span><span class="c">44df</span><span class="nb">-</span><span class="c">8b59</span><span class="nb">-</span><span class="c">e15fdcfc636b</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">4 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">202 (eth0) |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+-----------------------+------+------------+-----------+</span>
<span class="c">| juju</span><span class="nb">-</span><span class="c">97fa390d</span><span class="nb">-</span><span class="c">96ad</span><span class="nb">-</span><span class="c">44df</span><span class="nb">-</span><span class="c">8b59</span><span class="nb">-</span><span class="c">e15fdcfc636b</span><span class="nb">-</span><span class="c">machine</span><span class="nb">-</span><span class="c">5 | RUNNING | 10</span><span class="nt">.</span><span class="c">178</span><span class="nt">.</span><span class="c">150</span><span class="nt">.</span><span class="c">214 (eth0) |      | PERSISTENT | 0         |</span>
<span class="nb">+-----------------------------------------------------+---------+-----------------------+------+------------+-----------+</span>
</code></pre></div>

<p>几分钟后，所有的服务应该部署完毕并运行了：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="n">status</span>
<span class="o">[</span><span class="n">Services</span><span class="o">]</span><span class="w"> </span>
<span class="n">NAME</span><span class="w"> </span><span class="n">STATUS</span><span class="w"> </span><span class="n">EXPOSED</span><span class="w"> </span><span class="n">CHARM</span><span class="w"> </span>
<span class="n">api</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span>
<span class="n">mongodb</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="n">trusty</span><span class="o">/</span><span class="n">mongodb</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span>
<span class="n">nginx</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">4</span><span class="w"> </span>
<span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span>
<span class="n">website</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="nl">cs</span><span class="p">:</span><span class="o">~</span><span class="n">hp</span><span class="o">-</span><span class="n">discover</span><span class="o">/</span><span class="n">trusty</span><span class="o">/</span><span class="n">website</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span>

<span class="o">[</span><span class="n">Relations</span><span class="o">]</span><span class="w"> </span>
<span class="n">SERVICE1</span><span class="w"> </span><span class="n">SERVICE2</span><span class="w"> </span><span class="n">RELATION</span><span class="w"> </span><span class="n">TYPE</span><span class="w"> </span>
<span class="n">api</span><span class="w"> </span><span class="n">mongodb</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span>
<span class="n">api</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span>
<span class="n">mongodb</span><span class="w"> </span><span class="n">mongodb</span><span class="w"> </span><span class="n">replica</span><span class="o">-</span><span class="k">set</span><span class="w"> </span><span class="n">peer</span><span class="w"> </span>
<span class="n">nginx</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="n">nginx</span><span class="o">-</span><span class="n">engine</span><span class="w"> </span><span class="n">subordinate</span><span class="w"> </span>
<span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="n">website</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span>

<span class="o">[</span><span class="n">Units</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="n">WORKLOAD</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">JUJU</span><span class="o">-</span><span class="n">STATUS</span><span class="w"> </span><span class="n">VERSION</span><span class="w"> </span><span class="n">MACHINE</span><span class="w"> </span><span class="n">PORTS</span><span class="w"> </span><span class="k">PUBLIC</span><span class="o">-</span><span class="n">ADDRESS</span><span class="w"> </span><span class="n">MESSAGE</span><span class="w"> </span>
<span class="n">api</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="w"> </span><span class="mf">10.178.150.98</span><span class="w"> </span>
<span class="n">mongodb</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">27017</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="mi">27019</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="mi">27021</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="mi">28017</span><span class="o">/</span><span class="n">tcp</span><span class="w"> </span><span class="mf">10.178.150.29</span><span class="w"> </span>
<span class="n">nginx</span><span class="o">-</span><span class="n">proxy</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">80</span><span class="o">/</span><span class="n">tcp</span><span class="w"> </span><span class="mf">10.178.150.214</span><span class="w"> </span>
<span class="n">nginx</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mf">10.178.150.202</span><span class="w"> </span>
<span class="w"> </span><span class="n">website</span><span class="o">/</span><span class="mi">0</span><span class="w"> </span><span class="k">unknown</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="mf">2.0</span><span class="o">-</span><span class="n">beta7</span><span class="w"> </span><span class="mf">10.178.150.202</span><span class="w"> </span>

<span class="o">[</span><span class="n">Machines</span><span class="o">]</span><span class="w"> </span>
<span class="n">ID</span><span class="w"> </span><span class="k">STATE</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="n">INS</span><span class="o">-</span><span class="n">ID</span><span class="w"> </span><span class="n">SERIES</span><span class="w"> </span><span class="n">AZ</span><span class="w"> </span>
<span class="mi">2</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="mf">10.178.150.98</span><span class="w"> </span><span class="n">juju</span><span class="o">-</span><span class="mi">97</span><span class="n">fa390d</span><span class="o">-</span><span class="mi">96</span><span class="n">ad</span><span class="o">-</span><span class="mi">44</span><span class="n">df</span><span class="o">-</span><span class="mi">8</span><span class="n">b59</span><span class="o">-</span><span class="n">e15fdcfc636b</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="n">trusty</span><span class="w"> </span>
<span class="mi">3</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="mf">10.178.150.29</span><span class="w"> </span><span class="n">juju</span><span class="o">-</span><span class="mi">97</span><span class="n">fa390d</span><span class="o">-</span><span class="mi">96</span><span class="n">ad</span><span class="o">-</span><span class="mi">44</span><span class="n">df</span><span class="o">-</span><span class="mi">8</span><span class="n">b59</span><span class="o">-</span><span class="n">e15fdcfc636b</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="n">trusty</span><span class="w"> </span>
<span class="mi">4</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="mf">10.178.150.202</span><span class="w"> </span><span class="n">juju</span><span class="o">-</span><span class="mi">97</span><span class="n">fa390d</span><span class="o">-</span><span class="mi">96</span><span class="n">ad</span><span class="o">-</span><span class="mi">44</span><span class="n">df</span><span class="o">-</span><span class="mi">8</span><span class="n">b59</span><span class="o">-</span><span class="n">e15fdcfc636b</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">4</span><span class="w"> </span><span class="n">trusty</span><span class="w"> </span>
<span class="mi">5</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="mf">10.178.150.214</span><span class="w"> </span><span class="n">juju</span><span class="o">-</span><span class="mi">97</span><span class="n">fa390d</span><span class="o">-</span><span class="mi">96</span><span class="n">ad</span><span class="o">-</span><span class="mi">44</span><span class="n">df</span><span class="o">-</span><span class="mi">8</span><span class="n">b59</span><span class="o">-</span><span class="n">e15fdcfc636b</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="mi">5</span><span class="w"> </span><span class="n">trusty</span>
</code></pre></div>

<p>这时你就可以在 80 端口访问 http://10.178.150.214，并且会看到一个 Juju 学院页面。</p>
<p><a href="https://www.stgraber.org/wp-content/uploads/2016/06/juju-academy.png"><img alt="Juju Academy web service" src="/data/attachment/album/201703/07/060453f1rozxyr3asyszgf.png"></a> </p>
<h3>清理所有东西</h3>
<p>如果你不需要 Juju 创建的容器并且不在乎下次需要再次启动，最简单的方法是：</p>
<div class="highlight"><pre><span></span><code><span class="n">stgraber</span><span class="nv">@dakara</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">juju</span><span class="w"> </span><span class="k">destroy</span><span class="o">-</span><span class="n">controller</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">--</span><span class="k">destroy</span><span class="o">-</span><span class="ow">all</span><span class="o">-</span><span class="n">models</span>
<span class="n">WARNING</span><span class="err">!</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">destroy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">&quot;local.test&quot;</span><span class="w"> </span><span class="n">controller</span><span class="p">.</span>
<span class="n">This</span><span class="w"> </span><span class="n">includes</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">machines</span><span class="p">,</span><span class="w"> </span><span class="n">services</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">resources</span><span class="p">.</span>

<span class="k">Continue</span><span class="w"> </span><span class="o">[</span><span class="n">y/N</span><span class="o">]</span><span class="vm">?</span><span class="w"> </span><span class="n">y</span>
<span class="n">Destroying</span><span class="w"> </span><span class="n">controller</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">hosted</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">resources</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">reclaimed</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">services</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">services</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">services</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">services</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">services</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">services</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span>
<span class="n">Waiting</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">model</span>
<span class="ow">All</span><span class="w"> </span><span class="n">hosted</span><span class="w"> </span><span class="n">models</span><span class="w"> </span><span class="n">reclaimed</span><span class="p">,</span><span class="w"> </span><span class="n">cleaning</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">machines</span>
</code></pre></div>

<p>我们用下面的方式确认：</p>
<div class="highlight"><pre><span></span><code><span class="c">stgraber@dakara:~$ lxc list juju</span><span class="nb">-</span>
<span class="nb">+------+-------+------+------+------+-----------+</span>
<span class="c">| NAME | STATE | IPV4 | IPV6 | TYPE | SNAPSHOTS |</span>
<span class="nb">+------+-------+------+------+------+-----------+</span>
</code></pre></div>

<h3>总结</h3>
<p>Juju 2.0 内置的 LXD 支持使得可以用一种非常干净的方式来测试各种服务。</p>
<p>在 Juju charm store 中有很多预制的“组合”可以用来部署，甚至可以用多个“charm”来组合你想要的架构。</p>
<p>Juju 与 LXD 是一个完美的解决方案，从一个小的 Web 服务到大规模的基础设施都可以简单开发，这些都在你自己的机器上，并且不会在你的系统上造成混乱！</p>
<h3>额外信息</h3>
<p>Juju 网站： http://www.ubuntu.com/cloud/juju</p>
<p>Juju charm store ： https://jujucharms.com</p>
<p>LXD 的主站在： https://linuxcontainers.org/lxd</p>
<p>LXD 的 GitHub 仓库： https://github.com/lxc/lxd</p>
<p>LXD 的邮件列表： https://lists.linuxcontainers.org</p>
<p>LXD 的 IRC 频道： #lxcontainers on irc.freenode.net</p>
<p>如果你不想或者不能在你的机器上安装 LXD ，你可以在 web 上试试<a href="https://linuxcontainers.org/lxd/try-it">在线版的 LXD</a>。</p>
<p>via: <a href="https://www.stgraber.org/2016/06/06/lxd-2-0-lxd-and-juju-1012/">https://www.stgraber.org/2016/06/06/lxd-2-0-lxd-and-juju-1012/</a></p>
<p>作者：<a href="https://www.stgraber.org/author/stgraber/">Stéphane Graber</a> 译者：<a href="https://github.com/geekpi">geekpi</a> 校对：<a href="https://github.com/wxy">wxy</a></p>
<p>本文由 <a href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a href="https://linux.cn/">Linux中国</a> 荣誉推出</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>