<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>开发者的实用 Vim 插件（三）</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Ansh 目前为止，在一系列介绍 vim 插件文章中，我们介绍了使用 Pathogen 插件管理包安装基本的 vim 插件，也提及了另外三个插件：Tagbar …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li class="active"><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/04/kai-fa-zhe-de-shi-yong-vim-cha-jian-san.html" rel="bookmark"
           title="Permalink to 开发者的实用 Vim 插件（三）">开发者的实用 Vim 插件（三）</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-04-02T09:03:13+02:00">
                Published: Sun 02 April 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/zhuo-mian-ying-yong">桌面应用</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Ansh</p>
<p>目前为止，在一系列介绍 vim 插件文章中，我们介绍了使用 Pathogen 插件管理包安装基本的 vim 插件，也提及了另外三个插件：<a href="/article-7901-1.html">Tagbar、delimitMate</a> 和 <a href="/article-7909-1.html">Syntastic</a>。现在，在最后一部分，我们将介绍另一个十分有用的插件 a.vim。</p>
<p>请注意所有本篇教程所提及的例子、命令和指导，它们已经在 Ubuntu 16.04 测试完毕，vim 使用版本为 vim7.4 （LCTT 译注：Ubuntu 16.04 的默认版本）。</p>
<p><img alt="" src="/data/attachment/album/201704/02/090307jf2mm3ps469s3634.jpg"></p>
<h3>A.vim</h3>
<p>如果你一直用像 C、C++ 这样的语言进行开发工作，你一定有这样的感触：我特么已经数不清我在头文件和源代码之间切换过多少次了。我想说的是，确实，这个操作十分基本，十分频繁。</p>
<p>尽管使用基于 GUI（图形界面）的 IDE（集成开发环境）非常容易通过鼠标的双击切换文件，但是如果你是资深 vim 粉，习惯用命令工作就有点尴尬了。但是不要害怕，我有秘籍－－插件 a.vim。它可以让你解决尴尬，专治各种文件切换。</p>
<p>在我们介绍这个神器用法之前，我必须强调一点：这个插件的安装过程和我们其他篇介绍的不太一样，步骤如下：</p>
<ul>
<li>首先，你需要下载两个文件（<code>a.vim</code> 和 <code>alternate.txt</code>），你可以在<a href="http://www.vim.org/scripts/script.php?script_id=31">这里</a>找到它们。</li>
<li>接下来，创建如下目录：<code>~/.vim/bundle/avim</code>、<code>~/.vim/bundle/avim/doc</code>、 <code>~/.vim/bundle/avim/plugin</code> 和 <code>~/.vim/bundle/autoload</code>。</li>
<li>创建好目录之后，将 <code>a.vim</code> 放到 <code>~/.vim/bundle/avim/plugin</code> 和 <code>~/.vim/bundle/autoload</code>，以及将 <code>alternate.txt</code> 放到 <code>~/.vim/bundle/avim/doc</code>。</li>
</ul>
<p>就是这样，如果上述步骤被你成功完成，你的系统就会安装好这个插件。</p>
<p>使用这个插件十分简单，你仅仅需要运行这个命令 <code>:A</code> 如果目前的文件是源文件（比如 <code>test.c</code>），这个神器就会帮你打开 <code>test.c</code> 对应的头文件（<code>test.h</code>），反之亦然。</p>
<p>当然咯，不是每个文件对应的头文件都存在。这种情况下，如果那你运行 <code>:A</code> 命令，神器就会为你新建一个文件。比如，如果 <code>test.h</code> 不存在，那么运行此命令就会帮你创建一个 <code>test.h</code>，然后打开它。</p>
<p>如果你不想要神器开启此功能，你可以在你的家目录的隐藏文件 <code>.vimrc</code> 中写入 <code>g:alternateNonDefaultAlternate</code> 变量，并且赋给它一个非零值即可。</p>
<p>还有一种情况也很普遍，你需要打开的文件并非是当前源代码的头文件。比如你目前在 <code>test.c</code> 你想打开 <code>men.h</code> 这个头文件，那么你可以输入这个命令 <code>:IH &lt;filename&gt;</code> ，毋需赘言，你肯定要在后面输入你要打开的的文件名称 <code>&lt;filename&gt;</code>。</p>
<p>目前为止，我们讨论的功能都仅限于你当前文件和要操作的文件都在同一个目录去实现。但是，你也知道，我们还有特殊情况，我是说，许多项目中头文件与对应的源文件并不一定在同一目录下。</p>
<p>为了搞定这个问题，你要使用这个 <code>g:alternateSearchPath</code> 这个变量。官方文档是这么<a href="https://github.com/csliu/a.vim/blob/master/doc/alternate.txt">解释</a>的：</p>
<blockquote>
<p>这个插件可以让用户配置它的搜索源文件和头文件的搜索路径。这个搜索路径可以通过设置 <code>g:alternateSearchPath</code> 这个变量的值指定。默认的设定如下：</p>
<p>```
g:alternateSearchPath = 'sfr:../source,sfr:../src,sfr:../include,sfr:../inc' </p>
<p>```</p>
<p>使用这个代码表示神器将搜索 <code>../source</code>、<code>../src</code>、<code>../include</code> 和 <code>../inc</code> 下所有与目标文件相关的文件。 <code>g:alternateSearchPath</code> 变量的值由前缀和路径组成，每个单元用逗号隔开。 <code>sfr</code> 前缀是指后面的路径是相对于目前文件的，<code>wdr</code> 前缀是指目录是相对于目前的工作目录， <code>abs</code> 是指路径是绝对路径。如果不指定前缀，那么默认为 <code>sfr</code>。</p>
</blockquote>
<p>如果我们前文所提及的特性就能让你觉得很炫酷，那我不得不告诉你，这才哪跟哪。还有一个十分有用的功能是分割 Vim 屏幕，这样你就可以同时看到头文件和相应的源文件。</p>
<p>哦，还有，你还可以选择垂直或者水平分割。全凭你心意。使用 <code>:AS</code> 命令可以水平分割，使用 <code>:AV</code> 可以垂直分割。</p>
<p><img alt="Vim.a vertical split screen" src="/data/attachment/album/201704/02/090315cq6y6qi8ew25qb8d.png"></p>
<p><img alt="vim.a horizontal split screen" src="/data/attachment/album/201704/02/090318eie9tz2372cvmdtm.png"></p>
<p>使用 <code>:A</code> 命令在已经打开的文件中切换。</p>
<p>这个插件还可以让你在同一个 Vim 窗口中不同选项卡中打开多个相应的文件，你键入这个命令 <code>:AT</code>。</p>
<p><img alt="tabs in Vim with a.vim." src="/data/attachment/album/201704/02/090318cbxcoxz5nabqo5oo.png"></p>
<p>当然，你可以用这些命令 <code>:AV</code>、<code>:AS</code> 和 <code>:AT</code>，也可以使用这些命令 <code>:IHV</code>、<code>:IHS</code> 和 <code>:IHT</code>。</p>
<h3>最后</h3>
<p>还有许多和编程相关的 Vim 的插件，我们在这个三篇系列主要讨论的是，如果你为你的软件开发工作安装了合适的插件，你就会明白为什么 vim 被叫做编辑器之神。</p>
<p>当然，我们在这只关注编程方面，对于那些把 Vim 当做日常文档编辑器的人来说，你也应该了解一些 Vim 的插件，让你的编辑更好，更高效．我们就改日再谈这个问题吧。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>