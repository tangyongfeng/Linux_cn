<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>CoreFreq：一款强大的监控 CPU 的专业工具</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Aaron Kili CoreFreq 是一个用于英特尔 64 位处理器的 CPU 监控程序，并且支持 Atom、Core2、Nehalem、SandyBridge 及以上、还有 AMD 0F 家族。 它的核心建立在内核模 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/02/corefreqyi-kuan-qiang-da-de-jian-kong-cpu-de-zhuan-ye-gong-ju.html" rel="bookmark"
           title="Permalink to CoreFreq：一款强大的监控 CPU 的专业工具">CoreFreq：一款强大的监控 CPU 的专业工具</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-02-26T19:43:07+01:00">
                Published: Sun 26 February 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Aaron Kili</p>
<p>CoreFreq 是一个用于英特尔 64 位处理器的 <a href="http://www.tecmint.com/bcc-best-linux-performance-monitoring-tools/">CPU 监控程序</a>，并且支持 Atom、Core2、Nehalem、SandyBridge 及以上、还有 AMD 0F 家族。</p>
<p><img alt="" src="/data/attachment/album/201702/26/194301xorgfim6vfkmviki.jpg"></p>
<p>它的核心建立在内核模块上，用于从每个 CPU 核心检索内部性能计数器，并且与收集数据的守护进程一起工作，一个小型控制台客户端连接到该守护程序并显示收集的数据。</p>
<p><img alt="CoreFreq CPU Monitoring" src="/data/attachment/album/201702/26/194335ebxp7j5dr5rrawea.gif"></p>
<p>它提供了高精度的重新捕获 CPU 数据的基础工作：</p>
<ol>
<li>核心频率和比率；SpeedStep（EIST）、Turbo Boost、超线程（HTT）以及<ruby> 基本时钟 <rp>  （ </rp> <rt>  Base Clock </rt> <rp>  ） </rp></ruby>。</li>
<li>性能计数器结合<ruby> 时间戳计数器 <rp>  （ </rp> <rt>  Time Stamp Counter </rt> <rp>  ） </rp></ruby>（TSC）、<ruby> 非停机核心周期 <rp>  （ </rp> <rt>  Unhalted Core Cycles </rt> <rp>  ） </rp></ruby>（UCC）、<ruby> 非停机引用周期 <rp>  （ </rp> <rt>  Unhalted Reference Cycles </rt> <rp>  ） </rp></ruby>（URC）。</li>
<li>每周期或每秒的指令数：IPS、IPC 或 CPI。</li>
<li>CPU C 状态： C0 C1 C3 C6 C7 - C1E - C1、C3 的自动/<ruby> 非降级 <rp>  （ </rp> <rt>  UnDemotion </rt> <rp>  ） </rp></ruby>。</li>
<li>带有 Tjunction Max 的 DTS 温度、<ruby> 热监测 <rp>  （ </rp> <rt>  Thermal Monitoring </rt> <rp>  ） </rp></ruby> TM1、TM2 状态。</li>
<li>包括用于自举的高速缓存和应用程序 CPU 拓扑图。</li>
<li>处理器特性、品牌、架构字符串。</li>
</ol>
<p>注意：此工具更适用于 Linux 专家用户和经验丰富的系统管理员，但新手用户可以逐步学习如何使用它。</p>
<h3>CoreFreq 如何工作</h3>
<p>它通过调用一个 Linux 内核模块实现，它使用了：</p>
<ol>
<li>汇编代码保持尽可能接近性能计数器读数。</li>
<li>按每个 CPU 影响的 slab 数据内存加上高分辨率定时器。</li>
<li>支持 CPU 暂停/恢复和 CPU 热插拔。</li>
<li>使用共享内存来保护内核免受来自用户空间程序的损害。</li>
<li>使用原子级同步的线程来消除互斥和死锁。</li>
</ol>
<h3>如何在 Linux 中安装 CoreFreq</h3>
<p>要安装 CoreFreq，你首先需要安装依赖程序（开发工具）来编译并从源码构建程序。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>yum<span class="w"> </span>group<span class="w"> </span>install<span class="w"> </span><span class="s1">&#39;Development Tools&#39;</span><span class="w">           </span><span class="o">[</span>On<span class="w"> </span>CentOS/RHEL<span class="o">]</span>
$<span class="w"> </span>sudo<span class="w"> </span>dnf<span class="w">  </span>group<span class="w"> </span>install<span class="w"> </span><span class="s1">&#39;Development Tools&#39;</span><span class="w">          </span><span class="o">[</span>On<span class="w"> </span>Fedora<span class="w"> </span><span class="m">22</span>+<span class="w"> </span>Versions<span class="o">]</span>
<span class="c1"># sudo apt-get install dkms git libpthread-stubs0-dev  [On Debian/Ubuntu] </span>
</code></pre></div>

<p>接下来克隆 Github 上 CoreFreq 源码，进入下载文件夹并编译构建程序：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/cyring/CoreFreq.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>CoreFreq
$<span class="w"> </span>make<span class="w"> </span>
</code></pre></div>

<p><img alt="Build CoreFreq Program" src="/data/attachment/album/201702/26/194337jx74b7y7sz4bxtyy.png"></p>
<p><em>构建 CoreFreq 程序</em></p>
<p>注意：Arch Linux 用户可以从 AUR 中安装 <a href="https://aur.archlinux.org/packages/corefreq-git">corefreq-git</a>。</p>
<p>现在运行以下命令从本地目录加载 Linux 内核模块，接着运行守护程序：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>insmod<span class="w"> </span>corefreqk.ko
$<span class="w"> </span>sudo<span class="w"> </span>./corefreqd
</code></pre></div>

<p>接着使用普通用户启动客户端。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./corefreq-cli
</code></pre></div>

<p><img alt="CoreFreq Linux CPU Monitoring" src="/data/attachment/album/201702/26/194359nwc88p6gvxcz2vdh.gif"></p>
<p><em>CoreFreq Linux CPU 监控</em></p>
<p>在上面的界面中，你可以使用这些快捷键：</p>
<ol>
<li>使用 <code>F2</code> 显示屏幕顶部显示的使用菜单。</li>
<li>使用 <code>右</code> 和 <code>左</code> 箭头移动菜单选项卡。</li>
<li>使用 <code>上</code>和 <code>下</code> 箭头选择菜单项，然后单击回车。</li>
<li>使用 <code>F4</code> 关闭程序。</li>
<li>使用 <code>h</code> 打开快速参考。</li>
</ol>
<p>要查看所有的使用选项，请输入以下命令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./corefreq-cli<span class="w"> </span>-h
</code></pre></div>

<p>CoreFreq 选项：</p>
<div class="highlight"><pre><span></span><code><span class="n">CoreFreq</span><span class="p">.</span><span class="w">  </span><span class="n">Copyright</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">)</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">2017</span><span class="w"> </span><span class="n">CYRIL</span><span class="w"> </span><span class="n">INGENIERIE</span>
<span class="k">usage</span><span class="err">:</span><span class="w">  </span><span class="n">corefreq</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="o">[</span><span class="n">-option &lt;arguments&gt;</span><span class="o">]</span>
<span class="o">-</span><span class="n">t</span><span class="w">  </span><span class="n">Show</span><span class="w"> </span><span class="k">Top</span><span class="w"> </span><span class="p">(</span><span class="k">default</span><span class="p">)</span>
<span class="o">-</span><span class="n">d</span><span class="w">  </span><span class="n">Show</span><span class="w"> </span><span class="n">Dashboard</span>
<span class="nl">arguments</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nf">left</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="k">top</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">marginWidth</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">marginHeight</span><span class="o">&gt;</span>
<span class="o">-</span><span class="n">c</span><span class="w">  </span><span class="n">Monitor</span><span class="w"> </span><span class="n">Counters</span>
<span class="o">-</span><span class="n">i</span><span class="w">  </span><span class="n">Monitor</span><span class="w"> </span><span class="n">Instructions</span>
<span class="o">-</span><span class="n">s</span><span class="w">  </span><span class="k">Print</span><span class="w"> </span><span class="k">System</span><span class="w"> </span><span class="n">Information</span>
<span class="o">-</span><span class="n">M</span><span class="w">  </span><span class="k">Print</span><span class="w"> </span><span class="n">Memory</span><span class="w"> </span><span class="n">Controller</span>
<span class="o">-</span><span class="n">m</span><span class="w">  </span><span class="k">Print</span><span class="w"> </span><span class="n">Topology</span>
<span class="o">-</span><span class="n">u</span><span class="w">  </span><span class="k">Print</span><span class="w"> </span><span class="n">CPUID</span>
<span class="o">-</span><span class="n">k</span><span class="w">  </span><span class="k">Print</span><span class="w"> </span><span class="n">Kernel</span>
<span class="o">-</span><span class="n">h</span><span class="w">  </span><span class="k">Print</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">message</span>
<span class="k">Exit</span><span class="w"> </span><span class="nl">status</span><span class="p">:</span>
<span class="mi">0</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span>
<span class="mi">1</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="n">problems</span><span class="p">,</span>
<span class="o">&gt;</span><span class="mi">1</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">serious</span><span class="w"> </span><span class="n">trouble</span><span class="p">.</span>
<span class="n">Report</span><span class="w"> </span><span class="n">bugs</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">labs</span><span class="o">[</span><span class="n">at</span><span class="o">]</span><span class="n">cyring</span><span class="p">.</span><span class="n">fr</span>
</code></pre></div>

<p>要打印内核的信息，运行：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./corefreq-cli<span class="w"> </span>-k
</code></pre></div>

<p>打印 CPU 细节信息：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./corefreq-cli<span class="w"> </span>-u
</code></pre></div>

<p>你也可以实时监控 CPU 指令：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./corefreq-cli<span class="w"> </span>-i
</code></pre></div>

<p>如下启用计数器追踪：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./corefreq-cli<span class="w"> </span>-c
</code></pre></div>

<p>有关更多信息和用法，请访问 CoreFreq 的 Github 仓库：<a href="https://github.com/cyring/CoreFreq">https://github.com/cyring/CoreFreq</a> 。</p>
<p>在本文中，我们评估了一个强大的 CPU 监控工具，这对于 Linux 专家或经验丰富的系统管理员来说可能比新手用户更有用。</p>
<p>通过下面的评论栏与我们分享你对这个工具或任何相关的想法。</p>
<p>via: <a href="http://www.tecmint.com/corefreq-linux-cpu-monitoring-tool/">http://www.tecmint.com/corefreq-linux-cpu-monitoring-tool/</a></p>
<p>作者：<a href="http://www.tecmint.com/author/aaronkili/">Aaron Kili</a> 译者：<a href="https://github.com/geekpi">geekpi</a> 校对：<a href="https://github.com/wxy">wxy</a></p>
<p>本文由 <a href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a href="https://linux.cn/">Linux中国</a> 荣誉推出</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>