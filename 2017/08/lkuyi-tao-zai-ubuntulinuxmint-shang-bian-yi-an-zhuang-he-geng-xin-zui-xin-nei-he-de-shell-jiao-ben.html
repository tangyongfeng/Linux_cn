<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>LKU：一套在 Ubuntu/LinuxMint 上编译、安装和更新最新内核的 Shell 脚本</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: 2daygeek 以手动方式安装和升级最新的 Linux 内核对于每个人来说都不是一件小事，甚至包括一些有经验的人也是如此。它需要 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li class="active"><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/08/lkuyi-tao-zai-ubuntulinuxmint-shang-bian-yi-an-zhuang-he-geng-xin-zui-xin-nei-he-de-shell-jiao-ben.html" rel="bookmark"
           title="Permalink to LKU：一套在 Ubuntu/LinuxMint 上编译、安装和更新最新内核的 Shell 脚本">LKU：一套在 Ubuntu/LinuxMint 上编译、安装和更新最新内核的 Shell 脚本</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-08-01T13:19:00+02:00">
                Published: Tue 01 August 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/ji-zhu">技术</a>.</p>

</footer><!-- /.post-info -->      <p>Author: 2daygeek</p>
<p><img alt="" src="/data/attachment/album/201707/30/162756kpkrpmm07p1llkl8.jpg"></p>
<p>以手动方式安装和升级最新的 Linux 内核对于每个人来说都不是一件小事，甚至包括一些有经验的人也是如此。它需要对 Linux 内核有深入的了解。过去我们已经介绍了 UKUU（Ubuntu Kernel Upgrade Utility），它可以从 kernel.ubuntu.com 网站上自动检测最新的主线内核，并弹出一个不错的窗口界面进行安装。</p>
<p><a href="https://github.com/mtompkins/linux-kernel-utilities">Linux Kernel Utilities</a> （LKU）提供一组 shell 脚本（三个 Shell 脚本），可以帮助用户从 kernel.org 获取并编译和安装最新的 Linux 内核，也可以从 kernel.ubuntu.com 获取安装最新的预编译的 Ubuntu 内核。甚至可以根据需要选择所需的内核（手动内核选择）。</p>
<p>该脚本还将根据 PGP 签名文件检查下载的归档文件，并且可以选择通用和低延迟版内核。</p>
<p>建议阅读：<a href="http://www.2daygeek.com/ukuu-install-upgrade-linux-kernel-in-linux-mint-ubuntu-debian-elementary-os/">ukuu：一种在基于 Ubuntu 的系统上轻松安装升级 Linux 内核的方式</a></p>
<p>它可以删除或清除所有非活动的内核，并且不会为了安全目的留下备份的内核。强烈建议在执行此脚本之前重新启动一次。</p>
<ul>
<li><code>compile_linux_kernel.sh</code> ：用户可以从 kernel.org 编译和安装所需的或最新的内核</li>
<li><code>update_ubuntu_kernel.sh</code> ：用户可以从 kernel.ubuntu.com 安装并更新所需或最新的预编译 Ubuntu 内核</li>
<li><code>remove_old_kernels.sh</code> ：这将删除或清除所有非活动内核，并且只保留当前加载的版本</li>
</ul>
<p>kernel.org 有固定的发布周期（每三个月一次），发布的内核包括了新的功能，改进了硬件和系统性能。由于它具有标准的发布周期，除了滚动发布的版本（如 Arch Linux，openSUSE Tumbleweed 等），大多数发行版都不提供最新的内核。</p>
<h3>如何安装 Linux Kernel Utilities (LKU)</h3>
<p>正如我们在文章的开头所说的，它的 shell 脚本集只是克隆开发人员的 github 仓库并运行相应的 shell 文件来执行这个过程。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/mtompkins/linux-kernel-utilities.git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>linux-kernel-utilities
</code></pre></div>

<h3>安装指定版本内核</h3>
<p>为了测试的目的，我们将安装 Linux v4.4.10-xenial 内核。在安装新内核之前，我们需要通过 <code>uanme -a</code> 命令检查当前安装的内核版本，以便我们可以检查新内核是否可以安装。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>uname<span class="w"> </span>-a
Linux<span class="w"> </span>magi-VirtualBox<span class="w"> </span><span class="m">4</span>.4.0-21-generic<span class="w"> </span><span class="c1">#37-Ubuntu SMP Mon Apr 18 18:33:37 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux</span>
</code></pre></div>

<p>根据上面的输出，我们的系统使用的是 4.4.0-21 通用内核。</p>
<p>只需运行 <code>update_ubuntu_kernel.sh</code> shell 脚本。第一次运行脚本时会检查是否满足所有的依赖关系，然后自动安装缺少的依赖项。它会检测系统使用的发行版，并检索 kernel.ubuntu.com 中可用的预编译内核。现在，从列表中选择你需要的内核并输入序号，然后按回车键，它将下载内核映像（linux-headers-4.4.10，linux-headers-4.4.10-xxx-generic　和 linux-image-4.4.10-xxx-generic）。</p>
<p>一旦内核镜像被下载，它将要求输入 <code>sudo</code> 密码来启动新内核的安装。</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">update_ubuntu_kernel</span><span class="p">.</span><span class="n">sh</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Checking</span><span class="w"> </span><span class="n">Distro</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Distro</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">LinuxMint</span><span class="p">.</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Checking</span><span class="w"> </span><span class="n">Dependencies</span>
<span class="w">    </span><span class="n">curl</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">dkms</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">git</span><span class="w">                     </span><span class="k">Found</span>
<span class="w">    </span><span class="n">sudo</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">wget</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">whiptail</span><span class="w">                </span><span class="k">Found</span>
<span class="w">    </span><span class="n">lynx</span><span class="w">                    </span><span class="ow">Not</span><span class="w"> </span><span class="k">Found</span>

<span class="o">--</span><span class="w"> </span><span class="n">Installing</span><span class="w"> </span><span class="n">Dependencies</span><span class="w"> </span><span class="o">--</span>

<span class="o">[</span><span class="n">!</span><span class="o">]</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="nc">time</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">installed</span><span class="p">.</span>
<span class="w">    </span><span class="k">For</span><span class="w"> </span><span class="n">compiling</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">bit</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">time</span><span class="p">.</span><span class="w"> </span><span class="n">Feedback</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">provided</span><span class="p">.</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Dependencies</span>
<span class="w"> </span><span class="err">\</span><span class="n">_Elevating</span><span class="w"> </span><span class="nf">permissions</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">necessary</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="o">[</span><span class="n">%</span><span class="o">]</span><span class="w"> </span><span class="n">Elevated</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Testing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">held</span><span class="w"> </span><span class="n">packages</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">trying</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="k">found</span><span class="p">.</span>
<span class="w"> </span><span class="err">\</span><span class="n">_Passed</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Updating</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="w"> </span><span class="err">\</span><span class="n">_Complete</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Installing</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="w"> </span><span class="err">\</span><span class="n">_Complete</span>

<span class="w">    </span><span class="n">curl</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">dkms</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">git</span><span class="w">                     </span><span class="k">Found</span>
<span class="w">    </span><span class="n">sudo</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">wget</span><span class="w">                    </span><span class="k">Found</span>
<span class="w">    </span><span class="n">whiptail</span><span class="w">                </span><span class="k">Found</span>
<span class="w">    </span><span class="n">lynx</span><span class="w">                    </span><span class="k">Found</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Changing</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">temporary</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">work</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="k">Temporary</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="nl">granted</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">tmp</span><span class="mf">.97</span><span class="n">eHDsmg2K</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Removing</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="n">conflicting</span><span class="w"> </span><span class="n">remnants</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Done</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Retrieving</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">choices</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Precompiled</span><span class="w"> </span><span class="n">kernels</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">kernel</span><span class="p">.</span><span class="n">ubuntu</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span>

<span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.11</span><span class="w">                </span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.11.3</span><span class="w">              </span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.11.2</span><span class="w">              </span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.11.1</span><span class="w">             </span>
<span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.10</span><span class="w">                </span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.10.17</span><span class="w">             </span><span class="mi">7</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.10.16</span><span class="w">             </span><span class="mi">8</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.10.15</span><span class="w">            </span>
<span class="w"> </span><span class="mi">9</span><span class="p">)</span><span class="w">  </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.10.14</span><span class="w">             </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.10.13</span><span class="w">             </span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.10.12</span>
<span class="o">[</span><span class="n"> 节略 ……</span><span class="o">]</span><span class="w">                     </span>
<span class="w"> </span><span class="mi">249</span><span class="p">)</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.0.3</span><span class="o">-</span><span class="n">wily</span><span class="w">          </span><span class="mi">250</span><span class="p">)</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.0.2</span><span class="o">-</span><span class="n">wily</span><span class="w">          </span><span class="mi">251</span><span class="p">)</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.0.1</span><span class="o">-</span><span class="n">wily</span><span class="w">          </span><span class="mi">252</span><span class="p">)</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">v4</span><span class="mf">.0</span><span class="o">-</span><span class="n">vivid</span><span class="w">          </span>

<span class="k">Select</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="nl">kernel</span><span class="p">:</span><span class="w"> </span><span class="mi">158</span>

<span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lowlatency</span><span class="w"> </span><span class="n">kernel</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/[</span><span class="n">n</span><span class="o">]</span><span class="p">)</span><span class="err">:</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Processing</span><span class="w"> </span><span class="n">selection</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Determining</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">amd64</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Locating</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">v4</span><span class="mf">.4.10</span><span class="o">-</span><span class="n">xenial</span><span class="w"> </span><span class="n">generic</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">packages</span><span class="p">.</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Done</span>

<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Checking</span><span class="w"> </span><span class="n">AntiVirus</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">disabling</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">necessary</span>
<span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="n">Installing</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="o">[</span><span class="n">sudo</span><span class="o">]</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">magi</span><span class="p">:</span>
<span class="n">Selecting</span><span class="w"> </span><span class="n">previously</span><span class="w"> </span><span class="n">unselected</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.</span>
<span class="p">(</span><span class="n">Reading</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="mi">230647</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">installed</span><span class="p">.)</span>
<span class="n">Preparing</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">unpack</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="n">_4</span><span class="mf">.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="n">_all</span><span class="p">.</span><span class="n">deb</span><span class="w"> </span><span class="p">...</span>
<span class="n">Unpacking</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Selecting</span><span class="w"> </span><span class="n">previously</span><span class="w"> </span><span class="n">unselected</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="p">.</span>
<span class="n">Preparing</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">unpack</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic_4</span><span class="mf">.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="n">_amd64</span><span class="p">.</span><span class="n">deb</span><span class="w"> </span><span class="p">...</span>
<span class="n">Unpacking</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Selecting</span><span class="w"> </span><span class="n">previously</span><span class="w"> </span><span class="n">unselected</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="p">.</span>
<span class="n">Preparing</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">unpack</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic_4</span><span class="mf">.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="n">_amd64</span><span class="p">.</span><span class="n">deb</span><span class="w"> </span><span class="p">...</span>
<span class="n">Done</span><span class="p">.</span>
<span class="n">Unpacking</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Setting</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Setting</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Examining</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">header_postinst</span><span class="p">.</span><span class="n">d</span><span class="p">.</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">header_postinst</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">dkms</span><span class="w"> </span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="n">Setting</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Running</span><span class="w"> </span><span class="n">depmod</span><span class="p">.</span>
<span class="k">update</span><span class="o">-</span><span class="nl">initramfs</span><span class="p">:</span><span class="w"> </span><span class="n">deferring</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="p">(</span><span class="n">hook</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="k">called</span><span class="w"> </span><span class="n">later</span><span class="p">)</span>
<span class="n">Examining</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postinst</span><span class="p">.</span><span class="n">d</span><span class="p">.</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postinst</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">apt</span><span class="o">-</span><span class="n">auto</span><span class="o">-</span><span class="n">removal</span><span class="w"> </span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postinst</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">dkms</span><span class="w"> </span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postinst</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">initramfs</span><span class="o">-</span><span class="n">tools</span><span class="w"> </span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="k">update</span><span class="o">-</span><span class="nl">initramfs</span><span class="p">:</span><span class="w"> </span><span class="n">Generating</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="p">.</span><span class="n">img</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="nl">Warning</span><span class="p">:</span><span class="w"> </span><span class="k">No</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">locale</span><span class="p">:</span><span class="w"> </span><span class="n">en_IN</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postinst</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">pm</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postinst</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">unattended</span><span class="o">-</span><span class="n">upgrades</span><span class="w"> </span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postinst</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">zz</span><span class="o">-</span><span class="k">update</span><span class="o">-</span><span class="n">grub</span><span class="w"> </span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="n">Generating</span><span class="w"> </span><span class="n">grub</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="p">...</span>
<span class="nl">Warning</span><span class="p">:</span><span class="w"> </span><span class="n">Setting</span><span class="w"> </span><span class="n">GRUB_TIMEOUT</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">zero</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">GRUB_HIDDEN_TIMEOUT</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">supported</span><span class="p">.</span>
<span class="k">Found</span><span class="w"> </span><span class="n">linux</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="k">Found</span><span class="w"> </span><span class="n">initrd</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="p">.</span><span class="n">img</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span>
<span class="k">Found</span><span class="w"> </span><span class="n">linux</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span>
<span class="k">Found</span><span class="w"> </span><span class="n">initrd</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="p">.</span><span class="n">img</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span>
<span class="k">Found</span><span class="w"> </span><span class="n">linux</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span>
<span class="k">Found</span><span class="w"> </span><span class="n">initrd</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">initrd</span><span class="p">.</span><span class="n">img</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span>
<span class="k">Found</span><span class="w"> </span><span class="n">memtest86</span><span class="o">+</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">memtest86</span><span class="o">+</span><span class="p">.</span><span class="n">elf</span>
<span class="k">Found</span><span class="w"> </span><span class="n">memtest86</span><span class="o">+</span><span class="w"> </span><span class="nc">image</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">memtest86</span><span class="o">+</span><span class="p">.</span><span class="n">bin</span>
<span class="n">done</span>
<span class="w"> </span><span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Done</span>
</code></pre></div>

<p>安装后需要重新启动以使用新安装的内核。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>reboot<span class="w"> </span>now
</code></pre></div>

<p>现在，你正在使用的就是新安装的 4.4.10-040410-generic 版本内核。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>uname<span class="w"> </span>-a
Linux<span class="w"> </span>magi-VirtualBox<span class="w"> </span><span class="m">4</span>.4.10-040410-generic<span class="w"> </span><span class="c1">#201605110631 SMP Wed May 11 10:33:23 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux</span>
</code></pre></div>

<h3>安装最新版本内核</h3>
<p>过程与上述相同，它将自动安装最新版本的内核。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./update_ubuntu_kernel.sh<span class="w"> </span>--latest

<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Checking<span class="w"> </span>Distro
<span class="w"> </span><span class="se">\_</span><span class="w"> </span>Distro<span class="w"> </span>identified<span class="w"> </span>as<span class="w"> </span>LinuxMint.

<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Checking<span class="w"> </span>Dependencies
<span class="w">    </span>curl<span class="w">                    </span>Found
<span class="w">    </span>dkms<span class="w">                    </span>Found
<span class="w">    </span>git<span class="w">                     </span>Found
<span class="w">    </span>sudo<span class="w">                    </span>Found
<span class="w">    </span>wget<span class="w">                    </span>Found
<span class="w">    </span>whiptail<span class="w">                </span>Found
<span class="w">    </span>lynx<span class="w">                    </span>Found

<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Changing<span class="w"> </span>to<span class="w"> </span>temporary<span class="w"> </span>directory<span class="w"> </span>to<span class="w"> </span>work<span class="w"> </span><span class="k">in</span><span class="w"> </span>.<span class="w"> </span>.<span class="w"> </span>.
<span class="w"> </span><span class="se">\_</span><span class="w"> </span>Temporary<span class="w"> </span>directory<span class="w"> </span>access<span class="w"> </span>granted:<span class="w"> </span>/tmp/tmp.pLPYmCze6S

<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Removing<span class="w"> </span>any<span class="w"> </span>conflicting<span class="w"> </span>remnants<span class="w"> </span>.<span class="w"> </span>.<span class="w"> </span>.
<span class="w"> </span><span class="se">\_</span><span class="w"> </span>Done

<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Retrieving<span class="w"> </span>available<span class="w"> </span>kernel<span class="w"> </span>choices<span class="w"> </span>.<span class="w"> </span>.<span class="w"> </span>.
<span class="w"> </span><span class="se">\_</span><span class="w"> </span>Precompiled<span class="w"> </span>kernels<span class="w"> </span>available<span class="w"> </span>from<span class="w"> </span>kernel.ubuntu.com:
.
.
.
.
Warning:<span class="w"> </span>Setting<span class="w"> </span>GRUB_TIMEOUT<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>non-zero<span class="w"> </span>value<span class="w"> </span>when<span class="w"> </span>GRUB_HIDDEN_TIMEOUT<span class="w"> </span>is<span class="w"> </span><span class="nb">set</span><span class="w"> </span>is<span class="w"> </span>no<span class="w"> </span>longer<span class="w"> </span>supported.
Found<span class="w"> </span>linux<span class="w"> </span>image:<span class="w"> </span>/boot/vmlinuz-4.11.3-041103-generic
Found<span class="w"> </span>initrd<span class="w"> </span>image:<span class="w"> </span>/boot/initrd.img-4.11.3-041103-generic
Found<span class="w"> </span>linux<span class="w"> </span>image:<span class="w"> </span>/boot/vmlinuz-4.4.10-040410-generic
Found<span class="w"> </span>initrd<span class="w"> </span>image:<span class="w"> </span>/boot/initrd.img-4.4.10-040410-generic
Found<span class="w"> </span>linux<span class="w"> </span>image:<span class="w"> </span>/boot/vmlinuz-4.4.9-040409-lowlatency
Found<span class="w"> </span>initrd<span class="w"> </span>image:<span class="w"> </span>/boot/initrd.img-4.4.9-040409-lowlatency
Found<span class="w"> </span>linux<span class="w"> </span>image:<span class="w"> </span>/boot/vmlinuz-4.4.0-21-generic
Found<span class="w"> </span>initrd<span class="w"> </span>image:<span class="w"> </span>/boot/initrd.img-4.4.0-21-generic
Found<span class="w"> </span>memtest86+<span class="w"> </span>image:<span class="w"> </span>/boot/memtest86+.elf
Found<span class="w"> </span>memtest86+<span class="w"> </span>image:<span class="w"> </span>/boot/memtest86+.bin
<span class="k">done</span>
<span class="w"> </span><span class="se">\_</span><span class="w"> </span>Done
</code></pre></div>

<p>安装后需要重新启动以使用新安装的内核。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>reboot<span class="w"> </span>now
</code></pre></div>

<p>现在，你正在使用的就是最新版本 4.11.3-041103-generic 的内核。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>uname<span class="w"> </span>-a
Linux<span class="w"> </span>magi-VirtualBox<span class="w"> </span><span class="m">4</span>.11.3-041103-generic<span class="w"> </span><span class="c1">#201705251233 SMP Thu May 25 16:34:52 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</span>
</code></pre></div>

<h3>删除或清除旧内核</h3>
<p>只需要运行 <code>remove_old_kernels.sh</code> shell 脚本即可删除或清除所有非活动状态的内核。</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">remove_old_kernels</span><span class="p">.</span><span class="n">sh</span>

<span class="w">        </span><span class="o">++++++++++++++++++++++++++++++++</span>
<span class="w">        </span><span class="o">+++</span><span class="w">       </span><span class="n">W</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">G</span><span class="w">      </span><span class="o">+++</span>
<span class="w">        </span><span class="o">++++++++++++++++++++++++++++++++</span>

<span class="n">A</span><span class="w"> </span><span class="n">reboot</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">recommended</span><span class="w"> </span><span class="k">before</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="n">tagged</span>
<span class="k">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">indeed</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">old</span><span class="w"> </span><span class="n">kernels</span><span class="w"> </span><span class="n">properly</span><span class="w"> </span><span class="n">marked</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">removal</span><span class="p">.</span>
<span class="k">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">modified</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">reboot</span><span class="w"> </span><span class="k">before</span>
<span class="n">running</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">render</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="n">INOPERABLE</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">indeed</span><span class="w"> </span><span class="n">suck</span><span class="p">.</span>

<span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">warned</span><span class="p">.</span>
<span class="o">~</span><span class="n">the</span><span class="w"> </span><span class="n">Mgmt</span>

<span class="o">[</span><span class="n">?</span><span class="o">]</span><span class="k">Continue</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">automagically</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="ow">ALL</span><span class="w"> </span><span class="k">old</span><span class="w"> </span><span class="n">kernels</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="n">y</span>
<span class="err">\</span><span class="n">_</span><span class="w"> </span><span class="n">Removing</span><span class="w"> </span><span class="ow">ALL</span><span class="w"> </span><span class="k">old</span><span class="w"> </span><span class="n">kernels</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<span class="o">[</span><span class="n">sudo</span><span class="o">]</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nl">magi</span><span class="p">:</span>
<span class="n">Reading</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">lists</span><span class="p">...</span><span class="w"> </span><span class="n">Done</span>
<span class="n">Building</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">tree</span><span class="w">       </span>
<span class="n">Reading</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="n">information</span><span class="p">...</span><span class="w"> </span><span class="n">Done</span>
<span class="n">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">packages</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="nl">REMOVED</span><span class="p">:</span>
<span class="w">  </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">*</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span><span class="o">*</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">*</span>
<span class="w">  </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="o">*</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">*</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span><span class="o">*</span>
<span class="w">  </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span><span class="o">*</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="o">*</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span><span class="o">*</span>
<span class="w">  </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="n">extra</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span><span class="o">*</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">kernel</span><span class="o">-</span><span class="n">generic</span><span class="o">*</span>
<span class="mi">0</span><span class="w"> </span><span class="n">upgraded</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">newly</span><span class="w"> </span><span class="n">installed</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">547</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">upgraded</span><span class="p">.</span>
<span class="k">After</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">operation</span><span class="p">,</span><span class="w"> </span><span class="mi">864</span><span class="w"> </span><span class="n">MB</span><span class="w"> </span><span class="k">disk</span><span class="w"> </span><span class="nf">space</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">freed</span><span class="p">.</span>
<span class="p">(</span><span class="n">Reading</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="mi">296860</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">installed</span><span class="p">.)</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">kernel</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mf">21.37</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mf">21.37</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mi">040410</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.10</span><span class="o">-</span><span class="mf">040410.201605110631</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mf">040409.201605041832</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="n">headers</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mf">040409.201605041832</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Removing</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="n">extra</span><span class="o">-</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.0</span><span class="o">-</span><span class="mf">21.37</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="p">.</span>
<span class="p">.</span>
<span class="p">.</span>
<span class="n">done</span>
<span class="n">Purging</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">linux</span><span class="o">-</span><span class="nc">image</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span><span class="w"> </span><span class="p">(</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mf">040409.201605041832</span><span class="p">)</span><span class="w"> </span><span class="p">...</span>
<span class="n">Examining</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postrm</span><span class="p">.</span><span class="n">d</span><span class="w"> </span><span class="p">.</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postrm</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">initramfs</span><span class="o">-</span><span class="n">tools</span><span class="w"> </span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span>
<span class="n">run</span><span class="o">-</span><span class="nl">parts</span><span class="p">:</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kernel</span><span class="o">/</span><span class="n">postrm</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">zz</span><span class="o">-</span><span class="k">update</span><span class="o">-</span><span class="n">grub</span><span class="w"> </span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span><span class="w"> </span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">vmlinuz</span><span class="o">-</span><span class="mf">4.4.9</span><span class="o">-</span><span class="mi">040409</span><span class="o">-</span><span class="n">lowlatency</span>
</code></pre></div>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>