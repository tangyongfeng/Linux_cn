<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>理解 Linux 的平均负载和性能监控</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Author: Aaron Kili 在本文中，我们将解释 Linux 系统中最关键的管理任务之一——关于系统 / CPU 的 负载 （ load ） 和 平均负载 （ Load average ） 的性能监控。 首先来 …" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">linux_cn</a></h1>
                <nav><ul>
                    <li><a href="/category/chuan-shan-jia-zhuan-fang">穿山甲专访</a></li>
                    <li><a href="/category/dai-ma-ying-xiong">代码英雄</a></li>
                    <li><a href="/category/fen-xiang">分享</a></li>
                    <li><a href="/category/guan-dian">观点</a></li>
                    <li><a href="/category/huo-dong">活动</a></li>
                    <li><a href="/category/ji-ke-man-hua">极客漫画</a></li>
                    <li><a href="/category/ji-zhu">技术</a></li>
                    <li><a href="/category/kai-yuan-zhi-hui">开源智慧</a></li>
                    <li><a href="/category/linux-fa-xing-ban">Linux 发行版</a></li>
                    <li><a href="/category/mei-ri-an-quan-zi-xun">每日安全资讯</a></li>
                    <li><a href="/category/misc">Misc</a></li>
                    <li><a href="/category/qu-kuai-lian">区块链</a></li>
                    <li><a href="/category/rong-qi-yu-yun">容器与云</a></li>
                    <li><a href="/category/ruan-jian-kai-fa">软件开发</a></li>
                    <li><a href="/category/shu-mei-pai">树莓派</a></li>
                    <li class="active"><a href="/category/xi-tong-yun-wei">系统运维</a></li>
                    <li><a href="/category/xin-wen">新闻</a></li>
                    <li><a href="/category/ying-he-guan-cha">硬核观察</a></li>
                    <li><a href="/category/zhi-ye-sheng-ya">职业生涯</a></li>
                    <li><a href="/category/zhong-jiang-ming-dan">中奖名单</a></li>
                    <li><a href="/category/zhuo-mian-ying-yong">桌面应用</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/2017/06/li-jie-linux-de-ping-jun-fu-zai-he-xing-neng-jian-kong.html" rel="bookmark"
           title="Permalink to 理解 Linux 的平均负载和性能监控">理解 Linux 的平均负载和性能监控</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-06-23T19:33:12+02:00">
                Published: Fri 23 June 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/linux-fans-from-china.html">linux fans from china</a>
        </address>
<p>In <a href="/category/xi-tong-yun-wei">系统运维</a>.</p>

</footer><!-- /.post-info -->      <p>Author: Aaron Kili</p>
<p><img alt="" src="/data/attachment/album/201706/23/193305uu7fqooxofod83zn.jpg"></p>
<p>在本文中，我们将解释 Linux 系统中最关键的管理任务之一——关于系统 / CPU 的<ruby> 负载 <rp>  （ </rp> <rt>  load </rt> <rp>  ） </rp></ruby>和<ruby> 平均负载 <rp>  （ </rp> <rt>  Load average </rt> <rp>  ） </rp></ruby>的性能监控。</p>
<p>首先来看所有的类 UNIX 系统中两个重要的表述:</p>
<ul>
<li>系统负载 / CPU 负载 – 衡量 Linux 系统的 CPU 过载或利用率低的指标，即处于运算状态或等待状态的 CPU 核心数。</li>
<li>平均负载 – 通过固定的时间周期如 1、5、15 分钟计算出的平均的系统负载。</li>
</ul>
<p>Linux 中，平均负载一般指在内核运行队列中被标记为运行或不可打断状态的进程的平均数。</p>
<p>注意：</p>
<ul>
<li>几乎没有 Linux 或类 Unix 系统不为用户展示平均负载的值。</li>
<li>完全空闲的 Linux 系统平均负载为 0，不包括空闲进程。</li>
<li>绝大多数类 Unix 系统只统计运行和等待状态的进程。但是在 Linux 中，平均负载也包括处于不可打断的睡眠状态的进程——它们是在等待其它系统资源如磁盘 I/O 等的进程。</li>
</ul>
<h3>如何监测 Linux 系统平均负载</h3>
<p>有诸多方式监测系统平均负载，如 <code>uptime</code>，它会展示系统运行时间、用户数量及平均负载：</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">uptime</span>
<span class="mi">07</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">53</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">days</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="nb">min</span><span class="p">,</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w">  </span><span class="nb">load</span><span class="w"> </span><span class="n">average</span><span class="p">:</span><span class="w"> </span><span class="mf">1.98</span><span class="p">,</span><span class="w"> </span><span class="mf">2.15</span><span class="p">,</span><span class="w"> </span><span class="mf">2.21</span>
</code></pre></div>

<p>平均负载的数字从左到右的含义依次为:</p>
<ul>
<li>最近 1 分钟的平均负载为 1.98</li>
<li>最近 5 分钟的平均负载为 2.15</li>
<li>最近 15 分钟的平均负载为 2.21</li>
</ul>
<p>高平均负载意味着系统是过载的：许多进程在等待 CPU 时间。</p>
<p>下一节将介绍平均负载和 CPU 核数的关系。此外，常用的工具 <a href="https://www.tecmint.com/12-top-command-examples-in-linux/">top</a> 和 <a href="/article-6882-1.html">glances</a> 可以实时显示 Linux 系统的运行状态：</p>
<h4>Top命令</h4>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>top
</code></pre></div>

<p>显示运行中的Linux进程：</p>
<div class="highlight"><pre><span></span><code><span class="n">top</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mi">42</span><span class="w"> </span><span class="n">up</span><span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w">  </span><span class="nb">load</span><span class="w"> </span><span class="n">average</span><span class="p">:</span><span class="w"> </span><span class="mf">1.22</span><span class="p">,</span><span class="w"> </span><span class="mf">1.12</span><span class="p">,</span><span class="w"> </span><span class="mf">1.26</span>
<span class="n">Tasks</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="w"> </span><span class="n">total</span><span class="p">,</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="n">running</span><span class="p">,</span><span class="w"> </span><span class="mi">242</span><span class="w"> </span><span class="n">sleeping</span><span class="p">,</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="n">stopped</span><span class="p">,</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="n">zombie</span>
<span class="o">%</span><span class="n">Cpu</span><span class="p">(</span><span class="n">s</span><span class="p">):</span><span class="w"> </span><span class="mf">17.4</span><span class="w"> </span><span class="n">us</span><span class="p">,</span><span class="w">  </span><span class="mf">2.9</span><span class="w"> </span><span class="n">sy</span><span class="p">,</span><span class="w">  </span><span class="mf">0.3</span><span class="w"> </span><span class="n">ni</span><span class="p">,</span><span class="w"> </span><span class="mf">74.8</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w">  </span><span class="mf">4.6</span><span class="w"> </span><span class="n">wa</span><span class="p">,</span><span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="n">hi</span><span class="p">,</span><span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="n">si</span><span class="p">,</span><span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="n">st</span>
<span class="n">KiB</span><span class="w"> </span><span class="n">Mem</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class="mi">8069036</span><span class="w"> </span><span class="n">total</span><span class="p">,</span><span class="w">   </span><span class="mi">388060</span><span class="w"> </span><span class="n">free</span><span class="p">,</span><span class="w">  </span><span class="mi">4381184</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w">  </span><span class="mi">3299792</span><span class="w"> </span><span class="n">buff</span><span class="o">/</span><span class="n">cache</span>
<span class="n">KiB</span><span class="w"> </span><span class="n">Swap</span><span class="p">:</span><span class="w">  </span><span class="mi">3906556</span><span class="w"> </span><span class="n">total</span><span class="p">,</span><span class="w">  </span><span class="mi">3901876</span><span class="w"> </span><span class="n">free</span><span class="p">,</span><span class="w">     </span><span class="mi">4680</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w">  </span><span class="mi">2807464</span><span class="w"> </span><span class="n">avail</span><span class="w"> </span><span class="n">Mem</span><span class="w"> </span>
<span class="n">PID</span><span class="w"> </span><span class="n">USER</span><span class="w">      </span><span class="n">PR</span><span class="w">  </span><span class="n">NI</span><span class="w">    </span><span class="n">VIRT</span><span class="w">    </span><span class="n">RES</span><span class="w">    </span><span class="n">SHR</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="o">%</span><span class="n">CPU</span><span class="w"> </span><span class="o">%</span><span class="n">MEM</span><span class="w">     </span><span class="n">TIME</span><span class="o">+</span><span class="w"> </span><span class="n">COMMAND</span><span class="w">                                                                                                                                        </span>
<span class="mi">6265</span><span class="w"> </span><span class="n">tecmint</span><span class="w">   </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="mi">1244348</span><span class="w"> </span><span class="mi">170680</span><span class="w">  </span><span class="mi">83616</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="mf">13.3</span><span class="w">  </span><span class="mf">2.1</span><span class="w">   </span><span class="mi">6</span><span class="p">:</span><span class="mf">47.72</span><span class="w"> </span><span class="n">Headset</span><span class="w">                                                                                                                                        </span>
<span class="mi">2301</span><span class="w"> </span><span class="n">tecmint</span><span class="w">    </span><span class="mi">9</span><span class="w"> </span><span class="o">-</span><span class="mi">11</span><span class="w">  </span><span class="mi">640332</span><span class="w">  </span><span class="mi">13344</span><span class="w">   </span><span class="mi">9932</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">6.7</span><span class="w">  </span><span class="mf">0.2</span><span class="w">   </span><span class="mi">2</span><span class="p">:</span><span class="mf">18.96</span><span class="w"> </span><span class="n">pulseaudio</span><span class="w">                                                                                                                                     </span>
<span class="mi">2459</span><span class="w"> </span><span class="n">tecmint</span><span class="w">   </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="mi">1707692</span><span class="w"> </span><span class="mi">315628</span><span class="w">  </span><span class="mi">62992</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">6.7</span><span class="w">  </span><span class="mf">3.9</span><span class="w">   </span><span class="mi">6</span><span class="p">:</span><span class="mf">55.45</span><span class="w"> </span><span class="n">cinnamon</span><span class="w">                                                                                                                                       </span>
<span class="mi">2957</span><span class="w"> </span><span class="n">tecmint</span><span class="w">   </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="mi">2644644</span><span class="w"> </span><span class="mf">1.035</span><span class="n">g</span><span class="w"> </span><span class="mi">137968</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">6.7</span><span class="w"> </span><span class="mf">13.5</span><span class="w">  </span><span class="mi">50</span><span class="p">:</span><span class="mf">11.13</span><span class="w"> </span><span class="n">firefox</span><span class="w">                                                                                                                                        </span>
<span class="mi">3208</span><span class="w"> </span><span class="n">tecmint</span><span class="w">   </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w">  </span><span class="mi">507060</span><span class="w">  </span><span class="mi">52136</span><span class="w">  </span><span class="mi">33152</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">6.7</span><span class="w">  </span><span class="mf">0.6</span><span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="mf">04.34</span><span class="w"> </span><span class="n">gnome</span><span class="o">-</span><span class="n">terminal</span><span class="o">-</span><span class="w">                                                                                                                                </span>
<span class="mi">3272</span><span class="w"> </span><span class="n">tecmint</span><span class="w">   </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="mi">1521380</span><span class="w"> </span><span class="mi">391324</span><span class="w"> </span><span class="mi">178348</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">6.7</span><span class="w">  </span><span class="mf">4.8</span><span class="w">   </span><span class="mi">6</span><span class="p">:</span><span class="mf">21.01</span><span class="w"> </span><span class="n">chrome</span><span class="w">                                                                                                                                         </span>
<span class="mi">6220</span><span class="w"> </span><span class="n">tecmint</span><span class="w">   </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="mi">1595392</span><span class="w"> </span><span class="mi">106964</span><span class="w">  </span><span class="mi">76836</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">6.7</span><span class="w">  </span><span class="mf">1.3</span><span class="w">   </span><span class="mi">3</span><span class="p">:</span><span class="mf">31.94</span><span class="w"> </span><span class="n">Headset</span><span class="w">                                                                                                                                        </span>
<span class="mi">1</span><span class="w"> </span><span class="n">root</span><span class="w">      </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w">  </span><span class="mi">120056</span><span class="w">   </span><span class="mi">6204</span><span class="w">   </span><span class="mi">3964</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">0.0</span><span class="w">  </span><span class="mf">0.1</span><span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="mf">01.83</span><span class="w"> </span><span class="n">systemd</span><span class="w">                                                                                                                                        </span>
<span class="mi">2</span><span class="w"> </span><span class="n">root</span><span class="w">      </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">0.0</span><span class="w">  </span><span class="mf">0.0</span><span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="mf">00.00</span><span class="w"> </span><span class="n">kthreadd</span><span class="w">                                                                                                                                       </span>
<span class="mi">3</span><span class="w"> </span><span class="n">root</span><span class="w">      </span><span class="mi">20</span><span class="w">   </span><span class="mi">0</span><span class="w">       </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">0.0</span><span class="w">  </span><span class="mf">0.0</span><span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="mf">00.10</span><span class="w"> </span><span class="n">ksoftirqd</span><span class="o">/</span><span class="mi">0</span><span class="w">                                                                                                                                    </span>
<span class="mi">5</span><span class="w"> </span><span class="n">root</span><span class="w">       </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="mi">20</span><span class="w">       </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">   </span><span class="mf">0.0</span><span class="w">  </span><span class="mf">0.0</span><span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="mf">00.00</span><span class="w"> </span><span class="n">kworker</span><span class="o">/</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="n">H</span><span class="w">   </span>
<span class="o">....</span>
</code></pre></div>

<h4>Glances 工具</h4>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>glances
</code></pre></div>

<p>Glances – Linux系统监测工具：</p>
<div class="highlight"><pre><span></span><code><span class="n">TecMint</span><span class="w"> </span><span class="p">(</span><span class="n">LinuxMint</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">64</span><span class="n">bit</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="mf">4.4</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">generic</span><span class="p">)</span><span class="w">                                                                                                                                               </span><span class="n">Uptime</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">06</span>
<span class="n">CPU</span><span class="w">      </span><span class="mf">16.4</span><span class="o">%</span><span class="w">  </span><span class="n">nice</span><span class="p">:</span><span class="w">     </span><span class="mf">0.1</span><span class="o">%</span><span class="w">                                        </span><span class="n">LOAD</span><span class="w">    </span><span class="mi">4</span><span class="o">-</span><span class="n">core</span><span class="w">                                        </span><span class="n">MEM</span><span class="w">     </span><span class="mf">60.5</span><span class="o">%</span><span class="w">  </span><span class="n">active</span><span class="p">:</span><span class="w">    </span><span class="mf">4.90</span><span class="n">G</span><span class="w">                                        </span><span class="n">SWAP</span><span class="w">      </span><span class="mf">0.1</span><span class="o">%</span>
<span class="n">user</span><span class="p">:</span><span class="w">    </span><span class="mf">10.2</span><span class="o">%</span><span class="w">  </span><span class="n">irq</span><span class="p">:</span><span class="w">      </span><span class="mf">0.0</span><span class="o">%</span><span class="w">                                        </span><span class="mi">1</span><span class="w"> </span><span class="nb">min</span><span class="p">:</span><span class="w">    </span><span class="mf">1.20</span><span class="w">                                        </span><span class="n">total</span><span class="p">:</span><span class="w">  </span><span class="mf">7.70</span><span class="n">G</span><span class="w">  </span><span class="n">inactive</span><span class="p">:</span><span class="w">  </span><span class="mf">2.07</span><span class="n">G</span><span class="w">                                        </span><span class="n">total</span><span class="p">:</span><span class="w">   </span><span class="mf">3.73</span><span class="n">G</span>
<span class="n">system</span><span class="p">:</span><span class="w">   </span><span class="mf">3.4</span><span class="o">%</span><span class="w">  </span><span class="n">iowait</span><span class="p">:</span><span class="w">   </span><span class="mf">2.7</span><span class="o">%</span><span class="w">                                        </span><span class="mi">5</span><span class="w"> </span><span class="nb">min</span><span class="p">:</span><span class="w">    </span><span class="mf">1.16</span><span class="w">                                        </span><span class="n">used</span><span class="p">:</span><span class="w">   </span><span class="mf">4.66</span><span class="n">G</span><span class="w">  </span><span class="n">buffers</span><span class="p">:</span><span class="w">    </span><span class="mi">242</span><span class="n">M</span><span class="w">                                        </span><span class="n">used</span><span class="p">:</span><span class="w">    </span><span class="mf">4.57</span><span class="n">M</span>
<span class="n">idle</span><span class="p">:</span><span class="w">    </span><span class="mf">83.6</span><span class="o">%</span><span class="w">  </span><span class="n">steal</span><span class="p">:</span><span class="w">    </span><span class="mf">0.0</span><span class="o">%</span><span class="w">                                        </span><span class="mi">15</span><span class="w"> </span><span class="nb">min</span><span class="p">:</span><span class="w">   </span><span class="mf">1.24</span><span class="w">                                        </span><span class="n">free</span><span class="p">:</span><span class="w">   </span><span class="mf">3.04</span><span class="n">G</span><span class="w">  </span><span class="n">cached</span><span class="p">:</span><span class="w">    </span><span class="mf">2.58</span><span class="n">G</span><span class="w">                                        </span><span class="n">free</span><span class="p">:</span><span class="w">    </span><span class="mf">3.72</span><span class="n">G</span>
<span class="n">NETWORK</span><span class="w">     </span><span class="n">Rx</span><span class="o">/</span><span class="n">s</span><span class="w">   </span><span class="n">Tx</span><span class="o">/</span><span class="n">s</span><span class="w">   </span><span class="n">TASKS</span><span class="w"> </span><span class="mi">253</span><span class="w"> </span><span class="p">(</span><span class="mi">883</span><span class="w"> </span><span class="n">thr</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">run</span><span class="p">,</span><span class="w"> </span><span class="mi">252</span><span class="w"> </span><span class="n">slp</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">oth</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">cpu_percent</span><span class="p">,</span><span class="w"> </span><span class="n">flat</span><span class="w"> </span><span class="n">view</span>
<span class="n">enp1s0</span><span class="w">     </span><span class="mi">525</span><span class="n">Kb</span><span class="w">   </span><span class="mi">31</span><span class="n">Kb</span>
<span class="n">lo</span><span class="w">           </span><span class="mi">2</span><span class="n">Kb</span><span class="w">    </span><span class="mi">2</span><span class="n">Kb</span><span class="w">     </span><span class="n">CPU</span><span class="o">%</span><span class="w">  </span><span class="n">MEM</span><span class="o">%</span><span class="w">  </span><span class="n">VIRT</span><span class="w">   </span><span class="n">RES</span><span class="w">   </span><span class="n">PID</span><span class="w"> </span><span class="n">USER</span><span class="w">        </span><span class="n">NI</span><span class="w"> </span><span class="n">S</span><span class="w">    </span><span class="n">TIME</span><span class="o">+</span><span class="w"> </span><span class="n">IOR</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">IOW</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span>
<span class="n">wlp2s0</span><span class="w">        </span><span class="mi">0</span><span class="n">b</span><span class="w">     </span><span class="mi">0</span><span class="n">b</span><span class="w">     </span><span class="mf">14.6</span><span class="w">  </span><span class="mf">13.3</span><span class="w"> </span><span class="mf">2.53</span><span class="n">G</span><span class="w"> </span><span class="mf">1.03</span><span class="n">G</span><span class="w">  </span><span class="mi">2957</span><span class="w"> </span><span class="n">tecmint</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="mi">51</span><span class="p">:</span><span class="mf">49.10</span><span class="w">     </span><span class="mi">0</span><span class="w">   </span><span class="mi">40</span><span class="n">K</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">firefox</span><span class="w"> </span>
<span class="mf">7.4</span><span class="w">   </span><span class="mf">2.2</span><span class="w"> </span><span class="mf">1.16</span><span class="n">G</span><span class="w">  </span><span class="mi">176</span><span class="n">M</span><span class="w">  </span><span class="mi">6265</span><span class="w"> </span><span class="n">tecmint</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="mi">7</span><span class="p">:</span><span class="mf">08.18</span><span class="w">     </span><span class="mi">0</span><span class="w">     </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">Headset</span><span class="o">/</span><span class="n">Headset</span><span class="w"> </span><span class="o">--</span><span class="n">type</span><span class="o">=</span><span class="n">renderer</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">sandbox</span><span class="w"> </span><span class="o">--</span><span class="n">primordial</span><span class="o">-</span><span class="n">pipe</span><span class="o">-</span><span class="n">token</span><span class="o">=</span><span class="mi">879</span><span class="n">B36514C6BEDB183D3E4142774D1DF</span><span class="w"> </span><span class="o">--</span><span class="n">lan</span>
<span class="n">DISK</span><span class="w"> </span><span class="n">I</span><span class="o">/</span><span class="n">O</span><span class="w">     </span><span class="n">R</span><span class="o">/</span><span class="n">s</span><span class="w">    </span><span class="n">W</span><span class="o">/</span><span class="n">s</span><span class="w">      </span><span class="mf">4.9</span><span class="w">   </span><span class="mf">3.9</span><span class="w"> </span><span class="mf">1.63</span><span class="n">G</span><span class="w">  </span><span class="mi">310</span><span class="n">M</span><span class="w">  </span><span class="mi">2459</span><span class="w"> </span><span class="n">tecmint</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">R</span><span class="w">  </span><span class="mi">7</span><span class="p">:</span><span class="mf">12.18</span><span class="w">     </span><span class="mi">0</span><span class="w">     </span><span class="mi">0</span><span class="w"> </span><span class="n">cinnamon</span><span class="w"> </span><span class="o">--</span><span class="n">replace</span>
<span class="n">ram0</span><span class="w">           </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mf">4.2</span><span class="w">   </span><span class="mf">0.2</span><span class="w">  </span><span class="mi">625</span><span class="n">M</span><span class="w"> </span><span class="mf">13.0</span><span class="n">M</span><span class="w">  </span><span class="mi">2301</span><span class="w"> </span><span class="n">tecmint</span><span class="w">    </span><span class="o">-</span><span class="mi">11</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="mf">29.72</span><span class="w">     </span><span class="mi">0</span><span class="w">     </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">pulseaudio</span><span class="w"> </span><span class="o">--</span><span class="n">start</span><span class="w"> </span><span class="o">--</span><span class="nb">log</span><span class="o">-</span><span class="n">target</span><span class="o">=</span><span class="n">syslog</span>
<span class="n">ram1</span><span class="w">           </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mf">4.2</span><span class="w">   </span><span class="mf">1.3</span><span class="w"> </span><span class="mf">1.52</span><span class="n">G</span><span class="w">  </span><span class="mi">105</span><span class="n">M</span><span class="w">  </span><span class="mi">6220</span><span class="w"> </span><span class="n">tecmint</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="mi">3</span><span class="p">:</span><span class="mf">42.64</span><span class="w">     </span><span class="mi">0</span><span class="w">     </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">Headset</span><span class="o">/</span><span class="n">Headset</span><span class="w"> </span>
<span class="n">ram10</span><span class="w">          </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mf">2.9</span><span class="w">   </span><span class="mf">0.8</span><span class="w">  </span><span class="mi">409</span><span class="n">M</span><span class="w"> </span><span class="mf">66.7</span><span class="n">M</span><span class="w">  </span><span class="mi">6240</span><span class="w"> </span><span class="n">tecmint</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="mi">2</span><span class="p">:</span><span class="mf">40.44</span><span class="w">     </span><span class="mi">0</span><span class="w">     </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">Headset</span><span class="o">/</span><span class="n">Headset</span><span class="w"> </span><span class="o">--</span><span class="n">type</span><span class="o">=</span><span class="n">gpu</span><span class="o">-</span><span class="n">process</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">sandbox</span><span class="w"> </span><span class="o">--</span><span class="n">supports</span><span class="o">-</span><span class="n">dual</span><span class="o">-</span><span class="n">gpus</span><span class="o">=</span><span class="bp">false</span><span class="w"> </span><span class="o">--</span><span class="n">gpu</span><span class="o">-</span><span class="n">driver</span><span class="o">-</span><span class="n">bug</span><span class="o">-</span><span class="n">workarounds</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span>
<span class="n">ram11</span><span class="w">          </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mf">2.9</span><span class="w">   </span><span class="mf">1.8</span><span class="w">  </span><span class="mi">531</span><span class="n">M</span><span class="w">  </span><span class="mi">142</span><span class="n">M</span><span class="w">  </span><span class="mi">1690</span><span class="w"> </span><span class="n">root</span><span class="w">         </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="mi">6</span><span class="p">:</span><span class="mf">03.79</span><span class="w">     </span><span class="mi">0</span><span class="w">     </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">xorg</span><span class="o">/</span><span class="n">Xorg</span><span class="w"> </span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="n">audit</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="n">auth</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mdm</span><span class="o">/</span><span class="p">:</span><span class="mf">0.</span><span class="n">Xauth</span><span class="w"> </span><span class="o">-</span><span class="n">nolisten</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="n">vt8</span>
<span class="n">ram12</span><span class="w">          </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mf">2.6</span><span class="w">   </span><span class="mf">0.3</span><span class="w"> </span><span class="mf">79.3</span><span class="n">M</span><span class="w"> </span><span class="mf">23.8</span><span class="n">M</span><span class="w">  </span><span class="mi">9651</span><span class="w"> </span><span class="n">tecmint</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">R</span><span class="w">  </span><span class="mi">0</span><span class="p">:</span><span class="mf">00.71</span><span class="w">     </span><span class="mi">0</span><span class="w">     </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">python3</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">glances</span>
<span class="n">ram13</span><span class="w">          </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">      </span><span class="mf">1.6</span><span class="w">   </span><span class="mf">4.8</span><span class="w"> </span><span class="mf">1.45</span><span class="n">G</span><span class="w">  </span><span class="mi">382</span><span class="n">M</span><span class="w">  </span><span class="mi">3272</span><span class="w"> </span><span class="n">tecmint</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="n">S</span><span class="w">  </span><span class="mi">6</span><span class="p">:</span><span class="mf">25.30</span><span class="w">     </span><span class="mi">0</span><span class="w">    </span><span class="mi">4</span><span class="n">K</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">google</span><span class="o">/</span><span class="n">chrome</span><span class="o">/</span><span class="n">chrome</span><span class="w"> </span>
<span class="o">...</span>
</code></pre></div>

<p>这些工具中的平均负载是从 <code>/proc/loadavg</code> 文件中读取的，也可以直接使用 <a href="https://www.tecmint.com/13-basic-cat-command-examples-in-linux/">cat 命令</a>查看：</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">loadavg</span>
<span class="mf">2.48</span><span class="w"> </span><span class="mf">1.69</span><span class="w"> </span><span class="mf">1.42</span><span class="w"> </span><span class="mi">5</span><span class="o">/</span><span class="mi">889</span><span class="w"> </span><span class="mi">10570</span>
</code></pre></div>

<p>想要图形样式监测平均负载，请戳：<a href="/article-8553-1.html">ttyload – 终端中颜色编码图形显示 Linux 平均负载</a>。</p>
<p>在桌面计算机中，可以使用图形用户接口工具查看系统平均负载。</p>
<h3>理解系统平均负载和 CPU 核心数的关系</h3>
<p>考虑了 CPU 核心数的影响，才能解释系统负载。</p>
<h4>多处理器 Vs 多核处理器</h4>
<ul>
<li>多处理器 – 一个计算机系统中集成两个或多个物理 CPU</li>
<li>多核处理器 – 单个物理 CPU 有两个或多个单独的核并行工作（也叫处理单元）。双核意味着有两个处理单元，4 核有 4 个处理单元，以此类推。</li>
</ul>
<p>此外，Intel 引入了超线程技术用来提高并行计算能力。</p>
<p>通过超线程技术，在操作系统中，单个物理 CPU 表现的和两个逻辑 CPU 一样。（实际在硬件上只有一个 CPU）。</p>
<p>注意，单个 CPU 核同一时间只能执行一个任务，于是产生了多 CPU/处理器、多核 CPU，以及多线程技术。</p>
<p>多 CPU 时，多个程序可以同时执行。如今的 Intel CPU 使用了多核心和超线程技术。</p>
<p>可以使用 <a href="https://www.tecmint.com/check-linux-cpu-information/">nproc 或 lscpu 命令</a>查看系统中的处理器单元数量。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>nproc
<span class="m">4</span>
<span class="c1"># 或者</span>
lscpu
</code></pre></div>

<p>也可以使用 <a href="https://www.tecmint.com/12-practical-examples-of-linux-grep-command/">grep 命令</a>：</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;model name&#39;</span><span class="w"> </span>/proc/cpuinfo<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
<span class="m">4</span>
</code></pre></div>

<p>为了进一步理解系统负载，需要做一些假设。假设系统负载如下：</p>
<div class="highlight"><pre><span></span><code><span class="mi">23</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="n">up</span><span class="w">  </span><span class="mi">10</span><span class="p">:</span><span class="mi">49</span><span class="p">,</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w">  </span><span class="nb">load</span><span class="w"> </span><span class="n">average</span><span class="p">:</span><span class="w"> </span><span class="mf">1.00</span><span class="p">,</span><span class="w"> </span><span class="mf">0.40</span><span class="p">,</span><span class="w"> </span><span class="mf">3.35</span>
</code></pre></div>

<p><strong>在单核系统中意味着：</strong></p>
<ul>
<li>CPU 被充分利用（100%）；最近的 1 分钟有 1 个进程在运行。</li>
<li>CPU 有 60% 处于空闲状态；在最近的 5 分钟没有进程等待 CPU 时间。</li>
<li>CPU 平均过载了 235%；最近的 15 分钟平均有 2.35 个进程在等待 CPU 时间。</li>
</ul>
<p><strong>在双核系统中意味着：</strong></p>
<ul>
<li>有一个 CPU 处于完全空闲状态，另一个 CPU 被使用；最近的 1 分钟没有进程等待 CPU 时间。</li>
<li>CPU 平均 160% 处于空闲状态；最近的 5 分钟没有进程等待 CPU 时间。</li>
<li>CPU 平均过载了 135%；最近的 15 分钟有 1.35 个进程等待 CPU 时间。</li>
</ul>
<p>也许你还会喜欢：</p>
<ol>
<li><a href="https://www.tecmint.com/command-line-tools-to-monitor-linux-performance/">20 个监控系统性能的命令行工具（一）</a></li>
<li><a href="https://www.tecmint.com/linux-performance-monitoring-tools/">13 个 Linux 性能监控工具（二）</a></li>
<li><a href="https://www.tecmint.com/perf-performance-monitoring-and-analysis-tool-for-linux/">Perf：一个 Linux 上的性能监控分析工具</a></li>
<li><a href="/article-6886-1.html">使用 Nmon 监控 Linux 的系统性能</a></li>
</ol>
<p>总而言之，如果你是系统管理员，你应该关注高的平均负载。平均负载高于 CPU 核心数意味着需要增加 CPU，反之则意味着 CPU 未被充分利用。</p>
<p>via: <a href="https://www.tecmint.com/understand-linux-load-averages-and-monitor-performance/">https://www.tecmint.com/understand-linux-load-averages-and-monitor-performance/</a></p>
<p>作者：<a href="https://www.tecmint.com/author/aaronkili/">Aaron Kili</a> 译者：<a href="https://github.com/kylecao">kylecao</a> 校对：<a href="https://github.com/wxy">wxy</a></p>
<p>本文由 <a href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a href="https://linux.cn/">Linux中国</a> 荣誉推出</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>